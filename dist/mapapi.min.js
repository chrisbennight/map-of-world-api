!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./util/appUtils"),e=a("./core/const"),f=a("./core/objectFactory"),g=a("./core/facade"),h=d.getGlobalObject();h.mapapi=g,h.mapapi.constant=e,h.mapapi.factory=f,h.mapapi.VERSION="0.9.12"},{"./core/const":4,"./core/facade":6,"./core/objectFactory":8,"./util/appUtils":26}],2:[function(a,b,c){"use strict";function d(){this._clickListeners={},this._hoverListeners={},this._mapMoveListeners={},this._zoomEndListeners={},this._outListeners={}}var e=a("lodash");d.prototype.registerClickListener=function(a,b){this._clickListeners[a]=b},d.prototype.unregisterClickListener=function(a){void 0!==this._clickListeners[a]&&(this._clickListeners[a]=void 0)},d.prototype.handleClickEvent=function(a){e.forOwn(this._clickListeners,function(b,c){void 0!==b&&b(a)})},d.prototype.registerHoverListener=function(a,b){this._hoverListeners[a]=b},d.prototype.unregisterHoverListener=function(a){void 0!==this._hoverListeners[a]&&(this._hoverListeners[a]=void 0)},d.prototype.handleHoverEvent=function(a){e.forOwn(this._hoverListeners,function(b,c){void 0!==b&&b(a)})},d.prototype.registerMapMoveListener=function(a,b){this._mapMoveListeners[a]=b},d.prototype.unregisterMapMoveListener=function(a){void 0!==this._mapMoveListeners[a]&&(this._mapMoveListeners[a]=void 0)},d.prototype.handleMapMoveEvent=function(a){e.forOwn(this._mapMoveListeners,function(b,c){void 0!==b&&b(a)})},d.prototype.registerZoomEndListener=function(a,b){this._zoomEndListeners[a]=b},d.prototype.unregisterZoomEndListener=function(a){void 0!==this._zoomEndListeners[a]&&(this._zoomEndListeners[a]=void 0)},d.prototype.handleZoomEndEvent=function(a){e.forOwn(this._zoomEndListeners,function(b,c){void 0!==b&&b(a)})},d.prototype.registerOutListener=function(a,b){this._outListeners[a]=b},d.prototype.unregisterOutListener=function(a){void 0!==this._outListeners[a]&&(this._outListeners[a]=void 0)},d.prototype.handleOutEvent=function(a){e.forOwn(this._outListeners,function(b,c){void 0!==b&&b(a)})},b.exports=d},{lodash:33}],3:[function(a,b,c){"use strict";var d={},e={registerAdapter:function(a,b){d[a]=b},getAdapter:function(a){return d[a]}};b.exports=e},{}],4:[function(a,b,c){"use strict";var d={mapType:{OPENLAYERS:"OpenLayers",LEAFLET:"Leaflet",OPENLAYERS3:"OpenLayers3"}};b.exports=d},{}],5:[function(a,b,c){"use strict";a("../api");var d=a("./adapterManager"),e=a("./const"),f=a("../openLayers/olAdapter"),g=a("../openLayers/ol3/ol3Adapter"),h=a("../leaflet/leafletAdapter");d.registerAdapter(e.mapType.OPENLAYERS,f),d.registerAdapter(e.mapType.OPENLAYERS3,g),d.registerAdapter(e.mapType.LEAFLET,h)},{"../api":1,"../leaflet/leafletAdapter":18,"../openLayers/ol3/ol3Adapter":21,"../openLayers/olAdapter":24,"./adapterManager":3,"./const":4}],6:[function(a,b,c){"use strict";var d=a("lodash"),e=(a("./const"),a("./mapManager")),f=a("./objectValidator"),g=a("./adapterManager"),h={createMap:function(a,b,c,e){var h=arguments.length>=2&&arguments.length<=4&&d.isString(a)&&!d.isEmpty(a)&&d.isString(b)&&!d.isEmpty(b)&&(d.isUndefined(c)||d.isFunction(c))&&(d.isUndefined(e)||f.isArcGIS93RestLayer(e)||f.isArcGISCacheLayer(e)||f.isWmtsLayer(e)||f.isWmsLayer(e)||f.isKMLLayer(e)||f.isGeoJsonLayer(e));if(!h)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(b).createMapObject(a,c,e)},destroyMap:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");e.setActiveMap(a),g.getAdapter(e.getActiveMapType()).destroyMap(),e.unregisterMapInstance(a)},resetMap:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");var c=e.getMapType(a);this.destroyMap(a),this.createMap(a,c)},setActiveMap:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");e.setActiveMap(a)},updateSize:function(a){var b=0===arguments.length||1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");a&&e.setActiveMap(a),g.getAdapter(e.getActiveMapType()).updateSize()},clearAllFeatures:function(){g.getAdapter(e.getActiveMapType()).clearAllFeatures()},zoomIn:function(){g.getAdapter(e.getActiveMapType()).zoomIn()},zoomOut:function(){g.getAdapter(e.getActiveMapType()).zoomOut()},getZoom:function(){return g.getAdapter(e.getActiveMapType()).getZoom()},setZoom:function(a){var b=1==arguments.length&&d.isNumber(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).setZoom(a)},zoomToMaxExtent:function(){g.getAdapter(e.getActiveMapType()).zoomToMaxExtent()},zoomToData:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).zoomToData(a)},getCenter:function(){return g.getAdapter(e.getActiveMapType()).getCenter()},setCenter:function(a){var b=1==arguments.length&&f.isCoordinate(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).setCenter(a)},addPoint:function(a,b,c,h){var i=arguments.length>=3&&arguments.length<=4&&d.isString(a)&&!d.isEmpty(a)&&d.isString(b)&&!d.isEmpty(b)&&f.isCoordinate(c)&&(d.isUndefined(h)||f.isImage(h));if(!i)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).addPoint(a,b,c,h)},removePoint:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).removePoint(a)},addPolygon:function(a,b,c){var h=3==arguments.length&&d.isString(a)&&!d.isEmpty(a)&&d.isString(b)&&!d.isEmpty(b)&&d.isArray(c),i=!0;if(d.forEach(c,function(a){f.isCoordinate(a)||(i=!1)}),!h||!i)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).addPolygon(a,b,c)},removePolygon:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).removePolygon(a)},addLine:function(a,b,c){var h=3==arguments.length&&d.isString(a)&&!d.isEmpty(a)&&d.isString(b)&&!d.isEmpty(b)&&d.isArray(c),i=!0;if(d.forEach(c,function(a){f.isCoordinate(a)||(i=!1)}),!h||!i)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).addLine(a,b,c)},removeLine:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).removeLine(a)},addMultipoint:function(a,b,c){var h=3==arguments.length&&d.isString(a)&&!d.isEmpty(a)&&d.isString(b)&&!d.isEmpty(b)&&d.isArray(c),i=!0;if(d.forEach(c,function(a){f.isCoordinate(a)||(i=!1)}),!h||!i)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).addMultipoint(a,b,c)},removeMultipoint:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).removeMultipoint(a)},getFeatures:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");return g.getAdapter(e.getActiveMapType()).getFeatures(a)},registerClickListener:function(a,b){var c=2==arguments.length&&d.isString(a)&&!d.isEmpty(a)&&d.isFunction(b);if(!c)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).registerClickListener(a,b)},unregisterClickListener:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).unregisterClickListener(a)},registerHoverListener:function(a,b){var c=2==arguments.length&&d.isString(a)&&!d.isEmpty(a)&&d.isFunction(b);if(!c)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).registerHoverListener(a,b)},unregisterHoverListener:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).unregisterHoverListener(a)},registerMapMoveListener:function(a,b){var c=2==arguments.length&&d.isString(a)&&!d.isEmpty(a)&&d.isFunction(b);if(!c)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).registerMapMoveListener(a,b)},unregisterMapMoveListener:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).unregisterMapMoveListener(a)},registerZoomEndListener:function(a,b){var c=2==arguments.length&&d.isString(a)&&!d.isEmpty(a)&&d.isFunction(b);if(!c)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).registerZoomEndListener(a,b)},unregisterZoomEndListener:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).unregisterZoomEndListener(a)},registerOutListener:function(a,b){var c=2==arguments.length&&d.isString(a)&&!d.isEmpty(a)&&d.isFunction(b);if(!c)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).registerOutListener(a,b)},unregisterOutListener:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).unregisterOutListener(a)},setBaseLayer:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).setBaseLayer(a)},addWmsLayer:function(a){var b=1==arguments.length&&f.isWmsLayer(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).addWmsLayer(a)},addWmtsLayer:function(a){var b=1==arguments.length&&f.isWmtsLayer(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).addWmtsLayer(a)},removeLayer:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).removeLayer(a)},toggleLayer:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).toggleLayer(a)},getLayerOrder:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");return g.getAdapter(e.getActiveMapType()).getLayerOrder(a)},setLayerOrder:function(a,b){var c=2==arguments.length&&d.isString(a)&&!d.isEmpty(a)&&d.isNumber(b);if(!c)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).setLayerOrder(a,b)},getLayerOpacity:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");return g.getAdapter(e.getActiveMapType()).getLayerOpacity(a)},setLayerOpacity:function(a,b){var c=2==arguments.length&&d.isString(a)&&!d.isEmpty(a)&&d.isNumber(b);if(!c)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).setLayerOpacity(a,b)},getLayer:function(a){var b=1==arguments.length&&d.isString(a)&&!d.isEmpty(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");return g.getAdapter(e.getActiveMapType()).getLayer(a)},toggleZoomControl:function(){g.getAdapter(e.getActiveMapType()).toggleZoom()},toggleScaleControl:function(){g.getAdapter(e.getActiveMapType()).toggleScale()},toggleCoordinatesControl:function(){g.getAdapter(e.getActiveMapType()).toggleCoordinates()},toggleGraticuleControl:function(){g.getAdapter(e.getActiveMapType()).toggleGraticule()},getActiveMapObject:function(){return e.getActiveMapObject()},addKml:function(a){var b=1==arguments.length&&f.isKMLLayer(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).addKml(a)},addGeoJson:function(a){var b=1==arguments.length&&f.isGeoJsonLayer(a);if(!b)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).addGeoJson(a)},addVectorLayer:function(a,b){var c=arguments.length>=1&&arguments.length<=2&&d.isString(a)&&!d.isEmpty(a)&&(d.isUndefined(b)||d.isObject(b));if(!c)throw new Error("Invalid parameters: please reference API documentation for correct usage");g.getAdapter(e.getActiveMapType()).addVectorLayer(a,b)}};b.exports=h},{"./adapterManager":3,"./const":4,"./mapManager":7,"./objectValidator":9,lodash:33}],7:[function(a,b,c){"use strict";var d,e=(a("./const"),{}),f={registerMapInstance:function(a,b,c){if(void 0!==e[a])throw new Error('There is an existing map instance bound to "'+a+'" that must be destroyed prior to instantiating a new map with that ID.');e[a]={div:a,type:b,obj:c}},setActiveMap:function(a){if(void 0===e[a])throw new Error("There is no active map instance for divId="+a);d=e[a]},unregisterMapInstance:function(a){if(void 0!==e[a]){if(e[a]===d){d=void 0;for(var b in e)if(b!==a&&e.hasOwnProperty(b)&&void 0!==e[b]){d=e[b];break}}e[a]=void 0}},getActiveMapType:function(){if(void 0===d)throw new Error("There is no active map.");return d.type},getActiveMapObject:function(){if(void 0!==d&&void 0!==d.obj)return d.obj;throw new Error("There is no active map.")},getMapType:function(a){if(void 0!==e[a])return e[a].type;throw new Error("There is no active map with ID="+a)}};b.exports=f},{"./const":4}],8:[function(a,b,c){"use strict";var d=a("./object/Coordinate"),e=a("./object/Image"),f=a("./object/GeoJsonLayer"),g=a("./object/KMLLayer"),h=a("./object/WMSLayer"),i=a("./object/WMTSLayer"),j=a("./object/ArcGIS93RestLayer"),k=a("./object/ArcGISCacheLayer"),l={coordinate:function(a,b){return new d(a,b)},image:function(a,b,c){return new e(a,b,c)},geoJsonLayer:function(a,b){return new f(a,b)},kmlLayer:function(a,b){return new g(a,b)},wmsLayer:function(a,b,c){return new h(a,b,c)},wmtsLayer:function(a,b,c,d,e){return new i(a,b,c,d,e)},arcGIS93RestLayer:function(a){return new j(a)},arcGISCacheLayer:function(a){return new k(a)}};b.exports=l},{"./object/ArcGIS93RestLayer":10,"./object/ArcGISCacheLayer":11,"./object/Coordinate":12,"./object/GeoJsonLayer":13,"./object/Image":14,"./object/KMLLayer":15,"./object/WMSLayer":16,"./object/WMTSLayer":17}],9:[function(a,b,c){"use strict";var d=a("./object/Coordinate"),e=a("./object/Image"),f=a("./object/GeoJsonLayer"),g=a("./object/KMLLayer"),h=a("./object/WMSLayer"),i=a("./object/WMTSLayer"),j=a("./object/ArcGIS93RestLayer"),k=a("./object/ArcGISCacheLayer"),l={isCoordinate:function(a){return a instanceof d.prototype.constructor},isImage:function(a){return a instanceof e.prototype.constructor},isGeoJsonLayer:function(a){return a instanceof f.prototype.constructor},isKMLLayer:function(a){return a instanceof g.prototype.constructor},isWmsLayer:function(a){return a instanceof h.prototype.constructor},isWmtsLayer:function(a){return a instanceof i.prototype.constructor},isArcGIS93RestLayer:function(a){return a instanceof j.prototype.constructor},isArcGISCacheLayer:function(a){return a instanceof k.prototype.constructor}};b.exports=l},{"./object/ArcGIS93RestLayer":10,"./object/ArcGISCacheLayer":11,"./object/Coordinate":12,"./object/GeoJsonLayer":13,"./object/Image":14,"./object/KMLLayer":15,"./object/WMSLayer":16,"./object/WMTSLayer":17}],10:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))throw new TypeError("ArcGIS93RestLayer constructor cannot be called as a function.");if(!e.isString(a))throw new TypeError("Cannot construct ArcGIS93RestLayer due to incorrect parameter type(s).  Please reference API documentation.");if(e.isEmpty(a)||!f.isURL(a))throw new Error("Cannot construct ArcGIS93RestLayer due to bad parameter value(s).  Please reference API documentation.");this._url=a}var e=a("lodash"),f=a("../../../../node_modules/validator/validator.min");d.prototype.getUrl=function(){return this._url},d.prototype.getLayers=function(){return this._layers},d.prototype.setLayers=function(a){if(!e.isArray(a)||e.isEmpty(a))throw new Error("layers must be a non-empty Array");e.forEach(a,function(a){if(!e.isString(a)||e.isEmpty(a))throw new Error("each layer must be a non-empty string")}),this._layers=a},d.prototype.getNumZoomLevels=function(){return this.numZoomLevels},d.prototype.setNumZoomLevels=function(a){if(!e.isNumber(a))throw new Error("Cannot set numZoomLevels.  Parameter must be a number.");this.numZoomLevels=a},b.exports=d},{"../../../../node_modules/validator/validator.min":34,lodash:33}],11:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))throw new TypeError("ArcGISCacheLayer constructor cannot be called as a function.");if(!e.isString(a))throw new TypeError("Cannot construct ArcGISCacheLayer due to incorrect parameter type(s).  Please reference API documentation.");if(e.isEmpty(a)||!f.isURL(a))throw new Error("Cannot construct ArcGISCacheLayer due to bad parameter value(s).  Please reference API documentation.");this._url=a}var e=a("lodash"),f=a("../../../../node_modules/validator/validator.min");d.prototype.getUrl=function(){return this._url},d.prototype.getLayers=function(){return this._layers},d.prototype.setLayers=function(a){if(!e.isArray(a)||e.isEmpty(a))throw new Error("layers must be a non-empty Array");e.forEach(a,function(a){if(!e.isString(a)||e.isEmpty(a))throw new Error("each layer must be a non-empty string")}),this._layers=a},d.prototype.getNumZoomLevels=function(){return this.numZoomLevels},d.prototype.setNumZoomLevels=function(a){if(!e.isNumber(a))throw new Error("Cannot set numZoomLevels.  Parameter must be a number.");this.numZoomLevels=a},b.exports=d},{"../../../../node_modules/validator/validator.min":34,lodash:33}],12:[function(a,b,c){"use strict";function d(a,b){if(!(this instanceof d))throw new TypeError("Coordinate constructor cannot be called as a function.");if(!e.isNumber(a)||!e.isNumber(b))throw new TypeError("Cannot construct Coordinate due to incorrect parameter type(s).  Please reference API documentation.");if(-90>a||a>90||-180>b||b>180)throw new RangeError("Cannot construct Coordinate object due to bad input values.  Latitude ranges from -90 to 90 and Longitude ranges from -180 to 180!");this._lat=a,this._lng=b}var e=a("lodash");d.prototype.getLatitude=function(){return this._lat},d.prototype.getLongitude=function(){return this._lng},b.exports=d},{lodash:33}],13:[function(a,b,c){"use strict";function d(a,b){if(!(this instanceof d))throw new TypeError("GeoJsonlayer constructor cannot be called as a function.");if(!e.isString(a)||!e.isString(b))throw new TypeError("Cannot construct GeoJsonlayer due to incorrect parameter type(s).  Please reference API documentation.");if(e.isEmpty(a)||e.isEmpty(b))throw new Error("Cannot construct GeoJsonlayer due to empty required parameter.  Please reference API documentation.");this.id=a,this.path=b}var e=a("lodash");d.prototype.getId=function(){return this.id},d.prototype.getPath=function(){return this.path},b.exports=d},{lodash:33}],14:[function(a,b,c){"use strict";function d(a,b,c){if(!(this instanceof d))throw new TypeError("Image constructor cannot be called as a function.");if(!e.isString(a)||!e.isNumber(b)||!e.isNumber(c))throw new TypeError("Cannot construct Image due to incorrect parameter type(s).  Please reference API documentation.");if(e.isEmpty(a)||0>=b||0>=c)throw new RangeError("Cannot construct Image due to bad parameter value(s).  Please reference API documentation.");this._url=a,this._width=b,this._height=c}var e=a("lodash");d.prototype.getUrl=function(){return this._url},d.prototype.getWidth=function(){return this._width},d.prototype.getHeight=function(){return this._height},b.exports=d},{lodash:33}],15:[function(a,b,c){"use strict";function d(a,b){if(!(this instanceof d))throw new TypeError("KMLLayer constructor cannot be called as a function.");if(!e.isString(a)||!e.isString(b))throw new TypeError("Cannot construct KMLLayer due to incorrect parameter type(s).  Please reference API documentation.");if(e.isEmpty(a)||e.isEmpty(b))throw new Error("Cannot construct KMLLayer due to empty required parameter.  Please reference API documentation.");this.id=a,this.path=b}var e=a("lodash");d.prototype.getId=function(){return this.id},d.prototype.getPath=function(){return this.path},b.exports=d},{lodash:33}],16:[function(a,b,c){"use strict";function d(a,b,c){if(!(this instanceof d))throw new TypeError("WMSLayer constructor cannot be called as a function.");if(!e.isString(a)||!e.isString(b)||!e.isArray(c))throw new TypeError("Cannot construct WMSLayer due to incorrect parameter type(s).  Please reference API documentation.");if(e.isEmpty(a)||e.isEmpty(b)||!f.isURL(b)||e.isEmpty(c))throw new Error("Cannot construct WMSLayer due to empty required parameter.  Please reference API documentation.");e.forEach(c,function(a){if(!e.isString(a)||e.isEmpty(a))throw new Error("Cannot construct WMSLayer.  Each layer must be a non-empty string.")}),this.id=a,this.url=b,this.layers=c,this.isTransparent=!0}var e=a("lodash"),f=a("../../../../node_modules/validator/validator.min");d.prototype.getId=function(){return this.id},d.prototype.getUrl=function(){return this.url},d.prototype.getLayers=function(){return this.layers},d.prototype.getIsTransparent=function(){return this.isTransparent},d.prototype.setIsTransparent=function(a){if(!e.isBoolean(a))throw new Error("Cannot set transparency.  Parameter must be a boolean value.");this.isTransparent=a},d.prototype.getStyles=function(){return this.styles},d.prototype.setStyles=function(a){if(!e.isArray(a)||e.isEmpty(a))throw new Error("Cannot set styles.  Parameter must be a non-empty array.");e.forEach(a,function(a){if(!e.isString(a)||e.isEmpty(a))throw new Error("Cannot set styles.  Each style must be a non-empty string.")}),this.styles=a},d.prototype.getFormat=function(){return this.format},d.prototype.setFormat=function(a){if(!e.isString(a)||e.isEmpty(a))throw new Error("Cannot set format.  Parameter must be a string value.");this.format=a},d.prototype.getNumZoomLevels=function(){return this.numZoomLevels},d.prototype.setNumZoomLevels=function(a){if(!e.isNumber(a))throw new Error("Cannot set numZoomLevels.  Parameter must be a number.");this.numZoomLevels=a},b.exports=d},{"../../../../node_modules/validator/validator.min":34,lodash:33}],17:[function(a,b,c){"use strict";function d(a,b,c,g,h){if(!(this instanceof d))throw new TypeError("WMTSLayer constructor cannot be called as a function.");if(!(e.isString(a)&&e.isString(b)&&e.isString(c)&&e.isString(g)&&e.isString(h)))throw new TypeError("Cannot construct WMTSLayer due to incorrect parameter type(s).  Please reference API documentation.");if(e.isEmpty(a)||e.isEmpty(b)||!f.isURL(b)||e.isEmpty(c)||e.isEmpty(g)||e.isEmpty(h))throw new Error("Cannot construct WMTSLayer due to empty required parameter.  Please reference API documentation.");this.id=a,this.url=b,this.layer=c,this.matrixSet=g,this.style=h}var e=a("lodash"),f=a("../../../../node_modules/validator/validator.min");d.prototype.getId=function(){return this.id},d.prototype.getUrl=function(){return this.url},d.prototype.getLayer=function(){return this.layer},d.prototype.getMatrixSet=function(){return this.matrixSet},d.prototype.getStyle=function(){return this.style},d.prototype.getProjection=function(){return this.projection},d.prototype.setProjection=function(a){if(!e.isString(a)||e.isEmpty(a))throw new Error("Cannot set projection.  Parameter must be a string value.");this.projection=a},d.prototype.getFormat=function(){return this.format},d.prototype.setFormat=function(a){if(!e.isString(a)||e.isEmpty(a))throw new Error("Cannot set format.  Parameter must be a string value.");this.format=a},d.prototype.getNumZoomLevels=function(){return this.numZoomLevels},d.prototype.setNumZoomLevels=function(a){if(!e.isNumber(a))throw new Error("Cannot set numZoomLevels.  Parameter must be a number.");this.numZoomLevels=a},d.prototype.getMaxResolution=function(){return this.maxResolution},d.prototype.setMaxResolution=function(a){if(!e.isNumber(a))throw new Error("Cannot set maxResolution.  Parameter must be a number.");this.maxResolution=a},d.prototype.getMatrixIds=function(){return this.matrixIds},d.prototype.setMatrixIds=function(a){if(!e.isArray(a)||e.isEmpty(a))throw new Error("Cannot set matrixIds.  Parameter must be a non-empty array.");this.matrixIds=a},b.exports=d},{"../../../../node_modules/validator/validator.min":34,lodash:33}],18:[function(a,b,c){"use strict";var d=a("lodash"),e=(a("../core/const"),a("../core/mapManager")),f=a("../core/objectFactory"),g=a("./leafletConst"),h=a("./leafletUtil"),i=a("leaflet");a("../../assets/leaflet.Graticule/src/L.Graticule"),a("../../assets/leaflet.mouseposition/src/L.Control.MousePosition");var j={createMapObject:function(a,b,c){h.createMap(a,b,c)},destroyMap:function(){e.getActiveMapObject().remove()},updateSize:function(){e.getActiveMapObject().invalidateSize()},clearAllFeatures:function(){var a=e.getActiveMapObject();a.allFeatures={},a.layers[g.layerName.VECTOR].clearLayers(),a.layers[g.layerName.CLUSTER].clearLayers()},zoomIn:function(){e.getActiveMapObject().zoomIn()},zoomOut:function(){e.getActiveMapObject().zoomOut()},getZoom:function(){return e.getActiveMapObject().getZoom()},setZoom:function(a){e.getActiveMapObject().setZoom(a)},zoomToMaxExtent:function(){var a=e.getActiveMapObject();a.setZoom(a.getMinZoom())},zoomToData:function(a){throw new Error("Method not currently supported for Leaflet")},getCenter:function(){var a=e.getActiveMapObject().getCenter();return f.coordinate(a.lat,a.lng)},setCenter:function(a){var b=h.createLatLng(a);e.getActiveMapObject().panTo(b)},setBaseLayer:function(a){throw new Error("mapapi.setBaseLayer() is not currently supported for Leaflet")},addWmsLayer:function(a){var b=a.getId(),c=a.getUrl(),f={layers:a.getLayers().join(),transparent:a.getIsTransparent(),autoZIndex:!0};d.isUndefined(a.getStyles())||(f.styles=a.getStyles().join()),d.isUndefined(a.getFormat())?a.getIsTransparent()&&(f.format="image/png"):f.format=a.getFormat(),d.isUndefined(a.getNumZoomLevels())||(f.maxNativeZoom=a.getNumZoomLevels());var g=new i.TileLayer.WMS(c,f),h=e.getActiveMapObject();h.layers[b]=g,g.setZIndex(Object.getOwnPropertyNames(h.layers).length),h.addLayer(g)},addWmtsLayer:function(a){throw new Error("WMTS is not currently supported for Leaflet")},removeLayer:function(a){var b=e.getActiveMapObject();void 0!==b.layers[a]&&(b.removeLayer(b.layers[a]),b.layers[a]=void 0)},toggleLayer:function(a){var b=e.getActiveMapObject();void 0!==b.layers[a]&&(b.hasLayer(b.layers[a])?b.removeLayer(b.layers[a]):b.addLayer(b.layers[a]))},getLayerOrder:function(a){var b=e.getActiveMapObject(),c=b.layers[a];return void 0!==c?c.options.zIndex:void 0},setLayerOrder:function(a,b){var c=e.getActiveMapObject().layers[a];void 0!==c&&c.setZIndex(b)},getLayerOpacity:function(a){var b=e.getActiveMapObject(),c=b.layers[a];return void 0!==c?c.options.opacity:void 0},setLayerOpacity:function(a,b){var c=e.getActiveMapObject().layers[a];void 0!==c&&c.setOpacity(b)},getLayer:function(a){throw new Error("Method not currently supported for Leaflet")},addPoint:function(a,b,c,d){var f,i=h.createLatLng(c),j=e.getActiveMapObject();f=void 0===d?h.createEventingCircleMarker(a,i):h.createEventingMarker(a,i,d),j.allFeatures[a]=f,j.layers[g.layerName.CLUSTER].addLayer(f)},removePoint:function(a){var b=e.getActiveMapObject();b.layers[g.layerName.CLUSTER].removeLayer(b.allFeatures[a]),b.allFeatures[a]=void 0},addPolygon:function(a,b,c){var f=e.getActiveMapObject(),j=[];d.forEach(c,function(a){j.push(h.createLatLng(a))});var k=new i.Polygon(j);f.allFeatures[a]=k,f.layers[g.layerName.VECTOR].addLayer(k)},removePolygon:function(a){var b=e.getActiveMapObject();b.layers[g.layerName.VECTOR].removeLayer(b.allFeatures[a]),b.allFeatures[a]=void 0},addLine:function(a,b,c){var f=e.getActiveMapObject(),j=[];d.forEach(c,function(a){j.push(h.createLatLng(a))});var k=new i.Polyline(j);f.allFeatures[a]=k,f.layers[g.layerName.VECTOR].addLayer(k)},removeLine:function(a){var b=e.getActiveMapObject();b.layers[g.layerName.VECTOR].removeLayer(b.allFeatures[a]),b.allFeatures[a]=void 0},addMultipoint:function(a,b,c){var f=e.getActiveMapObject(),j=[];d.forEach(c,function(a){j.push(h.createLatLng(a))});for(var k=new i.FeatureGroup,l=0;l<j.length;l++){var m=h.createEventingCircleMarker(a,j[l]);m.setRadius(g.pointStyle.RADIUS),m.addTo(k)}f.allFeatures[a]=k,f.layers[g.layerName.CLUSTER].addLayer(k)},removeMultipoint:function(a){var b=e.getActiveMapObject();b.layers[g.layerName.CLUSTER].removeLayer(b.allFeatures[a]),b.allFeatures[a]=void 0},getFeatures:function(a){throw new Error("Method not currently supported for Leaflet")},registerClickListener:function(a,b){h.getEventManager().registerClickListener(a,b)},unregisterClickListener:function(a){h.getEventManager().unregisterClickListener(a)},registerHoverListener:function(a,b){throw new Error("Method not currently supported for Leaflet")},unregisterHoverListener:function(a){throw new Error("Method not currently supported for Leaflet")},registerMapMoveListener:function(a,b){throw new Error("Method not currently supported for Leaflet")},unregisterMapMoveListener:function(a){throw new Error("Method not currently supported for Leaflet")},registerZoomEndListener:function(a,b){throw new Error("Method not currently supported for Leaflet")},unregisterZoomEndListener:function(a){throw new Error("Method not currently supported for Leaflet")},registerOutListener:function(a,b){throw new Error("Method not currently supported for Leaflet")},unregisterOutListener:function(a){throw new Error("Method not currently supported for Leaflet")},toggleZoom:function(){var a=e.getActiveMapObject();if(void 0===a.allControls[g.controlName.ZOOM]){var b=new i.control.zoom;a.allControls[g.controlName.ZOOM]=b,a.addControl(b)}else a.removeControl(a.allControls[g.controlName.ZOOM]),a.allControls[g.controlName.ZOOM]=void 0},toggleScale:function(){var a=e.getActiveMapObject();
if(void 0===a.allControls[g.controlName.SCALE]){var b=new i.control.scale({metric:!0,imperial:!0});a.allControls[g.controlName.SCALE]=b,a.addControl(b)}else a.removeControl(a.allControls[g.controlName.SCALE]),a.allControls[g.controlName.SCALE]=void 0},toggleCoordinates:function(){var a=e.getActiveMapObject();void 0===a.allControls[g.controlName.COORDINATES]?(a.allControls[g.controlName.COORDINATES]=i.control.mousePosition(),a.addControl(a.allControls[g.controlName.COORDINATES])):(a.removeControl(a.allControls[g.controlName.COORDINATES]),a.allControls[g.controlName.COORDINATES]=void 0)},toggleGraticule:function(){var a=e.getActiveMapObject();void 0===a.allControls[g.controlName.GRATICULE]?(a.allControls[g.controlName.GRATICULE]=i.graticule(),a.addLayer(a.allControls[g.controlName.GRATICULE])):(a.removeLayer(a.allControls[g.controlName.GRATICULE]),a.allControls[g.controlName.GRATICULE]=void 0)},addKml:function(a){throw new Error("Method not currently supported for Leaflet")},addGeoJson:function(a){throw new Error("Method not currently supported for Leaflet")},addVectorLayer:function(a,b){throw new Error("Method not currently supported for Leaflet")}};b.exports=j},{"../../assets/leaflet.Graticule/src/L.Graticule":27,"../../assets/leaflet.mouseposition/src/L.Control.MousePosition":29,"../core/const":4,"../core/mapManager":7,"../core/objectFactory":8,"./leafletConst":19,"./leafletUtil":20,leaflet:32,lodash:33}],19:[function(a,b,c){"use strict";var d={layerName:{BASE:"BASE",CLUSTER:"CLUSTER",VECTOR:"VECTOR"},controlName:{ZOOM:"ZOOM",SCALE:"SCALE",COORDINATES:"COORDINATES",GRATICULE:"GRATICULE"},pointStyle:{RADIUS:4}};b.exports=d},{}],20:[function(a,b,c){"use strict";function d(){return new j.TileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{minZoom:2})}function e(a){return void 0===a.getLayers()?new j.TileLayer.EsriRest(a.getUrl(),{layers:"0"}):new j.TileLayer.EsriRest(a.getUrl(),{layers:a.getLayers()})}var f=a("../core/const"),g=a("../core/mapManager"),h=a("./leafletConst"),i=a("../core/objectValidator"),j=a("leaflet");a("../../assets/leaflet.esrirest/TileLayer.EsriRest");var k=a("../core/EventManager"),l=new k,m={createMap:function(a,b,c){var k,m=j.Map.extend({allFeatures:{},allControls:{},layers:{}}),n={center:[0,0],zoom:3,zoomControl:!1},o=new m(a,n);if(void 0===c)k=d();else{if(i.isArcGISCacheLayer(c))throw new Error("API does not currently support ArcGISCache base layer for Leaflet.");if(i.isWmtsLayer())throw new Error("API does not currently support WMTS base layer for Leaflet.");if(i.isWmsLayer())throw new Error("API does not currently support WMS base layer for Leaflet.");k=e(c)}o.layers[h.layerName.BASE]=k,o.addLayer(k);var p=new j.FeatureGroup;o.layers[h.layerName.VECTOR]=p;var q=(new j.FeatureGroup).on("click",function(a){l.handleClickEvent(a.layer.attributes.id)});o.layers[h.layerName.CLUSTER]=q,void 0!==b&&o.whenReady(b),o.addLayer(p),o.addLayer(q);var r=new j.control.zoom;o.allControls[h.controlName.ZOOM]=r,o.addControl(r),o.setZoom(o.getMinZoom()),g.registerMapInstance(a,f.mapType.LEAFLET,o),g.setActiveMap(a)},createLatLng:function(a){return new j.LatLng(a.getLatitude(),a.getLongitude())},createEventingCircleMarker:function(a,b){var c=j.CircleMarker.extend({attributes:{id:a}}),d=new c(b);return d.setRadius(h.pointStyle.RADIUS),d},createEventingMarker:function(a,b,c){var d=j.Marker.extend({attributes:{id:a}}),e=j.icon({iconUrl:c.getUrl()});return new d(b,{icon:e})},getEventManager:function(){return l}};b.exports=m},{"../../assets/leaflet.esrirest/TileLayer.EsriRest":28,"../core/EventManager":2,"../core/const":4,"../core/mapManager":7,"../core/objectValidator":9,"./leafletConst":19,leaflet:32}],21:[function(a,b,c){"use strict";var d=a("lodash"),e=a("../../core/mapManager"),f=a("./ol3Const"),g=a("../../core/objectFactory"),h=a("./ol3Util"),i=a("../../../assets/ol3/ol"),j={createMapObject:function(a,b,c){h.createMap(a,b,c)},destroyMap:function(){e.getActiveMapObject().setTarget(null)},updateSize:function(){e.getActiveMapObject().updateSize()},clearAllFeatures:function(){h.getVectorSource().clear(),h.getPointSource().clear()},zoomIn:function(){var a=e.getActiveMapObject().getView(),b=a.getZoom();a.setZoom(b+1)},zoomOut:function(){var a=e.getActiveMapObject().getView(),b=a.getZoom();a.setZoom(b-1)},getZoom:function(){return e.getActiveMapObject().getView().getZoom()},setZoom:function(a){e.getActiveMapObject().getView().setZoom(a)},zoomToMaxExtent:function(){var a=e.getActiveMapObject();a.getView().fitExtent([-20037508.34,-20037508.34,20037508.34,20037508.34],a.getSize())},zoomToData:function(a){throw new Error("Method not currently supported for OL3")},getCenter:function(){var a=i.proj.transform(e.getActiveMapObject().getView().getCenter(),"EPSG:3857","EPSG:4326");return g.coordinate(a[1],a[0])},setCenter:function(a){e.getActiveMapObject().getView().setCenter(i.proj.transform([a._lng,a._lat],"EPSG:4326","EPSG:3857"))},setBaseLayer:function(a){var b=e.getActiveMapObject();this.setLayerOrder(a,0);var c=b.getLayers();c.removeAt(1)},addWmsLayer:function(a){e.getActiveMapObject().addLayer(h.createWMSLayer(a))},addWmtsLayer:function(a){e.getActiveMapObject().addLayer(h.createWMTSLayer(a))},removeLayer:function(a){var b=e.getActiveMapObject().getLayers();b.forEach(function(b,c){b.get("name")==a&&e.getActiveMapObject().removeLayer(b)})},toggleLayer:function(a){var b=e.getActiveMapObject().getLayers();b.forEach(function(b,c){b.get("name")==a&&b.setVisible(!b.getVisible())})},getLayerOrder:function(a){var b,c=e.getActiveMapObject().getLayers();if(d.isUndefined(c))throw new Error("There are no layers added to the map");if(c.forEach(function(c,d){c.get("name")==a&&(b=d)}),b)return b;throw new Error("Cannot find layer with id: "+a)},setLayerOrder:function(a,b){var c=e.getActiveMapObject().getLayers();if(d.isUndefined(c))throw new Error("There are no layers added to the map");var f=c.removeAt(this.getLayerOrder(a));c.insertAt(b,f)},getLayerOpacity:function(a){var b,c=e.getActiveMapObject().getLayers();if(d.isUndefined(c))throw new Error("There are no layers added to the map");if(c.forEach(function(c,d){c.get("name")==a&&(b=c.getOpacity())}),b)return b;throw new Error("Cannot find layer with id: "+a)},setLayerOpacity:function(a,b){var c=e.getActiveMapObject().getLayers();if(d.isUndefined(c))throw new Error("Cannot find layer with id: "+a);c.forEach(function(c,d){c.get("name")==a&&c.setOpacity(b)})},getLayer:function(a){throw new Error("Method not currently supported for OL3")},addPoint:function(a,b,c,f){e.getActiveMapObject();if(!d.isNaN(c._lat)||!d.isNaN(c._lng)){var g=[];g.push(c._lng),g.push(c._lat);var j=new i.geom.Point(g);j.transform("EPSG:4326","EPSG:3857");var k=new i.Feature({geometry:j,id:a});h.getPointSource().addFeature(k)}},removePoint:function(a){h.removeFeature(a)},addPolygon:function(a,b,c){for(var f=(e.getActiveMapObject(),[]),g=0;g<c.length;g++)if(!d.isNaN(c[g]._lat)||!d.isNaN(c[g]._lng)){var j=[];j.push(c[g]._lng),j.push(c[g]._lat),f.push(j)}var k=new i.geom.Polygon([f]);k.transform("EPSG:4326","EPSG:3857");var l=new i.Feature({geometry:k,id:a});h.getVectorSource().addFeature(l)},removePolygon:function(a){h.removeFeature(a)},addLine:function(a,b,c){for(var f=(e.getActiveMapObject(),[]),g=0;g<c.length;g++)if(!d.isNaN(c[g]._lat)||!d.isNaN(c[g]._lng)){var j=[];j.push(c[g]._lng),j.push(c[g]._lat),f.push(j)}var k=new i.geom.LineString(f);k.transform("EPSG:4326","EPSG:3857");var l=new i.Feature({geometry:k,id:a});h.getVectorSource().addFeature(l)},removeLine:function(a){h.removeFeature(a)},addMultipoint:function(a,b,c){for(var f=(e.getActiveMapObject(),[]),g=0;g<c.length;g++)if(!d.isNaN(c[g]._lat)||!d.isNaN(c[g]._lng)){var j=[];j.push(c[g]._lng),j.push(c[g]._lat),f.push(j)}var k=new i.geom.MultiPoint(f);k.transform("EPSG:4326","EPSG:3857");var l=new i.Feature({geometry:k,id:a});h.getPointSource().addFeature(l)},removeMultipoint:function(a){h.removeFeature(a)},getFeatures:function(a){throw new Error("Method not currently supported for OL3")},registerClickListener:function(a,b){h.getEventManager().registerClickListener(a,b)},unregisterClickListener:function(a){h.getEventManager().unregisterClickListener(a)},registerHoverListener:function(a,b){throw new Error("Method not currently supported for OL3")},unregisterHoverListener:function(a){throw new Error("Method not currently supported for OL3")},registerMapMoveListener:function(a,b){throw new Error("Method not currently supported for OL3")},unregisterMapMoveListener:function(a){throw new Error("Method not currently supported for OL3")},registerZoomEndListener:function(a,b){throw new Error("Method not currently supported for OL3")},unregisterZoomEndListener:function(a){throw new Error("Method not currently supported for OL3")},registerOutListener:function(a,b){throw new Error("Method not currently supported for OL3")},unregisterOutListener:function(a){throw new Error("Method not currently supported for OL3")},toggleZoom:function(){h.toggleControl(f.controlName.ZOOM,new i.control.Zoom)},toggleScale:function(){h.toggleControl(f.controlName.SCALE,new i.control.ScaleLine)},toggleCoordinates:function(){h.toggleControl(f.controlName.COORDINATES,new i.control.MousePosition({undefinedHTML:"",projection:"EPSG:4326",coordinateFormat:function(a){return i.coordinate.format(a,"{x}, {y}",4)}}))},toggleGraticule:function(){h.toggleControl(f.controlName.GRATICULE,new i.Graticule({strokeStyle:new i.style.Stroke({color:"rgba(255,120,0,0.9)",width:2,lineDash:[.5,4]})}))},addKml:function(a){e.getActiveMapObject().addLayer(h.createKMLLayer(a))},addGeoJson:function(a){e.getActiveMapObject().addLayer(h.createGeoJSONLayer(a))},addVectorLayer:function(a,b){throw new Error("Method not currently supported for OL3")}};b.exports=j},{"../../../assets/ol3/ol":30,"../../core/mapManager":7,"../../core/objectFactory":8,"./ol3Const":22,"./ol3Util":23,lodash:33}],22:[function(a,b,c){"use strict";var d={controlName:{ZOOM:"ZOOM",SCALE:"SCALE",COORDINATES:"COORDINATES",GRATICULE:"GRATICULE"},layerName:{FEATURE:"FEATURE",VECTOR:"VECTOR",POINT:"POINT"}};b.exports=d},{}],23:[function(a,b,c){"use strict";function d(a,b){if(!k.controlName.hasOwnProperty(a))throw new Error("Key "+a+" for control not currently supported");p[a]=b}function e(a){for(var b,c=(m.getActiveMapObject().getLayers(),f.getFeatures()),d=0;d<c.length;d++)c[d].get("id")==a&&(b=c[d]);return b?b:null}var f,g,h=a("lodash"),i=a("../../core/EventManager"),j=a("../../core/const"),k=a("./ol3Const"),l=a("../../core/objectValidator"),m=a("../../core/mapManager"),n=a("../../../assets/ol3/ol"),o=new i,p={},q={createMap:function(a,b,c){var e=[];if(d(k.controlName.ZOOM,new n.control.Zoom),f=new n.source.Vector,g=new n.source.Vector,void 0===c){var h=new n.layer.Tile({source:new n.source.MapQuest({layer:"osm"})});e.push(h)}else l.isWmsLayer(c)?e.push(this.createWMSLayer(c)):l.isWmtsLayer(c)?e.push(this.createWMTSLayer(c)):l.isKMLLayer(c)?e.push(this.createKMLLayer(c)):l.isGeoJsonLayer(c)&&e.push(this.createGeoJSONLayer(c));var i=new n.layer.Group({name:k.layerName.FEATURE,layers:[new n.layer.Vector({name:k.layerName.VECTOR,source:f}),new n.layer.Vector({name:k.layerName.POINT,source:g})]});e.push(i);var o=new n.Map({target:a,controls:[p[k.controlName.ZOOM]],layers:e,view:new n.View({center:n.proj.transform([0,0],"EPSG:4326","EPSG:3857"),extent:[-20037508.34,-20037508.34,20037508.34,20037508.34],zoom:2})});m.registerMapInstance(a,j.mapType.OPENLAYERS3,o),m.setActiveMap(a)},getEventManager:function(){return o},getVectorSource:function(){return f},getPointSource:function(){return g},getFeatureByID:function(a){return e(a)},removeFeature:function(a){var b=this.getFeatureByID(a);b&&this.getVectorSource().removeFeature(b)},createWMSLayer:function(a){var b=a.getId(),c=a.getUrl(),d={layers:a.getLayers().join(),transparent:a.getIsTransparent()};h.isUndefined(a.getStyles())||(d.styles=a.getStyles().join()),h.isUndefined(a.getFormat())||(d.format=a.getFormat());var e={isBaseLayer:!1},f=new n.layer.Tile({name:b,source:new n.source.TileWMS({url:c,params:d,options:e})});return f},createWMTSLayer:function(a){for(var b=n.proj.get("EPSG:3857"),c=b.getExtent(),d=n.extent.getWidth(c)/256,e=new Array(14),f=new Array(14),g=0;14>g;++g)e[g]=d/Math.pow(2,g),f[g]=g;var h=new n.layer.Tile({name:a.getId(),opacity:.7,extent:c,source:new n.source.WMTS({url:a.getUrl(),layer:a.getLayer(),matrixSet:a.getMatrixSet(),format:"image/png",projection:b,tileGrid:new n.tilegrid.WMTS({origin:n.extent.getTopLeft(c),resolutions:e,matrixIds:f}),style:a.getStyle()})});return h},createGeoJSONLayer:function(a){var b=new n.layer.Vector({name:a.getId(),source:new n.source.GeoJSON({projection:"EPSG:3857",url:a.getPath()})});return b},createKMLLayer:function(a){var b=new n.layer.Vector({name:a.getId(),source:new n.source.KML({projection:"EPSG:3857",url:a.getPath()})});return b},toggleControl:function(a,b){var c=m.getActiveMapObject();p[a]?(h.isEqual(a,k.controlName.GRATICULE)?p[a].setMap(null):c.removeControl(p[a]),delete p[a]):(d(a,b),h.isEqual(a,k.controlName.GRATICULE)?b.setMap(c):c.addControl(p[a]))}};b.exports=q},{"../../../assets/ol3/ol":30,"../../core/EventManager":2,"../../core/const":4,"../../core/mapManager":7,"../../core/objectValidator":9,"./ol3Const":22,lodash:33}],24:[function(a,b,c){"use strict";var d=a("lodash"),e=(a("../core/const"),a("../core/mapManager")),f=a("../core/objectFactory"),g=a("./olUtil"),h=a("../../assets/openLayers/2.13.1/OpenLayers"),i={createMapObject:function(a,b,c){g.createMap(a,b,c)},destroyMap:function(){e.getActiveMapObject().destroy()},updateSize:function(){e.getActiveMapObject().updateSize()},clearAllFeatures:function(){var a=e.getActiveMapObject().getLayersByClass("OpenLayers.Layer.Vector");d.forEach(a,function(a){a.removeAllFeatures()})},zoomIn:function(){e.getActiveMapObject().zoomIn()},zoomOut:function(){e.getActiveMapObject().zoomOut()},getZoom:function(){return e.getActiveMapObject().getZoom()},setZoom:function(a){e.getActiveMapObject().zoomTo(a)},zoomToMaxExtent:function(){e.getActiveMapObject().zoomToMaxExtent()},zoomToData:function(a){var b=g.calculateBounds(a);d.isUndefined(b)||e.getActiveMapObject().zoomToExtent(b)},getCenter:function(){var a=e.getActiveMapObject().getCenter();return a.transform(e.getActiveMapObject().getProjectionObject(),g.getDefaultProjection()),f.coordinate(a.lat,a.lon)},setCenter:function(a){var b=new h.LonLat(a.getLongitude(),a.getLatitude());b.transform(g.getDefaultProjection(),e.getActiveMapObject().getProjectionObject()),e.getActiveMapObject().panTo(b)},setBaseLayer:function(a){var b=e.getActiveMapObject().getLayersByName(a)[0];if(d.isUndefined(b))throw new Error("Cannot find layer with id: "+a);e.getActiveMapObject().setBaseLayer(b)},addWmsLayer:function(a){var b=g.createWmsObject(a,!1);e.getActiveMapObject().addLayer(b)},addWmtsLayer:function(a){var b=g.createWmtsObject(a,!1);e.getActiveMapObject().addLayer(b)},removeLayer:function(a){var b=e.getActiveMapObject().getLayersByName(a)[0];if(d.isUndefined(b))throw new Error("Cannot find layer with id: "+a);e.getActiveMapObject().removeLayer(b)},toggleLayer:function(a){var b=e.getActiveMapObject().getLayersByName(a)[0];if(d.isUndefined(b))throw new Error("Cannot find layer with id: "+a);b.setVisibility(!b.getVisibility())},getLayerOrder:function(a){var b=e.getActiveMapObject().getLayersByName(a)[0];if(d.isUndefined(b))throw new Error("Cannot find layer with id: "+a);return e.getActiveMapObject().getLayerIndex(b)},setLayerOrder:function(a,b){var c=e.getActiveMapObject().getLayersByName(a)[0];if(d.isUndefined(c))throw new Error("Cannot find layer with id: "+a);e.getActiveMapObject().setLayerIndex(c,b)},getLayerOpacity:function(a){var b=e.getActiveMapObject().getLayersByName(a)[0];if(d.isUndefined(b))throw new Error("Cannot find layer with id: "+a);return b.opacity},setLayerOpacity:function(a,b){var c=e.getActiveMapObject().getLayersByName(a)[0];if(d.isUndefined(c))throw new Error("Cannot find layer with id: "+a);c.setOpacity(b)},getLayer:function(a){return g.getLayer(a)},addPoint:function(a,b,c,e){var f=g.getLayer(b);if(!d.isUndefined(f)){var i={};i.featureId=a;var j;void 0!==e&&(j={externalGraphic:e.getUrl(),graphicWidth:e.getWidth(),graphicHeight:e.getHeight()}),f.addFeatures([new h.Feature.Vector(g.createPoint(c),i,j)])}},removePoint:function(a){g.removeFeature(a)},addPolygon:function(a,b,c){var e=g.getLayer(b);if(!d.isUndefined(e)){var f={};f.featureId=a;var i=[];d.forEach(c,function(a){i.push(g.createPoint(a))});var j=new h.Geometry.LinearRing(i),k=new h.Geometry.Polygon(j),l=new h.Feature.Vector(k,f);e.addFeatures([l])}},removePolygon:function(a){g.removeFeature(a)},addLine:function(a,b,c){var e=g.getLayer(b);if(!d.isUndefined(e)){var f={};f.featureId=a;var i=[];d.forEach(c,function(a){i.push(g.createPoint(a))});var j=new h.Geometry.LineString(i),k=new h.Feature.Vector(j,f);e.addFeatures([k])}},removeLine:function(a){g.removeFeature(a)},addMultipoint:function(a,b,c){var e=g.getLayer(b);if(!d.isUndefined(e)){var f={};f.featureId=a;var i=new h.Geometry.MultiPoint;d.forEach(c,function(a){i.addPoint(g.createPoint(a))});var j=new h.Feature.Vector(i,f);e.addFeatures([j])}},removeMultipoint:function(a){g.removeFeature(a)},getFeatures:function(a){var b=[],c=e.getActiveMapObject().getLayersByClass("OpenLayers.Layer.Vector");return d.forEach(c,function(c){var e=c.getFeaturesByAttribute("featureId",a);d.isArray(e)&&e.length>0&&b.push(e)}),d.flatten(b,!0)},registerClickListener:function(a,b){g.getEventManager().registerClickListener(a,b)},unregisterClickListener:function(a){g.getEventManager().unregisterClickListener(a)},registerHoverListener:function(a,b){g.getEventManager().registerHoverListener(a,b)},unregisterHoverListener:function(a){g.getEventManager().unregisterHoverListener(a)},registerMapMoveListener:function(a,b){g.getEventManager().registerMapMoveListener(a,b)},unregisterMapMoveListener:function(a){g.getEventManager().unregisterMapMoveListener(a)},registerZoomEndListener:function(a,b){g.getEventManager().registerZoomEndListener(a,b)},unregisterZoomEndListener:function(a){g.getEventManager().unregisterZoomEndListener(a)},registerOutListener:function(a,b){g.getEventManager().registerOutListener(a,b)},unregisterOutListener:function(a){g.getEventManager().unregisterOutListener(a)},toggleZoom:function(){g.toggleControl("OpenLayers.Control.Zoom",new h.Control.Zoom)},toggleScale:function(){g.toggleControl("OpenLayers.Control.ScaleLine",new h.Control.ScaleLine)},toggleCoordinates:function(){g.toggleControl("OpenLayers.Control.MousePosition",new h.Control.MousePosition)},toggleGraticule:function(){var a=e.getActiveMapObject(),b=a.getControlsByClass("OpenLayers.Control.Graticule");0===b.length?a.addControl(new h.Control.Graticule):b[0].destroy()},addKml:function(a){var b=g.createKmlLayer(a,!1);e.getActiveMapObject().addLayer(b)},addGeoJson:function(a){var b=g.createGeoJsonLayer(a,!1);e.getActiveMapObject().addLayer(b)},addVectorLayer:function(a,b){var c;if(d.isUndefined(b))c=new h.Layer.Vector(a);else{if(!(d.isUndefined(b.strategies)||d.isArray(b.strategies)&&b.strategies.length>0&&b.strategies[0]instanceof h.Strategy))throw new Error("options.strategies[0] must be an instance of OpenLayers.Strategy");if(!(d.isUndefined(b.styleMap)||b.styleMap instanceof h.StyleMap))throw new Error("options.styleMap must be an instance of OpenLayers.StyleMap");c=new h.Layer.Vector(a,b)}c.events.register("featureclick",c,function(a){g.getEventManager().handleClickEvent(a)}),c.events.register("featureover",c,function(a){g.getEventManager().handleHoverEvent(a)}),c.events.register("featureout",c,function(a){g.getEventManager().handleOutEvent(a)}),e.getActiveMapObject().addLayer(c)}};b.exports=i},{"../../assets/openLayers/2.13.1/OpenLayers":31,"../core/const":4,"../core/mapManager":7,"../core/objectFactory":8,"./olUtil":25,lodash:33}],25:[function(a,b,c){"use strict";function d(a,b){var c=function(){a.events.unregister("loadend",a,c),b()};a.events.register("loadend",a,c)}function e(a,b,c){void 0!==b&&d(c,b);var e=new j.Map(a,{theme:null});e.addLayer(c),e.zoomToMaxExtent(),e.events.register("moveend",e,function(a){n.handleMapMoveEvent(a)}),e.events.register("zoomend",e,function(a){n.handleZoomEndEvent(a)}),h.registerMapInstance(a,g.mapType.OPENLAYERS,e),h.setActiveMap(a)}var f=a("lodash"),g=a("../core/const"),h=a("../core/mapManager"),i=a("../core/objectValidator"),j=(a("../util/appUtils"),a("../../assets/openLayers/2.13.1/OpenLayers")),k=a("../core/EventManager"),l="BASE",m=new j.Projection("EPSG:4326"),n=new k;a("../util/appUtils").getGlobalObject().OpenLayers=j;var o={createMap:function(a,b,c){var d;if(void 0===c)d=new j.Layer.OSM(l),d.projection=new j.Projection("EPSG:3857"),e(a,b,d);else if(i.isArcGIS93RestLayer(c))d=new j.Layer.ArcGIS93Rest(l,c.getUrl()),f.isUndefined(c.getNumZoomLevels())||d.addOptions({numZoomLevels:c.getNumZoomLevels()},!0),e(a,b,d);else if(i.isArcGISCacheLayer(c)){var g=new j.Protocol.Script;g.createRequest(c.getUrl(),{f:"json",pretty:"true"},function(g){var h={layerInfo:g};f.isUndefined(c.getNumZoomLevels())||(h.numZoomLevels=c.getNumZoomLevels()),d=new j.Layer.ArcGISCache(l,c.getUrl(),h),e(a,b,d)})}else if(i.isWmtsLayer(c))d=this.createWmtsObject(c,!0),e(a,b,d);else if(i.isWmsLayer(c))d=this.createWmsObject(c,!0),e(a,b,d);else if(i.isKMLLayer(c))d=this.createKmlLayer(c,!0),e(a,b,d);else{if(!i.isGeoJsonLayer(c))throw new TypeError("API does not support for the given base layer type.");d=this.createGeoJsonLayer(c,!0),e(a,b,d)}},createPoint:function(a){var b=new j.Geometry.Point(a.getLongitude(),a.getLatitude());return b.transform(m,h.getActiveMapObject().getProjectionObject()),b},removeFeature:function(a){var b=h.getActiveMapObject().getLayersByClass("OpenLayers.Layer.Vector");f.forEach(b,function(b){var c=b.getFeaturesByAttribute("featureId",a);b.removeFeatures(c)})},toggleControl:function(a,b){var c=h.getActiveMapObject(),d=c.getControlsByClass(a);0===d.length?c.addControl(b):c.removeControl(d[0])},getDefaultProjection:function(){return m},calculateBounds:function(a){var b=this.getLayer(a);return f.isUndefined(b)?void 0:b.getDataExtent()},getEventManager:function(){return n},createWmtsObject:function(a,b){var c={isBaseLayer:b,name:a.getId(),url:a.getUrl(),layer:a.getLayer(),matrixSet:a.getMatrixSet(),style:a.getStyle()};b||(c.projection=a.getProjection()||h.getActiveMapObject().getProjection(),c.numZoomLevels=a.getNumZoomLevels()||h.getActiveMapObject().getNumZoomLevels(),c.maxResolution=a.getMaxResolution()||h.getActiveMapObject().getMaxResolution()),void 0!==a.getFormat()&&(c.format=a.getFormat()),f.isUndefined(a.getMatrixIds())||(c.matrixIds=a.getMatrixIds());var d=new j.Layer.WMTS(c);return d},createWmsObject:function(a,b){var c=a.getId(),d=a.getUrl(),e={layers:a.getLayers().join(),transparent:a.getIsTransparent()};f.isUndefined(a.getStyles())||(e.styles=a.getStyles().join()),f.isUndefined(a.getFormat())||(e.format=a.getFormat());var g={isBaseLayer:b};f.isUndefined(a.getNumZoomLevels())||(g.numZoomLevels=a.getNumZoomLevels());var h=new j.Layer.WMS(c,d,e,g);return h},createKmlLayer:function(a,b){var c=new j.Layer.Vector(a.getId(),{strategies:[new j.Strategy.Fixed],protocol:new j.Protocol.HTTP({url:a.getPath(),format:new j.Format.KML({extractStyles:!0,extractAttributes:!0,maxDepth:2})}),isBaseLayer:b});return c},createGeoJsonLayer:function(a,b){var c=new j.Layer.Vector(a.getId(),{strategies:[new j.Strategy.Fixed],protocol:new j.Protocol.HTTP({url:a.getPath(),format:new j.Format.GeoJSON}),isBaseLayer:b});return c},getLayer:function(a){var b=h.getActiveMapObject().getLayersByName(a);return f.isArray(b)&&!f.isEmpty(b)?b[0]:void 0}};b.exports=o},{"../../assets/openLayers/2.13.1/OpenLayers":31,"../core/EventManager":2,"../core/const":4,"../core/mapManager":7,"../core/objectValidator":9,"../util/appUtils":26,lodash:33}],26:[function(a,b,c){"use strict";var d={getGlobalObject:function(){return function(a){return a("return this")()}(Function)}};b.exports=d},{}],27:[function(a,b,c){L.Graticule=L.GeoJSON.extend({options:{style:{color:"#333",weight:1},interval:20},initialize:function(a){L.Util.setOptions(this,a),this._layers={},this.addData(this.options.surface?this._getFrame():this._getGraticule())},_getFrame:function(){return{type:"Polygon",coordinates:[this._getMeridian(-180).concat(this._getMeridian(180).reverse())]}},_getGraticule:function(){for(var a=[],b=this.options.interval,c=0;180>=c;c+=b)a.push(this._getFeature(this._getMeridian(c),{name:c?c.toString()+"° E":"Prime meridian"})),0!==c&&a.push(this._getFeature(this._getMeridian(-c),{name:c.toString()+"° W"}));for(var d=0;90>=d;d+=b)a.push(this._getFeature(this._getParallel(d),{name:d?d.toString()+"° N":"Equator"})),0!==d&&a.push(this._getFeature(this._getParallel(-d),{name:d.toString()+"° S"}));return{type:"FeatureCollection",features:a}},_getMeridian:function(a){a=this._lngFix(a);for(var b=[],c=-90;90>=c;c++)b.push([a,c]);return b},_getParallel:function(a){for(var b=[],c=-180;180>=c;c++)b.push([this._lngFix(c),a]);return b},_getFeature:function(a,b){return{type:"Feature",geometry:{type:"LineString",coordinates:a},properties:b}},_lngFix:function(a){return a>=180?179.999999:-180>=a?-179.999999:a}}),L.graticule=function(a){return new L.Graticule(a)}},{}],28:[function(a,b,c){L.TileLayer.EsriRest=L.TileLayer.extend({defaultEsriParams:{layers:"",format:"png",transparent:!1,dpi:"92",f:"image"},initialize:function(a,b){this._url=a;var c=L.extend({},this.defaultEsriParams),d=b.tileSize||this.options.tileSize;b.detectRetina&&L.Browser.retina?c.size=[2*d,2*d].join(","):c.size=[d,d].join(",");for(var e in b)this.options.hasOwnProperty(e)||(c[e]=b[e]);this.esriParams=c,L.setOptions(this,b)},onAdd:function(a){this.esriParams.bboxSR=a.options.crs.code.substring(5),this.esriParams.imageSR=a.options.crs.code.substring(5),this.esriParams.layers="show:"+this.esriParams.layers,L.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a,b){var c=this._map,d=c.options.crs,e=this.options.tileSize,f=a.multiplyBy(e),g=f.add([e,e]),h=d.project(c.unproject(f,b)),i=d.project(c.unproject(g,b)),j=[h.x,i.y,i.x,h.y].join(","),k=L.Util.template(this._url,{s:this._getSubdomain(a)});return k+"/export"+L.Util.getParamString(this.esriParams,k,!0)+"&bbox="+j},getIdentifyUrl:function(a,b){b=b?b:{};var c={geometryType:"esriGeometryPoint",sr:"4326",layers:this.esriParams.layers.substring(5),tolerance:0,imageDisplay:this.esriParams.size+","+this.esriParams.dpi,returnGeometry:!1,f:"pjson",geometry:[a.x,a.y].join(","),mapExtent:[map.getBounds()._northEast.lng,map.getBounds()._northEast.lat,map.getBounds()._southWest.lng,map.getBounds()._southWest.lat].join(","),showLayers:"visible"};for(var d in c)b.hasOwnProperty(d)||(b[d]=c[d]);return b.layers=b.showLayers+":"+b.layers,url=L.Util.template(this._url,{s:this._getSubdomain(a)}),url+"/identify"+L.Util.getParamString(b,url,!0)},setParams:function(a,b){return L.extend(this.esriParams,a),b||this.redraw(),this}}),L.tileLayer.esri=function(a,b){return new L.TileLayer.ESRI(a,b)}},{}],29:[function(a,b,c){L.Control.MousePosition=L.Control.extend({options:{position:"bottomleft",separator:" : ",emptyString:"Unavailable",lngFirst:!1,numDigits:5,lngFormatter:void 0,latFormatter:void 0,prefix:""},onAdd:function(a){return this._container=L.DomUtil.create("div","leaflet-control-mouseposition"),L.DomEvent.disableClickPropagation(this._container),a.on("mousemove",this._onMouseMove,this),this._container.innerHTML=this.options.emptyString,this._container},onRemove:function(a){a.off("mousemove",this._onMouseMove)},_onMouseMove:function(a){var b=this.options.lngFormatter?this.options.lngFormatter(a.latlng.lng):L.Util.formatNum(a.latlng.lng,this.options.numDigits),c=this.options.latFormatter?this.options.latFormatter(a.latlng.lat):L.Util.formatNum(a.latlng.lat,this.options.numDigits),d=this.options.lngFirst?b+this.options.separator+c:c+this.options.separator+b,e=this.options.prefix+" "+d;this._container.innerHTML=e}}),L.Map.mergeOptions({positionControl:!1}),L.Map.addInitHook(function(){this.options.positionControl&&(this.positionControl=new L.Control.MousePosition,this.addControl(this.positionControl))}),L.control.mousePosition=function(a){return new L.Control.MousePosition(a)}},{}],30:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define([],d):"object"==typeof c?b.exports=d():a.ol=d()}(this,function(){function a(a){return void 0!==a}function b(b,c,d){b=b.split("."),d=d||Hr,b[0]in d||!d.execScript||d.execScript("var "+b[0]);for(var e;b.length&&(e=b.shift());)!b.length&&a(c)?d[e]=c:d=d[e]?d[e]:d[e]={}}function c(){}function d(a){a.Ja=function(){return a.lf?a.lf:a.lf=new a}}function e(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function f(a){return null===a}function g(a){return"array"==e(a)}function h(a){var b=e(a);return"array"==b||"object"==b&&"number"==typeof a.length}function i(a){return"string"==typeof a}function j(a){return"number"==typeof a}function k(a){return"function"==e(a)}function l(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function m(a){return a[Ir]||(a[Ir]=++Jr)}function n(a,b,c){return a.call.apply(a.bind,arguments)}function o(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,d),a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){return p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?n:o,p.apply(null,arguments)}function q(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();return b.push.apply(b,arguments),a.apply(this,b)}}function r(a,b){function c(){}c.prototype=b.prototype,a.S=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.Vl=function(a,c,d){for(var e=Array(arguments.length-2),f=2;f<arguments.length;f++)e[f-2]=arguments[f];return b.prototype[c].apply(a,e)}}function s(a){if(Error.captureStackTrace)Error.captureStackTrace(this,s);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}function t(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function u(a){return Ur.test(a)?(-1!=a.indexOf("&")&&(a=a.replace(Or,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(Pr,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(Qr,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(Rr,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(Sr,"&#39;")),-1!=a.indexOf("\x00")&&(a=a.replace(Tr,"&#0;")),a):a}function v(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function w(b){b=a(void 0)?b.toFixed(void 0):String(b);var c=b.indexOf(".");return-1==c&&(c=b.length),c=Math.max(0,2-c),Array(c+1).join("0")+b}function x(a,b){for(var c=0,d=Nr(String(a)).split("."),e=Nr(String(b)).split("."),f=Math.max(d.length,e.length),g=0;0==c&&f>g;g++){var h=d[g]||"",i=e[g]||"",j=RegExp("(\\d*)(\\D*)","g"),k=RegExp("(\\d*)(\\D*)","g");do{var l=j.exec(h)||["","",""],m=k.exec(i)||["","",""];if(0==l[0].length&&0==m[0].length)break;c=y(0==l[1].length?0:parseInt(l[1],10),0==m[1].length?0:parseInt(m[1],10))||y(0==l[2].length,0==m[2].length)||y(l[2],m[2])}while(0==c)}return c}function y(a,b){return b>a?-1:a>b?1:0}function z(){return"transform".replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})}function A(a){var b=i(void 0)?v(void 0):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,c){
return b+c.toUpperCase()})}function B(a,b,c){Vr.forEach.call(a,b,c)}function C(a,b){return Vr.filter.call(a,b,void 0)}function D(a,b,c){return Vr.map.call(a,b,c)}function E(a,b){return Vr.some.call(a,b,void 0)}function F(a){var b;a:{b=vq;for(var c=a.length,d=i(a)?a.split(""):a,e=0;c>e;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:i(a)?a.charAt(b):a[b]}function G(a,b){return 0<=Vr.indexOf.call(a,b,void 0)}function H(a){if(!g(a))for(var b=a.length-1;b>=0;b--)delete a[b];a.length=0}function I(a,b){var c,d=Vr.indexOf.call(a,b,void 0);return(c=d>=0)&&Vr.splice.call(a,d,1),c}function J(a){return Vr.concat.apply(Vr,arguments)}function K(a){var b=a.length;if(b>0){for(var c=Array(b),d=0;b>d;d++)c[d]=a[d];return c}return[]}function L(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(h(d)){var e=a.length||0,f=d.length||0;a.length=e+f;for(var g=0;f>g;g++)a[e+g]=d[g]}else a.push(d)}}function M(a,b,c,d){Vr.splice.apply(a,N(arguments,1))}function N(a,b,c){return 2>=arguments.length?Vr.slice.call(a,b):Vr.slice.call(a,b,c)}function O(a,b){a.sort(b||Q)}function P(a,b){if(!h(a)||!h(b)||a.length!=b.length)return!1;for(var c=a.length,d=R,e=0;c>e;e++)if(!d(a[e],b[e]))return!1;return!0}function Q(a,b){return a>b?1:b>a?-1:0}function R(a,b){return a===b}function S(a){return-1!=Mr.indexOf(a)}function T(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function U(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function V(a){var b,c=0;for(b in a)c++;return c}function W(a){var b,c=[],d=0;for(b in a)c[d++]=a[b];return c}function X(a){var b,c=[],d=0;for(b in a)c[d++]=b;return c}function Y(a,b){return b in a}function Z(a){var b,c=bx;for(b in c)if(a.call(void 0,c[b],b,c))return b}function $(a){for(var b in a)return!1;return!0}function _(a){for(var b in a)delete a[b]}function aa(a,b){b in a&&delete a[b]}function ba(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function ca(a,b,c){return b in a?a[b]:c}function da(a,b){var c=[];return b in a?a[b]:a[b]=c}function ea(a){var b,c={};for(b in a)c[b]=a[b];return c}function fa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Zr.length;f++)c=Zr[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function ga(a){var b=arguments.length;if(1==b&&g(arguments[0]))return ga.apply(null,arguments[0]);for(var c={},d=0;b>d;d++)c[arguments[d]]=!0;return c}function ha(){var a=Hr.document;return a?a.documentMode:void 0}function ia(a){return hs[a]||(hs[a]=0<=x(gs,a))}function ja(a,b,c){return Math.min(Math.max(a,b),c)}function ka(a,b){var c=a%b;return 0>c*b?c+b:c}function la(a,b,c){return a+c*(b-a)}function ma(a){return a*Math.PI/180}function na(b){return function(c){return a(c)?[ja(c[0],b[0],b[2]),ja(c[1],b[1],b[3])]:void 0}}function oa(a){return a}function pa(a,b,c){var d=a.length;if(a[0]<=b)return 0;if(!(b<=a[d-1]))if(c>0){for(c=1;d>c;++c)if(a[c]<b)return c-1}else if(0>c){for(c=1;d>c;++c)if(a[c]<=b)return c}else for(c=1;d>c;++c){if(a[c]==b)return c;if(a[c]<b)return a[c-1]-b<b-a[c]?c-1:c}return d-1}function qa(b){return function(c,d,e){return a(c)?(c=pa(b,c,e),c=ja(c+d,0,b.length-1),b[c]):void 0}}function ra(b,c,d){return function(e,f,g){return a(e)?(g=g>0?0:0>g?1:.5,e=Math.floor(Math.log(c/e)/Math.log(b)+g),f=Math.max(e+f,0),a(d)&&(f=Math.min(f,d)),c/Math.pow(b,f)):void 0}}function sa(b){return a(b)?0:void 0}function ta(b,c){return a(b)?b+c:void 0}function ua(b){var c=2*Math.PI/b;return function(b,d){return a(b)?b=Math.floor((b+d)/c+.5)*c:void 0}}function va(){var b=ma(5);return function(c,d){return a(c)?Math.abs(c+d)<=b?0:c+d:void 0}}function wa(a,b,c){this.center=a,this.resolution=b,this.rotation=c}function xa(){0!=ps&&(qs[m(this)]=this),this.Sa=this.Sa,this.la=this.la}function ya(b,c){var d=q(za,c);b.la||(b.la=[]),b.la.push(a(void 0)?p(d,void 0):d)}function za(a){a&&"function"==typeof a.hc&&a.hc()}function Aa(a,b){this.type=a,this.b=this.target=b,this.f=!1,this.Zf=!0}function Ba(a){a.lb()}function Ca(a){a.preventDefault()}function Da(a){return Da[" "](a),a}function Ea(a,b){Aa.call(this,a?a.type:""),this.relatedTarget=this.b=this.target=null,this.i=this.e=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.n=this.d=this.c=this.o=!1,this.state=null,this.g=!1,this.a=null,a&&Fa(this,a,b)}function Fa(a,b,c){a.a=b;var d=a.type=b.type;if(a.target=b.target||b.srcElement,a.b=c,c=b.relatedTarget){if(as){var e;a:{try{Da(c.nodeName),e=!0;break a}catch(f){}e=!1}e||(c=null)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.relatedTarget=c,Object.defineProperties?Object.defineProperties(a,{offsetX:{configurable:!0,enumerable:!0,get:a.bf,set:a.hl},offsetY:{configurable:!0,enumerable:!0,get:a.cf,set:a.il}}):(a.offsetX=a.bf(),a.offsetY=a.cf()),a.clientX=void 0!==b.clientX?b.clientX:b.pageX,a.clientY=void 0!==b.clientY?b.clientY:b.pageY,a.screenX=b.screenX||0,a.screenY=b.screenY||0,a.button=b.button,a.e=b.keyCode||0,a.i=b.charCode||("keypress"==d?b.keyCode:0),a.o=b.ctrlKey,a.c=b.altKey,a.d=b.shiftKey,a.n=b.metaKey,a.g=cs?b.metaKey:b.ctrlKey,a.state=b.state,b.defaultPrevented&&a.preventDefault()}function Ga(a){return!((ms?0!=a.a.button:"click"==a.type?0:!(a.a.button&ss[0]))||bs&&cs&&a.o)}function Ha(a){return!(!a||!a[ts])}function Ia(a,b,c,d,e){this.Xb=a,this.a=null,this.src=b,this.type=c,this.vc=!!d,this.qd=e,this.key=++us,this.uc=this.Xc=!1}function Ja(a){a.uc=!0,a.Xb=null,a.a=null,a.src=null,a.qd=null}function Ka(a){this.src=a,this.a={},this.c=0}function La(a,b){var c=b.type;if(!(c in a.a))return!1;var d=I(a.a[c],b);return d&&(Ja(b),0==a.a[c].length&&(delete a.a[c],a.c--)),d}function Ma(a,b,c,d,e){return a=a.a[b.toString()],b=-1,a&&(b=Oa(a,c,d,e)),b>-1?a[b]:null}function Na(b,c,d){var e=a(c),f=e?c.toString():"",g=a(d);return U(b.a,function(a){for(var b=0;b<a.length;++b)if(!(e&&a[b].type!=f||g&&a[b].vc!=d))return!0;return!1})}function Oa(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.uc&&f.Xb==b&&f.vc==!!c&&f.qd==d)return e}return-1}function Pa(a,b,c,d,e){if(g(b)){for(var f=0;f<b.length;f++)Pa(a,b[f],c,d,e);return null}return c=$a(c),Ha(a)?a.La(b,c,d,e):Qa(a,b,c,!1,d,e)}function Qa(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=!!e,h=Za(a);return h||(a[vs]=h=new Ka(a)),c=h.add(b,c,d,e,f),c.a?c:(d=Ra(),c.a=d,d.src=a,d.Xb=c,a.addEventListener?a.addEventListener(b.toString(),d,g):a.attachEvent(Va(b.toString()),d),xs++,c)}function Ra(){var a=Ya,b=ns?function(c){return a.call(b.src,b.Xb,c)}:function(c){return c=a.call(b.src,b.Xb,c),c?void 0:c};return b}function Sa(a,b,c,d,e){if(g(b)){for(var f=0;f<b.length;f++)Sa(a,b[f],c,d,e);return null}return c=$a(c),Ha(a)?a.gb.add(String(b),c,!0,d,e):Qa(a,b,c,!0,d,e)}function Ta(a,b,c,d,e){if(g(b))for(var f=0;f<b.length;f++)Ta(a,b[f],c,d,e);else c=$a(c),Ha(a)?a.Fe(b,c,d,e):a&&(a=Za(a))&&(b=Ma(a,b,c,!!d,e))&&Ua(b)}function Ua(a){if(j(a)||!a||a.uc)return!1;var b=a.src;if(Ha(b))return La(b.gb,a);var c=a.type,d=a.a;return b.removeEventListener?b.removeEventListener(c,d,a.vc):b.detachEvent&&b.detachEvent(Va(c),d),xs--,(c=Za(b))?(La(c,a),0==c.c&&(c.src=null,b[vs]=null)):Ja(a),!0}function Va(a){return a in ws?ws[a]:ws[a]="on"+a}function Wa(a,b,c,d){var e=!0;if((a=Za(a))&&(b=a.a[b.toString()]))for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.vc==c&&!f.uc&&(f=Xa(f,d),e=e&&!1!==f)}return e}function Xa(a,b){var c=a.Xb,d=a.qd||a.src;return a.Xc&&Ua(a),c.call(d,b)}function Ya(a,b){if(a.uc)return!0;if(!ns){var c;if(!(c=b))a:{c=["window","event"];for(var d,e=Hr;d=c.shift();){if(null==e[d]){c=null;break a}e=e[d]}c=e}if(d=c,c=new Ea(d,this),e=!0,!(0>d.keyCode||void 0!=d.returnValue)){a:{var f=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){f=!0}(f||void 0==d.returnValue)&&(d.returnValue=!0)}for(d=[],f=c.b;f;f=f.parentNode)d.push(f);for(var f=a.type,h=d.length-1;!c.f&&h>=0;h--){c.b=d[h];var i=Wa(d[h],f,!0,c),e=e&&i}for(h=0;!c.f&&h<d.length;h++)c.b=d[h],i=Wa(d[h],f,!1,c),e=e&&i}return e}return Xa(a,new Ea(b,this))}function Za(a){return a=a[vs],a instanceof Ka?a:null}function $a(a){return k(a)?a:(a[ys]||(a[ys]=function(b){return a.handleEvent(b)}),a[ys])}function _a(a){return function(){return a}}function ab(a){return a}function bb(a){var b;return b=b||0,function(){return a.apply(this,Array.prototype.slice.call(arguments,0,b))}}function cb(a){var b=arguments,c=b.length;return function(){for(var a,d=0;c>d;d++)a=b[d].apply(this,arguments);return a}}function db(a){var b=arguments,c=b.length;return function(){for(var a=0;c>a;a++)if(!b[a].apply(this,arguments))return!1;return!0}}function eb(){xa.call(this),this.gb=new Ka(this),this.Ig=this,this.Vd=null}function fb(a,b,c,d){if(b=a.gb.a[String(b)],!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.uc&&g.vc==c){var h=g.Xb,i=g.qd||g.src;g.Xc&&La(a.gb,g),e=!1!==h.call(i,d)&&e}}return e&&0!=d.Zf}function gb(b,c,d){return Na(b.gb,a(c)?String(c):void 0,d)}function hb(){eb.call(this),this.c=0}function ib(a){Ua(a)}function jb(a,b,c){Aa.call(this,a),this.key=b,this.oldValue=c}function kb(a,b,c,d){this.source=a,this.target=b,this.b=c,this.c=d,this.d=this.a=ab}function lb(b){hb.call(this),m(this),this.o={},this.Ra={},this.ec={},a(b)&&this.G(b)}function mb(a){return Bs.hasOwnProperty(a)?Bs[a]:Bs[a]="change:"+a}function nb(b,c){var d=Cs.hasOwnProperty(c)?Cs[c]:Cs[c]="get"+(String(c.charAt(0)).toUpperCase()+String(c.substr(1)).toLowerCase()),d=ca(b,d);return a(d)?d.call(b):b.get(c)}function ob(a,b,c){var d;d=mb(b),a.dispatchEvent(new jb(d,b,c)),a.dispatchEvent(new jb("propertychange",b,c))}function pb(a,b){return a[0]+=b[0],a[1]+=b[1],a}function qb(a,b){var c=a[0],d=a[1],e=b[0],f=b[1],g=e[0],e=e[1],h=f[0],f=f[1],i=h-g,j=f-e,c=0===i&&0===j?0:(i*(c-g)+j*(d-e))/(i*i+j*j||0);return 0>=c||(c>=1?(g=h,e=f):(g+=c*i,e+=c*j)),[g,e]}function rb(a,b){var c=ka(a+180,360)-180,d=Math.abs(Math.round(3600*c));return Math.floor(d/3600)+"° "+Math.floor(d/60%60)+"′ "+Math.floor(d%60)+"″ "+b.charAt(0>c?1:0)}function sb(b,c,d){return a(b)?c.replace("{x}",b[0].toFixed(d)).replace("{y}",b[1].toFixed(d)):""}function tb(a,b){for(var c=!0,d=a.length-1;d>=0;--d)if(a[d]!=b[d]){c=!1;break}return c}function ub(a,b){var c=Math.cos(b),d=Math.sin(b),e=a[1]*c+a[0]*d;return a[0]=a[0]*c-a[1]*d,a[1]=e,a}function vb(a,b){var c=a[0]-b[0],d=a[1]-b[1];return c*c+d*d}function wb(a,b){return sb(a,"{x}, {y}",b)}function xb(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}function yb(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}function zb(a,b,c,d,e){a[0]=b,a[1]=c,a[2]=d,a[3]=e}function Ab(){var a=Array(16);return Cb(a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),a}function Bb(){var a=Array(16);return Cb(a,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),a}function Cb(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a[6]=h,a[7]=i,a[8]=j,a[9]=k,a[10]=l,a[11]=m,a[12]=n,a[13]=o,a[14]=p,a[15]=q}function Db(a,b){a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]}function Eb(a){a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1}function Fb(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14];a=a[15];var s=b[0],t=b[1],u=b[2],v=b[3],w=b[4],x=b[5],y=b[6],z=b[7],A=b[8],B=b[9],C=b[10],D=b[11],E=b[12],F=b[13],G=b[14];b=b[15],c[0]=d*s+h*t+l*u+p*v,c[1]=e*s+i*t+m*u+q*v,c[2]=f*s+j*t+n*u+r*v,c[3]=g*s+k*t+o*u+a*v,c[4]=d*w+h*x+l*y+p*z,c[5]=e*w+i*x+m*y+q*z,c[6]=f*w+j*x+n*y+r*z,c[7]=g*w+k*x+o*y+a*z,c[8]=d*A+h*B+l*C+p*D,c[9]=e*A+i*B+m*C+q*D,c[10]=f*A+j*B+n*C+r*D,c[11]=g*A+k*B+o*C+a*D,c[12]=d*E+h*F+l*G+p*b,c[13]=e*E+i*F+m*G+q*b,c[14]=f*E+j*F+n*G+r*b,c[15]=g*E+k*F+o*G+a*b}function Gb(a,b,c){var d=a[1]*b+a[5]*c+0*a[9]+a[13],e=a[2]*b+a[6]*c+0*a[10]+a[14],f=a[3]*b+a[7]*c+0*a[11]+a[15];a[12]=a[0]*b+a[4]*c+0*a[8]+a[12],a[13]=d,a[14]=e,a[15]=f}function Hb(a,b,c){Cb(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,1*a[8],1*a[9],1*a[10],1*a[11],a[12],a[13],a[14],a[15])}function Ib(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=Math.cos(b),l=Math.sin(b);a[0]=c*k+g*l,a[1]=d*k+h*l,a[2]=e*k+i*l,a[3]=f*k+j*l,a[4]=c*-l+g*k,a[5]=d*-l+h*k,a[6]=e*-l+i*k,a[7]=f*-l+j*k}function Jb(a){for(var b=Qb(),c=0,d=a.length;d>c;++c){var e=b,f=a[c];f[0]<e[0]&&(e[0]=f[0]),f[0]>e[2]&&(e[2]=f[0]),f[1]<e[1]&&(e[1]=f[1]),f[1]>e[3]&&(e[3]=f[1])}return b}function Kb(a,b,c){var d=Math.min.apply(null,a),e=Math.min.apply(null,b);return a=Math.max.apply(null,a),b=Math.max.apply(null,b),Rb(d,e,a,b,c)}function Lb(b,c,d){return a(d)?(d[0]=b[0]-c,d[1]=b[1]-c,d[2]=b[2]+c,d[3]=b[3]+c,d):[b[0]-c,b[1]-c,b[2]+c,b[3]+c]}function Mb(a,b,c){return b=b<a[0]?a[0]-b:a[2]<b?b-a[2]:0,a=c<a[1]?a[1]-c:a[3]<c?c-a[3]:0,b*b+a*a}function Nb(a,b){return a[0]<=b[0]&&b[2]<=a[2]&&a[1]<=b[1]&&b[3]<=a[3]}function Ob(a,b,c){return a[0]<=b&&b<=a[2]&&a[1]<=c&&c<=a[3]}function Pb(a,b){var c=a[1],d=a[2],e=a[3],f=b[0],g=b[1],h=0;return f<a[0]?h=16|h:f>d&&(h=4|h),c>g?h|=8:g>e&&(h|=2),0===h&&(h=1),h}function Qb(){return[1/0,1/0,-(1/0),-(1/0)]}function Rb(b,c,d,e,f){return a(f)?(f[0]=b,f[1]=c,f[2]=d,f[3]=e,f):[b,c,d,e]}function Sb(a,b){var c=a[0],d=a[1];return Rb(c,d,c,d,b)}function Tb(a,b){return a[0]==b[0]&&a[2]==b[2]&&a[1]==b[1]&&a[3]==b[3]}function Ub(a,b){return b[0]<a[0]&&(a[0]=b[0]),b[2]>a[2]&&(a[2]=b[2]),b[1]<a[1]&&(a[1]=b[1]),b[3]>a[3]&&(a[3]=b[3]),a}function Vb(a,b,c,d,e){for(;d>c;c+=e){var f=a,g=b[c],h=b[c+1];f[0]=Math.min(f[0],g),f[1]=Math.min(f[1],h),f[2]=Math.max(f[2],g),f[3]=Math.max(f[3],h)}return a}function Wb(a,b){var c;return(c=b.call(void 0,Xb(a)))||(c=b.call(void 0,Yb(a)))||(c=b.call(void 0,dc(a)))?c:(c=b.call(void 0,Yb(a)))?c:!1}function Xb(a){return[a[0],a[1]]}function Yb(a){return[a[2],a[1]]}function Zb(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function $b(a,b){var c;return"bottom-left"===b?c=Xb(a):"bottom-right"===b?c=Yb(a):"top-left"===b?c=cc(a):"top-right"===b&&(c=dc(a)),c}function _b(a,b,c,d){var e=b*d[0]/2;d=b*d[1]/2,b=Math.cos(c),c=Math.sin(c),e=[-e,-e,e,e],d=[-d,d,-d,d];var f,g,h;for(f=0;4>f;++f)g=e[f],h=d[f],e[f]=a[0]+g*b-h*c,d[f]=a[1]+g*c+h*b;return Kb(e,d,void 0)}function ac(a){return a[3]-a[1]}function bc(b,c,d){return d=a(d)?d:Qb(),fc(b,c)&&(d[0]=b[0]>c[0]?b[0]:c[0],d[1]=b[1]>c[1]?b[1]:c[1],d[2]=b[2]<c[2]?b[2]:c[2],d[3]=b[3]<c[3]?b[3]:c[3]),d}function cc(a){return[a[0],a[3]]}function dc(a){return[a[2],a[3]]}function ec(a){return a[2]-a[0]}function fc(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]}function gc(a){return a[2]<a[0]||a[3]<a[1]}function hc(b,c){return a(c)?(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c):b}function ic(a,b){var c=(a[2]-a[0])/2*(b-1),d=(a[3]-a[1])/2*(b-1);a[0]-=c,a[2]+=c,a[1]-=d,a[3]+=d}function jc(a,b,c){return a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]],b(a,a,2),Kb([a[0],a[2],a[4],a[6]],[a[1],a[3],a[5],a[7]],c)}function kc(a){this.radius=a}function lc(a,b){var c=ma(a[1]),d=ma(b[1]),e=(d-c)/2,f=ma(b[0]-a[0])/2,c=Math.sin(e)*Math.sin(e)+Math.sin(f)*Math.sin(f)*Math.cos(c)*Math.cos(d);return 2*Fs.radius*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function mc(b){this.a=b.code,this.c=b.units,this.g=a(b.extent)?b.extent:null,this.d=a(b.worldExtent)?b.worldExtent:null,this.b=a(b.axisOrientation)?b.axisOrientation:"enu",this.f=a(b.global)?b.global:!1,this.e=null}function nc(a){return a.b}function oc(a){rc(a),B(a,function(b){B(a,function(a){b!==a&&tc(b,a,Bc)})})}function pc(){var a=Xt,b=Bi,c=Ci;B(Zt,function(d){B(a,function(a){tc(d,a,b),tc(a,d,c)})})}function qc(a){Hs[a.a]=a,tc(a,a,Bc)}function rc(a){var b=[];B(a,function(a){b.push(qc(a))})}function sc(a){return null!=a?i(a)?wc(a):a:wc("EPSG:3857")}function tc(a,b,c){a=a.a,b=b.a,a in Is||(Is[a]={}),Is[a][b]=c}function uc(a,b,c,d){a=wc(a),b=wc(b),tc(a,b,vc(c)),tc(b,a,vc(d))}function vc(b){return function(c,d,e){var f=c.length;e=a(e)?e:2,d=a(d)?d:Array(f);var g,h;for(h=0;f>h;h+=e)for(g=b([c[h],c[h+1]]),d[h]=g[0],d[h+1]=g[1],g=e-1;g>=2;--g)d[h+g]=c[h+g];return d}}function wc(b){var c;if(b instanceof mc)c=b;else if(i(b)){if(c=Hs[b],!a(c)&&"function"==typeof proj4){var d=proj4.defs(b);if(a(d)){c=d.units,!a(c)&&a(d.to_meter)&&(c=d.to_meter.toString(),Gs[c]=d.to_meter),c=new mc({code:b,units:c,axisOrientation:d.axis}),qc(c);var e,f,g;for(e in Hs)f=proj4.defs(e),a(f)&&(g=wc(e),f===d?oc([g,c]):(f=proj4(e,b),uc(g,c,f.forward,f.inverse)))}else c=null}}else c=null;return c}function xc(a,b){return a===b?!0:a.c!=b.c?!1:zc(a,b)===Bc}function yc(a,b){var c=wc(a),d=wc(b);return zc(c,d)}function zc(b,c){var d,e=b.a,f=c.a;return e in Is&&f in Is[e]&&(d=Is[e][f]),a(d)||(d=Ac),d}function Ac(b,c){if(a(c)&&b!==c){for(var d=0,e=b.length;e>d;++d)c[d]=b[d];b=c}return b}function Bc(b,c){var d;if(a(c)){d=0;for(var e=b.length;e>d;++d)c[d]=b[d];d=c}else d=b.slice();return d}function Cc(a,b,c){return b=yc(b,c),jc(a,b)}function Dc(b){lb.call(this),b=a(b)?b:{},this.j=[0,0];var c={};c.center=a(b.center)?b.center:null,this.q=sc(b.projection);var d,e,f,g=a(b.minZoom)?b.minZoom:0;d=a(b.maxZoom)?b.maxZoom:28;var h=a(b.zoomFactor)?b.zoomFactor:2;if(a(b.resolutions))d=b.resolutions,e=d[0],f=d[d.length-1],d=qa(d);else{e=sc(b.projection),f=e.D();var i=(null===f?360*Gs.degrees/Gs[e.c]:Math.max(ec(f),ac(f)))/256/Math.pow(2,0),k=i/Math.pow(2,28);e=b.maxResolution,a(e)?g=0:e=i/Math.pow(h,g),f=b.minResolution,a(f)||(f=a(b.maxZoom)?a(b.maxResolution)?e/Math.pow(h,d):i/Math.pow(h,d):k),d=g+Math.floor(Math.log(e/f)/Math.log(h)),f=e/Math.pow(h,d-g),d=ra(h,e,d-g)}this.f=e,this.F=f,this.p=g,g=a(b.extent)?na(b.extent):oa,(a(b.enableRotation)?b.enableRotation:1)?(e=b.constrainRotation,e=a(e)&&!0!==e?!1===e?ta:j(e)?ua(e):ta:va()):e=sa,this.t=new wa(g,d,e),a(b.resolution)?c.resolution=b.resolution:a(b.zoom)&&(c.resolution=this.constrainResolution(this.f,b.zoom-this.p)),c.rotation=a(b.rotation)?b.rotation:0,this.G(c)}function Ec(a){var b=a.f,c=Math.log(b/a.F)/Math.log(2);return function(a){return b/Math.pow(2,a*c)}}function Fc(a){var b=a.f,c=Math.log(b/a.F)/Math.log(2);return function(a){return Math.log(b/a)/Math.log(2)/c}}function Gc(b){var c=b.a(),d=b.q,e=b.b();return b=b.e(),{center:c.slice(),projection:a(d)?d:null,resolution:e,rotation:a(b)?b:0}}function Hc(b){return null!=b.a()&&a(b.b())}function Ic(a,b){a.j[1]+=b}function Jc(a){return 1-Math.pow(1-a,3)}function Kc(a){return 3*a*a-2*a*a*a}function Lc(a){return a}function Mc(a){return.5>a?Kc(2*a):1-Kc(2*(a-.5))}function Nc(b){var c=b.source,d=a(b.start)?b.start:Kr(),e=c[0],f=c[1],g=a(b.duration)?b.duration:1e3,h=a(b.easing)?b.easing:Kc;return function(a,b){if(b.time<d)return b.animate=!0,b.viewHints[0]+=1,!0;if(b.time<d+g){var c=1-h((b.time-d)/g),i=e-b.viewState.center[0],j=f-b.viewState.center[1];return b.animate=!0,b.viewState.center[0]+=c*i,b.viewState.center[1]+=c*j,b.viewHints[0]+=1,!0}return!1}}function Oc(b){var c=a(b.rotation)?b.rotation:0,d=a(b.start)?b.start:Kr(),e=a(b.duration)?b.duration:1e3,f=a(b.easing)?b.easing:Kc,g=a(b.anchor)?b.anchor:null;return function(a,b){if(b.time<d)return b.animate=!0,b.viewHints[0]+=1,!0;if(b.time<d+e){var h=1-f((b.time-d)/e),h=(c-b.viewState.rotation)*h;if(b.animate=!0,b.viewState.rotation+=h,null!==g){var i=b.viewState.center;i[0]-=g[0],i[1]-=g[1],ub(i,h),pb(i,g)}return b.viewHints[0]+=1,!0}return!1}}function Pc(b){var c=b.resolution,d=a(b.start)?b.start:Kr(),e=a(b.duration)?b.duration:1e3,f=a(b.easing)?b.easing:Kc;return function(a,b){if(b.time<d)return b.animate=!0,b.viewHints[0]+=1,!0;if(b.time<d+e){var g=1-f((b.time-d)/e),h=c-b.viewState.resolution;return b.animate=!0,b.viewState.resolution+=g*h,b.viewHints[0]+=1,!0}return!1}}function Qc(b,c,d,e){return a(e)?(e[0]=b,e[1]=c,e[2]=d,e):[b,c,d]}function Rc(a,b,c){return a+"/"+b+"/"+c}function Sc(a){var b,c,d=a[0],e=Array(d),f=1<<d-1;for(b=0;d>b;++b)c=48,a[1]&f&&(c+=1),a[2]&f&&(c+=2),e[b]=String.fromCharCode(c),f>>=1;return e.join("")}function Tc(a){return Rc(a[0],a[1],a[2])}function Uc(a,b,c,d){this.a=a,this.d=b,this.b=c,this.c=d}function Vc(b,c,d,e,f){return a(f)?(f.a=b,f.d=c,f.b=d,f.c=e,f):new Uc(b,c,d,e)}function Wc(a,b){return a.a<=b.a&&b.d<=a.d&&a.b<=b.b&&b.c<=a.c}function Xc(a,b,c){return a.a<=b&&b<=a.d&&a.b<=c&&c<=a.c}function Yc(a,b){return a.a==b.a&&a.b==b.b&&a.d==b.d&&a.c==b.c}function Zc(b){this.c=b.html,this.a=a(b.tileRanges)?b.tileRanges:null}function $c(b,c){this.x=a(b)?b:0,this.y=a(c)?c:0}function _c(a,b){this.width=a,this.height=b}function ad(a){return a?new rd(od(a)):Lr||(Lr=new rd)}function bd(a){var b=document;return i(a)?b.getElementById(a):a}function cd(a,b){T(b,function(b,c){"style"==c?a.style.cssText=b:"class"==c?a.className=b:"for"==c?a.htmlFor=b:c in Ks?a.setAttribute(Ks[c],b):0==c.lastIndexOf("aria-",0)||0==c.lastIndexOf("data-",0)?a.setAttribute(c,b):a[c]=b})}function dd(a){return a=a.document.documentElement,new _c(a.clientWidth,a.clientHeight)}function ed(a,b,c){var d=arguments,e=document,f=d[0],h=d[1];if(!Js&&h&&(h.name||h.type)){if(f=["<",f],h.name&&f.push(' name="',u(h.name),'"'),h.type){f.push(' type="',u(h.type),'"');var j={};fa(j,h),delete j.type,h=j}f.push(">"),f=f.join("")}return f=e.createElement(f),h&&(i(h)?f.className=h:g(h)?f.className=h.join(" "):cd(f,h)),2<d.length&&fd(e,f,d,2),f}function fd(a,b,c,d){function e(c){c&&b.appendChild(i(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];!h(f)||l(f)&&0<f.nodeType?e(f):B(qd(f)?K(f):f,e)}}function gd(a){return document.createElement(a)}function hd(a,b){fd(od(a),a,arguments,1)}function id(a){for(var b;b=a.firstChild;)a.removeChild(b)}function jd(a,b){b.parentNode&&b.parentNode.insertBefore(a,b.nextSibling)}function kd(a,b,c){a.insertBefore(b,a.childNodes[c]||null)}function ld(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function md(a){if(void 0!=a.firstElementChild)a=a.firstElementChild;else for(a=a.firstChild;a&&1!=a.nodeType;)a=a.nextSibling;return a}function nd(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(16&a.compareDocumentPosition(b));for(;b&&a!=b;)b=b.parentNode;return b==a}function od(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function pd(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else id(a),a.appendChild(od(a).createTextNode(String(b)))}function qd(a){if(a&&"number"==typeof a.length){if(l(a))return"function"==typeof a.item||"string"==typeof a.item;if(k(a))return"function"==typeof a.item}return!1}function rd(a){this.a=a||Hr.document||document}function sd(){return!0}function td(a){var b=a.a;return a=bs?b.body||b.documentElement:b.documentElement,b=b.parentWindow||b.defaultView,_r&&ia("10")&&b.pageYOffset!=a.scrollTop?new $c(a.scrollLeft,a.scrollTop):new $c(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}function ud(b,c){var d=gd("CANVAS");return a(b)&&(d.width=b),a(c)&&(d.height=c),d.getContext("2d")}function vd(a,b){var c=a.style;c.WebkitTransform=b,c.MozTransform=b,c.a=b,c.msTransform=b,c.transform=b,_r&&!ls&&(a.style.transformOrigin="0 0")}function wd(b,c){var d;if(Os()){if(a(6)){var e=Array(16);for(d=0;16>d;++d)e[d]=c[d].toFixed(6);d=e.join(",")}else d=c.join(",");vd(b,"matrix3d("+d+")")}else if(Ns()){if(e=[c[0],c[1],c[4],c[5],c[12],c[13]],a(6)){var f=Array(6);for(d=0;6>d;++d)f[d]=e[d].toFixed(6);d=f.join(",")}else d=e.join(",");vd(b,"matrix("+d+")")}else b.style.left=Math.round(c[12])+"px",b.style.top=Math.round(c[13])+"px"}function xd(a,b){var c,d,e=Ps.length;for(d=0;e>d;++d)try{if(c=a.getContext(Ps[d],b),null!==c)return c}catch(f){}return null}function yd(a,b,c){Aa.call(this,a,c),this.element=b}function zd(a){lb.call(this),this.a=a||[],Ad(this)}function Ad(a){a.set("length",a.a.length)}function Bd(a){return g(a)?a:ft(a)}function Cd(a){if(!i(a)){var b=a[0];b!=(0|b)&&(b=b+.5|0);var c=a[1];c!=(0|c)&&(c=c+.5|0);var d=a[2];d!=(0|d)&&(d=d+.5|0),a="rgba("+b+","+c+","+d+","+a[3]+")"}return a}function Dd(b,c){var d=a(c)?c:[];return d[0]=ja(b[0]+.5|0,0,255),d[1]=ja(b[1]+.5|0,0,255),d[2]=ja(b[2]+.5|0,0,255),d[3]=ja(b[3],0,1),d}function Ed(){this.g=Ab(),this.c=void 0,this.a=Ab(),this.d=void 0,this.b=Ab(),this.f=void 0,this.e=Ab(),this.i=void 0,this.o=Ab()}function Fd(b,c,d,e,f){var g=!1;if(a(c)&&c!==b.c&&(g=b.a,Eb(g),g[12]=c,g[13]=c,g[14]=c,g[15]=1,b.c=c,g=!0),a(d)&&d!==b.d){g=b.b,Eb(g),g[0]=d,g[5]=d,g[10]=d,g[15]=1;var h=-.5*d+.5;g[12]=h,g[13]=h,g[14]=h,g[15]=1,b.d=d,g=!0}return a(e)&&e!==b.f&&(g=Math.cos(e),h=Math.sin(e),Cb(b.e,.213+.787*g-.213*h,.213-.213*g+.143*h,.213-.213*g-.787*h,0,.715-.715*g-.715*h,.715+.285*g+.14*h,.715-.715*g+.715*h,0,.072-.072*g+.928*h,.072-.072*g-.283*h,.072+.928*g+.072*h,0,0,0,0,1),b.f=e,g=!0),a(f)&&f!==b.i&&(Cb(b.o,.213+.787*f,.213-.213*f,.213-.213*f,0,.715-.715*f,.715+.285*f,.715-.715*f,0,.072-.072*f,.072-.072*f,.072+.928*f,0,0,0,0,1),b.i=f,g=!0),g&&(g=b.g,Eb(g),a(d)&&Fb(g,b.b,g),a(c)&&Fb(g,b.a,g),a(f)&&Fb(g,b.o,g),a(e)&&Fb(g,b.e,g)),b.g}function Gd(a){return a.classList?a.classList:(a=a.className,i(a)&&a.match(/\S+/g)||[])}function Hd(a,b){return a.classList?a.classList.contains(b):G(Gd(a),b)}function Id(a,b){a.classList?a.classList.add(b):Hd(a,b)||(a.className+=0<a.className.length?" "+b:b)}function Jd(a,b){a.classList?a.classList.remove(b):Hd(a,b)&&(a.className=C(Gd(a),function(a){return a!=b}).join(" "))}function Kd(a,b){Hd(a,b)?Jd(a,b):Id(a,b)}function Ld(a,b,c,d){this.top=a,this.right=b,this.bottom=c,this.left=d}function Md(a,b,c,d){this.left=a,this.top=b,this.width=c,this.height=d}function Nd(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}function Od(a,b){var c=od(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function Pd(a,b){return Od(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function Qd(a,b,c){var d,e=as&&(cs||Yr)&&ia("1.9");b instanceof $c?(d=b.x,b=b.y):(d=b,b=c),a.style.left=Ud(d,e),a.style.top=Ud(b,e)}function Rd(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}return _r&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop),b}function Sd(a){if(_r&&!(_r&&js>=8))return a.offsetParent;var b=od(a),c=Pd(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Pd(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}function Td(a){if(1==a.nodeType){var b;if(a.getBoundingClientRect)b=Rd(a),b=new $c(b.left,b.top);else{b=td(ad(a));var c,d,e=od(a),f=Pd(a,"position"),g=as&&e.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==f&&(c=e.getBoxObjectFor(a))&&(0>c.screenX||0>c.screenY),h=new $c(0,0);if(c=e?od(e):document,d=!_r||_r&&js>=9||sd(ad(c))?c.documentElement:c.body,a!=d)if(a.getBoundingClientRect)c=Rd(a),e=td(ad(e)),h.x=c.left+e.x,h.y=c.top+e.y;else if(e.getBoxObjectFor&&!g)c=e.getBoxObjectFor(a),e=e.getBoxObjectFor(d),h.x=c.screenX-e.screenX,h.y=c.screenY-e.screenY;else{c=a;do{if(h.x+=c.offsetLeft,h.y+=c.offsetTop,c!=a&&(h.x+=c.clientLeft||0,h.y+=c.clientTop||0),bs&&"fixed"==Pd(c,"position")){h.x+=e.body.scrollLeft,h.y+=e.body.scrollTop;break}c=c.offsetParent}while(c&&c!=a);for(($r||bs&&"absolute"==f)&&(h.y-=e.body.offsetTop),c=a;(c=Sd(c))&&c!=e.body&&c!=d;)h.x-=c.scrollLeft,$r&&"TR"==c.tagName||(h.y-=c.scrollTop)}b=new $c(h.x-b.x,h.y-b.y)}return as&&!ia(12)?(h=z(),h=void 0!==a.style[h]||(h=(bs?"Webkit":as?"Moz":_r?"ms":$r?"O":null)+A(h),void 0===a.style[h])?"transform":(bs?"-webkit":as?"-moz":_r?"-ms":$r?"-o":null)+"-transform",a=(a=Pd(a,h)||Pd(a,"transform"))&&(a=a.match(ht))?new $c(parseFloat(a[1]),parseFloat(a[2])):new $c(0,0),a=new $c(b.x+a.x,b.y+a.y)):a=b,a}return b=k(a.fh),h=a,a.targetTouches&&a.targetTouches.length?h=a.targetTouches[0]:b&&a.a.targetTouches&&a.a.targetTouches.length&&(h=a.a.targetTouches[0]),new $c(h.clientX,h.clientY)}function Ud(a,b){return"number"==typeof a&&(a=(b?Math.round(a):a)+"px"),a}function Vd(a){var b=Wd;if("none"!=Pd(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;return c.visibility="hidden",c.position="absolute",c.display="inline",a=b(a),c.display=d,c.position=f,c.visibility=e,a}function Wd(b){var c=b.offsetWidth,d=b.offsetHeight,e=bs&&!c&&!d;return a(c)&&!e||!b.getBoundingClientRect?new _c(c,d):(b=Rd(b),new _c(b.right-b.left,b.bottom-b.top))}function Xd(a,b){a.style.display=b?"":"none"}function Yd(a,b,c,d){if(/^\d+px?$/.test(b))return parseInt(b,10);var e=a.style[c],f=a.runtimeStyle[c];return a.runtimeStyle[c]=a.currentStyle[c],a.style[c]=b,b=a.style[d],a.style[c]=e,a.runtimeStyle[c]=f,b}function Zd(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Yd(a,c,"left","pixelLeft"):0}function $d(a,b){if(_r){var c=Zd(a,b+"Left"),d=Zd(a,b+"Right"),e=Zd(a,b+"Top"),f=Zd(a,b+"Bottom");return new Ld(e,d,f,c)}return c=Od(a,b+"Left"),d=Od(a,b+"Right"),e=Od(a,b+"Top"),f=Od(a,b+"Bottom"),new Ld(parseFloat(e),parseFloat(d),parseFloat(f),parseFloat(c))}function _d(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in gt?gt[c]:Yd(a,c,"left","pixelLeft")}function ae(a){if(_r&&!(_r&&js>=9)){var b=_d(a,"borderLeft"),c=_d(a,"borderRight"),d=_d(a,"borderTop");return a=_d(a,"borderBottom"),new Ld(d,c,a,b)}return b=Od(a,"borderLeftWidth"),c=Od(a,"borderRightWidth"),d=Od(a,"borderTopWidth"),a=Od(a,"borderBottomWidth"),new Ld(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}function be(b,c,d){Aa.call(this,b),this.map=c,this.frameState=a(d)?d:null}function ce(b){lb.call(this),this.element=a(b.element)?b.element:null,this.i=a(b.target)?bd(b.target):null,this.a=null,this.n=[],this.render=a(b.render)?b.render:c}function de(b){b=a(b)?b:{},this.q=gd("UL"),this.j=gd("LI"),this.q.appendChild(this.j),Xd(this.j,!1),this.b=a(b.collapsed)?b.collapsed:!0,this.f=a(b.collapsible)?b.collapsible:!0,this.f||(this.b=!1);var c=a(b.className)?b.className:"ol-attribution",d=a(b.tipLabel)?b.tipLabel:"Attributions";this.r=a(b.collapseLabel)?b.collapseLabel:"»",this.F=a(b.label)?b.label:"i",this.t=ed("SPAN",{},this.f&&!this.b?this.r:this.F),d=ed("BUTTON",{type:"button",title:d},this.t),Pa(d,"click",this.cj,!1,this),Pa(d,["mouseout",rs],function(){this.blur()},!1),c=ed("DIV",c+" ol-unselectable ol-control"+(this.b&&this.f?" ol-collapsed":"")+(this.f?"":" ol-uncollapsible"),this.q,d),ce.call(this,{element:c,render:a(b.render)?b.render:ee,target:b.target}),this.p=!0,this.g={},this.e={},this.J={}}function ee(b){if(b=b.frameState,null===b)this.p&&(Xd(this.element,!1),this.p=!1);else{var c,d,e,f,g,h,i,j,k,l=b.layerStatesArray,n=ea(b.attributions),o={};for(d=0,c=l.length;c>d;d++)if(e=l[d].layer.a(),null!==e&&(k=m(e).toString(),j=e.e,null!==j))for(e=0,f=j.length;f>e;e++)if(h=j[e],i=m(h).toString(),!(i in n)){g=b.usedTiles[k];var p;if(p=a(g))a:if(null===h.a)p=!0;else{var q=p=void 0,r=void 0,s=void 0;for(s in g)if(s in h.a)for(r=g[s],p=0,q=h.a[s].length;q>p;++p){var t=h.a[s][p];if(t.a<=r.d&&t.d>=r.a&&t.b<=r.c&&t.c>=r.b){p=!0;break a}}p=!1}p?(i in o&&delete o[i],n[i]=h):o[i]=h}c=[n,o],d=c[0],c=c[1];for(var u in this.g)u in d?(this.e[u]||(Xd(this.g[u],!0),this.e[u]=!0),delete d[u]):u in c?(this.e[u]&&(Xd(this.g[u],!1),delete this.e[u]),delete c[u]):(ld(this.g[u]),delete this.g[u],delete this.e[u]);for(u in d)k=gd("LI"),k.innerHTML=d[u].c,this.q.appendChild(k),this.g[u]=k,this.e[u]=!0;for(u in c)k=gd("LI"),k.innerHTML=c[u].c,Xd(k,!1),this.q.appendChild(k),this.g[u]=k;u=!$(this.e)||!$(b.logos),this.p!=u&&(Xd(this.element,u),this.p=u),u&&$(this.e)?Id(this.element,"ol-logo-only"):Jd(this.element,"ol-logo-only");var v;b=b.logos,u=this.J;for(v in u)v in b||(ld(u[v]),delete u[v]);for(var w in b)w in u||(v=new Image,v.src=w,d=b[w],""===d?d=v:(d=ed("A",{
href:d}),d.appendChild(v)),this.j.appendChild(d),u[w]=d);Xd(this.j,!$(b))}}function fe(a){Kd(a.element,"ol-collapsed"),pd(a.t,a.b?a.r:a.F),a.b=!a.b}function ge(b){b=a(b)?b:{};var c=a(b.className)?b.className:"ol-rotate";this.b=ed("SPAN","ol-compass",a(b.label)?b.label:"⇧");var d=ed("BUTTON",{"class":c+"-reset",type:"button",title:a(b.tipLabel)?b.tipLabel:"Reset rotation"},this.b);Pa(d,"click",ge.prototype.j,!1,this),Pa(d,["mouseout",rs],function(){this.blur()},!1),c=ed("DIV",c+" ol-unselectable ol-control",d),ce.call(this,{element:c,render:a(b.render)?b.render:he,target:b.target}),this.f=a(b.duration)?b.duration:250,this.e=a(b.autoHide)?b.autoHide:!0,this.g=void 0,this.e&&Id(this.element,"ol-hidden")}function he(a){if(a=a.frameState,null!==a){if(a=a.viewState.rotation,a!=this.g){var b="rotate("+180*a/Math.PI+"deg)";if(this.e){var c=this.element;0===a?Id(c,"ol-hidden"):Jd(c,"ol-hidden")}this.b.style.msTransform=b,this.b.style.webkitTransform=b,this.b.style.transform=b}this.g=a}}function ie(b){b=a(b)?b:{};var c=a(b.className)?b.className:"ol-zoom",d=a(b.delta)?b.delta:1,e=a(b.zoomOutLabel)?b.zoomOutLabel:"−",f=a(b.zoomOutTipLabel)?b.zoomOutTipLabel:"Zoom out",g=ed("BUTTON",{"class":c+"-in",type:"button",title:a(b.zoomInTipLabel)?b.zoomInTipLabel:"Zoom in"},a(b.zoomInLabel)?b.zoomInLabel:"+");Pa(g,"click",q(ie.prototype.e,d),!1,this),Pa(g,["mouseout",rs],function(){this.blur()},!1),e=ed("BUTTON",{"class":c+"-out",type:"button",title:f},e),Pa(e,"click",q(ie.prototype.e,-d),!1,this),Pa(e,["mouseout",rs],function(){this.blur()},!1),c=ed("DIV",c+" ol-unselectable ol-control",g,e),ce.call(this,{element:c,target:b.target}),this.b=a(b.duration)?b.duration:250}function je(b){b=a(b)?b:{};var c=new zd;return(a(b.zoom)?b.zoom:1)&&c.push(new ie(b.zoomOptions)),(a(b.rotate)?b.rotate:1)&&c.push(new ge(b.rotateOptions)),(a(b.attribution)?b.attribution:1)&&c.push(new de(b.attributionOptions)),c}function ke(){var a=ad().a,b=a.body;return!!(b.webkitRequestFullscreen||b.mozRequestFullScreen&&a.mozFullScreenEnabled||b.msRequestFullscreen&&a.msFullscreenEnabled||b.requestFullscreen&&a.fullscreenEnabled)}function le(a){a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen?a.msRequestFullscreen():a.requestFullscreen&&a.requestFullscreen()}function me(){var a=ad().a;return!!(a.webkitIsFullScreen||a.mozFullScreen||a.msFullscreenElement||a.fullscreenElement)}function ne(b){b=a(b)?b:{},this.b=a(b.className)?b.className:"ol-full-screen";var c=a(b.tipLabel)?b.tipLabel:"Toggle full-screen",c=ed("BUTTON",{"class":this.b+"-"+me(),type:"button",title:c});Pa(c,"click",this.g,!1,this),Pa(c,["mouseout",rs],function(){this.blur()},!1),Pa(Hr.document,it,this.e,!1,this);var d=this.b+" ol-unselectable ol-control "+(ke()?"":"ol-unsupported"),c=ed("DIV",d,c);ce.call(this,{element:c,target:b.target}),this.f=a(b.keys)?b.keys:!1}function oe(b){b=a(b)?b:{};var c=ed("DIV",a(b.className)?b.className:"ol-mouse-position");ce.call(this,{element:c,render:a(b.render)?b.render:pe,target:b.target}),Pa(this,mb("projection"),this.J,!1,this),a(b.coordinateFormat)&&this.r(b.coordinateFormat),a(b.projection)&&this.q(wc(b.projection)),this.Q=a(b.undefinedHTML)?b.undefinedHTML:"",this.j=c.innerHTML,this.f=this.e=this.b=null}function pe(a){a=a.frameState,null===a?this.b=null:this.b!=a.viewState.projection&&(this.b=a.viewState.projection,this.e=null),qe(this,this.f)}function qe(b,c){var d=b.Q;if(null!==c&&null!==b.b){if(null===b.e){var e=b.p();b.e=a(e)?zc(b.b,e):Ac}e=b.a.Ga(c),null!==e&&(b.e(e,e),d=b.g(),d=a(d)?d(e):e.toString())}a(b.j)&&d==b.j||(b.element.innerHTML=d,b.j=d)}function re(a){if("function"==typeof a.kb)return a.kb();if(i(a))return a.split("");if(h(a)){for(var b=[],c=a.length,d=0;c>d;d++)b.push(a[d]);return b}return W(a)}function se(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(h(a)||i(a))B(a,b,void 0);else{var c;if("function"==typeof a.I)c=a.I();else if("function"!=typeof a.kb)if(h(a)||i(a)){c=[];for(var d=a.length,e=0;d>e;e++)c.push(e)}else c=X(a);else c=void 0;for(var d=re(a),e=d.length,f=0;e>f;f++)b.call(void 0,d[f],c&&c[f],a)}}function te(a,b){this.c={},this.a=[],this.b=0;var c=arguments.length;if(c>1){if(c%2)throw Error("Uneven number of arguments");for(var d=0;c>d;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof te?(c=a.I(),d=a.kb()):(c=X(a),d=W(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}function ue(a){if(a.b!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];ve(a.c,d)&&(a.a[c++]=d),b++}a.a.length=c}if(a.b!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],ve(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}function ve(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function we(a){if(kt){kt=!1;var b=Hr.location;if(b){var c=b.href;if(c&&(c=(c=we(c)[3]||null)?decodeURI(c):c)&&c!=b.hostname)throw kt=!0,Error()}}return a.match(jt)}function xe(a){if(a[1]){var b=a[0],c=b.indexOf("#");c>=0&&(a.push(b.substr(c)),a[0]=b=b.substr(0,c)),c=b.indexOf("?"),0>c?a[1]="?":c==b.length-1&&(a[1]=void 0)}return a.join("")}function ye(a,b,c){if(g(b))for(var d=0;d<b.length;d++)ye(a,String(b[d]),c);else null!=b&&c.push("&",a,""===b?"":"=",encodeURIComponent(String(b)))}function ze(a,b){for(var c in b)ye(c,b[c],a);return a}function Ae(b,c){var d;b instanceof Ae?(this.Wb=a(c)?c:b.Wb,Be(this,b.Pb),this.cc=b.cc,this.pb=b.pb,Ce(this,b.sc),this.nb=b.nb,De(this,b.a.clone()),this.Tb=b.Tb):b&&(d=we(String(b)))?(this.Wb=!!c,Be(this,d[1]||"",!0),this.cc=Ge(d[2]||""),this.pb=Ge(d[3]||"",!0),Ce(this,d[4]),this.nb=Ge(d[5]||"",!0),De(this,d[6]||"",!0),this.Tb=Ge(d[7]||"")):(this.Wb=!!c,this.a=new Je(null,0,this.Wb))}function Be(a,b,c){a.Pb=c?Ge(b,!0):b,a.Pb&&(a.Pb=a.Pb.replace(/:$/,""))}function Ce(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.sc=b}else a.sc=null}function De(a,b,c){b instanceof Je?(a.a=b,Oe(a.a,a.Wb)):(c||(b=He(b,ot)),a.a=new Je(b,0,a.Wb))}function Ee(a){return a instanceof Ae?a.clone():new Ae(a,void 0)}function Fe(a,b){a instanceof Ae||(a=Ee(a)),b instanceof Ae||(b=Ee(b));var c=a,d=b,e=c.clone(),f=!!d.Pb;f?Be(e,d.Pb):f=!!d.cc,f?e.cc=d.cc:f=!!d.pb,f?e.pb=d.pb:f=null!=d.sc;var g=d.nb;if(f)Ce(e,d.sc);else if(f=!!d.nb)if("/"!=g.charAt(0)&&(c.pb&&!c.nb?g="/"+g:(c=e.nb.lastIndexOf("/"),-1!=c&&(g=e.nb.substr(0,c+1)+g))),c=g,".."==c||"."==c)g="";else if(-1!=c.indexOf("./")||-1!=c.indexOf("/.")){for(var g=0==c.lastIndexOf("/",0),c=c.split("/"),h=[],i=0;i<c.length;){var j=c[i++];"."==j?g&&i==c.length&&h.push(""):".."==j?((1<h.length||1==h.length&&""!=h[0])&&h.pop(),g&&i==c.length&&h.push("")):(h.push(j),g=!0)}g=h.join("/")}else g=c;return f?e.nb=g:f=""!==d.a.toString(),f?De(e,Ge(d.a.toString())):f=!!d.Tb,f&&(e.Tb=d.Tb),e}function Ge(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function He(a,b,c){return i(a)?(a=encodeURI(a).replace(b,Ie),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ie(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(15&a).toString(16)}function Je(a,b,c){this.a=a||null,this.c=!!c}function Ke(a){if(!a.da&&(a.da=new te,a.ta=0,a.a))for(var b=a.a.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=null,f=null;d>=0?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c],e=decodeURIComponent(e.replace(/\+/g," ")),e=Ne(a,e),a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}function Le(a,b){return Ke(a),b=Ne(a,b),ve(a.da.c,b)}function Me(a,b,c){a.remove(b),0<c.length&&(a.a=null,a.da.set(Ne(a,b),K(c)),a.ta+=c.length)}function Ne(a,b){var c=String(b);return a.c&&(c=c.toLowerCase()),c}function Oe(a,b){b&&!a.c&&(Ke(a),a.a=null,a.da.forEach(function(a,b){var c=b.toLowerCase();b!=c&&(this.remove(b),Me(this,c,a))},a)),a.c=b}function Pe(a,b,c){xa.call(this),this.d=a,this.b=c,this.a=b||window,this.c=p(this.Ye,this)}function Qe(a){if(null!=a.X){var b=Re(a),c=Se(a);b&&!c&&a.a.mozRequestAnimationFrame?Ua(a.X):b&&c?c.call(a.a,a.X):a.a.clearTimeout(a.X)}a.X=null}function Re(a){return a=a.a,a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||null}function Se(a){return a=a.a,a.cancelRequestAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||null}function Te(a){Hr.setTimeout(function(){throw a},0)}function Ue(a,b){var c=a;b&&(c=p(a,b)),c=rt(c),!k(Hr.setImmediate)||Hr.Window&&Hr.Window.prototype.setImmediate==Hr.setImmediate?(qt||(qt=Ve()),qt(c)):Hr.setImmediate(c)}function Ve(){var b=Hr.MessageChannel;if("undefined"==typeof b&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(b=function(){var a=document.createElement("iframe");a.style.display="none",a.src="",document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open(),a.write(""),a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=p(function(a){"*"!=d&&a.origin!=d||a.data!=c||this.port1.onmessage()},this);b.addEventListener("message",a,!1),this.port1={},this.port2={postMessage:function(){b.postMessage(c,d)}}}),"undefined"!=typeof b&&!S("Trident")&&!S("MSIE")){var c=new b,d={},e=d;return c.port1.onmessage=function(){if(a(d.next)){d=d.next;var b=d.Ue;d.Ue=null,b()}},function(a){e.next={Ue:a},e=e.next,c.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(a){var b=document.createElement("script");b.onreadystatechange=function(){b.onreadystatechange=null,b.parentNode.removeChild(b),b=null,a(),a=null},document.documentElement.appendChild(b)}:function(a){Hr.setTimeout(a,0)}}function We(){this.a=Kr()}function Xe(a){eb.call(this),this.Pc=a||window,this.ld=Pa(this.Pc,"resize",this.oi,!1,this),this.md=dd(this.Pc||window)}function Ye(a,b,c,d,e){if(!(_r||bs&&ia("525")))return!0;if(cs&&e)return Ze(a);if(e&&!d)return!1;if(j(b)&&(b=$e(b)),!c&&(17==b||18==b||cs&&91==b))return!1;if(bs&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(_r&&d&&b==a)return!1;switch(a){case 13:return!0;case 27:return!bs}return Ze(a)}function Ze(a){if(a>=48&&57>=a||a>=96&&106>=a||a>=65&&90>=a||bs&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function $e(a){if(as)a=_e(a);else if(cs&&bs)a:switch(a){case 93:a=91}return a}function _e(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}}function af(a,b){eb.call(this),a&&bf(this,a,b)}function bf(a,b,c){a.td&&cf(a),a.aa=b,a.sd=Pa(a.aa,"keypress",a,c),a.le=Pa(a.aa,"keydown",a.a,c,a),a.td=Pa(a.aa,"keyup",a.c,c,a)}function cf(a){a.sd&&(Ua(a.sd),Ua(a.le),Ua(a.td),a.sd=null,a.le=null,a.td=null),a.aa=null,a.Ka=-1,a.Gb=-1}function df(a,b,c,d){Ea.call(this,d),this.type="key",this.e=a,this.i=b}function ef(a,b){eb.call(this);var c=this.aa=a;(c=l(c)&&1==c.nodeType?this.aa:this.aa?this.aa.body:null)&&Pd(c,"direction"),this.a=Pa(this.aa,as?"DOMMouseScroll":"mousewheel",this,b)}function ff(a,b){return bs&&(cs||es)&&0!=a%b?a:a/b}function gf(a,b,c,d){Ea.call(this,b),this.type="mousewheel",this.detail=a,this.j=d}function hf(b,c,d){Aa.call(this,b),this.a=c,b=a(d)?d:{},this.buttons=jf(b),this.pressure=kf(b,this.buttons),this.bubbles=ca(b,"bubbles",!1),this.cancelable=ca(b,"cancelable",!1),this.view=ca(b,"view",null),this.detail=ca(b,"detail",null),this.screenX=ca(b,"screenX",0),this.screenY=ca(b,"screenY",0),this.clientX=ca(b,"clientX",0),this.clientY=ca(b,"clientY",0),this.button=ca(b,"button",0),this.relatedTarget=ca(b,"relatedTarget",null),this.pointerId=ca(b,"pointerId",0),this.width=ca(b,"width",0),this.height=ca(b,"height",0),this.pointerType=ca(b,"pointerType",""),this.isPrimary=ca(b,"isPrimary",!1),c.preventDefault&&(this.preventDefault=function(){c.preventDefault()})}function jf(a){if(a.buttons||wt)a=a.buttons;else switch(a.which){case 1:a=1;break;case 2:a=4;break;case 3:a=2;break;default:a=0}return a}function kf(a,b){var c=0;return c=a.pressure?a.pressure:b?.5:0}function lf(a,b){this.a=a,this.e=b}function mf(a){lf.call(this,a,{mousedown:this.yi,mousemove:this.zi,mouseup:this.Ci,mouseover:this.Bi,mouseout:this.Ai}),this.c=a.c,this.b=[]}function nf(a,b){for(var c,d=a.b,e=b.clientX,f=b.clientY,g=0,h=d.length;h>g&&(c=d[g]);g++){var i=Math.abs(f-c[1]);if(25>=Math.abs(e-c[0])&&25>=i)return!0}return!1}function of(a){var b=Af(a,a.a),c=b.preventDefault;return b.preventDefault=function(){a.preventDefault(),c()},b.pointerId=1,b.isPrimary=!0,b.pointerType="mouse",b}function pf(a){lf.call(this,a,{MSPointerDown:this.Hi,MSPointerMove:this.Ii,MSPointerUp:this.Li,MSPointerOut:this.Ji,MSPointerOver:this.Ki,MSPointerCancel:this.Gi,MSGotPointerCapture:this.Ei,MSLostPointerCapture:this.Fi}),this.c=a.c,this.b=["","unavailable","touch","pen","mouse"]}function qf(a,b){var c=b;return j(b.a.pointerType)&&(c=Af(b,b.a),c.pointerType=a.b[b.a.pointerType]),c}function rf(a){lf.call(this,a,{pointerdown:this.zk,pointermove:this.Ak,pointerup:this.Dk,pointerout:this.Bk,pointerover:this.Ck,pointercancel:this.yk,gotpointercapture:this.Ph,lostpointercapture:this.xi})}function sf(a,b){lf.call(this,a,{touchstart:this.vl,touchmove:this.ul,touchend:this.tl,touchcancel:this.sl}),this.c=a.c,this.g=b,this.b=void 0,this.f=0,this.d=void 0}function tf(a,b,c){return b=Af(b,c),b.pointerId=c.identifier+2,b.bubbles=!0,b.cancelable=!0,b.detail=a.f,b.button=0,b.buttons=1,b.width=c.webkitRadiusX||c.radiusX||0,b.height=c.webkitRadiusY||c.radiusY||0,b.pressure=c.webkitForce||c.force||.5,b.isPrimary=a.b===c.identifier,b.pointerType="touch",b.clientX=c.clientX,b.clientY=c.clientY,b.screenX=c.screenX,b.screenY=c.screenY,b}function uf(a,b,c){function d(){b.preventDefault()}var e,f,g=Array.prototype.slice.call(b.a.changedTouches),h=g.length;for(e=0;h>e;++e)f=tf(a,b,g[e]),f.preventDefault=d,c.call(a,b,f)}function vf(a,b){var c=a.g.b,d=b.a.changedTouches[0];if(a.b===d.identifier){var e=[d.clientX,d.clientY];c.push(e),Hr.setTimeout(function(){I(c,e)},2500)}}function wf(a){eb.call(this),this.aa=a,this.c={},this.b={},this.a=[],Xs?xf(this,new rf(this)):Ys?xf(this,new pf(this)):(a=new mf(this),xf(this,a),Ws&&xf(this,new sf(this,a))),a=this.a.length;for(var b,c=0;a>c;c++)b=this.a[c],yf(this,X(b.e))}function xf(a,b){var c=X(b.e);c&&(B(c,function(a){var c=b.e[a];c&&(this.b[a]=p(c,b))},a),a.a.push(b))}function yf(a,b){B(b,function(a){Pa(this.aa,a,this.d,!1,this)},a)}function zf(a,b){B(b,function(a){Ta(this.aa,a,this.d,!1,this)},a)}function Af(a,b){for(var c,d={},e=0,f=Gt.length;f>e;e++)c=Gt[e][0],d[c]=a[c]||b[c]||Gt[e][1];return d}function Bf(a,b,c){a.$b(b,c),b.target.contains(b.relatedTarget)||(b.bubbles=!1,Df(a,Et,b,c))}function Cf(a,b,c){b.bubbles=!0,Df(a,Bt,b,c),b.target.contains(b.relatedTarget)||(b.bubbles=!1,Df(a,Dt,b,c))}function Df(a,b,c,d){a.dispatchEvent(new hf(b,d,c))}function Ef(a,b){a.dispatchEvent(new hf(b.type,b,b.a))}function Ff(a,b,c,d){be.call(this,a,b,d),this.a=c,this.originalEvent=c.a,this.pixel=b.ad(this.originalEvent),this.coordinate=b.Ga(this.pixel)}function Gf(a,b,c,d){Ff.call(this,a,b,c.a,d),this.c=c}function Hf(a){eb.call(this),this.c=a,this.e=0,this.o=!1,this.f=this.g=this.b=null,a=this.c.b,this.j=0,this.n={},this.d=new wf(a),this.a=null,this.g=Pa(this.d,zt,this.ki,!1,this),this.i=Pa(this.d,yt,this.Tk,!1,this)}function If(a,b){var c;c=new Gf(It,a.c,b),a.dispatchEvent(c),0!==a.e?(Hr.clearTimeout(a.e),a.e=0,c=new Gf(Jt,a.c,b),a.dispatchEvent(c)):a.e=Hr.setTimeout(p(function(){this.e=0;var a=new Gf(Ht,this.c,b);this.dispatchEvent(a)},a),250)}function Jf(a,b){b.type==Nt||b.type==Ot?delete a.n[b.pointerId]:b.type==Mt&&(a.n[b.pointerId]=!0),a.j=V(a.n)}function Kf(b){hb.call(this),this.g=wc(b.projection),this.e=a(b.attributions)?b.attributions:null,this.r=b.logo,this.n=a(b.state)?b.state:"ready"}function Lf(a,b){a.n=b,a.l()}function Mf(b){lb.call(this);var c=ea(b);c.brightness=a(b.brightness)?b.brightness:0,c.contrast=a(b.contrast)?b.contrast:1,c.hue=a(b.hue)?b.hue:0,c.opacity=a(b.opacity)?b.opacity:1,c.saturation=a(b.saturation)?b.saturation:1,c.visible=a(b.visible)?b.visible:!0,c.maxResolution=a(b.maxResolution)?b.maxResolution:1/0,c.minResolution=a(b.minResolution)?b.minResolution:0,this.G(c)}function Nf(b){var c=b.d(),d=b.e(),e=b.f(),f=b.j(),g=b.n(),h=b.Ta(),i=b.b(),j=b.D(),k=b.g(),l=b.i();return{layer:b,brightness:a(c)?ja(c,-1,1):0,contrast:a(d)?Math.max(d,0):1,hue:a(e)?e:0,opacity:a(f)?ja(f,0,1):1,saturation:a(g)?Math.max(g,0):1,gc:h,visible:a(i)?!!i:!0,extent:j,maxResolution:a(k)?k:1/0,minResolution:a(l)?Math.max(l,0):0}}function Of(b){var c=ea(b);delete c.source,Mf.call(this,c),this.Ea=null,Pa(this,mb("source"),this.Yd,!1,this),this.ga(a(b.source)?b.source:null)}function Pf(a,b,c,d,e){eb.call(this),this.f=e,this.extent=a,this.e=c,this.resolution=b,this.state=d}function Qf(a,b){eb.call(this),this.a=a,this.state=b}function Rf(a){a.dispatchEvent("change")}function Sf(b){this.minZoom=a(b.minZoom)?b.minZoom:0,this.a=b.resolutions,this.maxZoom=this.a.length-1,this.d=a(b.origin)?b.origin:null,this.f=null,a(b.origins)&&(this.f=b.origins),this.c=null,a(b.tileSizes)&&(this.c=b.tileSizes),this.e=a(b.tileSize)?b.tileSize:null===this.c?256:void 0}function Tf(a,b,c,d){Xf(a,b[0],b[1],c,!1,Qt);var e=Qt[1],f=Qt[2];return Xf(a,b[2],b[3],c,!0,Qt),Vc(e,Qt[1],f,Qt[2],d)}function Uf(a,b,c,d){return Tf(a,b,a.ka(c),d)}function Vf(a,b){var c=a.Lb(b[0]),d=a.ka(b[0]),e=a.sa(b[0]);return[c[0]+(b[1]+.5)*e*d,c[1]+(b[2]+.5)*e*d]}function Wf(a,b,c){var d=a.Lb(b[0]),e=a.ka(b[0]);a=a.sa(b[0]);var f=d[0]+b[1]*a*e;return b=d[1]+b[2]*a*e,Rb(f,b,f+a*e,b+a*e,c)}function Xf(a,b,c,d,e,f){var g=pa(a.a,d,0),h=d/a.ka(g),i=a.Lb(g);return a=a.sa(g),b=h*(b-i[0])/(d*a),c=h*(c-i[1])/(d*a),e?(b=Math.ceil(b)-1,c=Math.ceil(c)-1):(b=Math.floor(b),c=Math.floor(c)),Qc(g,b,c,f)}function Yf(b,c,d){c=a(c)?c:42,d=a(d)?d:256,b=Math.max(ec(b)/d,ac(b)/d),c+=1,d=Array(c);for(var e=0;c>e;++e)d[e]=b/Math.pow(2,e);return d}function Zf(a){a=wc(a);var b=a.D();return null===b&&(a=180*Gs.degrees/a.ie(),b=Rb(-a,-a,a,a)),b}function $f(b){Kf.call(this,{attributions:b.attributions,extent:b.extent,logo:b.logo,projection:b.projection,state:b.state}),this.t=a(b.opaque)?b.opaque:!1,this.F=a(b.tilePixelRatio)?b.tilePixelRatio:1,this.tileGrid=a(b.tileGrid)?b.tileGrid:null}function _f(b,c){var d;if(null===b.tileGrid){if(d=c.e,null===d){d=Zf(c);var e=a(void 0)?void 0:256,f=a(void 0)?void 0:"bottom-left",g=Yf(d,void 0,e);d=new Sf({origin:$b(d,f),resolutions:g,tileSize:e}),c.e=d}}else d=b.tileGrid;return d}function ag(a,b){xa.call(this),this.b=a,this.a=b}function bg(a){var b=a.a;b.b()&&"ready"==b.Ta()&&a.b.e.render()}function cg(a,b){b.zd()&&a.postRenderFunctions.push(q(function(a,b,c){b=m(a).toString(),a.se(c.usedTiles[b])},b))}function dg(a,b){if(null!=b){var c,d,e;for(d=0,e=b.length;e>d;++d)c=b[d],a[m(c).toString()]=c}}function eg(b,c){var d=c.r;a(d)&&(i(d)?b.logos[d]="":l(d)&&(b.logos[d.src]=d.href))}function fg(a,b,c,d){b=m(b).toString(),c=c.toString(),b in a?c in a[b]?(a=a[b][c],d.a<a.a&&(a.a=d.a),d.d>a.d&&(a.d=d.d),d.b<a.b&&(a.b=d.b),d.c>a.c&&(a.c=d.c)):a[b][c]=d:(a[b]={},a[b][c]=d)}function gg(a,b,c,d){return function(e,f,g){return e=b.Fb(e,f,g,c,d),a(e)?e:null}}function hg(a,b,c){return[b*(Math.round(a[0]/b)+c[0]%2/2),b*(Math.round(a[1]/b)+c[1]%2/2)]}function ig(b,c,d,e,f,g,h,i,j,k){var l=m(c).toString();l in b.wantedTiles||(b.wantedTiles[l]={});var n=b.wantedTiles[l];b=b.tileQueue;var o,p,q,r,s,t,u=d.minZoom;for(a(i)||(i=0),t=h;t>=u;--t)for(p=Uf(d,g,t,p),q=d.ka(t),r=p.a;r<=p.d;++r)for(s=p.b;s<=p.c;++s)i>=h-t?(o=c.Fb(t,r,s,e,f),0==o.state&&(n[Tc(o.a)]=!0,o.mb()in b.b||yg(b,[o,l,Vf(d,o.a),q])),a(j)&&j.call(k,o)):c.He(t,r,s)}function jg(a){this.p=a.opacity,this.q=a.rotateWithView,this.i=a.rotation,this.n=a.scale,this.r=a.snapToPixel}function kg(b){b=a(b)?b:{},this.e=a(b.anchor)?b.anchor:[.5,.5],this.d=null,this.c=a(b.anchorOrigin)?b.anchorOrigin:"top-left",this.g=a(b.anchorXUnits)?b.anchorXUnits:"fraction",this.o=a(b.anchorYUnits)?b.anchorYUnits:"fraction";var c=a(b.crossOrigin)?b.crossOrigin:null,d=a(b.img)?b.img:null,e=b.src;a(e)&&0!==e.length||null===d||(e=d.src);var f=a(b.src)?0:2,g=mg.Ja(),h=g.get(e,c);null===h&&(h=new lg(d,e,c,f),g.set(e,c,h)),this.a=h,this.t=a(b.offset)?b.offset:[0,0],this.b=a(b.offsetOrigin)?b.offsetOrigin:"top-left",this.f=null,this.j=a(b.size)?b.size:null,jg.call(this,{opacity:a(b.opacity)?b.opacity:1,rotation:a(b.rotation)?b.rotation:0,scale:a(b.scale)?b.scale:1,snapToPixel:a(b.snapToPixel)?b.snapToPixel:!0,rotateWithView:a(b.rotateWithView)?b.rotateWithView:!1})}function lg(a,b,c,d){eb.call(this),this.e=null,this.a=null===a?new Image:a,null!==c&&(this.a.crossOrigin=c),this.d=null,this.b=d,this.c=null,this.f=b,this.o=!1}function mg(){this.a={},this.c=0}function ng(a,b,c,d,e,f,g,h){return Eb(a),0===b&&0===c||Gb(a,b,c),1==d&&1==e||Hb(a,d,e),0!==f&&Ib(a,f),0===g&&0===h||Gb(a,g,h),a}function og(a,b){return a[0]==b[0]&&a[1]==b[1]&&a[4]==b[4]&&a[5]==b[5]&&a[12]==b[12]&&a[13]==b[13]}function pg(a,b,c){var d=a[1],e=a[5],f=a[13],g=b[0];return b=b[1],c[0]=a[0]*g+a[4]*b+a[12],c[1]=d*g+e*b+f,c}function qg(a,b){xa.call(this),this.e=b,this.g=null,this.b={}}function rg(a){var b=a.viewState,c=a.coordinateToPixelMatrix;ng(c,a.size[0]/2,a.size[1]/2,1/b.resolution,-1/b.resolution,-b.rotation,-b.center[0],-b.center[1]),a=a.pixelToCoordinateMatrix;var b=c[0],d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],i=c[6],j=c[7],k=c[8],l=c[9],m=c[10],n=c[11],o=c[12],p=c[13],q=c[14],c=c[15],r=b*h-d*g,s=b*i-e*g,t=b*j-f*g,u=d*i-e*h,v=d*j-f*h,w=e*j-f*i,x=k*p-l*o,y=k*q-m*o,z=k*c-n*o,A=l*q-m*p,B=l*c-n*p,C=m*c-n*q,D=r*C-s*B+t*A+u*z-v*y+w*x;0!=D&&(D=1/D,a[0]=(h*C-i*B+j*A)*D,a[1]=(-d*C+e*B-f*A)*D,a[2]=(p*w-q*v+c*u)*D,a[3]=(-l*w+m*v-n*u)*D,a[4]=(-g*C+i*z-j*y)*D,a[5]=(b*C-e*z+f*y)*D,a[6]=(-o*w+q*t-c*s)*D,a[7]=(k*w-m*t+n*s)*D,a[8]=(g*B-h*z+j*x)*D,a[9]=(-b*B+d*z-f*x)*D,a[10]=(o*v-p*t+c*r)*D,a[11]=(-k*v+l*t-n*r)*D,a[12]=(-g*A+h*y-i*x)*D,a[13]=(b*A-d*y+e*x)*D,a[14]=(-o*u+p*s-q*r)*D,a[15]=(k*u-l*s+m*r)*D)}function sg(){var a=mg.Ja();if(32<a.c){var b,c,d=0;for(b in a.a){c=a.a[b];var e;(e=0===(3&d++))&&(Ha(c)?c=gb(c,void 0,void 0):(c=Za(c),c=!!c&&Na(c,void 0,void 0)),e=!c),e&&(delete a.a[b],--a.c)}}}function tg(a,b,c,d,e,f,g){var h,i=c.viewState,j=i.resolution,i=i.rotation;if(null!==a.g){var k={};if(h=ej(a.g,j,i,b,{},function(a){var b=m(a).toString();return b in k?void 0:(k[b]=!0,d.call(e,a,null))}))return h}var l,i=a.e.Eb().Da();for(l=i.length-1;l>=0;--l){h=i[l];var n=h.layer;if(h.visible&&j>=h.minResolution&&j<h.maxResolution&&f.call(g,n)&&(h=ug(a,n).Zb(b,c,d,e)))return h}}function ug(a,b){var c=m(b).toString();if(c in a.b)return a.b[c];var d=a.Yc(b);return a.b[c]=d}function vg(a,b){for(var c in a.b)if(!(c in b.layerStates)){b.postRenderFunctions.push(p(a.t,a));break}}function wg(a,b){this.f=a,this.e=b,this.a=[],this.c=[],this.b={}}function xg(a){var b=a.a,c=a.c,d=b[0];return 1==b.length?(b.length=0,c.length=0):(b[0]=b.pop(),c[0]=c.pop(),zg(a,0)),b=a.e(d),delete a.b[b],d}function yg(a,b){var c=a.f(b);1/0!=c&&(a.a.push(b),a.c.push(c),a.b[a.e(b)]=!0,Ag(a,0,a.a.length-1))}function zg(a,b){for(var c=a.a,d=a.c,e=c.length,f=c[b],g=d[b],h=b;e>>1>b;){var i=2*b+1,j=2*b+2,i=e>j&&d[j]<d[i]?j:i;c[b]=c[i],d[b]=d[i],b=i}c[b]=f,d[b]=g,Ag(a,h,b)}function Ag(a,b,c){var d=a.a;a=a.c;for(var e=d[c],f=a[c];c>b;){var g=c-1>>1;if(!(a[g]>f))break;d[c]=d[g],a[c]=a[g],c=g}d[c]=e,a[c]=f}function Bg(a){var b,c,d,e=a.f,f=a.a,g=a.c,h=0,i=f.length;for(c=0;i>c;++c)b=f[c],d=e(b),1/0==d?delete a.b[a.e(b)]:(g[h]=d,f[h++]=b);for(f.length=h,g.length=h,e=(a.a.length>>1)-1;e>=0;e--)zg(a,e)}function Cg(a,b){wg.call(this,function(b){return a.apply(null,b)},function(a){return a[0].mb()}),this.o=b,this.d=0}function Dg(a,b,c){this.d=a,this.b=b,this.f=c,this.a=[],this.c=this.e=0}function Eg(a,b){var c=a.d,d=a.c,e=a.b-d,f=Fg(a);return Nc({source:b,duration:f,easing:function(a){return d*(Math.exp(c*a*f)-1)/e}})}function Fg(a){return Math.log(a.b/a.c)/a.d}function Gg(a){lb.call(this),this.n=null,this.b(!0),this.handleEvent=a.handleEvent}function Hg(b,c,d,e,f){if(null!=d){var g=c.e(),h=c.a();a(g)&&a(h)&&a(f)&&f>0&&(b.Ua(Oc({rotation:g,duration:f,easing:Jc})),a(e)&&b.Ua(Nc({source:h,duration:f,easing:Jc}))),c.rotate(d,e)}}function Ig(a,b,c,d,e){var f=b.b();c=b.constrainResolution(f,c,0),Jg(a,b,c,d,e)}function Jg(b,c,d,e,f){if(null!=d){var g=c.b(),h=c.a();if(a(g)&&a(h)&&a(f)&&f>0&&(b.Ua(Pc({resolution:g,duration:f,easing:Jc})),a(e)&&b.Ua(Nc({source:h,duration:f,easing:Jc}))),null!=e){var i;b=c.a(),f=c.b(),a(b)&&a(f)&&(i=[e[0]-d*(e[0]-b[0])/f,e[1]-d*(e[1]-b[1])/f]),c.Oa(i)}c.d(d)}}function Kg(b){b=a(b)?b:{},this.d=a(b.delta)?b.delta:1,Gg.call(this,{handleEvent:Lg}),this.e=a(b.duration)?b.duration:250}function Lg(a){var b=!1,c=a.a;if(a.type==Jt){var b=a.map,d=a.coordinate,c=c.d?-this.d:this.d,e=b.a();Ig(b,e,c,d,this.e),a.preventDefault(),b=!0}return!b}function Mg(a){return a=a.a,a.c&&!a.g&&a.d}function Ng(a){return"mousemove"==a.originalEvent.type}function Og(a){return a.type==Ht}function Pg(a){return a=a.a,!a.c&&!a.g&&!a.d}function Qg(a){return a=a.a,!a.c&&!a.g&&a.d}function Rg(a){return a=a.a.target.tagName,"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a}function Sg(a){return 1==a.c.pointerId}function Tg(b){b=a(b)?b:{},Gg.call(this,{handleEvent:a(b.handleEvent)?b.handleEvent:Vg}),this.Da=a(b.handleDownEvent)?b.handleDownEvent:zs,this.oa=a(b.handleDragEvent)?b.handleDragEvent:c,this.Ea=a(b.handleMoveEvent)?b.handleMoveEvent:c,this.qa=a(b.handleUpEvent)?b.handleUpEvent:zs,this.p=!1,this.t={},this.e=[]}function Ug(a){for(var b=a.length,c=0,d=0,e=0;b>e;e++)c+=a[e].clientX,d+=a[e].clientY;return[c/b,d/b]}function Vg(a){if(!(a instanceof Gf))return!0;var b=!1,c=a.type;return(c===Mt||c===Kt||c===Nt)&&(c=a.c,a.type==Nt?delete this.t[c.pointerId]:a.type==Mt?this.t[c.pointerId]=c:c.pointerId in this.t&&(this.t[c.pointerId]=c),this.e=W(this.t)),this.p&&(a.type==Kt?this.oa(a):a.type==Nt&&(this.p=this.qa(a))),a.type==Mt?(this.p=a=this.Da(a),b=this.q(a)):a.type==Lt&&this.Ea(a),!b}function Wg(b){Tg.call(this,{handleDownEvent:Zg,handleDragEvent:Xg,handleUpEvent:Yg}),b=a(b)?b:{},this.d=b.kinetic,this.f=this.g=null,this.j=a(b.condition)?b.condition:Pg,this.i=!1}function Xg(a){var b=Ug(this.e);if(this.d&&this.d.update(b[0],b[1]),null!==this.f){var c=this.f[0]-b[0],d=b[1]-this.f[1];a=a.map;var e=a.a(),f=Gc(e),d=c=[c,d],g=f.resolution;d[0]*=g,d[1]*=g,ub(c,f.rotation),pb(c,f.center),c=e.i(c),a.render(),e.Oa(c)}this.f=b}function Yg(a){a=a.map;var b=a.a();if(0===this.e.length){var c;if(c=!this.i&&this.d)if(c=this.d,6>c.a.length)c=!1;else{var d=Kr()-c.f,e=c.a.length-3;if(c.a[e+2]<d)c=!1;else{for(var f=e-3;f>0&&c.a[f+2]>d;)f-=3;var d=c.a[e+2]-c.a[f+2],g=c.a[e]-c.a[f],e=c.a[e+1]-c.a[f+1];c.e=Math.atan2(e,g),c.c=Math.sqrt(g*g+e*e)/d,c=c.c>c.b}}return c&&(c=this.d,c=(c.b-c.c)/c.d,e=this.d.e,f=b.a(),this.g=Eg(this.d,f),a.Ua(this.g),f=a.f(f),c=a.Ga([f[0]-c*Math.cos(e),f[1]-c*Math.sin(e)]),c=b.i(c),b.Oa(c)),Ic(b,-1),a.render(),!1}return this.f=null,!0}function Zg(a){if(0<this.e.length&&this.j(a)){var b=a.map,c=b.a();return this.f=null,this.p||Ic(c,1),b.render(),null!==this.g&&I(b.F,this.g)&&(c.Oa(a.frameState.viewState.center),this.g=null),this.d&&(a=this.d,a.a.length=0,a.e=0,a.c=0),this.i=1<this.e.length,!0}return!1}function $g(b){b=a(b)?b:{},Tg.call(this,{handleDownEvent:bh,handleDragEvent:_g,handleUpEvent:ah}),this.f=a(b.condition)?b.condition:Mg,this.d=void 0}function _g(b){if(Sg(b)){var c=b.map,d=c.e();if(b=b.pixel,d=Math.atan2(d[1]/2-b[1],b[0]-d[0]/2),a(this.d)){b=d-this.d;var e=c.a(),f=Gc(e);c.render(),Hg(c,e,f.rotation-b)}this.d=d}}function ah(a){if(!Sg(a))return!0;a=a.map;var b=a.a();Ic(b,-1);var c=Gc(b).rotation,c=b.constrainRotation(c,0);return Hg(a,b,c,void 0,250),!1}function bh(a){return Sg(a)&&Ga(a.a)&&this.f(a)?(a=a.map,Ic(a.a(),1),a.render(),this.d=void 0,!0):!1}function ch(){hb.call(this),this.extent=void 0,this.g=-1,this.o={},this.j=this.i=0}function dh(b,c,d,e,f,g){var h=f[0],i=f[1],j=f[4],k=f[5],l=f[12];f=f[13];for(var m=a(g)?g:[],n=0;d>c;c+=e){var o=b[c],p=b[c+1];m[n++]=h*o+j*p+l,m[n++]=i*o+k*p+f}return a(g)&&m.length!=n&&(m.length=n),m}function eh(){ch.call(this),this.a="XY",this.s=2,this.k=null}function fh(a){return"XY"==a?2:"XYZ"==a||"XYM"==a?3:"XYZM"==a?4:void 0}function gh(a,b,c){a.s=fh(b),a.a=b,a.k=c}function hh(b,c,d,e){if(a(c))d=fh(c);else{for(c=0;e>c;++c){if(0===d.length)return b.a="XY",void(b.s=2);d=d[0]}d=d.length,c=2==d?"XY":3==d?"XYZ":4==d?"XYZM":void 0}b.a=c,b.s=d}function ih(a,b,c,d){for(var e=0,f=a[c-d],g=a[c-d+1];c>b;b+=d)var h=a[b],i=a[b+1],e=e+(g*h-f*i),f=h,g=i;return e/2}function jh(a,b,c,d){var e,f,g=0;for(e=0,f=c.length;f>e;++e){var h=c[e],g=g+ih(a,b,h,d);b=h}return g}function kh(a,b,c,d,e,f){var g=e-c,h=f-d;if(0!==g||0!==h){var i=((a-c)*g+(b-d)*h)/(g*g+h*h);i>1?(c=e,d=f):i>0&&(c+=g*i,d+=h*i)}return lh(a,b,c,d)}function lh(a,b,c,d){return a=c-a,b=d-b,a*a+b*b}function mh(a,b,c,d,e,f,g){var h=a[b],i=a[b+1],j=a[c]-h,k=a[c+1]-i;if(0!==j||0!==k)if(f=((e-h)*j+(f-i)*k)/(j*j+k*k),f>1)b=c;else if(f>0){for(e=0;d>e;++e)g[e]=la(a[b+e],a[c+e],f);return void(g.length=d)}for(e=0;d>e;++e)g[e]=a[b+e];g.length=d}function nh(a,b,c,d,e){var f=a[b],g=a[b+1];for(b+=d;c>b;b+=d){var h=a[b],i=a[b+1],f=lh(f,g,h,i);f>e&&(e=f),f=h,g=i}return e}function oh(a,b,c,d,e){var f,g;for(f=0,g=c.length;g>f;++f){var h=c[f];e=nh(a,b,h,d,e),b=h}return e}function ph(b,c,d,e,f,g,h,i,j,k,l){if(c==d)return k;var m;if(0===f){if(m=lh(h,i,b[c],b[c+1]),k>m){for(l=0;e>l;++l)j[l]=b[c+l];return j.length=e,m}return k}for(var n=a(l)?l:[NaN,NaN],o=c+e;d>o;)if(mh(b,o-e,o,e,h,i,n),m=lh(h,i,n[0],n[1]),k>m){for(k=m,l=0;e>l;++l)j[l]=n[l];j.length=e,o+=e}else o+=e*Math.max((Math.sqrt(m)-Math.sqrt(k))/f|0,1);if(g&&(mh(b,d-e,c,e,h,i,n),m=lh(h,i,n[0],n[1]),k>m)){for(k=m,l=0;e>l;++l)j[l]=n[l];j.length=e}return k}function qh(b,c,d,e,f,g,h,i,j,k,l){l=a(l)?l:[NaN,NaN];var m,n;for(m=0,n=d.length;n>m;++m){var o=d[m];k=ph(b,c,o,e,f,g,h,i,j,k,l),c=o}return k}function rh(a,b){var c,d,e=0;for(c=0,d=b.length;d>c;++c)a[e++]=b[c];return e}function sh(a,b,c,d){var e,f;for(e=0,f=c.length;f>e;++e){var g,h=c[e];for(g=0;d>g;++g)a[b++]=h[g]}return b}function th(b,c,d,e,f){f=a(f)?f:[];var g,h,i=0;for(g=0,h=d.length;h>g;++g)c=sh(b,c,d[g],e),f[i++]=c;return f.length=i,f}function uh(b,c,d,e,f){f=a(f)?f:[];for(var g=0;d>c;c+=e)f[g++]=b.slice(c,c+e);return f.length=g,f}function vh(b,c,d,e,f){f=a(f)?f:[];var g,h,i=0;for(g=0,h=d.length;h>g;++g){var j=d[g];f[i++]=uh(b,c,j,e,f[i]),c=j}return f.length=i,f}function wh(a,b,c,d,e,f,g){var h=(c-b)/d;if(3>h){for(;c>b;b+=d)f[g++]=a[b],f[g++]=a[b+1];return g}var i=Array(h);i[0]=1,i[h-1]=1,c=[b,c-d];for(var j,k=0;0<c.length;){var l=c.pop(),m=c.pop(),n=0,o=a[m],p=a[m+1],q=a[l],r=a[l+1];for(j=m+d;l>j;j+=d){var s=kh(a[j],a[j+1],o,p,q,r);s>n&&(k=j,n=s)}n>e&&(i[(k-b)/d]=1,k>m+d&&c.push(m,k),l>k+d&&c.push(k,l))}for(j=0;h>j;++j)i[j]&&(f[g++]=a[b+j*d],f[g++]=a[b+j*d+1]);return g}function xh(a,b,c,d,e,f,g,h){var i,j;for(i=0,j=c.length;j>i;++i){var k=c[i];a:{var l=a,m=k,n=d,o=e,p=f;if(b!=m){var q=o*Math.round(l[b]/o),r=o*Math.round(l[b+1]/o);b+=n,p[g++]=q,p[g++]=r;var s=void 0,t=void 0;do if(s=o*Math.round(l[b]/o),t=o*Math.round(l[b+1]/o),b+=n,b==m){p[g++]=s,p[g++]=t;break a}while(s==q&&t==r);for(;m>b;){var u,v;if(u=o*Math.round(l[b]/o),v=o*Math.round(l[b+1]/o),b+=n,u!=s||v!=t){var w=s-q,x=t-r,y=u-q,z=v-r;w*z==x*y&&(0>w&&w>y||w==y||w>0&&y>w)&&(0>x&&x>z||x==z||x>0&&z>x)||(p[g++]=s,p[g++]=t,q=s,r=t),s=u,t=v}}p[g++]=s,p[g++]=t}}h.push(g),b=k}return g}function yh(a,b){eh.call(this),this.b=this.n=-1,this.U(a,b)}function zh(a,b,c){gh(a,b,c),a.l()}function Ah(a,b){eh.call(this),this.U(a,b)}function Bh(a,b,c){gh(a,b,c),a.l()}function Ch(a,b,c,d,e){return!Wb(e,function(e){return!Dh(a,b,c,d,e[0],e[1])})}function Dh(a,b,c,d,e,f){for(var g=!1,h=a[c-d],i=a[c-d+1];c>b;b+=d){var j=a[b],k=a[b+1];i>f!=k>f&&(j-h)*(f-i)/(k-i)+h>e&&(g=!g),h=j,i=k}return g}function Eh(a,b,c,d,e,f){if(0===c.length||!Dh(a,b,c[0],d,e,f))return!1;
var g;for(b=1,g=c.length;g>b;++b)if(Dh(a,c[b-1],c[b],d,e,f))return!1;return!0}function Fh(b,c,d,e,f,g,h){var i,j,k,l,m,n=f[g+1],o=[],p=d[0];for(k=b[p-e],m=b[p-e+1],i=c;p>i;i+=e)l=b[i],j=b[i+1],(m>=n&&n>=j||n>=m&&j>=n)&&(k=(n-m)/(j-m)*(l-k)+k,o.push(k)),k=l,m=j;for(p=NaN,m=-(1/0),o.sort(),k=o[0],i=1,j=o.length;j>i;++i){l=o[i];var q=Math.abs(l-k);q>m&&(k=(k+l)/2,Eh(b,c,d,e,k,n)&&(p=k,m=q)),k=l}return isNaN(p)&&(p=f[g]),a(h)?(h.push(p,n),h):[p,n]}function Gh(a,b,c,d,e){for(var f,g=[a[b],a[b+1]],h=[];c>b+d;b+=d){if(h[0]=a[b+d],h[1]=a[b+d+1],f=e(g,h))return f;g[0]=h[0],g[1]=h[1]}return!1}function Hh(a,b,c,d,e){var f=Vb(Qb(),a,b,c,d);return fc(e,f)?Nb(e,f)||f[0]>=e[0]&&f[2]<=e[2]||f[1]>=e[1]&&f[3]<=e[3]?!0:Gh(a,b,c,d,function(a,b){var c=!1,d=Pb(e,a),f=Pb(e,b);if(1===d||1===f)c=!0;else{var g=e[0],h=e[1],i=e[2],j=e[3],k=b[0],l=b[1],m=(l-a[1])/(k-a[0]);2&f&&!(2&d)?(h=k-(l-j)/m,c=h>=g&&i>=h):4&f&&!(4&d)?(g=l-(k-i)*m,c=g>=h&&j>=g):8&f&&!(8&d)?(h=k-(l-h)/m,c=h>=g&&i>=h):16&f&&!(16&d)&&(g=l-(k-g)*m,c=g>=h&&j>=g)}return c}):!1}function Ih(a,b,c,d,e){var f=c[0];if(!(Hh(a,b,f,d,e)||Dh(a,b,f,d,e[0],e[1])||Dh(a,b,f,d,e[0],e[3])||Dh(a,b,f,d,e[2],e[1])||Dh(a,b,f,d,e[2],e[3])))return!1;if(1===c.length)return!0;for(b=1,f=c.length;f>b;++b)if(Ch(a,c[b-1],c[b],d,e))return!1;return!0}function Jh(a,b,c,d){for(var e=0,f=a[c-d],g=a[c-d+1];c>b;b+=d)var h=a[b],i=a[b+1],e=e+(h-f)*(i+g),f=h,g=i;return e>0}function Kh(a,b,c){var d,e,f=0;for(d=0,e=b.length;e>d;++d){var g=b[d],f=Jh(a,f,g,c);if(0===d?!f:f)return!1;f=g}return!0}function Lh(a,b,c,d){var e,f;for(e=0,f=c.length;f>e;++e){var g=c[e],h=Jh(a,b,g,d);if(0===e?!h:h)for(var h=a,i=g,j=d;i-j>b;){var k;for(k=0;j>k;++k){var l=h[b+k];h[b+k]=h[i-j+k],h[i-j+k]=l}b+=j,i-=j}b=g}return b}function Mh(a,b){eh.call(this),this.b=[],this.p=-1,this.q=null,this.F=this.r=this.t=-1,this.n=null,this.U(a,b)}function Nh(a){if(a.p!=a.c){var b=Zb(a.D());a.q=Fh(Oh(a),0,a.b,a.s,b,0),a.p=a.c}return a.q}function Oh(a){if(a.F!=a.c){var b=a.k;Kh(b,a.b,a.s)?a.n=b:(a.n=b.slice(),a.n.length=Lh(a.n,0,a.b,a.s)),a.F=a.c}return a.n}function Ph(a,b,c,d){gh(a,b,c),a.b=d,a.l()}function Qh(b,c,d,e){var f=a(e)?e:32;e=[];var g;for(g=0;f>g;++g)L(e,b.offset(c,d,2*Math.PI*g/f));return e.push(e[0],e[1]),b=new Mh(null),Ph(b,"XY",e,[e.length]),b}function Rh(a,b,c,d,e,f,g){Aa.call(this,a,b),this.vectorContext=c,this.a=d,this.frameState=e,this.context=f,this.glContext=g}function Sh(a){this.b=this.c=this.e=this.d=this.a=null,this.f=a}function Th(a){var b=a.e,c=a.c;return a=D([b,[b[0],c[1]],c,[c[0],b[1]]],a.a.Ga,a.a),a[4]=a[0].slice(),new Mh([a])}function Uh(a){null===a.a||null===a.e||null===a.c||a.a.render()}function Vh(a,b){Aa.call(this,a),this.coordinate=b}function Wh(b){Tg.call(this,{handleDownEvent:Zh,handleDragEvent:Xh,handleUpEvent:Yh}),b=a(b)?b:{},this.f=new Sh(a(b.style)?b.style:null),this.d=null,this.i=a(b.condition)?b.condition:As}function Xh(a){if(Sg(a)){var b=this.f;a=a.pixel,b.e=this.d,b.c=a,b.b=Th(b),Uh(b)}}function Yh(a){if(!Sg(a))return!0;this.f.setMap(null);var b=a.pixel[0]-this.d[0],c=a.pixel[1]-this.d[1];return b*b+c*c>=64&&(this.g(a),this.dispatchEvent(new Vh("boxend",a.coordinate))),!1}function Zh(a){if(Sg(a)&&Ga(a.a)&&this.i(a)){this.d=a.pixel,this.f.setMap(a.map);var b=this.f,c=this.d;return b.e=this.d,b.c=c,b.b=Th(b),Uh(b),this.dispatchEvent(new Vh("boxstart",a.coordinate)),!0}return!1}function $h(){this.c=-1}function _h(){this.c=-1,this.c=64,this.a=Array(4),this.e=Array(this.c),this.d=this.b=0,this.a[0]=1732584193,this.a[1]=4023233417,this.a[2]=2562383102,this.a[3]=271733878,this.d=this.b=0}function ai(a,b,c){c||(c=0);var d=Array(16);if(i(b))for(var e=0;16>e;++e)d[e]=b.charCodeAt(c++)|b.charCodeAt(c++)<<8|b.charCodeAt(c++)<<16|b.charCodeAt(c++)<<24;else for(e=0;16>e;++e)d[e]=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;b=a.a[0],c=a.a[1];var e=a.a[2],f=a.a[3],g=0,g=b+(f^c&(e^f))+d[0]+3614090360&4294967295;b=c+(g<<7&4294967295|g>>>25),g=f+(e^b&(c^e))+d[1]+3905402710&4294967295,f=b+(g<<12&4294967295|g>>>20),g=e+(c^f&(b^c))+d[2]+606105819&4294967295,e=f+(g<<17&4294967295|g>>>15),g=c+(b^e&(f^b))+d[3]+3250441966&4294967295,c=e+(g<<22&4294967295|g>>>10),g=b+(f^c&(e^f))+d[4]+4118548399&4294967295,b=c+(g<<7&4294967295|g>>>25),g=f+(e^b&(c^e))+d[5]+1200080426&4294967295,f=b+(g<<12&4294967295|g>>>20),g=e+(c^f&(b^c))+d[6]+2821735955&4294967295,e=f+(g<<17&4294967295|g>>>15),g=c+(b^e&(f^b))+d[7]+4249261313&4294967295,c=e+(g<<22&4294967295|g>>>10),g=b+(f^c&(e^f))+d[8]+1770035416&4294967295,b=c+(g<<7&4294967295|g>>>25),g=f+(e^b&(c^e))+d[9]+2336552879&4294967295,f=b+(g<<12&4294967295|g>>>20),g=e+(c^f&(b^c))+d[10]+4294925233&4294967295,e=f+(g<<17&4294967295|g>>>15),g=c+(b^e&(f^b))+d[11]+2304563134&4294967295,c=e+(g<<22&4294967295|g>>>10),g=b+(f^c&(e^f))+d[12]+1804603682&4294967295,b=c+(g<<7&4294967295|g>>>25),g=f+(e^b&(c^e))+d[13]+4254626195&4294967295,f=b+(g<<12&4294967295|g>>>20),g=e+(c^f&(b^c))+d[14]+2792965006&4294967295,e=f+(g<<17&4294967295|g>>>15),g=c+(b^e&(f^b))+d[15]+1236535329&4294967295,c=e+(g<<22&4294967295|g>>>10),g=b+(e^f&(c^e))+d[1]+4129170786&4294967295,b=c+(g<<5&4294967295|g>>>27),g=f+(c^e&(b^c))+d[6]+3225465664&4294967295,f=b+(g<<9&4294967295|g>>>23),g=e+(b^c&(f^b))+d[11]+643717713&4294967295,e=f+(g<<14&4294967295|g>>>18),g=c+(f^b&(e^f))+d[0]+3921069994&4294967295,c=e+(g<<20&4294967295|g>>>12),g=b+(e^f&(c^e))+d[5]+3593408605&4294967295,b=c+(g<<5&4294967295|g>>>27),g=f+(c^e&(b^c))+d[10]+38016083&4294967295,f=b+(g<<9&4294967295|g>>>23),g=e+(b^c&(f^b))+d[15]+3634488961&4294967295,e=f+(g<<14&4294967295|g>>>18),g=c+(f^b&(e^f))+d[4]+3889429448&4294967295,c=e+(g<<20&4294967295|g>>>12),g=b+(e^f&(c^e))+d[9]+568446438&4294967295,b=c+(g<<5&4294967295|g>>>27),g=f+(c^e&(b^c))+d[14]+3275163606&4294967295,f=b+(g<<9&4294967295|g>>>23),g=e+(b^c&(f^b))+d[3]+4107603335&4294967295,e=f+(g<<14&4294967295|g>>>18),g=c+(f^b&(e^f))+d[8]+1163531501&4294967295,c=e+(g<<20&4294967295|g>>>12),g=b+(e^f&(c^e))+d[13]+2850285829&4294967295,b=c+(g<<5&4294967295|g>>>27),g=f+(c^e&(b^c))+d[2]+4243563512&4294967295,f=b+(g<<9&4294967295|g>>>23),g=e+(b^c&(f^b))+d[7]+1735328473&4294967295,e=f+(g<<14&4294967295|g>>>18),g=c+(f^b&(e^f))+d[12]+2368359562&4294967295,c=e+(g<<20&4294967295|g>>>12),g=b+(c^e^f)+d[5]+4294588738&4294967295,b=c+(g<<4&4294967295|g>>>28),g=f+(b^c^e)+d[8]+2272392833&4294967295,f=b+(g<<11&4294967295|g>>>21),g=e+(f^b^c)+d[11]+1839030562&4294967295,e=f+(g<<16&4294967295|g>>>16),g=c+(e^f^b)+d[14]+4259657740&4294967295,c=e+(g<<23&4294967295|g>>>9),g=b+(c^e^f)+d[1]+2763975236&4294967295,b=c+(g<<4&4294967295|g>>>28),g=f+(b^c^e)+d[4]+1272893353&4294967295,f=b+(g<<11&4294967295|g>>>21),g=e+(f^b^c)+d[7]+4139469664&4294967295,e=f+(g<<16&4294967295|g>>>16),g=c+(e^f^b)+d[10]+3200236656&4294967295,c=e+(g<<23&4294967295|g>>>9),g=b+(c^e^f)+d[13]+681279174&4294967295,b=c+(g<<4&4294967295|g>>>28),g=f+(b^c^e)+d[0]+3936430074&4294967295,f=b+(g<<11&4294967295|g>>>21),g=e+(f^b^c)+d[3]+3572445317&4294967295,e=f+(g<<16&4294967295|g>>>16),g=c+(e^f^b)+d[6]+76029189&4294967295,c=e+(g<<23&4294967295|g>>>9),g=b+(c^e^f)+d[9]+3654602809&4294967295,b=c+(g<<4&4294967295|g>>>28),g=f+(b^c^e)+d[12]+3873151461&4294967295,f=b+(g<<11&4294967295|g>>>21),g=e+(f^b^c)+d[15]+530742520&4294967295,e=f+(g<<16&4294967295|g>>>16),g=c+(e^f^b)+d[2]+3299628645&4294967295,c=e+(g<<23&4294967295|g>>>9),g=b+(e^(c|~f))+d[0]+4096336452&4294967295,b=c+(g<<6&4294967295|g>>>26),g=f+(c^(b|~e))+d[7]+1126891415&4294967295,f=b+(g<<10&4294967295|g>>>22),g=e+(b^(f|~c))+d[14]+2878612391&4294967295,e=f+(g<<15&4294967295|g>>>17),g=c+(f^(e|~b))+d[5]+4237533241&4294967295,c=e+(g<<21&4294967295|g>>>11),g=b+(e^(c|~f))+d[12]+1700485571&4294967295,b=c+(g<<6&4294967295|g>>>26),g=f+(c^(b|~e))+d[3]+2399980690&4294967295,f=b+(g<<10&4294967295|g>>>22),g=e+(b^(f|~c))+d[10]+4293915773&4294967295,e=f+(g<<15&4294967295|g>>>17),g=c+(f^(e|~b))+d[1]+2240044497&4294967295,c=e+(g<<21&4294967295|g>>>11),g=b+(e^(c|~f))+d[8]+1873313359&4294967295,b=c+(g<<6&4294967295|g>>>26),g=f+(c^(b|~e))+d[15]+4264355552&4294967295,f=b+(g<<10&4294967295|g>>>22),g=e+(b^(f|~c))+d[6]+2734768916&4294967295,e=f+(g<<15&4294967295|g>>>17),g=c+(f^(e|~b))+d[13]+1309151649&4294967295,c=e+(g<<21&4294967295|g>>>11),g=b+(e^(c|~f))+d[4]+4149444226&4294967295,b=c+(g<<6&4294967295|g>>>26),g=f+(c^(b|~e))+d[11]+3174756917&4294967295,f=b+(g<<10&4294967295|g>>>22),g=e+(b^(f|~c))+d[2]+718787259&4294967295,e=f+(g<<15&4294967295|g>>>17),g=c+(f^(e|~b))+d[9]+3951481745&4294967295,a.a[0]=a.a[0]+b&4294967295,a.a[1]=a.a[1]+(e+(g<<21&4294967295|g>>>11))&4294967295,a.a[2]=a.a[2]+e&4294967295,a.a[3]=a.a[3]+f&4294967295}function bi(b){b=a(b)?b:{},this.a=a(b.color)?b.color:null,this.d=b.lineCap,this.b=a(b.lineDash)?b.lineDash:null,this.e=b.lineJoin,this.f=b.miterLimit,this.c=b.width,this.g=void 0}function ci(b){b=a(b)?b:{},this.a=a(b.color)?b.color:null,this.c=void 0}function di(b){b=a(b)?b:{},this.f=this.a=this.e=null,this.d=a(b.fill)?b.fill:null,this.c=a(b.stroke)?b.stroke:null,this.b=b.radius,this.j=[0,0],this.o=this.t=this.g=null;var c,d,e=b.atlasManager,f=null,g=0;null!==this.c&&(d=Cd(this.c.a),g=this.c.c,a(g)||(g=1),f=this.c.b,Ss||(f=null));var h=2*(this.b+g)+1;d={strokeStyle:d,Nc:g,size:h,lineDash:f},a(e)?(h=Math.round(h),(f=null===this.d)&&(c=p(this.Bf,this,d)),g=this.ub(),d=e.add(g,h,h,p(this.Cf,this,d),c),this.a=d.image,this.j=[d.offsetX,d.offsetY],c=d.image.width,this.f=f?d.kf:this.a):(this.a=gd("CANVAS"),this.a.height=h,this.a.width=h,c=h=this.a.width,e=this.a.getContext("2d"),this.Cf(d,e,0,0),null===this.d?(e=this.f=gd("CANVAS"),e.height=d.size,e.width=d.size,e=e.getContext("2d"),this.Bf(d,e,0,0)):this.f=this.a),this.g=[h/2,h/2],this.t=[h,h],this.o=[c,c],jg.call(this,{opacity:1,rotateWithView:!1,rotation:0,scale:1,snapToPixel:a(b.snapToPixel)?b.snapToPixel:!0})}function ei(b){b=a(b)?b:{},this.g=null,this.d=ii,a(b.geometry)&&this.Ff(b.geometry),this.e=a(b.fill)?b.fill:null,this.f=a(b.image)?b.image:null,this.b=a(b.stroke)?b.stroke:null,this.c=a(b.text)?b.text:null,this.a=b.zIndex}function fi(a){return k(a)||(a=g(a)?a:[a],a=_a(a)),a}function gi(){var a=new ci({color:"rgba(255,255,255,0.4)"}),b=new bi({color:"#3399CC",width:1.25}),c=[new ei({image:new di({fill:a,stroke:b,radius:5}),fill:a,stroke:b})];return gi=function(){return c},c}function hi(){var a={},b=[255,255,255,1],c=[0,153,255,1];return a.Polygon=[new ei({fill:new ci({color:[255,255,255,.5]})})],a.MultiPolygon=a.Polygon,a.LineString=[new ei({stroke:new bi({color:b,width:5})}),new ei({stroke:new bi({color:c,width:3})})],a.MultiLineString=a.LineString,a.Point=[new ei({image:new di({radius:6,fill:new ci({color:c}),stroke:new bi({color:b,width:1.5})}),zIndex:1/0})],a.MultiPoint=a.Point,a.GeometryCollection=a.Polygon.concat(a.Point),a}function ii(a){return a.N()}function ji(b){var c=a(b)?b:{};b=a(c.condition)?c.condition:Qg,c=a(c.style)?c.style:new ei({stroke:new bi({color:[0,0,255,1]})}),Wh.call(this,{condition:b,style:c})}function ki(b){Gg.call(this,{handleEvent:li}),b=a(b)?b:{},this.d=a(b.condition)?b.condition:db(Pg,Rg),this.e=a(b.pixelDelta)?b.pixelDelta:128}function li(b){var c=!1;if("key"==b.type){var d=b.a.e;if(this.d(b)&&(40==d||37==d||39==d||38==d)){var e=b.map,c=e.a(),f=Gc(c),g=f.resolution*this.e,h=0,i=0;40==d?i=-g:37==d?h=-g:39==d?h=g:i=g,d=[h,i],ub(d,f.rotation),f=c.a(),a(f)&&(a(100)&&e.Ua(Nc({source:f,duration:100,easing:Lc})),e=c.i([f[0]+d[0],f[1]+d[1]]),c.Oa(e)),b.preventDefault(),c=!0}}return!c}function mi(b){Gg.call(this,{handleEvent:ni}),b=a(b)?b:{},this.e=a(b.condition)?b.condition:Rg,this.d=a(b.delta)?b.delta:1,this.f=a(b.duration)?b.duration:100}function ni(a){var b=!1;if("key"==a.type){var c=a.a.i;if(this.e(a)&&(43==c||45==c)){b=a.map,c=43==c?this.d:-this.d,b.render();var d=b.a();Ig(b,d,c,void 0,this.f),a.preventDefault(),b=!0}}return!b}function oi(b){Gg.call(this,{handleEvent:pi}),b=a(b)?b:{},this.d=0,this.j=a(b.duration)?b.duration:250,this.f=null,this.g=this.e=void 0}function pi(b){var c=!1;if("mousewheel"==b.type){var c=b.map,d=b.a;this.f=b.coordinate,this.d+=d.j,a(this.e)||(this.e=Kr()),d=Math.max(80-(Kr()-this.e),0),Hr.clearTimeout(this.g),this.g=Hr.setTimeout(p(this.i,this,c),d),b.preventDefault(),c=!0}return!c}function qi(b){Tg.call(this,{handleDownEvent:ti,handleDragEvent:ri,handleUpEvent:si}),b=a(b)?b:{},this.f=null,this.g=void 0,this.d=!1,this.i=0,this.j=a(b.threshold)?b.threshold:.3}function ri(b){var c=0,d=this.e[0],e=this.e[1],d=Math.atan2(e.clientY-d.clientY,e.clientX-d.clientX);a(this.g)&&(c=d-this.g,this.i+=c,!this.d&&Math.abs(this.i)>this.j&&(this.d=!0)),this.g=d,b=b.map,d=Td(b.b),e=Ug(this.e),e[0]-=d.x,e[1]-=d.y,this.f=b.Ga(e),this.d&&(d=b.a(),e=Gc(d),b.render(),Hg(b,d,e.rotation+c,this.f))}function si(a){if(2>this.e.length){a=a.map;var b=a.a();if(Ic(b,-1),this.d){var c=Gc(b).rotation,d=this.f,c=b.constrainRotation(c,0);Hg(a,b,c,d,250)}return!1}return!0}function ti(a){return 2<=this.e.length?(a=a.map,this.f=null,this.g=void 0,this.d=!1,this.i=0,this.p||Ic(a.a(),1),a.render(),!0):!1}function ui(b){Tg.call(this,{handleDownEvent:xi,handleDragEvent:vi,handleUpEvent:wi}),b=a(b)?b:{},this.f=null,this.i=a(b.duration)?b.duration:400,this.d=void 0,this.g=1}function vi(b){var c=1,d=this.e[0],e=this.e[1],f=d.clientX-e.clientX,d=d.clientY-e.clientY,f=Math.sqrt(f*f+d*d);a(this.d)&&(c=this.d/f),this.d=f,1!=c&&(this.g=c),b=b.map;var f=b.a(),d=Gc(f),e=Td(b.b),g=Ug(this.e);g[0]-=e.x,g[1]-=e.y,this.f=b.Ga(g),b.render(),Jg(b,f,d.resolution*c,this.f)}function wi(a){if(2>this.e.length){a=a.map;var b=a.a();Ic(b,-1);var c=Gc(b).resolution,d=this.f,e=this.i,c=b.constrainResolution(c,0,this.g-1);return Jg(a,b,c,d,e),!1}return!0}function xi(a){return 2<=this.e.length?(a=a.map,this.f=null,this.d=void 0,this.g=1,this.p||Ic(a.a(),1),a.render(),!0):!1}function yi(b){b=a(b)?b:{};var c=new zd,d=new Dg(-.005,.05,100);return(a(b.altShiftDragRotate)?b.altShiftDragRotate:1)&&c.push(new $g),(a(b.doubleClickZoom)?b.doubleClickZoom:1)&&c.push(new Kg({delta:b.zoomDelta,duration:b.zoomDuration})),(a(b.dragPan)?b.dragPan:1)&&c.push(new Wg({kinetic:d})),(a(b.pinchRotate)?b.pinchRotate:1)&&c.push(new qi),(a(b.pinchZoom)?b.pinchZoom:1)&&c.push(new ui({duration:b.zoomDuration})),(a(b.keyboard)?b.keyboard:1)&&(c.push(new ki),c.push(new mi({delta:b.zoomDelta,duration:b.zoomDuration}))),(a(b.mouseWheelZoom)?b.mouseWheelZoom:1)&&c.push(new oi({duration:b.zoomDuration})),(a(b.shiftDragZoom)?b.shiftDragZoom:1)&&c.push(new ji),c}function zi(b){var c=a(b)?b:{};b=ea(c),delete b.layers,c=c.layers,Mf.call(this,b),this.a=null,Pa(this,mb("layers"),this.ei,!1,this),null!=c?g(c)&&(c=new zd(K(c))):c=new zd,this.r(c)}function Ai(a){mc.call(this,{code:a,units:"m",extent:Vt,global:!0,worldExtent:Wt})}function Bi(b,c,d){var e=b.length;d=d>1?d:2,a(c)||(c=d>2?b.slice():Array(e));for(var f=0;e>f;f+=d)c[f]=6378137*Math.PI*b[f]/180,c[f+1]=6378137*Math.log(Math.tan(Math.PI*(b[f+1]+90)/360));return c}function Ci(b,c,d){var e=b.length;d=d>1?d:2,a(c)||(c=d>2?b.slice():Array(e));for(var f=0;e>f;f+=d)c[f]=180*b[f]/(6378137*Math.PI),c[f+1]=360*Math.atan(Math.exp(b[f+1]/6378137))/Math.PI-90;return c}function Di(a,b){mc.call(this,{code:a,units:"degrees",extent:Yt,axisOrientation:b,global:!0,worldExtent:Yt})}function Ei(){oc(Xt),oc(Zt),pc()}function Fi(b){Of.call(this,a(b)?b:{})}function Gi(b){Of.call(this,a(b)?b:{})}function Hi(b){b=a(b)?b:{};var c=ea(b);delete c.style,Of.call(this,c),this.Ab=a(b.renderBuffer)?b.renderBuffer:100,this.eb=null,this.r=void 0,this.oa(b.style)}function Ii(a,b,c,d,e){this.p={},this.b=a,this.r=b,this.e=c,this.F=d,this.eb=e,this.f=this.a=this.c=this.Ra=this.ga=this.la=null,this.ea=this.Sa=this.j=this.V=this.Q=this.J=0,this.Da=!1,this.g=this.oa=0,this.Ea=!1,this.ba=0,this.d="",this.i=this.t=this.Ta=this.qa=0,this.ca=this.n=this.o=null,this.q=[],this.ec=Ab()}function Ji(a,b,c){if(null!==a.f){b=dh(b,0,c,2,a.F,a.q),c=a.b;var d=a.ec,e=c.globalAlpha;1!=a.j&&(c.globalAlpha=e*a.j);var f=a.oa;a.Da&&(f+=a.eb);var g,h;for(g=0,h=b.length;h>g;g+=2){var i=b[g]-a.J,j=b[g+1]-a.Q;if(a.Ea&&(i=i+.5|0,j=j+.5|0),0!==f||1!=a.g){var k=i+a.J,l=j+a.Q;ng(d,k,l,a.g,a.g,f,-k,-l),c.setTransform(d[0],d[1],d[4],d[5],d[12],d[13])}c.drawImage(a.f,a.Sa,a.ea,a.ba,a.V,i,j,a.ba,a.V)}0===f&&1==a.g||c.setTransform(1,0,0,1,0,0),1!=a.j&&(c.globalAlpha=e)}}function Ki(a,b,c,d){var e=0;if(null!==a.ca&&""!==a.d){null===a.o||Oi(a,a.o),null===a.n||Pi(a,a.n);var f=a.ca,g=a.b,h=a.Ra;for(null===h?(g.font=f.font,g.textAlign=f.textAlign,g.textBaseline=f.textBaseline,a.Ra={font:f.font,textAlign:f.textAlign,textBaseline:f.textBaseline}):(h.font!=f.font&&(h.font=g.font=f.font),h.textAlign!=f.textAlign&&(h.textAlign=g.textAlign=f.textAlign),h.textBaseline!=f.textBaseline&&(h.textBaseline=g.textBaseline=f.textBaseline)),b=dh(b,e,c,d,a.F,a.q),f=a.b;c>e;e+=d){if(g=b[e]+a.qa,h=b[e+1]+a.Ta,0!==a.t||1!=a.i){var i=ng(a.ec,g,h,a.i,a.i,a.t,-g,-h);f.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])}null===a.n||f.strokeText(a.d,g,h),null===a.o||f.fillText(a.d,g,h)}0===a.t&&1==a.i||f.setTransform(1,0,0,1,0,0)}}function Li(a,b,c,d,e,f){var g=a.b;for(a=dh(b,c,d,e,a.F,a.q),g.moveTo(a[0],a[1]),b=2;b<a.length;b+=2)g.lineTo(a[b],a[b+1]);return f&&g.lineTo(a[0],a[1]),d}function Mi(a,b,c,d,e){var f,g,h=a.b;for(f=0,g=d.length;g>f;++f)c=Li(a,b,c,d[f],e,!0),h.closePath();return c}function Ni(a){var b=D(X(a.p),Number);O(b);var c,d,e,f,g;for(c=0,d=b.length;d>c;++c)for(e=a.p[b[c].toString()],f=0,g=e.length;g>f;++f)e[f](a)}function Oi(a,b){var c=a.b,d=a.la;null===d?(c.fillStyle=b.fillStyle,a.la={fillStyle:b.fillStyle}):d.fillStyle!=b.fillStyle&&(d.fillStyle=c.fillStyle=b.fillStyle)}function Pi(a,b){var c=a.b,d=a.ga;null===d?(c.lineCap=b.lineCap,Ss&&c.setLineDash(b.lineDash),c.lineJoin=b.lineJoin,c.lineWidth=b.lineWidth,c.miterLimit=b.miterLimit,c.strokeStyle=b.strokeStyle,a.ga={lineCap:b.lineCap,lineDash:b.lineDash,lineJoin:b.lineJoin,lineWidth:b.lineWidth,miterLimit:b.miterLimit,strokeStyle:b.strokeStyle}):(d.lineCap!=b.lineCap&&(d.lineCap=c.lineCap=b.lineCap),Ss&&!P(d.lineDash,b.lineDash)&&c.setLineDash(d.lineDash=b.lineDash),d.lineJoin!=b.lineJoin&&(d.lineJoin=c.lineJoin=b.lineJoin),d.lineWidth!=b.lineWidth&&(d.lineWidth=c.lineWidth=b.lineWidth),d.miterLimit!=b.miterLimit&&(d.miterLimit=c.miterLimit=b.miterLimit),d.strokeStyle!=b.strokeStyle&&(d.strokeStyle=c.strokeStyle=b.strokeStyle))}function Qi(a,b,c){this.ga=a,this.V=b,this.d=0,this.resolution=c,this.J=this.F=null,this.c=[],this.coordinates=[],this.ca=Ab(),this.a=[],this.ba=[],this.la=Ab()}function Ri(a,b,c,d,e,f){var g,h,i,j=a.coordinates.length,k=a.he(),l=[b[c],b[c+1]],m=[NaN,NaN],n=!0;for(g=c+e;d>g;g+=e)m[0]=b[g],m[1]=b[g+1],i=Pb(k,m),i!==h?(n&&(a.coordinates[j++]=l[0],a.coordinates[j++]=l[1]),a.coordinates[j++]=m[0],a.coordinates[j++]=m[1],n=!1):1===i?(a.coordinates[j++]=m[0],a.coordinates[j++]=m[1],n=!1):n=!0,l[0]=m[0],l[1]=m[1],h=i;return g===c+e&&(a.coordinates[j++]=l[0],a.coordinates[j++]=l[1]),f&&(a.coordinates[j++]=b[c],a.coordinates[j++]=b[c+1]),j}function Si(a,b){a.F=[0,b,0],a.c.push(a.F),a.J=[0,b,0],a.a.push(a.J)}function Ti(b,c,d,e,f,g,h,i){var j;og(e,b.ca)?j=b.ba:(j=dh(b.coordinates,0,b.coordinates.length,2,e,b.ba),Db(b.ca,e)),e=0;var k,l=h.length,n=0;for(b=b.la;l>e;){var o,p,q,r,s=h[e];switch(s[0]){case 0:n=s[1],n=m(n).toString(),a(ca(g,n))?e=s[2]:++e;break;case 1:c.beginPath(),++e;break;case 2:n=s[1],k=j[n];var t=j[n+1],u=j[n+2]-k,n=j[n+3]-t;c.arc(k,t,Math.sqrt(u*u+n*n),0,2*Math.PI,!0),++e;break;case 3:c.closePath(),++e;break;case 4:n=s[1],k=s[2],o=s[3],q=s[4]*d;var v=s[5]*d,w=s[6];p=s[7];var x=s[8],y=s[9],t=s[11],u=s[12],z=s[13],A=s[14];for(s[10]&&(t+=f);k>n;n+=2){if(s=j[n]-q,r=j[n+1]-v,z&&(s=s+.5|0,r=r+.5|0),1!=u||0!==t){var B=s+q,C=r+v;ng(b,B,C,u,u,t,-B,-C),c.setTransform(b[0],b[1],b[4],b[5],b[12],b[13])}B=c.globalAlpha,1!=p&&(c.globalAlpha=B*p),c.drawImage(o,x,y,A,w,s,r,A*d,w*d),1!=p&&(c.globalAlpha=B),1==u&&0===t||c.setTransform(1,0,0,1,0,0)}++e;break;case 5:for(n=s[1],k=s[2],q=s[3],v=s[4]*d,w=s[5]*d,t=s[6],u=s[7]*d,o=s[8],p=s[9];k>n;n+=2)s=j[n]+v,r=j[n+1]+w,(1!=u||0!==t)&&(ng(b,s,r,u,u,t,-s,-r),c.setTransform(b[0],b[1],b[4],b[5],b[12],b[13])),p&&c.strokeText(q,s,r),o&&c.fillText(q,s,r),1==u&&0===t||c.setTransform(1,0,0,1,0,0);++e;break;case 6:if(a(i)&&(n=s[1],n=i(n)))return n;++e;break;case 7:c.fill(),++e;break;case 8:for(n=s[1],k=s[2],c.moveTo(j[n],j[n+1]),n+=2;k>n;n+=2)c.lineTo(j[n],j[n+1]);++e;break;case 9:c.fillStyle=s[1],++e;break;case 10:n=a(s[7])?s[7]:!0,k=s[2],c.strokeStyle=s[1],c.lineWidth=n?k*d:k,c.lineCap=s[3],c.lineJoin=s[4],c.miterLimit=s[5],Ss&&c.setLineDash(s[6]),++e;break;case 11:c.font=s[1],c.textAlign=s[2],c.textBaseline=s[3],++e;break;case 12:c.stroke(),++e;break;default:++e}}}function Ui(a){var b=a.a;b.reverse();var c,d,e,f=b.length,g=-1;for(c=0;f>c;++c)if(d=b[c],e=d[0],6==e)g=c;else if(0==e){for(d[2]=c,d=a.a,e=c;e>g;){var h=d[g];d[g]=d[e],d[e]=h,++g,--e}g=-1}}function Vi(a,b){a.F[2]=a.c.length,a.F=null,a.J[2]=a.a.length,a.J=null;var c=[6,b];a.c.push(c),a.a.push(c)}function Wi(a,b,c){Qi.call(this,a,b,c),this.g=this.Q=null,this.t=this.r=this.q=this.p=this.j=this.n=this.i=this.o=this.f=this.e=this.b=void 0}function Xi(a,b,c){Qi.call(this,a,b,c),this.b={Cc:void 0,xc:void 0,yc:null,zc:void 0,Ac:void 0,Bc:void 0,me:0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}function Yi(a,b,c,d,e){var f=a.coordinates.length;return b=Ri(a,b,c,d,e,!1),f=[8,f,b],a.c.push(f),a.a.push(f),d}function Zi(a){var b=a.b,c=b.strokeStyle,d=b.lineCap,e=b.lineDash,f=b.lineJoin,g=b.lineWidth,h=b.miterLimit;b.Cc==c&&b.xc==d&&P(b.yc,e)&&b.zc==f&&b.Ac==g&&b.Bc==h||(b.me!=a.coordinates.length&&(a.c.push([12]),b.me=a.coordinates.length),a.c.push([10,c,g,d,f,h,e],[1]),b.Cc=c,b.xc=d,b.yc=e,b.zc=f,b.Ac=g,b.Bc=h)}function $i(a,b,c){Qi.call(this,a,b,c),this.b={Ve:void 0,Cc:void 0,xc:void 0,yc:null,zc:void 0,Ac:void 0,Bc:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}function _i(b,c,d,e,f){var g=b.b,h=[1];b.c.push(h),b.a.push(h);var i,h=0;for(i=e.length;i>h;++h){var j=e[h],k=b.coordinates.length;d=Ri(b,c,d,j,f,!0),d=[8,k,d],k=[3],b.c.push(d,k),b.a.push(d,k),d=j}return c=[7],b.a.push(c),a(g.fillStyle)&&b.c.push(c),a(g.strokeStyle)&&(g=[12],b.c.push(g),b.a.push(g)),d}function aj(b){var c=b.b,d=c.fillStyle,e=c.strokeStyle,f=c.lineCap,g=c.lineDash,h=c.lineJoin,i=c.lineWidth,j=c.miterLimit;a(d)&&c.Ve!=d&&(b.c.push([9,d]),c.Ve=c.fillStyle),!a(e)||c.Cc==e&&c.xc==f&&c.yc==g&&c.zc==h&&c.Ac==i&&c.Bc==j||(b.c.push([10,e,i,f,h,j,g]),c.Cc=e,c.xc=f,c.yc=g,c.zc=h,c.Ac=i,c.Bc=j)}function bj(a,b,c){Qi.call(this,a,b,c),this.r=this.q=this.p=null,this.g="",this.j=this.n=this.i=this.o=0,this.f=this.e=this.b=null}function cj(a,b,c){this.g=a,this.b=b,this.f=c,this.c={},this.d=ud(1,1),this.e=Ab()}function dj(a){for(var b in a.c){var c,d=a.c[b];for(c in d)d[c].Kb()}}function ej(a,b,c,d,e,f){var g=a.e;ng(g,.5,.5,1/b,-1/b,-c,-d[0],-d[1]);var h=a.d;return h.clearRect(0,0,1,1),gj(a,h,g,c,e,function(a){if(0<h.getImageData(0,0,1,1).data[3]){if(a=f(a))return a;h.clearRect(0,0,1,1)}})}function fj(b,c,d,e,f,g){var h=D(X(b.c),Number);O(h);var i=b.b,j=i[0],k=i[1],l=i[2],i=i[3],j=[j,k,j,i,l,i,l,k];dh(j,0,8,2,e,j),c.save(),c.beginPath(),c.moveTo(j[0],j[1]),c.lineTo(j[2],j[3]),c.lineTo(j[4],j[5]),c.lineTo(j[6],j[7]),c.closePath(),c.clip();for(var m,n,j=0,k=h.length;k>j;++j)for(m=b.c[h[j].toString()],l=0,i=_t.length;i>l;++l)n=m[_t[l]],a(n)&&n.Hc(c,d,e,f,g);c.restore()}function gj(b,c,d,e,f,g){var h=D(X(b.c),Number);O(h,function(a,b){return b-a});var i,j,k,l,m;for(i=0,j=h.length;j>i;++i)for(l=b.c[h[i].toString()],k=_t.length-1;k>=0;--k)if(m=l[_t[k]],a(m)&&(m=Ti(m,c,1,d,e,f,m.a,g)))return m}function hj(a,b){ag.call(this,a,b),this.F=Ab()}function ij(b,c,d,e,f){var g=b.a;gb(g,c)&&(b=a(f)?f:jj(b,e),b=new Ii(d,e.pixelRatio,e.extent,b,e.viewState.rotation),g.dispatchEvent(new Rh(c,g,b,null,e,d,null)),Ni(b))}function jj(a,b){var c=b.viewState,d=b.pixelRatio;return ng(a.F,d*b.size[0]/2,d*b.size[1]/2,d/c.resolution,-d/c.resolution,-c.rotation,-c.center[0],-c.center[1])}function kj(a,b){hj.call(this,a,b),this.c=null,this.d=Ab()}function lj(a,b){hj.call(this,a,b),this.c=this.e=null,this.g=!1,this.q=null,this.r=Ab(),this.t=NaN,this.f=this.d=null}function mj(b,c,d){eh.call(this),this.ag(b,a(c)?c:0,d)}function nj(a){var b=a.k[a.s]-a.k[0];return a=a.k[a.s+1]-a.k[1],b*b+a*a}function oj(b){ch.call(this),this.d=a(b)?b:null,rj(this)}function pj(a){var b,c,d=[];for(b=0,c=a.length;c>b;++b)d.push(a[b].clone());return d}function qj(a){var b,c;if(null!==a.d)for(b=0,c=a.d.length;c>b;++b)Ta(a.d[b],"change",a.l,!1,a)}function rj(a){var b,c;if(null!==a.d)for(b=0,c=a.d.length;c>b;++b)Pa(a.d[b],"change",a.l,!1,a)}function sj(a,b,c,d,e){var f=NaN,g=NaN,h=(c-b)/d;if(0!==h)if(1==h)f=a[b],g=a[b+1];else if(2==h)f=.5*a[b]+.5*a[b+d],g=.5*a[b+1]+.5*a[b+d+1];else{var i,g=a[b],h=a[b+1],j=0,f=[0];for(i=b+d;c>i;i+=d){var k=a[i],l=a[i+1],j=j+Math.sqrt((k-g)*(k-g)+(l-h)*(l-h));f.push(j),g=k,h=l}c=.5*j;for(var m,g=Q,h=0,j=f.length;j>h;)i=h+j>>1,k=g(c,f[i]),k>0?h=i+1:(j=i,m=!k);m=m?h:~h,0>m?(c=(c-f[-m-2])/(f[-m-1]-f[-m-2]),b+=(-m-2)*d,f=la(a[b],a[b+d],c),g=la(a[b+1],a[b+d+1],c)):(f=a[b+m*d],g=a[b+m*d+1])}return null!=e?(e[0]=f,e[1]=g,e):[f,g]}function tj(a,b,c,d,e,f){if(c==b)return null;if(e<a[b+d-1])return f?(c=a.slice(b,b+d),c[d-1]=e,c):null;if(a[c-1]<e)return f?(c=a.slice(c-d,c),c[d-1]=e,c):null;if(e==a[b+d-1])return a.slice(b,b+d);for(b/=d,c/=d;c>b;)f=b+c>>1,e<a[(f+1)*d-1]?c=f:b=f+1;if(c=a[b*d-1],e==c)return a.slice((b-1)*d,(b-1)*d+d);f=(e-c)/(a[(b+1)*d-1]-c),c=[];var g;for(g=0;d-1>g;++g)c.push(la(a[(b-1)*d+g],a[b*d+g],f));return c.push(e),c}function uj(a,b,c,d,e,f){var g=0;if(f)return tj(a,g,b[b.length-1],c,d,e);if(d<a[c-1])return e?(a=a.slice(0,c),a[c-1]=d,a):null;if(a[a.length-1]<d)return e?(a=a.slice(a.length-c),a[c-1]=d,a):null;for(e=0,f=b.length;f>e;++e){var h=b[e];if(g!=h){if(d<a[g+c-1])break;if(d<=a[h-1])return tj(a,g,h,c,d,!1);g=h}}return null}function vj(a,b){eh.call(this),this.b=null,this.p=this.q=this.n=-1,this.U(a,b)}function wj(a){return a.n!=a.c&&(a.b=sj(a.k,0,a.k.length,a.s,a.b),a.n=a.c),a.b}function xj(a,b,c){gh(a,b,c),a.l()}function yj(a,b){eh.call(this),this.b=[],this.n=this.p=-1,this.U(a,b)}function zj(a){var b=[],c=a.k,d=0,e=a.b;a=a.s;var f,g;for(f=0,g=e.length;g>f;++f){var h=e[f],d=sj(c,d,h,a);L(b,d),d=h}return b}function Aj(a,b,c,d){gh(a,b,c),a.b=d,a.l()}function Bj(a,b){var c,d,e="XY",f=[],g=[];for(c=0,d=b.length;d>c;++c){var h=b[c];0===c&&(e=h.a),L(f,h.k),g.push(f.length)}Aj(a,e,f,g)}function Cj(a,b){eh.call(this),this.U(a,b)}function Dj(a,b){eh.call(this),this.b=[],this.p=-1,this.q=null,this.F=this.r=this.t=-1,this.n=null,this.U(a,b)}function Ej(a){if(a.p!=a.c){var b,c,d=a.k,e=a.b,f=a.s,g=0,h=[],i=Qb();for(b=0,c=e.length;c>b;++b){var j=e[b],i=Vb(Rb(1/0,1/0,-(1/0),-(1/0),void 0),d,g,j[0],f);h.push((i[0]+i[2])/2,(i[1]+i[3])/2),g=j[j.length-1]}for(d=Fj(a),e=a.b,f=a.s,g=0,b=[],c=0,i=e.length;i>c;++c)j=e[c],b=Fh(d,g,j,f,h,2*c,b),g=j[j.length-1];a.q=b,a.p=a.c}return a.q}function Fj(a){if(a.F!=a.c){var b,c=a.k;a:{b=a.b;var d,e;for(d=0,e=b.length;e>d;++d)if(!Kh(c,b[d],a.s)){b=!1;break a}b=!0}if(b)a.n=c;else{a.n=c.slice(),b=c=a.n,d=a.b,e=a.s;var f,g,h=0;for(f=0,g=d.length;g>f;++f)h=Lh(b,h,d[f],e);c.length=h}a.F=a.c}return a.n}function Gj(a,b,c,d){gh(a,b,c),a.b=d,a.l()}function Hj(a,b){var c,d,e,f="XY",g=[],h=[];for(c=0,d=b.length;d>c;++c){var i=b[c];0===c&&(f=i.a);var j=g.length;e=i.b;var k,l;for(k=0,l=e.length;l>k;++k)e[k]+=j;L(g,i.k),h.push(e)}Gj(a,f,g,h)}function Ij(a,b){return m(a)-m(b)}function Jj(a,b){var c=.5*a/b;return c*c}function Kj(a,b,c,d,e,f){var g,h,i=!1;return g=c.f,null===g?Lj(a,b,c,d):(h=g.ue(),2==h||3==h?(g.Ge(e,f),2==h&&Lj(a,b,c,d)):(0==h&&g.load(),g.ne(e,f),i=!0)),i}function Lj(a,b,c,d){var e=c.d(b);null!=e&&(d=e.ke(d),cu[d.H()](a,d,c,b))}function Mj(a,b){hj.call(this,a,b),this.d=!1,this.r=-1,this.q=NaN,this.f=Qb(),this.c=this.g=null,this.e=ud()}function Nj(a,b){qg.call(this,0,b),this.o=ud(),this.a=this.o.canvas,this.a.style.width="100%",this.a.style.height="100%",this.a.className="ol-unselectable",kd(a,this.a,0),this.c=!0,this.i=Ab()}function Oj(a,b,c){var d=a.e,e=a.o;if(gb(d,b)){var f=c.extent,g=c.pixelRatio,h=c.viewState,i=h.resolution,j=h.rotation;ng(a.i,a.a.width/2,a.a.height/2,g/i,-g/i,-j,-h.center[0],-h.center[1]),h=new cj(.5*i/g,f,i),f=new Ii(e,g,f,a.i,j),d.dispatchEvent(new Rh(b,d,f,h,c,e,null)),dj(h),h.ia()||fj(h,e,g,a.i,j,{}),Ni(f),a.g=h}}function Pj(a,b,c){ag.call(this,a,b),this.target=c}function Qj(a,b){var c=gd("DIV");c.style.position="absolute",Pj.call(this,a,b,c),this.c=null,this.d=Bb()}function Rj(a,b){var c=gd("DIV");c.style.position="absolute",Pj.call(this,a,b,c),this.d=!0,this.n=1,this.g=0,this.c={}}function Sj(a,b){this.target=gd("DIV"),this.target.style.position="absolute",this.target.style.width="100%",this.target.style.height="100%",this.d=a,this.b=b,this.f=cc(Wf(a,b)),this.g=a.ka(b[0]),this.c={},this.a=null,this.e=Bb()}function Tj(a,b,c){var d=b.a,e=d[0],f=d[1],g=d[2],d=Tc(d);if(!(d in a.c)){var e=a.d.sa(e),h=b.Na(a),i=h.style;i.maxWidth="none";var j,k;c>0?(j=gd("DIV"),k=j.style,k.overflow="hidden",k.width=e+"px",k.height=e+"px",i.position="absolute",i.left=-c+"px",i.top=-c+"px",i.width=e+2*c+"px",i.height=e+2*c+"px",j.appendChild(h)):(i.width=e+"px",i.height=e+"px",j=h,k=i),k.position="absolute",k.left=(f-a.b[1])*e+"px",k.top=(a.b[2]-g)*e+"px",null===a.a&&(a.a=document.createDocumentFragment()),a.a.appendChild(j),a.c[d]=b}}function Uj(a){null!==a.a&&(a.target.appendChild(a.a),a.a=null)}function Vj(a,b,c){var d=Uf(a.d,b,a.b[0],c);b=[];for(var e in a.c)c=a.c[e],d.contains(c.a)||b.push(c);var f,d=0;for(f=b.length;f>d;++d)c=b[d],e=Tc(c.a),ld(c.Na(a)),delete a.c[e]}function Wj(a,b){og(b,a.e)||(wd(a.target,b),Db(a.e,b))}function Xj(a,b){this.g=ud();var c=this.g.canvas;c.style.maxWidth="none",c.style.position="absolute",Pj.call(this,a,b,c),this.d=!1,this.q=-1,this.p=NaN,this.n=Qb(),this.c=this.j=null,this.r=Ab()}function Yj(a,b,c,d){var e=a.g;a=a.a,gb(a,b)&&(d=new Ii(e,c.pixelRatio,c.extent,d,c.viewState.rotation),a.dispatchEvent(new Rh(b,a,d,null,c,e,null)),Ni(d))}function Zj(a,b){qg.call(this,0,b),this.c=null,this.c=ud();var c=this.c.canvas;c.style.position="absolute",c.style.width="100%",c.style.height="100%",c.className="ol-unselectable",kd(a,c,0),this.i=Ab(),this.a=gd("DIV"),this.a.className="ol-unselectable",c=this.a.style,c.position="absolute",c.width="100%",c.height="100%",Pa(this.a,"touchstart",Ca),kd(a,this.a,0),this.o=!0}function $j(a,b,c){var d=a.e;if(gb(d,b)){var e=c.extent,f=c.pixelRatio,g=c.viewState,h=g.resolution,i=g.rotation,j=a.c,k=j.canvas;ng(a.i,k.width/2,k.height/2,f/g.resolution,-f/g.resolution,-g.rotation,-g.center[0],-g.center[1]),g=new Ii(j,f,e,a.i,i),e=new cj(.5*h/f,e,h),d.dispatchEvent(new Rh(b,d,g,e,c,j,null)),dj(e),e.ia()||fj(e,j,f,a.i,i,{}),Ni(g),a.g=e}}function _j(a){this.a=a}function ak(a){this.a=a}function bk(a){this.a=a}function ck(){this.a="precision mediump float;varying vec2 a;varying float b;uniform mat4 k;uniform float l;uniform sampler2D m;void main(void){vec4 texColor=texture2D(m,a);float alpha=texColor.a*b*l;if(alpha==0.0){discard;}gl_FragColor.a=alpha;gl_FragColor.rgb=(k*vec4(texColor.rgb,1.)).rgb;}"}function dk(){this.a="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.,0.);gl_Position=h*vec4(c,0.,1.)+offsets;a=d;b=f;}"}function ek(a,b){this.n=a.getUniformLocation(b,"k"),this.o=a.getUniformLocation(b,"j"),this.i=a.getUniformLocation(b,"i"),this.f=a.getUniformLocation(b,"l"),this.g=a.getUniformLocation(b,"h"),this.a=a.getAttribLocation(b,"e"),this.c=a.getAttribLocation(b,"f"),this.d=a.getAttribLocation(b,"c"),this.b=a.getAttribLocation(b,"g"),this.e=a.getAttribLocation(b,"d")}function fk(){this.a="precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"}function gk(){this.a="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.,0.);gl_Position=h*vec4(c,0.,1.)+offsets;a=d;b=f;}";
}function hk(a,b){this.o=a.getUniformLocation(b,"j"),this.i=a.getUniformLocation(b,"i"),this.f=a.getUniformLocation(b,"k"),this.g=a.getUniformLocation(b,"h"),this.a=a.getAttribLocation(b,"e"),this.c=a.getAttribLocation(b,"f"),this.d=a.getAttribLocation(b,"c"),this.b=a.getAttribLocation(b,"g"),this.e=a.getAttribLocation(b,"d")}function ik(b){this.a=a(b)?b:[],this.c=a(void 0)?void 0:35044}function jk(a,b){this.n=this.i=void 0,this.Sa=new Ed,this.e=Zb(b),this.o=[],this.q=void 0,this.b=[],this.t=this.r=void 0,this.c=[],this.p=this.j=this.d=null,this.F=void 0,this.ga=Bb(),this.Ra=Bb(),this.Q=this.J=void 0,this.ea=Bb(),this.ca=this.ba=this.V=void 0,this.f=[],this.a=[],this.g=null,this.la=void 0}function kk(a,b){var c=a.g,d=a.d,e=a.f,f=b.a;return function(){if(!f.isContextLost()){var a,g;for(a=0,g=e.length;g>a;++a)f.deleteTexture(e[a])}Mk(b,c),Mk(b,d)}}function lk(a,b,c,d){var e,f,g,h,i,j,k=a.i,l=a.n,m=a.q,n=a.r,o=a.t,p=a.F,q=a.J,r=a.Q,s=a.V?1:0,t=a.ba,u=a.ca,v=a.la,w=Math.cos(t),t=Math.sin(t),x=a.c.length,y=a.a.length;for(e=0;c>e;e+=d)i=b[e]-a.e[0],j=b[e+1]-a.e[1],f=y/8,g=-u*k,h=-u*(m-l),a.a[y++]=i,a.a[y++]=j,a.a[y++]=g*w-h*t,a.a[y++]=g*t+h*w,a.a[y++]=q/o,a.a[y++]=(r+m)/n,a.a[y++]=p,a.a[y++]=s,g=u*(v-k),h=-u*(m-l),a.a[y++]=i,a.a[y++]=j,a.a[y++]=g*w-h*t,a.a[y++]=g*t+h*w,a.a[y++]=(q+v)/o,a.a[y++]=(r+m)/n,a.a[y++]=p,a.a[y++]=s,g=u*(v-k),h=u*l,a.a[y++]=i,a.a[y++]=j,a.a[y++]=g*w-h*t,a.a[y++]=g*t+h*w,a.a[y++]=(q+v)/o,a.a[y++]=r/n,a.a[y++]=p,a.a[y++]=s,g=-u*k,h=u*l,a.a[y++]=i,a.a[y++]=j,a.a[y++]=g*w-h*t,a.a[y++]=g*t+h*w,a.a[y++]=q/o,a.a[y++]=r/n,a.a[y++]=p,a.a[y++]=s,a.c[x++]=f,a.c[x++]=f+1,a.c[x++]=f+2,a.c[x++]=f,a.c[x++]=f+2,a.c[x++]=f+3}function mk(a,b){this.b=b,this.d=a,this.c={}}function nk(a,b){var c,d=[];for(c in a.c)d.push(kk(a.c[c],b));return cb.apply(null,d)}function ok(a,b){for(var c in a.c)a.c[c].Kb(b)}function pk(b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p,q;for(o=0,p=_t.length;p>o&&(q=b.c[_t[o]],!a(q)||!(q=q.Hc(c,d,e,f,g,h,i,j,k,l,m,n)));++o);}function qk(a,b,c,d,e,f,g){this.b=a,this.e=b,this.a=f,this.f=g,this.i=e,this.o=d,this.g=c,this.d=null,this.c={}}function rk(){this.a="precision mediump float;varying vec2 a;uniform mat4 f;uniform float g;uniform sampler2D h;void main(void){vec4 texColor=texture2D(h,a);gl_FragColor.rgb=(f*vec4(texColor.rgb,1.)).rgb;gl_FragColor.a=texColor.a*g;}"}function sk(){this.a="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}"}function tk(a,b){this.g=a.getUniformLocation(b,"f"),this.b=a.getUniformLocation(b,"g"),this.d=a.getUniformLocation(b,"e"),this.f=a.getUniformLocation(b,"d"),this.e=a.getUniformLocation(b,"h"),this.a=a.getAttribLocation(b,"b"),this.c=a.getAttribLocation(b,"c")}function uk(){this.a="precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"}function vk(){this.a="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}"}function wk(a,b){this.b=a.getUniformLocation(b,"f"),this.d=a.getUniformLocation(b,"e"),this.f=a.getUniformLocation(b,"d"),this.e=a.getUniformLocation(b,"g"),this.a=a.getAttribLocation(b,"b"),this.c=a.getAttribLocation(b,"c")}function xk(a,b){ag.call(this,a,b),this.J=new ik([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.e=this.Qa=null,this.f=void 0,this.q=Ab(),this.F=Bb(),this.Q=new Ed,this.i=this.g=null}function yk(b,c,d){var e=b.b.d;if(a(b.f)&&b.f==d)e.bindFramebuffer(36160,b.e);else{c.postRenderFunctions.push(q(function(a,b,c){a.isContextLost()||(a.deleteFramebuffer(b),a.deleteTexture(c))},e,b.e,b.Qa)),c=e.createTexture(),e.bindTexture(3553,c),e.texImage2D(3553,0,6408,d,d,0,6408,5121,null),e.texParameteri(3553,10240,9729),e.texParameteri(3553,10241,9729);var f=e.createFramebuffer();e.bindFramebuffer(36160,f),e.framebufferTexture2D(36160,36064,3553,c,0),b.Qa=c,b.e=f,b.f=d}}function zk(a,b,c,d){if(a=a.a,gb(a,b)){var e=d.viewState;a.dispatchEvent(new Rh(b,a,new qk(c,e.center,e.resolution,e.rotation,d.size,d.extent,d.pixelRatio),null,d,null,c))}}function Ak(a,b){xk.call(this,a,b),this.c=null}function Bk(a,b){var c=b.c(),d=a.b.d,e=d.createTexture();return d.bindTexture(3553,e),d.texImage2D(3553,0,6408,6408,5121,c),d.texParameteri(3553,10242,33071),d.texParameteri(3553,10243,33071),d.texParameteri(3553,10241,9729),d.texParameteri(3553,10240,9729),e}function Ck(a,b,c,d,e,f,g){b*=e,c*=e,a=a.F,Eb(a),Hb(a,2/b,2/c),Ib(a,-f),Gb(a,g[0]-d[0],g[1]-d[1]),Hb(a,(g[2]-g[0])/2,(g[3]-g[1])/2),Gb(a,1,1)}function Dk(){this.a="precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"}function Ek(){this.a="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}"}function Fk(a,b){this.b=a.getUniformLocation(b,"e"),this.d=a.getUniformLocation(b,"d"),this.a=a.getAttribLocation(b,"b"),this.c=a.getAttribLocation(b,"c")}function Gk(a,b){xk.call(this,a,b),this.t=Dk.Ja(),this.V=Ek.Ja(),this.c=null,this.r=new ik([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.p=this.d=null,this.j=-1}function Hk(a,b){xk.call(this,a,b),this.d=!1,this.t=-1,this.r=NaN,this.j=Qb(),this.c=this.p=null}function Ik(){this.b=0,this.d={},this.c=this.a=null}function Jk(a,b){return a.d.hasOwnProperty(b)}function Kk(a,b){this.g=a,this.a=b,this.c={},this.d={},this.b={},this.f=null,(this.e=G(Er,"OES_element_index_uint"))&&b.getExtension("OES_element_index_uint"),Pa(this.g,"webglcontextlost",this.lk,!1,this),Pa(this.g,"webglcontextrestored",this.mk,!1,this)}function Lk(a,b,c){var d=a.a,e=c.a,f=m(c);if(f in a.c)d.bindBuffer(b,a.c[f].buffer);else{var g=d.createBuffer();d.bindBuffer(b,g);var h;34962==b?h=new Float32Array(e):34963==b&&(h=a.e?new Uint32Array(e):new Uint16Array(e)),d.bufferData(b,h,c.c),a.c[f]={b:c,buffer:g}}}function Mk(a,b){var c=a.a,d=m(b),e=a.c[d];c.isContextLost()||c.deleteBuffer(e.buffer),delete a.c[d]}function Nk(a,b){var c=m(b);if(c in a.d)return a.d[c];var d=a.a,e=d.createShader(b.H());return d.shaderSource(e,b.a),d.compileShader(e),a.d[c]=e}function Ok(a,b,c){var d=m(b)+"/"+m(c);if(d in a.b)return a.b[d];var e=a.a,f=e.createProgram();return e.attachShader(f,Nk(a,b)),e.attachShader(f,Nk(a,c)),e.linkProgram(f),a.b[d]=f}function Pk(a,b){qg.call(this,0,b),this.a=gd("CANVAS"),this.a.style.width="100%",this.a.style.height="100%",this.a.className="ol-unselectable",kd(a,this.a,0),this.p=0,this.q=ud(),this.n=!0,this.d=xd(this.a,{antialias:!0,depth:!1,bh:!0,preserveDrawingBuffer:!1,stencil:!0}),this.f=new Kk(this.a,this.d),Pa(this.a,"webglcontextlost",this.tj,!1,this),Pa(this.a,"webglcontextrestored",this.uj,!1,this),this.c=new Ik,this.j=null,this.i=new wg(p(function(a){var b=a[1];a=a[2];var c=b[0]-this.j[0],b=b[1]-this.j[1];return 65536*Math.log(a)+Math.sqrt(c*c+b*b)/a},this),function(a){return a[0].mb()}),this.r=p(function(){if(!this.i.ia()){Bg(this.i);var a=xg(this.i);Qk(this,a[0],a[3],a[4])}},this),this.o=0,Sk(this)}function Qk(a,b,c,d){var e=a.d,f=b.mb();if(Jk(a.c,f))a=a.c.get(f),e.bindTexture(3553,a.Qa),9729!=a.nf&&(e.texParameteri(3553,10240,9729),a.nf=9729),9729!=a.of&&(e.texParameteri(3553,10240,9729),a.of=9729);else{var g=e.createTexture();if(e.bindTexture(3553,g),d>0){var h=a.q.canvas,i=a.q;a.p!=c?(h.width=c,h.height=c,a.p=c):i.clearRect(0,0,c,c),i.drawImage(b.Na(),d,d,c,c,0,0,c,c),e.texImage2D(3553,0,6408,6408,5121,h)}else e.texImage2D(3553,0,6408,6408,5121,b.Na());e.texParameteri(3553,10240,9729),e.texParameteri(3553,10241,9729),e.texParameteri(3553,10242,33071),e.texParameteri(3553,10243,33071),a.c.set(f,{Qa:g,nf:9729,of:9729})}}function Rk(a,b,c){var d=a.e;if(gb(d,b)){var e=a.f,f=c.extent,g=c.size,h=c.viewState,i=c.pixelRatio,j=h.resolution,k=h.center,l=h.rotation,h=new qk(e,k,j,l,g,f,i),f=new mk(.5*j/i,f);for(d.dispatchEvent(new Rh(b,d,h,f,c,null,e)),ok(f,e),f.ia()||pk(f,e,k,j,l,g,i,1,0,1,0,1,{}),nk(f,e)(),b=D(X(h.c),Number),O(b),c=0,d=b.length;d>c;++c)for(e=h.c[b[c].toString()],g=0,i=e.length;i>g;++g)e[g](h);a.g=f}}function Sk(a){a=a.d,a.activeTexture(33984),a.blendFuncSeparate(770,771,1,771),a.disable(2884),a.disable(2929),a.disable(3089),a.disable(2960)}function Tk(b){lb.call(this);var c=Uk(b);this.Yd=a(b.pixelRatio)?b.pixelRatio:Qs,this.Xd=c.logos,this.q=new Pe(this.Yk,void 0,this),ya(this,this.q),this.Uc=Ab(),this.Zd=Ab(),this.Wd=0,this.d=null,this.Ea=Qb(),this.p=this.Q=null,this.b=ed("DIV","ol-viewport"),this.b.style.position="relative",this.b.style.overflow="hidden",this.b.style.width="100%",this.b.style.height="100%",this.b.style.msTouchAction="none",Ws&&(this.b.className="ol-touch"),this.Da=ed("DIV","ol-overlaycontainer"),this.b.appendChild(this.Da),this.t=ed("DIV","ol-overlaycontainer-stopevent"),Pa(this.t,["click","dblclick","mousedown","touchstart","MSPointerDown",Mt,as?"DOMMouseScroll":"mousewheel"],Ba),this.b.appendChild(this.t),b=new Hf(this),Pa(b,W(Pt),this.gf,!1,this),ya(this,b),this.ga=c.keyboardEventTarget,this.r=new af,Pa(this.r,"key",this.ef,!1,this),ya(this,this.r),b=new ef(this.b),Pa(b,"mousewheel",this.ef,!1,this),ya(this,b),this.i=c.controls,this.Vc=c.deviceOptions,this.g=c.interactions,this.n=c.overlays,this.ba=new c.$k(this.b,this),ya(this,this.ba),this.gc=new Xe,ya(this,this.gc),Pa(this.gc,"resize",this.j,!1,this),this.V=null,this.F=[],this.oa=[],this.Ab=new Cg(p(this.Jh,this),p(this.ri,this)),this.ca={},Pa(this,mb("layergroup"),this.ai,!1,this),Pa(this,mb("view"),this.$i,!1,this),Pa(this,mb("size"),this.pi,!1,this),Pa(this,mb("target"),this.qi,!1,this),this.G(c.xl),this.i.forEach(function(a){a.setMap(this)},this),Pa(this.i,"add",function(a){a.element.setMap(this)},!1,this),Pa(this.i,"remove",function(a){a.element.setMap(null)},!1,this),this.g.forEach(function(a){a.setMap(this)},this),Pa(this.g,"add",function(a){a.element.setMap(this)},!1,this),Pa(this.g,"remove",function(a){a.element.setMap(null)},!1,this),this.n.forEach(function(a){a.setMap(this)},this),Pa(this.n,"add",function(a){a.element.setMap(this)},!1,this),Pa(this.n,"remove",function(a){a.element.setMap(null)},!1,this)}function Uk(b){var c=null;a(b.keyboardEventTarget)&&(c=i(b.keyboardEventTarget)?document.getElementById(b.keyboardEventTarget):b.keyboardEventTarget);var d={},e={};if(!a(b.logo)||"boolean"==typeof b.logo&&b.logo)e["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]="http://openlayers.org/";else{var f=b.logo;i(f)?e[f]="":l(f)&&(e[f.src]=f.href)}f=b.layers instanceof zi?b.layers:new zi({layers:b.layers}),d.layergroup=f,d.target=b.target,d.view=a(b.view)?b.view:new Dc;var h,f=qg;a(b.renderer)?g(b.renderer)?h=b.renderer:i(b.renderer)&&(h=[b.renderer]):h=fu;var j,k;for(j=0,k=h.length;k>j;++j){var m=h[j];if("canvas"==m){if(Ts){f=Nj;break}}else{if("dom"==m){f=Zj;break}if("webgl"==m&&Ls){f=Pk;break}}}var n;n=a(b.controls)?g(b.controls)?new zd(K(b.controls)):b.controls:je(),h=a(b.deviceOptions)?b.deviceOptions:{};var o;return o=a(b.interactions)?g(b.interactions)?new zd(K(b.interactions)):b.interactions:yi(),b=a(b.overlays)?g(b.overlays)?new zd(K(b.overlays)):b.overlays:new zd,{controls:n,deviceOptions:h,interactions:o,keyboardEventTarget:c,logos:e,overlays:b,$k:f,xl:d}}function Vk(b){lb.call(this),this.q=a(b.insertFirst)?b.insertFirst:!0,this.r=a(b.stopEvent)?b.stopEvent:!0,this.aa=gd("DIV"),this.aa.style.position="absolute",this.a={Wc:"",vd:"",Md:"",Nd:"",visible:!0},this.b=null,Pa(this,mb("element"),this.Uh,!1,this),Pa(this,mb("map"),this.hi,!1,this),Pa(this,mb("offset"),this.ji,!1,this),Pa(this,mb("position"),this.li,!1,this),Pa(this,mb("positioning"),this.mi,!1,this),a(b.element)&&this.Ee(b.element),this.j(a(b.offset)?b.offset:[0,0]),this.p(a(b.positioning)?b.positioning:"top-left"),a(b.position)&&this.f(b.position)}function Wk(b){var c=b.e(),d=b.n();if(a(c)&&null!==c.d&&a(d)){var d=c.f(d),e=c.e(),c=b.aa.style,f=b.g(),g=b.i(),h=f[0],f=f[1];"bottom-right"==g||"center-right"==g||"top-right"==g?(""!==b.a.vd&&(b.a.vd=c.left=""),h=Math.round(e[0]-d[0]-h)+"px",b.a.Md!=h&&(b.a.Md=c.right=h)):(""!==b.a.Md&&(b.a.Md=c.right=""),("bottom-center"==g||"center-center"==g||"top-center"==g)&&(h-=Vd(b.aa).width/2),h=Math.round(d[0]+h)+"px",b.a.vd!=h&&(b.a.vd=c.left=h)),"bottom-left"==g||"bottom-center"==g||"bottom-right"==g?(""!==b.a.Nd&&(b.a.Nd=c.top=""),d=Math.round(e[1]-d[1]-f)+"px",b.a.Wc!=d&&(b.a.Wc=c.bottom=d)):(""!==b.a.Wc&&(b.a.Wc=c.bottom=""),("center-left"==g||"center-center"==g||"center-right"==g)&&(f-=Vd(b.aa).height/2),d=Math.round(d[1]+f)+"px",b.a.Nd!=d&&(b.a.Nd=c.top=d)),b.a.visible||(Xd(b.aa,!0),b.a.visible=!0)}else b.a.visible&&(Xd(b.aa,!1),b.a.visible=!1)}function Xk(b){b=a(b)?b:{},this.e=a(b.collapsed)?b.collapsed:!0,this.f=a(b.collapsible)?b.collapsible:!0,this.f||(this.e=!1);var c=a(b.className)?b.className:"ol-overviewmap",d=a(b.tipLabel)?b.tipLabel:"Overview map";this.j=a(b.collapseLabel)?b.collapseLabel:"«",this.q=a(b.label)?b.label:"»",this.p=ed("SPAN",{},this.f&&!this.e?this.j:this.q),d=ed("BUTTON",{type:"button",title:d},this.p),Pa(d,"click",this.hj,!1,this),Pa(d,["mouseout",rs],function(){this.blur()},!1);var e=ed("DIV","ol-overviewmap-map"),f=this.b=new Tk({controls:new zd,interactions:new zd,target:e});a(b.layers)&&b.layers.forEach(function(a){f.Se(a)},this);var g=ed("DIV","ol-overviewmap-box");this.g=new Vk({position:[0,0],positioning:"bottom-left",element:g}),this.b.Te(this.g),c=ed("DIV",c+" ol-unselectable ol-control"+(this.e&&this.f?" ol-collapsed":"")+(this.f?"":" ol-uncollapsible"),e,d),ce.call(this,{element:c,render:a(b.render)?b.render:Zk,target:b.target})}function Yk(a){var b=a.a.a();null===b||a.b.a().O("rotation",b)}function Zk(){var a=this.a,b=this.b;if(null!==a.d&&null!==b.d){var c=a.e(),a=a.a().g(c),d=b.e(),c=b.a().g(d),e=b.f(cc(a)),b=b.f(Yb(a)),b=new _c(Math.abs(e[0]-b[0]),Math.abs(e[1]-b[1])),e=d[0],d=d[1];b.width<.1*e||b.height<.1*d||b.width>.75*e||b.height>.75*d?$k(this):Nb(c,a)||(a=this.b,c=this.a.a(),a.a().Oa(c.a()))}_k(this)}function $k(a){var b=a.a;a=a.b;var c=b.e(),b=b.a().g(c),c=a.e();a=a.a();var d=Math.log(7.5)/Math.LN2;ic(b,1/(.1*Math.pow(2,d/2))),a.ge(b,c)}function _k(b){var c=b.a,d=b.b;if(null!==c.d&&null!==d.d){var e=c.e(),f=c.a(),g=d.a();d.e();var h,c=f.e(),i=b.g,d=b.g.d(),f=f.g(e),e=g.b(),g=Xb(f),f=dc(f);b=b.a.a().a(),a(b)&&(h=[g[0]-b[0],g[1]-b[1]],ub(h,c),pb(h,b)),i.f(h),null!=d&&(h=new _c(Math.abs((g[0]-f[0])/e),Math.abs((f[1]-g[1])/e)),c=sd(ad(od(d))),!_r||ia("10")||c&&ia("8")?(d=d.style,as?d.MozBoxSizing="border-box":bs?d.WebkitBoxSizing="border-box":d.boxSizing="border-box",d.width=Math.max(h.width,0)+"px",d.height=Math.max(h.height,0)+"px"):(b=d.style,c?(c=$d(d,"padding"),d=ae(d),b.pixelWidth=h.width-d.left-c.left-c.right-d.right,b.pixelHeight=h.height-d.top-c.top-c.bottom-d.bottom):(b.pixelWidth=h.width,b.pixelHeight=h.height)))}}function al(a){Kd(a.element,"ol-collapsed"),pd(a.p,a.e?a.j:a.q),a.e=!a.e;var b=a.b;a.e||null!==b.d||(b.j(),$k(a),Sa(b,"postrender",function(){_k(this)},!1,a))}function bl(b){b=a(b)?b:{};var c=a(b.className)?b.className:"ol-scale-line";this.f=ed("DIV",c+"-inner"),this.aa=ed("DIV",c+" ol-unselectable",this.f),this.q=null,this.g=a(b.minWidth)?b.minWidth:64,this.b=!1,this.t=void 0,this.r="",this.e=null,ce.call(this,{element:this.aa,render:a(b.render)?b.render:cl,target:b.target}),Pa(this,mb("units"),this.F,!1,this),this.p(b.units||"metric")}function cl(a){a=a.frameState,null===a?this.q=null:this.q=a.viewState,dl(this)}function dl(a){var b=a.q;if(null===b)a.b&&(Xd(a.aa,!1),a.b=!1);else{var c=b.center,d=b.projection,b=d.je(b.resolution,c),e=d.c,f=a.j();for("degrees"!=e||"metric"!=f&&"imperial"!=f&&"us"!=f&&"nautical"!=f?"ft"!=e&&"m"!=e||"degrees"!=f?a.e=null:(null===a.e&&(a.e=zc(d,wc("EPSG:4326"))),c=Math.cos(ma(a.e(c)[1])),d=Fs.radius,"ft"==e&&(d/=.3048),b*=180/(Math.PI*c*d)):(a.e=null,c=Math.cos(ma(c[1])),b*=Math.PI*c*Fs.radius/180),c=a.g*b,e="","degrees"==f?1/60>c?(e="″",b*=3600):1>c?(e="′",b*=60):e="°":"imperial"==f?.9144>c?(e="in",b/=.0254):1609.344>c?(e="ft",b/=.3048):(e="mi",b/=1609.344):"nautical"==f?(b/=1852,e="nm"):"metric"==f?1>c?(e="mm",b*=1e3):1e3>c?e="m":(e="km",b/=1e3):"us"==f&&(.9144>c?(e="in",b*=39.37):1609.344>c?(e="ft",b/=.30480061):(e="mi",b/=1609.3472)),c=3*Math.floor(Math.log(a.g*b)/Math.log(10));;){if(d=gu[c%3]*Math.pow(10,Math.floor(c/3)),f=Math.round(d/b),isNaN(f))return Xd(a.aa,!1),void(a.b=!1);if(f>=a.g)break;++c}b=d+e,a.r!=b&&(a.f.innerHTML=b,a.r=b),a.t!=f&&(a.f.style.width=f+"px",a.t=f),a.b||(Xd(a.aa,!0),a.b=!0)}}function el(a){xa.call(this),this.c=a,this.a={}}function fl(a){T(a.a,Ua),a.a={}}function gl(a,b,c){eb.call(this),this.target=a,this.handle=b||a,this.a=c||new Md(NaN,NaN,NaN,NaN),this.b=od(a),this.c=new el(this),ya(this,this.c),Pa(this.handle,["touchstart","mousedown"],this.df,!1,this)}function hl(a){var b=a.type;"touchstart"==b||"touchmove"==b?Fa(a,a.a.targetTouches[0],a.b):"touchend"!=b&&"touchcancel"!=b||Fa(a,a.a.changedTouches[0],a.b)}function il(a,b,c){var d=td(ad(a.b));return b+=d.x-a.d.x,c+=d.y-a.d.y,a.d=d,a.nc+=b,a.oc+=c,b=kl(a,a.nc),a=ll(a,a.oc),new $c(b,a)}function jl(a,b,c,d){a.target.style.left=c+"px",a.target.style.top=d+"px",a.dispatchEvent(new ml("drag",a,b.clientX,b.clientY,0,c,d))}function kl(a,b){var c=a.a,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:1/0,Math.max(null!=d?d:-(1/0),b))}function ll(a,b){var c=a.a,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:1/0,Math.max(null!=d?d:-(1/0),b))}function ml(b,c,d,e,f,g,h){Aa.call(this,b),this.clientX=d,this.clientY=e,this.left=a(g)?g:c.nc,this.top=a(h)?h:c.oc}function nl(b){b=a(b)?b:{},this.e=void 0,this.f=ju,this.g=null,this.j=!1;var c=a(b.className)?b.className:"ol-zoomslider",d=ed("DIV",[c+"-thumb","ol-unselectable"]),c=ed("DIV",[c,"ol-unselectable","ol-control"],d);this.b=new gl(d),ya(this,this.b),Pa(this.b,"start",this.Th,!1,this),Pa(this.b,"drag",this.Rh,!1,this),Pa(this.b,"end",this.Sh,!1,this),Pa(c,"click",this.Qh,!1,this),Pa(d,"click",Ba),ce.call(this,{element:c,render:a(b.render)?b.render:ol})}function ol(a){if(null!==a.frameState){if(!this.j){var b=this.element,c=Vd(b),d=md(b),b=$d(d,"margin"),e=new _c(d.offsetWidth,d.offsetHeight),d=e.width+b.right+b.left,b=e.height+b.top+b.bottom;this.g=[d,b],d=c.width-d,b=c.height-b,c.width>c.height?(this.f=1,c=new Md(0,0,d,0)):(this.f=ju,c=new Md(0,0,0,b)),this.b.a=c||new Md(NaN,NaN,NaN,NaN),this.j=!0}a=a.frameState.viewState.resolution,a!==this.e&&(this.e=a,a=1-Fc(this.a.a())(a),c=this.b,b=md(this.element),1==this.f?Qd(b,c.a.left+c.a.width*a):Qd(b,c.a.left,c.a.top+c.a.height*a))}}function pl(a,b,c){var d=a.b.a;return ja(1===a.f?(b-d.left)/d.width:(c-d.top)/d.height,0,1)}function ql(a,b){return Ec(a.a.a())(1-b)}function rl(b){b=a(b)?b:{},this.b=a(b.extent)?b.extent:null;var c=a(b.className)?b.className:"ol-zoom-extent",d=ed("BUTTON",{type:"button",title:a(b.tipLabel)?b.tipLabel:"Fit to extent"});Pa(d,"click",this.e,!1,this),Pa(d,["mouseout",rs],function(){this.blur()},!1),c=ed("DIV",c+" ol-unselectable ol-control",d),ce.call(this,{element:c,target:b.target})}function sl(b){lb.call(this),b=a(b)?b:{},this.a=null,Pa(this,mb("tracking"),this.n,!1,this),this.b(a(b.tracking)?b.tracking:!1)}function tl(a){lb.call(this),this.i=a,Pa(this.i,["change","input"],this.g,!1,this),Pa(this,mb("value"),this.n,!1,this),Pa(this,mb("checked"),this.f,!1,this)}function ul(b){lb.call(this),this.X=void 0,this.b="geometry",this.g=null,this.a=void 0,this.f=null,Pa(this,mb(this.b),this.pd,!1,this),a(b)&&(b instanceof ch||null===b?this.Ma(b):this.G(b))}function vl(b){b=a(b)?b:{},this.g=this.d=this.e=this.c=this.b=this.a=null,this.f=void 0,this.tf(a(b.style)?b.style:gi),this.Mc(a(b.features)?g(b.features)?new zd(K(b.features)):b.features:new zd),a(b.map)&&this.setMap(b.map)}function wl(a){null===a.e||a.e.render()}function xl(){this.defaultDataProjection=null}function yl(b,c,d){var e;return a(d)&&(e={dataProjection:a(d.dataProjection)?d.dataProjection:b.Ba(c),featureProjection:d.featureProjection}),zl(b,e)}function zl(b,c){var d;return a(c)&&(d={featureProjection:c.featureProjection,dataProjection:null!=c.dataProjection?c.dataProjection:b.defaultDataProjection}),d}function Al(b,c,d){var e=a(d)?wc(d.featureProjection):null;return d=a(d)?wc(d.dataProjection):null,null===e||null===d||xc(e,d)?b:b instanceof ch?(c?b.clone():b).e(c?e:d,c?d:e):Cc(c?K(b):b,c?e:d,c?d:e)}function Bl(){this.defaultDataProjection=null}function Cl(b){return l(b)?b:i(b)?(b=ku(b),a(b)?b:null):null}function Dl(b){b=a(b)?b:{},this.defaultDataProjection=null,this.defaultDataProjection=wc(null!=b.defaultDataProjection?b.defaultDataProjection:"EPSG:4326"),this.c=b.geometryName}function El(a,b){return null===a?null:Al(mu[a.type](a),!1,b)}function Fl(b,c,d){d=El(c.geometry,d);var e=new ul;return a(b.c)&&e.e(b.c),e.Ma(d),a(c.id)&&e.d(c.id),a(c.properties)&&e.G(c.properties),e}function Gl(a){if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(a);if(a=a.xml)return a;throw Error("Your browser does not support serializing XML documents")}function Hl(a,b){return ru.createElementNS(a,b)}function Il(a,b){return null===a&&(a=""),ru.createNode(1,b,a)}function Jl(a,b){return Kl(a,b,[]).join("")}function Kl(a,b,c){if(4==a.nodeType||3==a.nodeType)c.push(b?String(a.nodeValue).replace(/(\r\n|\r|\n)/g,""):a.nodeValue);else for(a=a.firstChild;null!==a;a=a.nextSibling)Kl(a,b,c);return c}function Ll(a){return a.localName}function Ml(b){var c=b.localName;return a(c)?c:b.baseName}function Nl(a){return a instanceof Document}function Ol(a){return l(a)&&9==a.nodeType}function Pl(a){return a instanceof Node}function Ql(b){return l(b)&&a(b.nodeType)}function Rl(a,b,c){return a.getAttributeNS(b,c)||""}function Sl(b,c,d){var e="";return b=xu(b,c,d),a(b)&&(e=b.nodeValue),e}function Tl(a,b,c){return a.getAttributeNodeNS(b,c)}function Ul(a,b,c){var d=null;a=a.attributes;for(var e,f,g=0,h=a.length;h>g;++g)if(e=a[g],e.namespaceURI==b&&(f=e.prefix?e.prefix+":"+c:c,f==e.nodeName)){d=e;break}return d}function Vl(a,b,c,d){a.setAttributeNS(b,c,d)}function Wl(a,b,c,d){null===b?a.setAttribute(c,d):(b=a.ownerDocument.createNode(2,c,b),b.nodeValue=d,a.setAttributeNode(b))}function Xl(a){return(new DOMParser).parseFromString(a,"application/xml")}function Yl(b,c){return function(d,e){var f=b.call(c,d,e);a(f)&&L(e[e.length-1],f)}}function Zl(b,c){return function(d,e){var f=b.call(a(c)?c:this,d,e);a(f)&&e[e.length-1].push(f)}}function $l(b,c){return function(d,e){var f=b.call(a(c)?c:this,d,e);a(f)&&(e[e.length-1]=f)}}function _l(b){return function(c,d){var e=b.call(a(void 0)?void 0:this,c,d);a(e)&&da(d[d.length-1],a(void 0)?void 0:c.localName).push(e)}}function am(b,c){return function(d,e){var f=b.call(a(void 0)?void 0:this,d,e);a(f)&&(e[e.length-1][a(c)?c:d.localName]=f)}}function bm(a,b,c){return gm(a,b,c)}function cm(b,c){return function(d,e,f){b.call(a(c)?c:this,d,e,f),f[f.length-1].node.appendChild(d)}}function dm(b){var c,d;return function(e,f,g){if(!a(c)){c={};var h={};h[e.localName]=b,c[e.namespaceURI]=h,d=em(e.localName)}jm(c,d,f,g)}}function em(b,c){return function(d,e,f){return d=e[e.length-1].node,e=b,a(e)||(e=f),f=c,a(c)||(f=d.namespaceURI),su(f,e)}}function fm(a,b){for(var c=b.length,d=Array(c),e=0;c>e;++e)d[e]=a[b[e]];return d}function gm(b,c,d){d=a(d)?d:{};var e,f;for(e=0,f=b.length;f>e;++e)d[b[e]]=c;return d}function hm(b,c,d,e){for(c=c.firstElementChild;null!==c;c=c.nextElementSibling){var f=b[c.namespaceURI];a(f)&&(f=f[c.localName],a(f)&&f.call(e,c,d))}}function im(a,b,c,d,e){return d.push(a),hm(b,c,d,e),d.pop()}function jm(b,c,d,e,f,g){for(var h,i,j=(a(f)?f:d).length,k=0;j>k;++k)h=d[k],a(h)&&(i=c.call(g,h,e,a(f)?f[k]:void 0),a(i)&&b[i.namespaceURI][i.localName].call(g,i,h,e))}function km(a,b,c,d,e,f,g){e.push(a),jm(b,c,d,e,f,g),e.pop()}function lm(){this.defaultDataProjection=null}function mm(a,b,c){return a=nm(a,b,c),0<a.length?a[0]:null}function nm(a,b,c){var d=[];for(b=b.firstChild;null!==b;b=b.nextSibling)1==b.nodeType&&L(d,a.Ob(b,c));return d}function om(b){b=a(b)?b:{},this.featureType=b.featureType,this.featureNS=b.featureNS,this.srsName=b.srsName,this.schemaLocation="",this.defaultDataProjection=null}function pm(a){return a=Jl(a,!1),qm(a)}function qm(b){return(b=/^\s*(true|1)|(false|0)\s*$/.exec(b))?a(b[1])||!1:void 0}function rm(b){if(b=Jl(b,!1),b=/^\s*(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?))\s*$/.exec(b)){var c=Date.UTC(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10),parseInt(b[4],10),parseInt(b[5],10),parseInt(b[6],10))/1e3;if("Z"!=b[7]){var d="-"==b[8]?-1:1,c=c+60*d*parseInt(b[9],10);a(b[10])&&(c+=3600*d*parseInt(b[10],10))}return c}}function sm(a){return a=Jl(a,!1),tm(a)}function tm(a){return(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))?parseFloat(a[1]):void 0}function um(a){return a=Jl(a,!1),vm(a)}function vm(a){return(a=/^\s*(\d+)\s*$/.exec(a))?parseInt(a[1],10):void 0}function wm(a){return a=Jl(a,!1),Nr(a)}function xm(a,b){Am(a,b?"1":"0")}function ym(a,b){a.appendChild(ru.createTextNode(b.toPrecision()))}function zm(a,b){a.appendChild(ru.createTextNode(b.toString()))}function Am(a,b){a.appendChild(ru.createTextNode(b))}function Bm(b){b=a(b)?b:{},om.call(this,b),this.g=a(b.surface)?b.surface:!1,this.d=a(b.curve)?b.curve:!1,this.e=a(b.multiCurve)?b.multiCurve:!0,this.f=a(b.multiSurface)?b.multiSurface:!0,this.schemaLocation=a(b.schemaLocation)?b.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd"}function Cm(a,b,c){c=ca(c[c.length-1],"srsName"),b=b.K();for(var d,e=b.length,f=Array(e),g=0;e>g;++g){d=b[g];var h=g,i="enu";null!=c&&(i=nc(wc(c))),f[h]="en"===i.substr(0,2)?d[0]+" "+d[1]:d[1]+" "+d[0]}Am(a,f.join(" "))}function Dm(b){b=a(b)?b:{},om.call(this,b),this.schemaLocation=a(b.schemaLocation)?b.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}function Em(b){b=a(b)?b:{},this.defaultDataProjection=null,this.defaultDataProjection=wc("EPSG:4326"),this.c=b.readExtensions}function Fm(a,b,c){return a.push(parseFloat(b.getAttribute("lon")),parseFloat(b.getAttribute("lat"))),"ele"in c?(a.push(ca(c,"ele")),aa(c,"ele")):a.push(0),"time"in c?(a.push(ca(c,"time")),aa(c,"time")):a.push(0),a}function Gm(a,b){var c=b[b.length-1],d=a.getAttribute("href");null!==d&&(c.link=d),hm(Ku,a,b)}function Hm(a,b){b[b.length-1].extensionsNode_=a}function Im(b,c){var d=c[0],e=im({flatCoordinates:[]},Lu,b,c);if(a(e)){var f=ca(e,"flatCoordinates");aa(e,"flatCoordinates");var g=new vj(null);return xj(g,"XYZM",f),Al(g,!1,d),d=new ul(g),d.G(e),d}}function Jm(b,c){var d=c[0],e=im({flatCoordinates:[],ends:[]},Nu,b,c);if(a(e)){var f=ca(e,"flatCoordinates");aa(e,"flatCoordinates");var g=ca(e,"ends");aa(e,"ends");var h=new yj(null);return Aj(h,"XYZM",f,g),Al(h,!1,d),d=new ul(h),d.G(e),d}}function Km(b,c){var d=c[0],e=im({},Qu,b,c);if(a(e)){var f=Fm([],b,e),f=new Ah(f,"XYZM");return Al(f,!1,d),d=new ul(f),d.G(e),d}}function Lm(b,c){null===c&&(c=[]);for(var d=0,e=c.length;e>d;++d){var f=c[d];if(a(b.c)){var g=f.get("extensionsNode_")||null;b.c(f,g)}f.set("extensionsNode_",void 0)}}function Mm(a,b,c){a.setAttribute("href",b),b=ca(c[c.length-1],"properties"),km({node:a},Su,zu,[ca(b,"linkText"),ca(b,"linkType")],c,Ru)}function Nm(a,b,c){var d=c[c.length-1],e=d.node.namespaceURI,f=ca(d,"properties");switch(yu(a,null,"lat",b[1]),yu(a,null,"lon",b[0]),ca(d,"geometryLayout")){case"XYZM":0!==b[3]&&(f.time=b[3]);case"XYZ":0!==b[2]&&(f.ele=b[2]);break;case"XYM":0!==b[2]&&(f.time=b[2])}b=Zu[e],d=fm(f,b),km({node:a,properties:f},$u,zu,d,c,b)}function Om(b,c){var d=b.N();return a(d)?su(c[c.length-1].node.namespaceURI,_u[d.H()]):void 0}function Pm(a){return a=Rm(a),D(a,function(a){return a.b.substring(a.c,a.a)})}function Qm(a,b,c){this.b=a,this.c=b,this.a=c}function Rm(a){for(var b,c=RegExp("\r\n|\r|\n","g"),d=0,e=[];b=c.exec(a);)d=new Qm(a,d,b.index),e.push(d),d=c.lastIndex;return d<a.length&&(d=new Qm(a,d,a.length),e.push(d)),e}function Sm(){this.defaultDataProjection=null}function Tm(b){b=a(b)?b:{},this.defaultDataProjection=null,this.defaultDataProjection=wc("EPSG:4326"),this.a=a(b.altitudeMode)?b.altitudeMode:"none"}function Um(b){b=a(b)?b:{},this.d=b.font,this.e=b.rotation,this.c=b.scale,this.b=b.text,this.g=b.textAlign,this.o=b.textBaseline,this.a=a(b.fill)?b.fill:null,this.f=a(b.stroke)?b.stroke:null,this.i=a(b.offsetX)?b.offsetX:0,this.n=a(b.offsetY)?b.offsetY:0}function Vm(b){function c(a){return g(a)?a:i(a)?(!(a in e)&&"#"+a in e&&(a="#"+a),c(e[a])):d}b=a(b)?b:{},this.defaultDataProjection=null,this.defaultDataProjection=wc("EPSG:4326");var d=a(b.defaultStyle)?b.defaultStyle:nv,e={};this.b=a(b.extractStyles)?b.extractStyles:!0,this.c=e,this.d=function(){var b=this.get("Style");return a(b)?b:(b=this.get("styleUrl"),a(b)?c(b):d)}}function Wm(a){return a=Jl(a,!1),(a=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a))?(a=a[1],[parseInt(a.substr(6,2),16),parseInt(a.substr(4,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(0,2),16)/255]):void 0}function Xm(a){a=Jl(a,!1);for(var b,c=[],d=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;b=d.exec(a);)c.push(parseFloat(b[1]),parseFloat(b[2]),b[3]?parseFloat(b[3]):0),a=a.substr(b[0].length);return""!==a?void 0:c}function Ym(a){var b=Jl(a,!1);return null!=a.baseURI?Fe(a.baseURI,Nr(b)).toString():Nr(b)}function Zm(b){return b=sm(b),a(b)?Math.sqrt(b):void 0}function $m(a,b){return im(null,rv,a,b)}function _m(b,c){var d=im({k:[],gg:[]},tv,b,c);if(a(d)){var e,f,g=d.k,d=d.gg;for(e=0,f=Math.min(g.length,d.length);f>e;++e)g[4*e+3]=d[e];return d=new vj(null),xj(d,"XYZM",g),d}}function an(b,c){var d=im(null,uv,b,c);if(a(d)){var e=new vj(null);return xj(e,"XYZ",d),e}}function bn(b,c){var d=im(null,uv,b,c);if(a(d)){var e=new Mh(null);return Ph(e,"XYZ",d,[d.length]),e}}function cn(b,c){var d=im([],Av,b,c);if(!a(d))return null;if(0===d.length)return new oj(d);var e,f,g,h=!0,i=d[0].H();for(f=1,g=d.length;g>f;++f)if(e=d[f],e.H()!=i){h=!1;break}if(h){if("Point"==i){for(e=d[0],h=e.a,i=e.k,f=1,g=d.length;g>f;++f)e=d[f],L(i,e.k);return d=new Cj(null),gh(d,h,i),d.l(),d}return"LineString"==i?(e=new yj(null),Bj(e,d),e):"Polygon"==i?(e=new Dj(null),Hj(e,d),e):"GeometryCollection"==i?new oj(d):null}return new oj(d)}function dn(a,b){var c=im(null,uv,a,b);if(null!=c){var d=new Ah(null);return Bh(d,"XYZ",c),d}}function en(a,b){var c=im([null],sv,a,b);if(null!=c&&null!==c[0]){var d,e,f=new Mh(null),g=c[0],h=[g.length];for(d=1,e=c.length;e>d;++d)L(g,c[d]),h.push(g.length);return Ph(f,"XYZ",g,h),
f}}function fn(b,c){var d=im({},Hv,b,c);if(!a(d))return null;var e=ca(d,"fillStyle",hv),f=ca(d,"fill");a(f)&&!f&&(e=null);var f=ca(d,"imageStyle",kv),g=ca(d,"textStyle",mv),h=ca(d,"strokeStyle",lv),d=ca(d,"outline");return a(d)&&!d&&(h=null),[new ei({fill:e,image:f,stroke:h,text:g,zIndex:void 0})]}function gn(b,c){var d;for(d=c.firstChild;null!==d;d=d.nextSibling)if(1==d.nodeType){var e=hn(b,d);if(a(e))return e}}function hn(b,c){var d;for(d=c.firstElementChild;null!==d;d=d.nextElementSibling)if(G(fv,d.namespaceURI)&&"name"==d.localName)return wm(d);for(d=c.firstElementChild;null!==d;d=d.nextElementSibling){var e=tu(d);if(G(fv,d.namespaceURI)&&("Document"==e||"Folder"==e||"Placemark"==e||"kml"==e)&&(e=hn(b,d),a(e)))return e}}function jn(a,b){var c,d=Bd(b),d=[255*(4==d.length?d[3]:1),d[2],d[1],d[0]];for(c=0;4>c;++c){var e=parseInt(d[c],10).toString(16);d[c]=1==e.length?"0"+e:e}Am(a,d.join(""))}function kn(a,b,c){km({node:a},Vv,hw,[b],c)}function ln(b,c,d){var e={node:b};null!=c.X&&b.setAttribute("id",c.X),b=c.L();var f=c.a;a(f)&&(f=f.call(c,0),null!==f&&0<f.length&&(b.Style=f[0],f=f[0].c,null!==f&&(b.name=f.b))),f=Xv[d[d.length-1].node.namespaceURI],b=fm(b,f),km(e,Yv,zu,b,d,f),b=d[0],c=c.N(),null!=c&&(c=Al(c,!0,b)),km(e,Yv,rn,[c],d)}function mn(a,b,c){var d=b.k;a={node:a},a.layout=b.a,a.stride=b.s,km(a,Zv,dw,[d],c)}function nn(a,b,c){b=b.dd();var d=b.shift();a={node:a},km(a,$v,ew,b,c),km(a,$v,jw,[d],c)}function on(a,b){ym(a,b*b)}function pn(a,b,c){return su(ev[0],"gx:"+c)}function qn(a,b){return su(b[b.length-1].node.namespaceURI,"Placemark")}function rn(a,b){return null!=a?su(b[b.length-1].node.namespaceURI,Mv[a.H()]):void 0}function sn(){this.defaultDataProjection=null,this.defaultDataProjection=wc("EPSG:4326")}function tn(a,b){var c=a.getAttribute("k"),d=a.getAttribute("v");b[b.length-1].Oc[c]=d}function un(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")}function vn(){}function wn(b,c,d,e){var f;a(e)?f=a(void 0)?void 0:0:(e=[],f=0);var g,h;for(g=0;c>g;)for(h=b[g++],e[f++]=b[g++],e[f++]=h,h=2;d>h;++h)e[f++]=b[g++];e.length=f}function xn(b){b=a(b)?b:{},this.defaultDataProjection=null,this.defaultDataProjection=wc("EPSG:4326"),this.a=a(b.factor)?b.factor:1e5}function yn(b,c,d){d=a(d)?d:1e5;var e,f=Array(c);for(e=0;c>e;++e)f[e]=0;var g,h;for(g=0,h=b.length;h>g;)for(e=0;c>e;++e,++g){var i=b[g],j=i-f[e];f[e]=i,b[g]=j}return An(b,d)}function zn(b,c,d){var e=a(d)?d:1e5,f=Array(c);for(d=0;c>d;++d)f[d]=0;b=Bn(b,e);var g,e=0;for(g=b.length;g>e;)for(d=0;c>d;++d,++e)f[d]+=b[e],b[e]=f[d];return b}function An(b,c){var d,e,f=a(c)?c:1e5;for(d=0,e=b.length;e>d;++d)b[d]=Math.round(b[d]*f);for(f=0,d=b.length;d>f;++f)e=b[f],b[f]=0>e?~(e<<1):e<<1;for(f="",d=0,e=b.length;e>d;++d){for(var g=b[d],h=void 0,i="";g>=32;)h=(32|31&g)+63,i+=String.fromCharCode(h),g>>=5;h=g+63,i+=String.fromCharCode(h),f+=i}return f}function Bn(b,c){var d,e,f=a(c)?c:1e5,g=[],h=0,i=0;for(d=0,e=b.length;e>d;++d){var j=b.charCodeAt(d)-63,h=h|(31&j)<<i;32>j?(g.push(h),i=h=0):i+=5}for(h=0,i=g.length;i>h;++h)d=g[h],g[h]=1&d?~(d>>1):d>>1;for(h=0,i=g.length;i>h;++h)g[h]/=f;return g}function Cn(b){b=a(b)?b:{},this.defaultDataProjection=null,this.defaultDataProjection=wc(null!=b.defaultDataProjection?b.defaultDataProjection:"EPSG:4326")}function Dn(a,b){var c,d,e,f,g=[];for(e=0,f=a.length;f>e;++e)c=a[e],e>0&&g.pop(),d=c>=0?b[c]:b[~c].slice().reverse(),g.push.apply(g,d);for(c=0,d=g.length;d>c;++c)g[c]=g[c].slice();return g}function En(a,b,c,d,e){a=a.geometries;var f,g,h=[];for(f=0,g=a.length;g>f;++f)h[f]=Fn(a[f],b,c,d,e);return h}function Fn(b,c,d,e,f){var g=b.type,h=ow[g];return c="Point"===g||"MultiPoint"===g?h(b,d,e):h(b,c),d=new ul,d.Ma(Al(c,!1,f)),a(b.id)&&d.d(b.id),a(b.properties)&&d.G(b.properties),d}function Gn(a,b,c){a[0]=a[0]*b[0]+c[0],a[1]=a[1]*b[1]+c[1]}function Hn(b){b=a(b)?b:{},this.e=b.featureType,this.b=b.featureNS,this.c=a(b.gmlFormat)?b.gmlFormat:new Bm,this.d=a(b.schemaLocation)?b.schemaLocation:"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd",this.defaultDataProjection=null}function In(a,b){for(var c=b.firstChild;null!==c;c=c.nextSibling)if(1==c.nodeType)return Jn(a,c)}function Jn(a,b){var c={},d=vm(b.getAttribute("numberOfFeatures"));return c.numberOfFeatures=d,im(c,pw,b,[],a.c)}function Kn(a){for(a=a.firstChild;null!==a;a=a.nextSibling)if(1==a.nodeType)return im({},tw,a,[])}function Ln(a,b){var c=su("http://www.opengis.net/ogc","Filter"),d=su("http://www.opengis.net/ogc","FeatureId");c.appendChild(d),d.setAttribute("fid",b),a.appendChild(c)}function Mn(b){b=a(b)?b:{},this.defaultDataProjection=null,this.a=a(b.splitCollection)?b.splitCollection:!1}function Nn(a){return a=a.K(),0==a.length?"":a[0]+" "+a[1]}function On(a){a=a.K();for(var b=[],c=0,d=a.length;d>c;++c)b.push(a[c][0]+" "+a[c][1]);return b.join(",")}function Pn(a){var b=[];a=a.dd();for(var c=0,d=a.length;d>c;++c)b.push("("+On(a[c])+")");return b.join(",")}function Qn(a){var b=a.H();return a=xw[b](a),b=b.toUpperCase(),0===a.length?b+" EMPTY":b+"("+a+")"}function Rn(a){this.c=a,this.a=-1}function Sn(b,c){var d=a(c)?c:!1;return b>="0"&&"9">=b||"."==b&&!d}function Tn(a){var b=a.c.charAt(++a.a),c={position:a.a,value:b};if("("==b)c.type=2;else if(","==b)c.type=5;else if(")"==b)c.type=3;else if(Sn(b)||"-"==b){c.type=4;var d,b=a.a,e=!1;do"."==d&&(e=!0),d=a.c.charAt(++a.a);while(Sn(d,e));a=parseFloat(a.c.substring(b,a.a--)),c.value=a}else if(b>="a"&&"z">=b||b>="A"&&"Z">=b){c.type=1,b=a.a;do d=a.c.charAt(++a.a);while(d>="a"&&"z">=d||d>="A"&&"Z">=d);a=a.c.substring(b,a.a--).toUpperCase(),c.value=a}else{if(" "==b||"	"==b||"\r"==b||"\n"==b)return Tn(a);if(""!==b)throw Error("Unexpected character: "+b);c.type=6}return c}function Un(a){this.c=a}function Vn(b){var c=b.a;if(b.match(1)){var d=c.value;if("GEOMETRYCOLLECTION"==d){a:{if(b.match(2)){c=[];do c.push(Vn(b));while(b.match(5));if(b.match(3)){b=c;break a}}else if(Zn(b)){b=[];break a}throw Error($n(b))}return new oj(b)}var e=zw[d],c=yw[d];if(!a(e)||!a(c))throw Error("Invalid geometry type: "+d);return b=e.call(b),new c(b)}throw Error($n(b))}function Wn(a){for(var b=[],c=0;2>c;++c){var d=a.a;if(!a.match(4))break;b.push(d.value)}if(2==b.length)return b;throw Error($n(a))}function Xn(a){for(var b=[Wn(a)];a.match(5);)b.push(Wn(a));return b}function Yn(a){for(var b=[a.ve()];a.match(5);)b.push(a.ve());return b}function Zn(a){var b=1==a.a.type&&"EMPTY"==a.a.value;return b&&(a.a=Tn(a.c)),b}function $n(a){return"Unexpected `"+a.a.value+"` at position "+a.a.position+" in `"+a.c.c+"`"}function _n(){this.version=void 0}function ao(a,b){for(var c=b.firstChild;null!==c;c=c.nextSibling)if(1==c.nodeType)return bo(a,c);return null}function bo(b,c){b.version=Nr(c.getAttribute("version"));var d=im({version:b.version},Bw,c,[]);return a(d)?d:null}function co(a,b){return im({},Qw,a,b)}function eo(a,b){return im({},Mw,a,b)}function fo(b,c){var d=co(b,c);if(a(d)){var e=[vm(b.getAttribute("width")),vm(b.getAttribute("height"))];return d.size=e,d}}function go(a,b){return im([],Rw,a,b)}function ho(){this.b="http://mapserver.gis.umn.edu/mapserver",this.c=new Dm,this.defaultDataProjection=null}function io(b,c,d){c.namespaceURI=b.b;var e=tu(c),f=[];return 0===c.childNodes.length?f:("msGMLOutput"==e&&B(c.childNodes,function(b){if(1===b.nodeType){var c=d[0],e=b.localName,g=new RegExp(v("_layer"),""),e=e.replace(g,"")+"_feature";c.featureType=e,c.featureNS=this.b,g={},g[e]=Zl(this.c.ye,this.c),c=bm([ca(c,"featureNS"),null],g),b.namespaceURI=this.b,b=im([],c,b,d,this.c),a(b)&&L(f,b)}},b),"FeatureCollection"==e&&(b=im([],b.c.Td,c,[{}],b.c),a(b)&&(f=b)),f)}function jo(b){lb.call(this),b=a(b)?b:{},this.a=null,this.e=Ac,this.d=void 0,Pa(this,mb("projection"),this.Ui,!1,this),Pa(this,mb("tracking"),this.Vi,!1,this),a(b.projection)&&this.n(wc(b.projection)),a(b.trackingOptions)&&this.j(b.trackingOptions),this.b(a(b.tracking)?b.tracking:!1)}function ko(a,b,c){for(var d,e,f,g,h,i=[],j=a(0),k=a(1),l=b(j),m=b(k),n=[k,j],o=[m,l],p=[1,0],q={},r=1e5;0<--r&&0<p.length;)f=p.pop(),j=n.pop(),l=o.pop(),k=f.toString(),k in q||(i.push(l[0],l[1]),q[k]=!0),g=p.pop(),k=n.pop(),m=o.pop(),h=(f+g)/2,d=a(h),e=b(d),kh(e[0],e[1],l[0],l[1],m[0],m[1])<c?(i.push(m[0],m[1]),k=g.toString(),q[k]=!0):(p.push(g,h,h,f),o.push(m,e,e,l),n.push(k,d,d,j));return i}function lo(a,b,c,d,e){var f=wc("EPSG:4326");return ko(function(d){return[a,b+(c-b)*d]},yc(f,d),e)}function mo(a,b,c,d,e){var f=wc("EPSG:4326");return ko(function(d){return[b+(c-b)*d,a]},yc(f,d),e)}function no(b){b=a(b)?b:{},this.o=this.g=null,this.d=this.b=1/0,this.f=this.e=-(1/0),this.r=a(b.targetSize)?b.targetSize:100,this.p=a(b.maxLines)?b.maxLines:100,this.a=[],this.c=[],this.q=a(b.strokeStyle)?b.strokeStyle:Tw,this.j=this.i=void 0,this.n=null,this.setMap(a(b.map)?b.map:null)}function oo(b,c,d,e,f){var g=f;return c=lo(c,b.e,b.b,b.o,d),g=a(b.a[g])?b.a[g]:new vj(null),xj(g,"XY",c),fc(g.D(),e)&&(b.a[f++]=g),f}function po(b,c,d,e,f){var g=f;return c=mo(c,b.f,b.d,b.o,d),g=a(b.c[g])?b.c[g]:new vj(null),xj(g,"XY",c),fc(g.D(),e)&&(b.c[f++]=g),f}function qo(a,b,c,d,e,f,g){Pf.call(this,a,b,c,0,d),this.o=e,this.a=new Image,null!==f&&(this.a.crossOrigin=f),this.d={},this.b=null,this.state=0,this.g=g}function ro(a,b,c,d,e){Pf.call(this,a,b,c,2,d),this.a=e}function so(a,b,c,d,e){Qf.call(this,a,b),this.g=c,this.c=new Image,null!==d&&(this.c.crossOrigin=d),this.d={},this.b=null,this.o=e}function to(a,b,c){return function(d,e,f){return c(a,b,d,e,f)}}function uo(){}function vo(a,b){eb.call(this),this.a=new el(this);var c=a;b&&(c=od(a)),this.a.La(c,"dragenter",this.nk),c!=a&&this.a.La(c,"dragover",this.ok),this.a.La(a,"dragover",this.pk),this.a.La(a,"drop",this.qk)}function wo(a){a.prototype.then=a.prototype.then,a.prototype.$goog_Thenable=!0}function xo(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}}function yo(a,b){Vw||zo(),Ww||(Vw(),Ww=!0),Xw.push(new Bo(a,b))}function zo(){if(Hr.Promise&&Hr.Promise.resolve){var a=Hr.Promise.resolve();Vw=function(){a.then(Ao)}}else Vw=function(){Ue(Ao)}}function Ao(){for(;Xw.length;){var a=Xw;Xw=[];for(var b=0;b<a.length;b++){var c=a[b];try{c.a.call(c.c)}catch(d){Te(d)}}}Ww=!1}function Bo(a,b){this.a=a,this.c=b}function Co(a,b){this.c=Yw,this.f=void 0,this.a=this.b=null,this.d=this.e=!1;try{var c=this;a.call(b,function(a){Go(c,Zw,a)},function(a){Go(c,$w,a)})}catch(d){Go(this,$w,d)}}function Do(a,b){if(a.c==Yw)if(a.b){var c=a.b;if(c.a){for(var d,e=0,f=-1,g=0;(d=c.a[g])&&!((d=d.wc)&&(e++,d==a&&(f=g),f>=0&&e>1));g++);f>=0&&(c.c==Yw&&1==e?Do(c,b):(e=c.a.splice(f,1)[0],Jo(c,e,$w,b)))}}else Go(a,$w,b)}function Eo(a,b){a.a&&a.a.length||a.c!=Zw&&a.c!=$w||Io(a),a.a||(a.a=[]),a.a.push(b)}function Fo(b,c,d,e){var f={wc:null,Gf:null,If:null};return f.wc=new Co(function(b,g){f.Gf=c?function(a){try{var d=c.call(e,a);b(d)}catch(f){g(f)}}:b,f.If=d?function(c){try{var f=d.call(e,c);!a(f)&&c instanceof Lo?g(c):b(f)}catch(h){g(h)}}:g}),f.wc.b=b,Eo(b,f),f.wc}function Go(a,b,c){if(a.c==Yw){if(a==c)b=$w,c=new TypeError("Promise cannot resolve to itself");else{if(xo(c))return a.c=1,void c.then(a.g,a.o,a);if(l(c))try{var d=c.then;if(k(d))return void Ho(a,c,d)}catch(e){b=$w,c=e}}a.f=c,a.c=b,Io(a),b!=$w||c instanceof Lo||Ko(a,c)}}function Ho(a,b,c){function d(b){f||(f=!0,a.o(b))}function e(b){f||(f=!0,a.g(b))}a.c=1;var f=!1;try{c.call(b,e,d)}catch(g){d(g)}}function Io(a){a.e||(a.e=!0,yo(a.i,a))}function Jo(a,b,c,d){if(c==Zw)b.Gf(d);else{if(b.wc)for(;a&&a.d;a=a.b)a.d=!1;b.If(d)}}function Ko(a,b){a.d=!0,yo(function(){a.d&&_w.call(null,b)})}function Lo(a){s.call(this,a)}function Mo(a,b){this.e=[],this.p=a,this.j=b||null,this.d=this.a=!1,this.b=void 0,this.i=this.q=this.g=!1,this.f=0,this.c=null,this.o=0}function No(a,b,c){a.a=!0,a.b=c,a.d=!b,Ro(a)}function Oo(a){if(a.a){if(!a.i)throw new So;a.i=!1}}function Po(a,b,c,d){a.e.push([b,c,d]),a.a&&Ro(a)}function Qo(a){return E(a.e,function(a){return k(a[1])})}function Ro(b){if(b.f&&b.a&&Qo(b)){var c=b.f,d=ax[c];d&&(Hr.clearTimeout(d.X),delete ax[c]),b.f=0}b.c&&(b.c.o--,delete b.c);for(var c=b.b,e=d=!1;b.e.length&&!b.g;){var f=b.e.shift(),g=f[0],h=f[1],f=f[2];if(g=b.d?h:g)try{var i=g.call(f||b.j,c);a(i)&&(b.d=b.d&&(i==c||i instanceof Error),b.b=c=i),xo(c)&&(e=!0,b.g=!0)}catch(j){c=j,b.d=!0,Qo(b)||(d=!0)}}b.b=c,e&&(i=p(b.n,b,!0),e=p(b.n,b,!1),c instanceof Mo?(Po(c,i,e),c.q=!0):c.then(i,e)),d&&(c=new Uo(c),ax[c.X]=c,b.f=c.X)}function So(){s.call(this)}function To(){s.call(this)}function Uo(a){this.X=Hr.setTimeout(p(this.c,this),0),this.a=a}function Vo(b,c){a(b.name)?(this.name=b.name,this.code=bx[b.name]):(this.code=b.code,this.name=Wo(b.code)),s.call(this,t("%s %s",this.name,c))}function Wo(b){var c=Z(function(a){return b==a});if(!a(c))throw Error("Invalid code: "+b);return c}function Xo(a,b){Aa.call(this,a.type,b)}function Yo(){eb.call(this),this.bb=new FileReader,this.bb.onloadstart=p(this.a,this),this.bb.onprogress=p(this.a,this),this.bb.onload=p(this.a,this),this.bb.onabort=p(this.a,this),this.bb.onerror=p(this.a,this),this.bb.onloadend=p(this.a,this)}function Zo(a){var b=new Mo;return a.La("loadend",q(function(a,b){var c=b.bb.result,d=b.getError();null==c||d?(Oo(a),No(a,!1,d)):(Oo(a),No(a,!0,c)),b.hc()},b,a)),b}function $o(b){b=a(b)?b:{},Gg.call(this,{handleEvent:As}),this.f=a(b.formatConstructors)?b.formatConstructors:[],this.j=a(b.projection)?wc(b.projection):null,this.e=null,this.d=void 0}function _o(a,b,c,d,e){Aa.call(this,a,b),this.features=d,this.file=c,this.projection=e}function ap(a,b){this.x=a,this.y=b}function bp(b){b=a(b)?b:{},Tg.call(this,{handleDownEvent:ep,handleDragEvent:cp,handleUpEvent:dp}),this.i=a(b.condition)?b.condition:Qg,this.d=this.f=void 0,this.g=0}function cp(b){if(Sg(b)){var c=b.map,d=c.e();b=b.pixel,b=new ap(b[0]-d[0]/2,d[1]/2-b[1]),d=Math.atan2(b.y,b.x),b=Math.sqrt(b.x*b.x+b.y*b.y);var e=c.a(),f=Gc(e);c.render(),a(this.f)&&Hg(c,e,f.rotation-(d-this.f)),this.f=d,a(this.d)&&Jg(c,e,f.resolution/b*this.d),a(this.d)&&(this.g=this.d/b),this.d=b}}function dp(a){if(!Sg(a))return!0;a=a.map;var b=a.a();Ic(b,-1);var c=Gc(b),d=this.g-1,e=c.rotation,e=b.constrainRotation(e,0);return Hg(a,b,e,void 0,void 0),c=c.resolution,c=b.constrainResolution(c,0,d),Jg(a,b,c,void 0,400),this.g=0,!1}function ep(a){return Sg(a)&&this.i(a)?(Ic(a.map.a(),1),this.d=this.f=void 0,!0):!1}function fp(a){this.a=dx(a),this.c={}}function gp(a){return a=a.a.all(),D(a,function(a){return a[4]})}function hp(a,b){var c=a.a.search(b);return D(c,function(a){return a[4]})}function ip(a,b,c,d){return jp(hp(a,b),c,d)}function jp(a,b,c){for(var d,e=0,f=a.length;f>e&&!(d=b.call(c,a[e]));e++);return d}function kp(b){b=a(b)?b:{},Kf.call(this,{attributions:b.attributions,logo:b.logo,projection:b.projection,state:a(b.state)?b.state:void 0}),this.b=new fp,this.d={},this.f={},this.o={},this.i={},a(b.features)&&this.fb(b.features)}function lp(a,b,c){a.i[b]=[Pa(c,"change",a.Af,!1,a),Pa(c,"propertychange",a.Af,!1,a)]}function mp(b,c,d){var e=d.X;a(e)?b.f[e.toString()]=d:b.o[c]=d}function np(a,b,c){a.ra([b[0],b[1],b[0],b[1]],function(a){return a.N().Jb(b[0],b[1])?c.call(void 0,a):void 0})}function op(a,b){for(var c in a.f)if(a.f[c]===b){delete a.f[c];break}}function pp(a,b){Aa.call(this,a),this.feature=b}function qp(a,b){Aa.call(this,a),this.feature=b}function rp(b){Tg.call(this,{handleDownEvent:up,handleEvent:tp,handleUpEvent:vp}),this.Q=null,this.ga=a(b.source)?b.source:null,this.ba=a(b.features)?b.features:null,this.Ab=a(b.snapTolerance)?b.snapTolerance:12,this.Ta=a(b.minPointsPerRing)?b.minPointsPerRing:3;var c,d=this.F=b.type;"Point"===d||"MultiPoint"===d?c=ex:"LineString"===d||"MultiLineString"===d?c=fx:("Polygon"===d||"MultiPolygon"===d)&&(c=gx),this.d=c,this.f=this.r=this.j=this.g=this.i=null,this.J=new vl({style:a(b.style)?b.style:sp()}),this.ca=b.geometryName,this.eb=a(b.condition)?b.condition:Pg,Pa(this,mb("active"),this.ea,!1,this)}function sp(){var a=hi();return function(b){return a[b.N().H()]}}function tp(a){var b;if(b=a.map,nd(document,b.b)&&"none"!=b.b.style.display){var c=b.e();null==c||0>=c[0]||0>=c[1]?b=!1:(b=b.a(),b=null!==b&&Hc(b)?!0:!1)}else b=!1;return b?(b=!0,a.type===Lt?b=wp(this,a):a.type===Jt&&(b=!1),Vg.call(this,a)&&b):!0}function up(a){return this.eb(a)?(this.Q=a.pixel,!0):!1}function vp(a){var b=this.Q,c=a.pixel,d=b[0]-c[0],b=b[1]-c[1],c=!0;return 4>=d*d+b*b&&(wp(this,a),null===this.i?yp(this,a):this.d===ex||xp(this,a)?this.V():(a=a.coordinate,d=this.g.N(),this.d===fx?(this.i=a.slice(),b=d.K(),b.push(a.slice()),d.U(b)):this.d===gx&&(this.f[0].push(a.slice()),d.U(this.f)),Ap(this)),c=!1),c}function wp(a,b){if(a.d===ex&&null===a.i)yp(a,b);else if(null===a.i){var c=b.coordinate.slice();null===a.j?(a.j=new ul(new Ah(c)),Ap(a)):a.j.N().U(c)}else{var d,e,c=b.coordinate,f=a.g.N();a.d===ex?(e=f.K(),e[0]=c[0],e[1]=c[1],f.U(e)):(a.d===fx?d=f.K():a.d===gx&&(d=a.f[0]),xp(a,b)&&(c=a.i.slice()),a.j.N().U(c),e=d[d.length-1],e[0]=c[0],e[1]=c[1],a.d===fx?f.U(d):a.d===gx&&(a.r.N().U(d),f.U(a.f))),Ap(a)}return!0}function xp(a,b){var c=!1;if(null!==a.g){var d=a.g.N(),e=!1,f=[a.i];if(a.d===fx?e=2<d.K().length:a.d===gx&&(e=d.K()[0].length>a.Ta,f=[a.f[0][0],a.f[0][a.f[0].length-2]]),e)for(var d=b.map,e=0,g=f.length;g>e;e++){var h=f[e],i=d.f(h),j=b.pixel,c=j[0]-i[0],i=j[1]-i[1];if(c=Math.sqrt(c*c+i*i)<=a.Ab){a.i=h;break}}}return c}function yp(b,c){var d=c.coordinate;b.i=d;var e;b.d===ex?e=new Ah(d.slice()):b.d===fx?e=new vj([d.slice(),d.slice()]):b.d===gx&&(b.r=new ul(new vj([d.slice(),d.slice()])),b.f=[[d.slice(),d.slice()]],e=new Mh(b.f)),b.g=new ul,a(b.ca)&&b.g.e(b.ca),b.g.Ma(e),Ap(b),b.dispatchEvent(new qp("drawstart",b.g))}function zp(a){a.i=null;var b=a.g;return null!==b&&(a.g=null,a.j=null,a.r=null,a.J.a.clear()),b}function Ap(a){var b=[];null===a.g||b.push(a.g),null===a.r||b.push(a.r),null===a.j||b.push(a.j),a.J.Mc(new zd(b))}function Bp(b){Tg.call(this,{handleDownEvent:Dp,handleDragEvent:Ep,handleEvent:Gp,handleUpEvent:Fp}),this.ba=a(b.deleteCondition)?b.deleteCondition:db(Pg,Og),this.V=this.f=null,this.Q=[0,0],this.d=new fp,this.i=a(b.pixelTolerance)?b.pixelTolerance:10,this.J=!1,this.g=null,this.j=new vl({style:a(b.style)?b.style:Jp()}),this.F={Point:this.Fl,LineString:this.jg,LinearRing:this.jg,Polygon:this.Hl,MultiPoint:this.Cl,MultiLineString:this.Bl,MultiPolygon:this.El,GeometryCollection:this.Al},this.r=b.features,this.r.forEach(this.wf,this),Pa(this.r,"add",this.Wh,!1,this),Pa(this.r,"remove",this.Xh,!1,this)}function Cp(a,b){var c=a.f;null===c?(c=new ul(new Ah(b)),a.f=c,a.j.rf(c)):c.N().U(b)}function Dp(a){Hp(this,a.pixel,a.map),this.g=[];var b=this.f;if(null!==b){a=[];for(var b=b.N().K(),c=Jb([b]),c=hp(this.d,c),d=0,e=c.length;e>d;++d){var f=c[d],g=f.fa;tb(g[0],b)?this.g.push([f,0]):tb(g[1],b)?this.g.push([f,1]):m(g)in this.V&&a.push([f,b])}for(d=a.length-1;d>=0;--d)this.ui.apply(this,a[d])}return null!==this.f}function Ep(a){a=a.coordinate;for(var b=0,c=this.g.length;c>b;++b){for(var d=this.g[b],e=d[0],f=e.depth,g=e.geometry,h=g.K(),i=e.fa,d=d[1];a.length<g.s;)a.push(0);switch(g.H()){case"Point":h=a,i[0]=i[1]=a;break;case"MultiPoint":h[e.index]=a,i[0]=i[1]=a;break;case"LineString":h[e.index+d]=a,i[d]=a;break;case"MultiLineString":h[f[0]][e.index+d]=a,i[d]=a;break;case"Polygon":h[f[0]][e.index+d]=a,i[d]=a;break;case"MultiPolygon":h[f[1]][f[0]][e.index+d]=a,i[d]=a}g.U(h),Cp(this,a)}}function Fp(){for(var a,b=this.g.length-1;b>=0;--b)a=this.g[b][0],this.d.update(Jb(a.fa),a);return!1}function Gp(b){var c,d=b.map.a();if(K(d.j)[1]||b.type!=Lt||(this.Q=b.pixel,Hp(this,b.pixel,b.map)),null!==this.f&&this.J&&this.ba(b)){this.f.N(),c=this.g;var e,f,g,h,i,j,k,l,n,d={},o=!1;for(i=c.length-1;i>=0;--i)if(g=c[i],l=g[0],h=l.geometry,f=h.K(),n=m(l.feature),e=k=j=void 0,0===g[1]?(k=l,j=l.index):1==g[1]&&(e=l,j=l.index+1),n in d||(d[n]=[e,k,j]),g=d[n],a(e)&&(g[0]=e),a(k)&&(g[1]=k),a(g[0])&&a(g[1])){switch(e=f,o=!1,k=j-1,h.H()){case"MultiLineString":f[l.depth[0]].splice(j,1),o=!0;break;case"LineString":f.splice(j,1),o=!0;break;case"MultiPolygon":e=e[l.depth[1]];case"Polygon":e=e[l.depth[0]],4<e.length&&(j==e.length-1&&(j=0),e.splice(j,1),o=!0,0===j&&(e.pop(),e.push(e[0]),k=e.length-1))}o&&(this.d.remove(g[0]),this.d.remove(g[1]),h.U(f),f={depth:l.depth,feature:l.feature,geometry:l.geometry,index:k,fa:[g[0].fa[0],g[1].fa[1]]},this.d.na(Jb(f.fa),f),Ip(this,h,j,l.depth,-1),this.j.wd(this.f),this.f=null)}c=o}return Vg.call(this,b)&&!c}function Hp(a,b,c){function d(a,b){return vb(e,qb(e,a.fa))-vb(e,qb(e,b.fa))}var e=c.Ga(b),f=c.Ga([b[0]-a.i,b[1]+a.i]),g=c.Ga([b[0]+a.i,b[1]-a.i]),f=Jb([f,g]),f=hp(a.d,f);if(0<f.length){f.sort(d);var g=f[0].fa,h=qb(e,g),i=c.f(h);if(Math.sqrt(vb(b,i))<=a.i){for(b=c.f(g[0]),c=c.f(g[1]),b=vb(i,b),c=vb(i,c),a.J=Math.sqrt(Math.min(b,c))<=a.i,a.J&&(h=b>c?g[1]:g[0]),Cp(a,h),c={},c[m(g)]=!0,b=1,i=f.length;i>b&&(h=f[b].fa,tb(g[0],h[0])&&tb(g[1],h[1])||tb(g[0],h[1])&&tb(g[1],h[0]));++b)c[m(h)]=!0;return void(a.V=c)}}null!==a.f&&(a.j.wd(a.f),a.f=null)}function Ip(b,c,d,e,f){ip(b.d,c.D(),function(b){b.geometry===c&&(!a(e)||P(b.depth,e))&&b.index>d&&(b.index+=f)})}function Jp(){var a=hi();return function(){return a.Point}}function Kp(b){Gg.call(this,{handleEvent:Lp}),b=a(b)?b:{},this.g=a(b.condition)?b.condition:Og,this.f=a(b.addCondition)?b.addCondition:zs,this.p=a(b.removeCondition)?b.removeCondition:zs,this.r=a(b.toggleCondition)?b.toggleCondition:Qg;var c;if(a(b.layers))if(k(b.layers))c=b.layers;else{var d=b.layers;c=function(a){return G(d,a)}}else c=As;this.e=c,this.d=new vl({style:a(b.style)?b.style:Mp()}),b=this.d.a,Pa(b,"add",this.i,!1,this),Pa(b,"remove",this.q,!1,this)}function Lp(b){if(!this.g(b))return!0;var c=this.f(b),d=this.p(b),e=this.r(b),f=b.map,g=this.d.a;if(c||d||e){var h=[],i=[];for(f.oe(b.pixel,function(a){-1==Vr.indexOf.call(g.a,a,void 0)?(c||e)&&i.push(a):(d||e)&&h.push(a)},void 0,this.e),f=h.length-1;f>=0;--f)g.remove(h[f]);g.qf(i)}else f=f.oe(b.pixel,function(a){return a},void 0,this.e),a(f)&&1==g.Ib()&&g.item(0)==f||(0!==g.Ib()&&g.clear(),a(f)&&g.push(f));return Ng(b)}function Mp(){var a=hi();return L(a.Polygon,a.LineString),L(a.GeometryCollection,a.LineString),function(b){return a[b.N().H()]}}function Np(b){b=a(b)?b:{},Hi.call(this,b),this.ea=null,Pa(this,mb("gradient"),this.Wd,!1,this),this.fc(a(b.gradient)?b.gradient:hx);var c,d=Op(a(b.radius)?b.radius:8,a(b.blur)?b.blur:15,a(b.shadow)?b.shadow:250),e=Array(256),f=a(b.weight)?b.weight:"weight";c=i(f)?function(a){return a.get(f)}:f,this.oa(function(b){b=c(b),b=a(b)?ja(b,0,1):1;var f=255*b|0,g=e[f];return a(g)||(g=[new ei({image:new kg({opacity:b,src:d})})],e[f]=g),g}),this.set("renderOrder",null),Pa(this,"render",this.Xd,!1,this)}function Op(a,b,c){var d=a+b+1,e=2*d,e=ud(e,e);return e.shadowOffsetX=e.shadowOffsetY=c,e.shadowBlur=b,e.shadowColor="#000",e.beginPath(),b=d-c,e.arc(b,b,a,0,2*Math.PI,!0),e.fill(),e.canvas.toDataURL()}function Pp(a){return[a]}function Qp(a,b){var c=b||{},d=c.document||document,e=gd("SCRIPT"),f={$f:e,bc:void 0},g=new Mo(Sp,f),h=null,i=null!=c.timeout?c.timeout:5e3;return i>0&&(h=window.setTimeout(function(){Tp(e,!0);var b=new Up(jx,"Timeout reached for loading script "+a);Oo(g),No(g,!1,b)},i),f.bc=h),e.onload=e.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(Tp(e,c.Zg||!1,h),Oo(g),No(g,!0,null))},e.onerror=function(){Tp(e,!0,h);var b=new Up(ix,"Error while loading script "+a);Oo(g),No(g,!1,b)},cd(e,{type:"text/javascript",charset:"UTF-8",src:a}),Rp(d).appendChild(e),g}function Rp(a){var b=a.getElementsByTagName("HEAD");return b&&0!=b.length?b[0]:a.documentElement}function Sp(){if(this&&this.$f){var a=this.$f;a&&"SCRIPT"==a.tagName&&Tp(a,!0,this.bc)}}function Tp(a,b,d){null!=d&&Hr.clearTimeout(d),a.onload=c,a.onerror=c,a.onreadystatechange=c,b&&window.setTimeout(function(){ld(a)},0)}function Up(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+b),s.call(this,c),this.code=a}function Vp(a,b){this.c=new Ae(a),this.a=b?b:"callback",this.bc=5e3}function Wp(a,b,c){return function(){Yp(a,!1),c&&c(b)}}function Xp(a,b){return function(c){Yp(a,!0),b.apply(void 0,arguments)}}function Yp(a,b){Hr._callbacks_[a]&&(b?delete Hr._callbacks_[a]:Hr._callbacks_[a]=c)}function Zp(a){var b=/\{z\}/g,c=/\{x\}/g,d=/\{y\}/g,e=/\{-y\}/g;return function(f){return null===f?void 0:a.replace(b,f[0].toString()).replace(c,f[1].toString()).replace(d,f[2].toString()).replace(e,function(){return((1<<f[0])-f[2]-1).toString()})}}function $p(a){return _p(D(a,Zp))}function _p(a){return 1===a.length?a[0]:function(b,c,d){return null===b?void 0:a[ka((b[1]<<b[0])+b[2],a.length)](b,c,d)}}function aq(){}function bq(a,b){var c=[0,0,0];return function(d,e,f){return null===d?void 0:b(a(d,f,c),e,f)}}function cq(a){var b=[],c=/\{(\d)-(\d)\}/.exec(a)||/\{([a-z])-([a-z])\}/.exec(a);if(c){var d,e=c[2].charCodeAt(0);for(d=c[1].charCodeAt(0);e>=d;++d)b.push(a.replace(c[0],String.fromCharCode(d)))}else b.push(a);return b}function dq(b){Ik.call(this),this.e=a(b)?b:2048}function eq(a){return a.Ub()>a.e}function fq(a,b){for(var c,d;eq(a)&&(c=a.a.dc,d=c.a[0].toString(),!(d in b&&b[d].contains(c.a)));)a.pop().hc()}function gq(b){$f.call(this,{attributions:b.attributions,extent:b.extent,logo:b.logo,opaque:b.opaque,projection:b.projection,state:a(b.state)?b.state:void 0,tileGrid:b.tileGrid,tilePixelRatio:b.tilePixelRatio}),this.tileUrlFunction=a(b.tileUrlFunction)?b.tileUrlFunction:aq,this.crossOrigin=a(b.crossOrigin)?b.crossOrigin:null,this.b=new dq,this.tileLoadFunction=a(b.tileLoadFunction)?b.tileLoadFunction:hq,this.tileClass=a(b.tileClass)?b.tileClass:so}function hq(a,b){a.Na().src=b}function iq(b){var c=a(b.extent)?b.extent:Vt,d=Yf(c,b.maxZoom,b.tileSize);Sf.call(this,{minZoom:b.minZoom,origin:$b(c,"top-left"),resolutions:d,tileSize:b.tileSize})}function jq(b){gq.call(this,{crossOrigin:"anonymous",opaque:!0,projection:wc("EPSG:3857"),state:"loading",tileLoadFunction:b.tileLoadFunction}),this.d=a(b.culture)?b.culture:"en-us",this.a=a(b.maxZoom)?b.maxZoom:-1;var c=new Ae((ks?"https:":"http:")+"//dev.virtualearth.net/REST/v1/Imagery/Metadata/"+b.imagerySet);new Vp(c,"jsonp").send({include:"ImageryProviders",uriScheme:ks?"https":"http",key:b.key},p(this.f,this))}function kq(b){kp.call(this,{attributions:b.attributions,extent:b.extent,logo:b.logo,projection:b.projection}),this.j=void 0,this.q=a(b.distance)?b.distance:20,this.a=[],this.p=b.source,this.p.u("change",kq.prototype.t,this)}function lq(b){if(a(b.j)){H(b.a);for(var c=Qb(),d=b.q*b.j,e=b.p.va(),f={},g=0,h=e.length;h>g;g++){var i=e[g];Y(f,m(i).toString())||(i=i.N().K(),Sb(i,c),Lb(c,d,c),i=hp(b.p.b,c),i=C(i,function(a){return a=m(a).toString(),a in f?!1:f[a]=!0}),b.a.push(mq(i)))}}}function mq(a){for(var b=a.length,c=[0,0],d=0;b>d;d++){var e=a[d].N().K();pb(c,e)}return b=1/b,c[0]*=b,c[1]*=b,c=new ul(new Ah(c)),c.set("features",a),c}function nq(a,b,c){if(k(a))c&&(a=p(a,c));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=p(a.handleEvent,a)}return b>2147483647?-1:Hr.setTimeout(a,b||0)}function oq(){}function pq(a){var b;return(b=a.a)||(b={},sq(a)&&(b[0]=!0,b[1]=!0),b=a.a=b),b}function qq(){}function rq(a){return(a=sq(a))?new ActiveXObject(a):new XMLHttpRequest}function sq(a){if(!a.c&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.c=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return a.c}function tq(a){eb.call(this),this.r=new te,this.i=a||null,this.a=!1,this.o=this.T=null,this.e=this.p="",this.c=this.j=this.d=this.n=!1,this.g=0,this.b=null,this.f=nx,this.q=this.t=!1}function uq(b){return _r&&ia(9)&&j(b.timeout)&&a(b.ontimeout)}function vq(a){return"content-type"==a.toLowerCase()}function wq(a,b){a.a=!1,a.T&&(a.c=!0,a.T.abort(),a.c=!1),a.e=b,xq(a),zq(a)}function xq(a){a.n||(a.n=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function yq(a){if(a.a&&"undefined"!=typeof Gr&&(!a.o[1]||4!=Cq(a)||2!=Dq(a)))if(a.d&&4==Cq(a))nq(a.Hf,0,a);else if(a.dispatchEvent("readystatechange"),4==Cq(a)){a.a=!1;try{if(Bq(a))a.dispatchEvent("complete"),a.dispatchEvent("success");else{var b;try{b=2<Cq(a)?a.T.statusText:""}catch(c){b=""}a.e=b+" ["+Dq(a)+"]",xq(a)}}finally{zq(a)}}}function zq(a,b){if(a.T){Aq(a);var d=a.T,e=a.o[0]?c:null;a.T=null,a.o=null,b||a.dispatchEvent("ready");try{d.onreadystatechange=e}catch(f){}}}function Aq(a){a.T&&a.q&&(a.T.ontimeout=null),j(a.b)&&(Hr.clearTimeout(a.b),a.b=null)}function Bq(a){var b,c=Dq(a);a:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:b=!0;break a;default:b=!1}return b||((c=0===c)&&(a=we(String(a.p))[1]||null,!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),c=!ox.test(a?a.toLowerCase():"")),b=c),b}function Cq(a){return a.T?a.T.readyState:0}function Dq(a){try{return 2<Cq(a)?a.T.status:-1}catch(b){return-1}}function Eq(a){try{return a.T?a.T.responseText:""}catch(b){return""}}function Fq(a){try{if(!a.T)return null;if("response"in a.T)return a.T.response;switch(a.f){case nx:case"text":return a.T.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.T)return a.T.mozResponseArrayBuffer}return null}catch(b){return null}}function Gq(a){kp.call(this,{attributions:a.attributions,logo:a.logo,projection:a.projection}),this.format=a.format}function Hq(a,b,c,d,e){var f=new tq;f.f="binary"==a.format.H()&&Rs?"arraybuffer":"text",Pa(f,"complete",function(a){if(a=a.target,Bq(a)){var b,f=this.format.H();if("binary"==f&&Rs)b=Fq(a);else if("json"==f)b=Eq(a);else if("text"==f)b=Eq(a);else if("xml"==f){if(!_r)try{b=a.T?a.T.responseXML:null}catch(g){b=null}null!=b||(b=Xl(Eq(a)))}null!=b?c.call(e,this.a(b)):Lf(this,"error")}else d.call(e);za(a)},!1,a),f.send(b)}function Iq(b){if(Gq.call(this,{attributions:b.attributions,format:b.format,logo:b.logo,projection:b.projection}),a(b.arrayBuffer)&&this.fb(this.a(b.arrayBuffer)),a(b.doc)&&this.fb(this.a(b.doc)),a(b.node)&&this.fb(this.a(b.node)),a(b.object)&&this.fb(this.a(b.object)),a(b.text)&&this.fb(this.a(b.text)),(a(b.url)||a(b.urls))&&(Lf(this,"loading"),a(b.url)&&Hq(this,b.url,this.p,this.j,this),a(b.urls))){b=b.urls;var c,d;for(c=0,d=b.length;d>c;++c)Hq(this,b[c],this.p,this.j,this)}}function Jq(b){b=a(b)?b:{},Iq.call(this,{attributions:b.attributions,extent:b.extent,format:new Dl({defaultDataProjection:b.defaultProjection}),logo:b.logo,object:b.object,projection:b.projection,text:b.text,url:b.url,urls:b.urls})}function Kq(b){b=a(b)?b:{},Iq.call(this,{attributions:b.attributions,doc:b.doc,extent:b.extent,format:new Em,logo:b.logo,node:b.node,projection:b.projection,text:b.text,url:b.url,urls:b.urls})}function Lq(b){b=a(b)?b:{},Iq.call(this,{format:new Tm({altitudeMode:b.altitudeMode}),projection:b.projection,text:b.text,url:b.url,urls:b.urls})}function Mq(b){Kf.call(this,{attributions:b.attributions,extent:b.extent,logo:b.logo,projection:b.projection,state:b.state}),this.o=a(b.resolutions)?b.resolutions:null}function Nq(a,b){if(null!==a.o){var c=pa(a.o,b,0);b=a.o[c]}return b}function Oq(a,b){a.c().src=b}function Pq(b){Mq.call(this,{attributions:b.attributions,logo:b.logo,projection:b.projection,resolutions:b.resolutions,state:a(b.state)?b.state:void 0}),this.t=b.canvasFunction,this.p=null,this.q=0,this.F=a(b.ratio)?b.ratio:1.5}function Qq(b){Mq.call(this,{projection:b.projection,resolutions:b.resolutions}),this.q=a(b.crossOrigin)?b.crossOrigin:null,this.b=a(b.displayDpi)?b.displayDpi:96,this.a=a(b.params)?b.params:{};var c;c=a(b.url)?to(b.url,this.a,p(this.Q,this)):uo,this.j=c,this.F=a(b.imageLoadFunction)?b.imageLoadFunction:Oq,this.t=a(b.hidpi)?b.hidpi:!0,this.p=a(b.metersPerUnit)?b.metersPerUnit:1,this.f=a(b.ratio)?b.ratio:1,this.ba=a(b.useOverlay)?b.useOverlay:!1,this.d=null,this.i=0}function Rq(b){var c,d,e=a(b.attributions)?b.attributions:null,f=b.imageExtent;a(b.imageSize)&&(c=ac(f)/b.imageSize[1],d=[c]);var g=a(b.crossOrigin)?b.crossOrigin:null,h=a(b.imageLoadFunction)?b.imageLoadFunction:Oq;Mq.call(this,{attributions:e,logo:b.logo,projection:wc(b.projection),resolutions:d}),this.a=new qo(f,c,1,e,b.url,g,h);
}function Sq(a){this.a=a.source,this.J=Ab(),this.b=ud(),this.d=[0,0],this.i=null,Pq.call(this,{attributions:a.attributions,canvasFunction:p(this.Xg,this),logo:a.logo,projection:a.projection,ratio:a.ratio,resolutions:a.resolutions,state:this.a.n}),this.j=null,this.f=void 0,this.yf(a.style),Pa(this.a,"change",this.Aj,void 0,this)}function Tq(a,b,c,d,e){return ng(a.J,e[0]/2,e[1]/2,d/c,-d/c,0,-b[0],-b[1])}function Uq(b){b=a(b)?b:{},Mq.call(this,{attributions:b.attributions,logo:b.logo,projection:b.projection,resolutions:b.resolutions}),this.t=a(b.crossOrigin)?b.crossOrigin:null,this.b=b.url,this.J=a(b.imageLoadFunction)?b.imageLoadFunction:Oq,this.a=b.params,this.f=!0,Wq(this),this.q=b.serverType,this.F=a(b.hidpi)?b.hidpi:!0,this.d=null,this.i=[0,0],this.p=0,this.j=a(b.ratio)?b.ratio:1.5}function Vq(a,b,c,d,e,f){if(f[a.f?"CRS":"SRS"]=e.a,"STYLES"in a.a||(f.STYLES=new String("")),1!=d)switch(a.q){case"geoserver":f.FORMAT_OPTIONS="dpi:"+(90*d+.5|0);break;case"mapserver":f.MAP_RESOLUTION=90*d;break;case"carmentaserver":case"qgis":f.DPI=90*d}f.WIDTH=c[0],f.HEIGHT=c[1],c=e.b;var g;return g=a.f&&"ne"==c.substr(0,2)?[b[1],b[0],b[3],b[2]]:b,f.BBOX=g.join(","),xe(ze([a.b],f))}function Wq(a){a.f=0<=x(ca(a.a,"VERSION","1.3.0"),"1.3")}function Xq(b){b=a(b)?b:{},Iq.call(this,{attributions:b.attributions,doc:b.doc,format:new Vm({extractStyles:b.extractStyles,defaultStyle:b.defaultStyle}),logo:b.logo,node:b.node,projection:b.projection,text:b.text,url:b.url,urls:b.urls})}function Yq(b){var c=a(b.projection)?b.projection:"EPSG:3857",d=new iq({extent:Zf(c),maxZoom:b.maxZoom,tileSize:b.tileSize});gq.call(this,{attributions:b.attributions,crossOrigin:b.crossOrigin,logo:b.logo,projection:c,tileGrid:d,tileLoadFunction:b.tileLoadFunction,tilePixelRatio:b.tilePixelRatio,tileUrlFunction:aq}),this.d=d.Bb({wrapX:b.wrapX}),a(b.tileUrlFunction)?this.pa(b.tileUrlFunction):a(b.urls)?this.pa($p(b.urls)):a(b.url)&&this.a(b.url)}function Zq(b){b=a(b)?b:{};var c;c=a(b.attributions)?b.attributions:[rx];var d=ks?"https:":"http:";Yq.call(this,{attributions:c,crossOrigin:a(b.crossOrigin)?b.crossOrigin:"anonymous",opaque:!0,maxZoom:a(b.maxZoom)?b.maxZoom:19,tileLoadFunction:b.tileLoadFunction,url:a(b.url)?b.url:d+"//{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}function $q(b){b=a(b)?b:{};var c=tx[b.layer];Yq.call(this,{attributions:c.attributions,crossOrigin:"anonymous",logo:"//developer.mapquest.com/content/osm/mq_logo.png",maxZoom:c.maxZoom,opaque:!0,tileLoadFunction:b.tileLoadFunction,url:(ks?"https:":"http:")+"//otile{1-4}-s.mqcdn.com/tiles/1.0.0/"+b.layer+"/{z}/{x}/{y}.jpg"})}function _q(b){b=a(b)?b:{},Iq.call(this,{attributions:b.attributions,doc:b.doc,format:new sn,logo:b.logo,node:b.node,projection:b.projection,text:b.text,url:b.url,urls:b.urls})}function ar(b){Gq.call(this,{attributions:b.attributions,format:b.format,logo:b.logo,projection:b.projection}),this.p=new fp,this.q=b.loader,this.t=a(b.strategy)?b.strategy:Pp,this.j={}}function br(b){var c=b.layer.indexOf("-"),d=ux[b.layer],e=ks?"https://stamen-tiles-{a-d}.a.ssl.fastly.net/":"http://{a-d}.tile.stamen.com/";Yq.call(this,{attributions:wx,crossOrigin:"anonymous",maxZoom:vx[-1==c?b.layer:b.layer.slice(0,c)].maxZoom,opaque:d.opaque,tileLoadFunction:b.tileLoadFunction,url:a(b.url)?b.url:e+b.layer+"/{z}/{x}/{y}."+d.Wa})}function cr(a,b){Qf.call(this,a,2),this.b=b.sa(a[0]),this.c={}}function dr(a){$f.call(this,{opaque:!1,projection:a.projection,tileGrid:a.tileGrid}),this.a=new dq}function er(a){gq.call(this,{crossOrigin:a.crossOrigin,projection:wc("EPSG:3857"),state:"loading",tileLoadFunction:a.tileLoadFunction}),this.d=a.wrapX,new Vp(a.url).send(void 0,p(this.a,this))}function fr(b){$f.call(this,{projection:wc("EPSG:3857"),state:"loading"}),this.f=a(b.preemptive)?b.preemptive:!0,this.b=aq,this.a=new dq,this.d=void 0,new Vp(b.url).send(void 0,p(this.Gj,this))}function gr(a,b,c,d,e){Qf.call(this,a,b),this.g=c,this.c=d,this.o=e,this.d=this.e=this.b=null}function hr(a,b){if(null===a.b||null===a.e||null===a.d)return null;var c=a.b[Math.floor((1-(b[1]-a.c[1])/(a.c[3]-a.c[1]))*a.b.length)];return i(c)?(c=c.charCodeAt(Math.floor((b[0]-a.c[0])/(a.c[2]-a.c[0])*c.length)),c>=93&&c--,c>=35&&c--,c=a.e[c-32],null!=c?a.d[c]:null):null}function ir(a,b,c,d,e){0==a.state&&!0===e?(Sa(a,"change",function(){c.call(d,hr(this,b))},!1,a),jr(a)):!0===e?Ue(function(){c.call(d,hr(this,b))},a):c.call(d,hr(a,b))}function jr(a){0==a.state&&(a.state=1,new Vp(a.g).send(void 0,p(a.gi,a),p(a.Vh,a)))}function kr(b){Gq.call(this,{attributions:b.attributions,format:b.format,logo:b.logo,projection:b.projection}),this.p=b.tileGrid,this.q=aq,this.t=this.p.Bb(),this.j={},a(b.tileUrlFunction)?(this.q=b.tileUrlFunction,this.l()):a(b.urls)?(this.q=$p(b.urls),this.l()):a(b.url)&&(this.q=$p(cq(b.url)),this.l())}function lr(b,c,d,e){var f=b.j;if(b=b.p.Vb(c,d),f=f[b[0]+"/"+b[1]+"/"+b[2]],a(f))for(b=0,d=f.length;d>b;++b){var g=f[b];if(g.N().Jb(c[0],c[1])&&e.call(void 0,g))break}}function mr(b){b=a(b)?b:{};var c=a(b.params)?b.params:{};gq.call(this,{attributions:b.attributions,crossOrigin:b.crossOrigin,logo:b.logo,opaque:!ca(c,"TRANSPARENT",!0),projection:b.projection,tileGrid:b.tileGrid,tileLoadFunction:b.tileLoadFunction,tileUrlFunction:p(this.Kj,this)});var d=b.urls;!a(d)&&a(b.url)&&(d=cq(b.url)),this.f=null!=d?d:[],this.o=a(b.gutter)?b.gutter:0,this.a=c,this.d=!0,this.i=b.serverType,this.p=a(b.hidpi)?b.hidpi:!0,this.j="",or(this),this.q=Qb(),pr(this)}function nr(a,b,c,d,e,f,g){var h=a.f;if(0!=h.length){if(g.WIDTH=c,g.HEIGHT=c,g[a.d?"CRS":"SRS"]=f.a,"STYLES"in a.a||(g.STYLES=new String("")),1!=e)switch(a.i){case"geoserver":g.FORMAT_OPTIONS="dpi:"+(90*e+.5|0);break;case"mapserver":g.MAP_RESOLUTION=90*e;break;case"carmentaserver":case"qgis":g.DPI=90*e}return c=f.b,a.d&&"ne"==c.substr(0,2)&&(a=d[0],d[0]=d[1],d[1]=a,a=d[2],d[2]=d[3],d[3]=a),g.BBOX=d.join(","),xe(ze([1==h.length?h[0]:h[ka((b[1]<<b[0])+b[2],h.length)]],g))}}function or(a){var b,c,d=0,e=[];for(b=0,c=a.f.length;c>b;++b)e[d++]=a.f[b];for(var f in a.a)e[d++]=f+"-"+a.a[f];a.j=e.join("#")}function pr(a){a.d=0<=x(ca(a.a,"VERSION","1.3.0"),"1.3")}function qr(b){b=a(b)?b:{},Iq.call(this,{attributions:b.attributions,extent:b.extent,format:new Cn({defaultDataProjection:b.defaultProjection}),logo:b.logo,object:b.object,projection:b.projection,text:b.text,url:b.url})}function rr(a){this.b=a.matrixIds,Sf.call(this,{origin:a.origin,origins:a.origins,resolutions:a.resolutions,tileSize:a.tileSize,tileSizes:a.tileSizes})}function sr(b){function c(a){return a="KVP"==f?xe(ze([a],h)):a.replace(/\{(\w+?)\}/g,function(a,b){return b in h?h[b]:a}),function(b){if(null!==b){var c={TileMatrix:g.b[b[0]],TileCol:b[1],TileRow:b[2]};return fa(c,i),b=a,b="KVP"==f?xe(ze([b],c)):b.replace(/\{(\w+?)\}/g,function(a,b){return c[b]})}}}var d=a(b.version)?b.version:"1.0.0",e=a(b.format)?b.format:"image/jpeg";this.a=a(b.dimensions)?b.dimensions:{},this.d="",tr(this);var f=a(b.requestEncoding)?b.requestEncoding:"KVP",g=b.tileGrid,h={Layer:b.layer,Style:b.style,TileMatrixSet:b.matrixSet};"KVP"==f&&fa(h,{Service:"WMTS",Request:"GetTile",Version:d,Format:e});var i=this.a,d=aq,e=b.urls;!a(e)&&a(b.url)&&(e=cq(b.url)),a(e)&&(d=_p(D(e,c)));var j=Qb(),k=[0,0,0],d=bq(function(a,b,c){if(g.a.length<=a[0])return null;var d=a[1],e=-a[2]-1,f=Wf(g,a,j),h=b.D();return null!==h&&b.f&&(b=Math.ceil(ec(h)/ec(f)),d=ka(d,b),k[0]=a[0],k[1]=d,k[2]=a[2],f=Wf(g,k,j)),!fc(f,h)||fc(f,h)&&(f[0]==h[2]||f[2]==h[0]||f[1]==h[3]||f[3]==h[1])?null:Qc(a[0],d,e,c)},d);gq.call(this,{attributions:b.attributions,crossOrigin:b.crossOrigin,logo:b.logo,projection:b.projection,tileClass:b.tileClass,tileGrid:g,tileLoadFunction:b.tileLoadFunction,tilePixelRatio:b.tilePixelRatio,tileUrlFunction:d})}function tr(a){var b,c=0,d=[];for(b in a.a)d[c++]=b+"-"+a.a[b];a.d=d.join("/")}function ur(b){var c=a(b)?b:c;Sf.call(this,{origin:[0,0],resolutions:c.resolutions})}function vr(b){b=a(b)?b:{};var c=b.size,d=c[0],e=c[1],f=[],g=256;switch(a(b.tierSizeCalculation)?b.tierSizeCalculation:"default"){case"default":for(;d>g||e>g;)f.push([Math.ceil(d/g),Math.ceil(e/g)]),g+=g;break;case"truncated":for(;d>g||e>g;)f.push([Math.ceil(d/g),Math.ceil(e/g)]),d>>=1,e>>=1}f.push([1,1]),f.reverse();for(var g=[1],h=[0],e=1,d=f.length;d>e;e++)g.push(1<<e),h.push(f[e-1][0]*f[e-1][1]+h[e-1]);g.reverse();var g=new ur({resolutions:g}),i=b.url,c=bq(g.Bb({extent:[0,0,c[0],c[1]]}),function(a){if(null!==a){var b=a[0],c=a[1];return a=a[2],i+"TileGroup"+((c+a*f[b][0]+h[b])/256|0)+"/"+b+"-"+c+"-"+a+".jpg"}});gq.call(this,{attributions:b.attributions,crossOrigin:b.crossOrigin,logo:b.logo,tileClass:wr,tileGrid:g,tileUrlFunction:c})}function wr(a,b,c,d,e){so.call(this,a,b,c,d,e),this.e={}}function xr(b){b=a(b)?b:{},this.c=a(b.initialSize)?b.initialSize:256,this.b=a(b.maxSize)?b.maxSize:a(Dr)?Dr:2048,this.a=a(b.space)?b.space:1,this.e=[new zr(this.c,this.a)],this.d=this.c,this.f=[new zr(this.d,this.a)]}function yr(a,b,c,d,e,f,g){var h,i,j,k=b?a.f:a.e;for(i=0,j=k.length;j>i;++i){if(h=k[i],h=h.add(c,d,e,f,g),null!==h)return h;null===h&&i===j-1&&(b?(h=Math.min(2*a.d,a.b),a.d=h):(h=Math.min(2*a.c,a.b),a.c=h),h=new zr(h,a.a),k.push(h),++j)}}function zr(a,b){this.a=b,this.c=[{x:0,y:0,width:a,height:a}],this.d={},this.b=gd("CANVAS"),this.b.width=a,this.b.height=a,this.e=this.b.getContext("2d")}function Ar(a,b,c,d){b=[b,1],0<c.width&&0<c.height&&b.push(c),0<d.width&&0<d.height&&b.push(d),a.c.splice.apply(a.c,b)}function Br(b){this.j=this.b=this.d=null,this.o=a(b.fill)?b.fill:null,this.J=[0,0],this.a=b.points,this.c=a(b.radius)?b.radius:b.radius1,this.f=a(b.radius2)?b.radius2:this.c,this.g=a(b.angle)?b.angle:0,this.e=a(b.stroke)?b.stroke:null,this.F=this.Q=this.t=null;var c,d=b.atlasManager,e=null,f=0;null!==this.e&&(c=Cd(this.e.a),f=this.e.c,a(f)||(f=1),e=this.e.b,Ss||(e=null));var g=2*(this.c+f)+1,e={strokeStyle:c,Nc:f,size:g,lineDash:e};if(a(d)){g=Math.round(g),c=null===this.o;var h;c&&(h=p(this.Df,this,e)),f=this.ub(),e=d.add(f,g,g,p(this.Ef,this,e),h),this.b=e.image,this.J=[e.offsetX,e.offsetY],d=e.image.width,this.j=c?e.kf:this.b}else this.b=gd("CANVAS"),this.b.height=g,this.b.width=g,d=g=this.b.width,h=this.b.getContext("2d"),this.Ef(e,h,0,0),null===this.o?(h=this.j=gd("CANVAS"),h.height=e.size,h.width=e.size,h=h.getContext("2d"),this.Df(e,h,0,0)):this.j=this.b;this.t=[g/2,g/2],this.Q=[g,g],this.F=[d,d],jg.call(this,{opacity:1,rotateWithView:!1,rotation:a(b.rotation)?b.rotation:0,scale:1,snapToPixel:a(b.snapToPixel)?b.snapToPixel:!0})}var Cr,Dr,Er,Fr={},Gr=Gr||{},Hr=this,Ir="closure_uid_"+(1e9*Math.random()>>>0),Jr=0,Kr=Date.now||function(){return+new Date};r(s,Error),s.prototype.name="CustomError";var Lr,Mr,Nr=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Or=/&/g,Pr=/</g,Qr=/>/g,Rr=/"/g,Sr=/'/g,Tr=/\x00/g,Ur=/[\x00&<>"']/,Vr=Array.prototype;a:{var Wr=Hr.navigator;if(Wr){var Xr=Wr.userAgent;if(Xr){Mr=Xr;break a}}Mr=""}var Yr,Zr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),$r=S("Opera")||S("OPR"),_r=S("Trident")||S("MSIE"),as=S("Gecko")&&-1==Mr.toLowerCase().indexOf("webkit")&&!(S("Trident")||S("MSIE")),bs=-1!=Mr.toLowerCase().indexOf("webkit"),cs=S("Macintosh"),ds=S("Windows"),es=S("Linux")||S("CrOS"),fs=Hr.navigator||null;Yr=!!fs&&-1!=(fs.appVersion||"").indexOf("X11");var gs=function(){var a,b="";return $r&&Hr.opera?(b=Hr.opera.version,k(b)?b():b):(as?a=/rv\:([^\);]+)(\)|;)/:_r?a=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:bs&&(a=/WebKit\/(\S+)/),a&&(b=(b=a.exec(Mr))?b[1]:""),_r&&(a=ha(),a>parseFloat(b))?String(a):b)}(),hs={},is=Hr.document,js=is&&_r?ha()||("CSS1Compat"==is.compatMode?parseInt(gs,10):5):void 0,ks="https:"===Hr.location.protocol,ls=_r&&!ia("9.0")&&""!==gs,ms=!_r||_r&&js>=9,ns=!_r||_r&&js>=9,os=_r&&!ia("9");!bs||ia("528"),as&&ia("1.9b")||_r&&ia("8")||$r&&ia("9.5")||bs&&ia("528"),as&&!ia("8")||_r&&ia("9");var ps=0,qs={};xa.prototype.Sa=!1,xa.prototype.hc=function(){if(!this.Sa&&(this.Sa=!0,this.M(),0!=ps)){var a=m(this);delete qs[a]}},xa.prototype.M=function(){if(this.la)for(;this.la.length;)this.la.shift()()},Aa.prototype.hc=function(){},Aa.prototype.lb=function(){this.f=!0},Aa.prototype.preventDefault=function(){this.Zf=!1};var rs=_r?"focusout":"DOMFocusOut";Da[" "]=c,r(Ea,Aa);var ss=[1,4,2];Cr=Ea.prototype,Cr.lb=function(){Ea.S.lb.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},Cr.preventDefault=function(){Ea.S.preventDefault.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,os)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(b){}},Cr.fh=function(){return this.a},Cr.bf=function(){return bs||void 0!==this.a.offsetX?this.a.offsetX:this.a.layerX},Cr.hl=function(a){Object.defineProperties(this,{offsetX:{writable:!0,enumerable:!0,configurable:!0,value:a}})},Cr.cf=function(){return bs||void 0!==this.a.offsetY?this.a.offsetY:this.a.layerY},Cr.il=function(a){Object.defineProperties(this,{offsetY:{writable:!0,enumerable:!0,configurable:!0,value:a}})};var ts="closure_listenable_"+(1e6*Math.random()|0),us=0;Ka.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f],a||(a=this.a[f]=[],this.c++);var g=Oa(a,b,d,e);return g>-1?(b=a[g],c||(b.Xc=!1)):(b=new Ia(b,this.src,f,!!d,e),b.Xc=c,a.push(b)),b},Ka.prototype.remove=function(a,b,c,d){if(a=a.toString(),!(a in this.a))return!1;var e=this.a[a];return b=Oa(e,b,c,d),b>-1?(Ja(e[b]),Vr.splice.call(e,b,1),0==e.length&&(delete this.a[a],this.c--),!0):!1};var vs="closure_lm_"+(1e6*Math.random()|0),ws={},xs=0,ys="__closure_events_fn_"+(1e9*Math.random()>>>0),zs=_a(!1),As=_a(!0);r(eb,xa),eb.prototype[ts]=!0,Cr=eb.prototype,Cr.addEventListener=function(a,b,c,d){Pa(this,a,b,c,d)},Cr.removeEventListener=function(a,b,c,d){Ta(this,a,b,c,d)},Cr.dispatchEvent=function(a){var b,c=this.Vd;if(c)for(b=[];c;c=c.Vd)b.push(c);var c=this.Ig,d=a.type||a;if(i(a))a=new Aa(a,c);else if(a instanceof Aa)a.target=a.target||c;else{var e=a;a=new Aa(d,c),fa(a,e)}var f,e=!0;if(b)for(var g=b.length-1;!a.f&&g>=0;g--)f=a.b=b[g],e=fb(f,d,!0,a)&&e;if(a.f||(f=a.b=c,e=fb(f,d,!0,a)&&e,a.f||(e=fb(f,d,!1,a)&&e)),b)for(g=0;!a.f&&g<b.length;g++)f=a.b=b[g],e=fb(f,d,!1,a)&&e;return e},Cr.M=function(){if(eb.S.M.call(this),this.gb){var a,b=this.gb,c=0;for(a in b.a){for(var d=b.a[a],e=0;e<d.length;e++)++c,Ja(d[e]);delete b.a[a],b.c--}}this.Vd=null},Cr.La=function(a,b,c,d){return this.gb.add(String(a),b,!1,c,d)},Cr.Fe=function(a,b,c,d){return this.gb.remove(String(a),b,c,d)},r(hb,eb),Cr=hb.prototype,Cr.l=function(){++this.c,this.dispatchEvent("change")},Cr.A=function(){return this.c},Cr.u=function(a,b,c){return Pa(this,a,b,!1,c)},Cr.B=function(a,b,c){return Sa(this,a,b,!1,c)},Cr.v=function(a,b,c){Ta(this,a,b,!1,c)},Cr.C=ib,r(jb,Aa),kb.prototype.e=function(a,b){var c=nb(this.source,this.b);this.a=a,this.d=b,ob(this.source,this.b,c)},r(lb,hb);var Bs={},Cs={},Ds={};if(Cr=lb.prototype,Cr.O=function(a,b,c){c=c||a,this.P(a);var d=mb(c);return this.ec[a]=Pa(b,d,function(b){ob(this,a,b.oldValue)},void 0,this),b=new kb(this,b,a,c),this.Ra[a]=b,ob(this,a,this.o[a]),b},Cr.get=function(a){var b,c=this.Ra;return c.hasOwnProperty(a)?(a=c[a],b=nb(a.target,a.c),b=a.d(b)):this.o.hasOwnProperty(a)&&(b=this.o[a]),b},Cr.I=function(){var a,b=this.Ra;if($(this.o)){if($(b))return[];a=b}else if($(b))a=this.o;else{a={};for(var c in this.o)a[c]=!0;for(c in b)a[c]=!0}return X(a)},Cr.L=function(){var a,b={};for(a in this.o)b[a]=this.o[a];for(a in this.Ra)b[a]=this.get(a);return b},Cr.set=function(b,c){var d=this.Ra;if(d.hasOwnProperty(b)){var e=d[b];c=e.a(c);var d=e.target,e=e.c,f=c,g=Ds.hasOwnProperty(e)?Ds[e]:Ds[e]="set"+(String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()),g=ca(d,g);a(g)?g.call(d,f):d.set(e,f)}else d=this.o[b],this.o[b]=c,ob(this,b,d)},Cr.G=function(a){for(var b in a)this.set(b,a[b])},Cr.P=function(a){var b=this.ec,c=b[a];c&&(delete b[a],Ua(c),b=this.get(a),delete this.Ra[a],this.o[a]=b)},Cr.R=function(){for(var a in this.ec)this.P(a)},xb.prototype.a=4,xb.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]},xb.prototype.toString=Array.prototype.join,"undefined"==typeof Float32Array&&(xb.BYTES_PER_ELEMENT=4,xb.prototype.BYTES_PER_ELEMENT=xb.prototype.a,xb.prototype.set=xb.prototype.set,xb.prototype.toString=xb.prototype.toString,b("Float32Array",xb,void 0)),yb.prototype.a=8,yb.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]},yb.prototype.toString=Array.prototype.join,"undefined"==typeof Float64Array){try{yb.BYTES_PER_ELEMENT=8}catch(Es){}yb.prototype.BYTES_PER_ELEMENT=yb.prototype.a,yb.prototype.set=yb.prototype.set,yb.prototype.toString=yb.prototype.toString,b("Float64Array",yb,void 0)}new Float64Array(3),new Float64Array(3),new Float64Array(4),new Float64Array(4),new Float64Array(4),new Float64Array(16),kc.prototype.offset=function(a,b,c){var d=ma(a[1]);b/=this.radius;var e=Math.asin(Math.sin(d)*Math.cos(b)+Math.cos(d)*Math.sin(b)*Math.cos(c));return[180*(ma(a[0])+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(d),Math.cos(b)-Math.sin(d)*Math.sin(e)))/Math.PI,180*e/Math.PI]};var Fs=new kc(6370997),Gs={};Gs.degrees=2*Math.PI*Fs.radius/360,Gs.ft=.3048,Gs.m=1,Cr=mc.prototype,Cr.gh=function(){return this.a},Cr.D=function(){return this.g},Cr.rj=function(){return this.c},Cr.ie=function(){return Gs[this.c]},Cr.Mh=function(){return this.d},Cr.wi=function(){return this.f},Cr.sj=function(a){this.g=a},Cr.pl=function(a){this.d=a},Cr.je=function(b,c){if("degrees"==this.c)return b;var d=zc(this,wc("EPSG:4326")),e=[c[0]-b/2,c[1],c[0]+b/2,c[1],c[0],c[1]-b/2,c[0],c[1]+b/2],e=d(e,e,2),d=(lc(e.slice(0,2),e.slice(2,4))+lc(e.slice(4,6),e.slice(6,8)))/2,e=this.ie();return a(e)&&(d/=e),d};var Hs={},Is={};r(Dc,lb),Dc.prototype.i=function(a){return this.t.center(a)},Dc.prototype.constrainResolution=function(a,b,c){return this.t.resolution(a,b||0,c||0)},Dc.prototype.constrainRotation=function(a,b){return this.t.rotation(a,b||0)},Dc.prototype.a=function(){return this.get("center")},Dc.prototype.getCenter=Dc.prototype.a,Dc.prototype.g=function(a){var b=this.a(),c=this.b();return[b[0]-c*a[0]/2,b[1]-c*a[1]/2,b[0]+c*a[0]/2,b[1]+c*a[1]/2]},Dc.prototype.J=function(){return this.q},Dc.prototype.b=function(){return this.get("resolution")},Dc.prototype.getResolution=Dc.prototype.b,Dc.prototype.n=function(a,b){return Math.max(ec(a)/b[0],ac(a)/b[1])},Dc.prototype.e=function(){return this.get("rotation")},Dc.prototype.getRotation=Dc.prototype.e,Cr=Dc.prototype,Cr.Oh=function(){var b,c=this.b();if(a(c)){var d,e=0;do{if(d=this.constrainResolution(this.f,e),d==c){b=e;break}++e}while(d>this.F)}return a(b)?this.p+b:b},Cr.ge=function(a,b){if(!gc(a)){this.Oa(Zb(a));var c=this.n(a,b),d=this.constrainResolution(c,0,0);c>d&&(d=this.constrainResolution(d,-1,0)),this.d(d)}},Cr.dh=function(b,c,d){var e=a(d)?d:{};d=a(e.padding)?e.padding:[0,0,0,0];var f,g=a(e.constrainResolution)?e.constrainResolution:!0,h=a(e.nearest)?e.nearest:!1;f=a(e.minResolution)?e.minResolution:a(e.maxZoom)?this.constrainResolution(this.f,e.maxZoom-this.p,0):0;var i=b.k,j=this.e(),e=Math.cos(-j),j=Math.sin(-j),k=1/0,l=1/0,m=-(1/0),n=-(1/0);b=b.s;for(var o=0,p=i.length;p>o;o+=b)var q=i[o]*e-i[o+1]*j,r=i[o]*j+i[o+1]*e,k=Math.min(k,q),l=Math.min(l,r),m=Math.max(m,q),n=Math.max(n,r);c=this.n([k,l,m,n],[c[0]-d[1]-d[3],c[1]-d[0]-d[2]]),c=isNaN(c)?f:Math.max(c,f),g&&(f=this.constrainResolution(c,0,0),!h&&c>f&&(f=this.constrainResolution(f,-1,0)),c=f),this.d(c),j=-j,h=(k+m)/2+(d[1]-d[3])/2*c,d=(l+n)/2+(d[0]-d[2])/2*c,this.Oa([h*e-d*j,d*e+h*j])},Cr.Yg=function(a,b,c){var d=this.e(),e=Math.cos(-d),d=Math.sin(-d),f=a[0]*e-a[1]*d;a=a[1]*e+a[0]*d;var g=this.b(),f=f+(b[0]/2-c[0])*g;a+=(c[1]-b[1]/2)*g,d=-d,this.Oa([f*e-a*d,a*e+f*d])},Cr.rotate=function(b,c){if(a(c)){var d,e=this.a();a(e)&&(d=[e[0]-c[0],e[1]-c[1]],ub(d,b-this.e()),pb(d,c)),this.Oa(d)}this.r(b)},Cr.Oa=function(a){this.set("center",a)},Dc.prototype.setCenter=Dc.prototype.Oa,Dc.prototype.d=function(a){this.set("resolution",a)},Dc.prototype.setResolution=Dc.prototype.d,Dc.prototype.r=function(a){this.set("rotation",a)},Dc.prototype.setRotation=Dc.prototype.r,Dc.prototype.Q=function(a){a=this.constrainResolution(this.f,a-this.p,0),this.d(a)},Uc.prototype.contains=function(a){return Xc(this,a[1],a[2])},Zc.prototype.b=function(){return this.c};var Js=!_r||_r&&js>=9;!as&&!_r||_r&&_r&&js>=9||as&&ia("1.9.1"),_r&&ia("9"),ga("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),ga("action","cite","data","formaction","href","manifest","poster","src"),ga("embed","iframe","link","object","script","style","template"),Cr=$c.prototype,Cr.clone=function(){return new $c(this.x,this.y)},Cr.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},Cr.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},Cr.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},Cr.scale=function(a,b){var c=j(b)?b:a;return this.x*=a,this.y*=c,this},Cr=_c.prototype,Cr.clone=function(){return new _c(this.width,this.height)},Cr.ia=function(){return!(this.width*this.height)},Cr.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},Cr.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},Cr.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this},Cr.scale=function(a,b){var c=j(b)?b:a;return this.width*=a,this.height*=c,this};var Ks={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};rd.prototype.appendChild=function(a,b){a.appendChild(b)},rd.prototype.contains=nd;var Ls,Ms,Ns=function(){var b;return function(){if(!a(b))if(Hr.getComputedStyle){var c,d=gd("P"),e={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.appendChild(d);for(var f in e)f in d.style&&(d.style[f]="translate(1px,1px)",c=Hr.getComputedStyle(d).getPropertyValue(e[f]));ld(d),b=c&&"none"!==c}else b=!1;return b}}(),Os=function(){var b;return function(){if(!a(b))if(Hr.getComputedStyle){var c,d=gd("P"),e={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.appendChild(d);for(var f in e)f in d.style&&(d.style[f]="translate3d(1px,1px,1px)",c=Hr.getComputedStyle(d).getPropertyValue(e[f]));ld(d),b=c&&"none"!==c}else b=!1;return b}}(),Ps=["experimental-webgl","webgl","webkit-3d","moz-webgl"],Qs=Hr.devicePixelRatio||1,Rs="ArrayBuffer"in Hr,Ss=!1,Ts=function(){if(!("HTMLCanvasElement"in Hr))return!1;try{var b=ud();return null===b?!1:(a(b.setLineDash)&&(Ss=!0),!0)}catch(c){return!1}}(),Us="DeviceOrientationEvent"in Hr,Vs="geolocation"in Hr.navigator,Ws="ontouchstart"in Hr,Xs="PointerEvent"in Hr,Ys=!!Hr.navigator.msPointerEnabled,Zs=!1,$s=[];if("WebGLRenderingContext"in Hr)try{var _s=gd("CANVAS"),at=xd(_s,{bh:!0});null!==at&&(Zs=!0,Ms=at.getParameter(at.MAX_TEXTURE_SIZE),$s=at.getSupportedExtensions())}catch(bt){}Ls=Zs,Er=$s,Dr=Ms,r(yd,Aa),r(zd,lb),Cr=zd.prototype,Cr.clear=function(){for(;0<this.Ib();)this.pop()},Cr.qf=function(a){var b,c;for(b=0,c=a.length;c>b;++b)this.push(a[b]);return this},Cr.forEach=function(a,b){B(this.a,a,b)},Cr.Mi=function(){return this.a},Cr.item=function(a){return this.a[a]},Cr.Ib=function(){return this.get("length")},Cr.rd=function(a,b){M(this.a,a,0,b),Ad(this),this.dispatchEvent(new yd("add",b,this))},Cr.pop=function(){return this.De(this.Ib()-1)},Cr.push=function(a){var b=this.a.length;return this.rd(b,a),b},Cr.remove=function(a){var b,c,d=this.a;for(b=0,c=d.length;c>b;++b)if(d[b]===a)return this.De(b)},Cr.De=function(a){var b=this.a[a];return Vr.splice.call(this.a,a,1),Ad(this),this.dispatchEvent(new yd("remove",b,this)),b},Cr.bl=function(a,b){var c=this.Ib();if(c>a)c=this.a[a],this.a[a]=b,this.dispatchEvent(new yd("remove",c,this)),this.dispatchEvent(new yd("add",b,this));else{for(;a>c;++c)this.rd(c,void 0);this.rd(a,b)}};var ct=/^#(?:[0-9a-f]{3}){1,2}$/i,dt=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,et=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i,ft=function(){var a={},b=0;return function(c){var d;if(a.hasOwnProperty(c))d=a[c];else{if(b>=1024){d=0;for(var e in a)0===(3&d++)&&(delete a[e],--b)}var f,g;ct.exec(c)?(g=3==c.length-1?1:2,d=parseInt(c.substr(1+0*g,g),16),e=parseInt(c.substr(1+1*g,g),16),f=parseInt(c.substr(1+2*g,g),16),1==g&&(d=(d<<4)+d,e=(e<<4)+e,f=(f<<4)+f),d=[d,e,f,1]):(g=et.exec(c))?(d=Number(g[1]),e=Number(g[2]),f=Number(g[3]),g=Number(g[4]),d=[d,e,f,g],d=Dd(d,d)):(g=dt.exec(c))?(d=Number(g[1]),e=Number(g[2]),f=Number(g[3]),d=[d,e,f,1],d=Dd(d,d)):d=void 0,a[c]=d,++b}return d}}();Cr=Ld.prototype,Cr.clone=function(){return new Ld(this.top,this.right,this.bottom,this.left)},Cr.contains=function(a){return this&&a?a instanceof Ld?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1},Cr.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},Cr.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},Cr.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this},Cr.scale=function(a,b){var c=j(b)?b:a;return this.left*=a,this.right*=a,this.top*=c,this.bottom*=c,this},Cr=Md.prototype,Cr.clone=function(){return new Md(this.left,this.top,this.width,this.height)},Cr.contains=function(a){return a instanceof Md?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height},Cr.distance=function(a){return Math.sqrt(Nd(this,a))},Cr.ceil=function(){return this.left=Math.ceil(this.left),this.top=Math.ceil(this.top),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},Cr.floor=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},Cr.round=function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.width=Math.round(this.width),this.height=Math.round(this.height),this},Cr.scale=function(a,b){var c=j(b)?b:a;return this.left*=a,this.width*=a,this.top*=c,this.height*=c,this};var gt={thin:2,medium:4,thick:6},ht=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;r(be,Aa),r(ce,lb),ce.prototype.M=function(){ld(this.element),ce.S.M.call(this)},ce.prototype.d=function(){return this.a},ce.prototype.setMap=function(a){null===this.a||ld(this.element),0!=this.n.length&&(B(this.n,Ua),this.n.length=0),this.a=a,null!==this.a&&((null===this.i?a.t:this.i).appendChild(this.element),this.render!==c&&this.n.push(Pa(a,"postrender",this.render,!1,this)),a.render())},r(de,ce),Cr=de.prototype,Cr.cj=function(a){a.preventDefault(),fe(this)},Cr.bj=function(){return this.f},Cr.ej=function(a){this.f!==a&&(this.f=a,Kd(this.element,"ol-uncollapsible"),!a&&this.b&&fe(this))},Cr.dj=function(a){this.f&&this.b!==a&&fe(this)},Cr.aj=function(){return this.b},r(ge,ce),ge.prototype.j=function(b){b.preventDefault(),b=this.a;var c=b.a();if(null!==c){for(var d=c.e();d<-Math.PI;)d+=2*Math.PI;for(;d>Math.PI;)d-=2*Math.PI;a(d)&&(0<this.f&&b.Ua(Oc({rotation:d,duration:this.f,easing:Jc})),c.r(0))}},r(ie,ce),ie.prototype.e=function(b,c){c.preventDefault();var d=this.a,e=d.a();if(null!==e){var f=e.b();a(f)&&(0<this.b&&d.Ua(Pc({resolution:f,duration:this.b,easing:Jc})),d=e.constrainResolution(f,b),e.d(d))}};var it=bs?"webkitfullscreenchange":as?"mozfullscreenchange":_r?"MSFullscreenChange":"fullscreenchange";r(ne,ce),ne.prototype.g=function(a){a.preventDefault(),ke()&&(a=this.a,null!==a&&(me()?(a=ad().a,a.webkitCancelFullScreen?a.webkitCancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.msExitFullscreen?a.msExitFullscreen():a.exitFullscreen&&a.exitFullscreen()):(a=a.qc(),a=bd(a),this.f?a.mozRequestFullScreenWithKeys?a.mozRequestFullScreenWithKeys():a.webkitRequestFullscreen?a.webkitRequestFullscreen():le(a):le(a))))},ne.prototype.e=function(){var a=this.b+"-true",b=this.b+"-false",c=md(this.element),d=this.a;me()?Hd(c,b)&&(Jd(c,b),Id(c,a)):Hd(c,a)&&(Jd(c,a),Id(c,b)),null===d||d.j()},r(oe,ce),oe.prototype.J=function(){this.e=null},oe.prototype.g=function(){return this.get("coordinateFormat")},oe.prototype.getCoordinateFormat=oe.prototype.g,oe.prototype.p=function(){return this.get("projection")},oe.prototype.getProjection=oe.prototype.p,oe.prototype.t=function(a){this.f=this.a.ad(a.a),qe(this,this.f)},oe.prototype.F=function(){qe(this,null),this.f=null},oe.prototype.setMap=function(a){oe.S.setMap.call(this,a),null!==a&&(a=a.b,this.n.push(Pa(a,"mousemove",this.t,!1,this),Pa(a,"mouseout",this.F,!1,this)))},oe.prototype.r=function(a){this.set("coordinateFormat",a)},oe.prototype.setCoordinateFormat=oe.prototype.r,oe.prototype.q=function(a){this.set("projection",a)},oe.prototype.setProjection=oe.prototype.q,Cr=te.prototype,Cr.Ub=function(){return this.b},Cr.kb=function(){ue(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.c[this.a[b]]);return a},Cr.I=function(){return ue(this),this.a.concat()},Cr.ia=function(){return 0==this.b},Cr.clear=function(){this.c={},this.b=this.a.length=0},Cr.remove=function(a){return ve(this.c,a)?(delete this.c[a],this.b--,this.a.length>2*this.b&&ue(this),!0):!1},Cr.get=function(a,b){return ve(this.c,a)?this.c[a]:b},Cr.set=function(a,b){ve(this.c,a)||(this.b++,this.a.push(a)),this.c[a]=b},Cr.forEach=function(a,b){for(var c=this.I(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}},Cr.clone=function(){return new te(this)};var jt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,kt=bs;Cr=Ae.prototype,Cr.Pb="",Cr.cc="",Cr.pb="",Cr.sc=null,Cr.nb="",Cr.Tb="",Cr.Wb=!1,Cr.toString=function(){var a=[],b=this.Pb;if(b&&a.push(He(b,lt,!0),":"),b=this.pb){a.push("//");var c=this.cc;c&&a.push(He(c,lt,!0),"@"),a.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.sc,null!=b&&a.push(":",String(b))}return(b=this.nb)&&(this.pb&&"/"!=b.charAt(0)&&a.push("/"),a.push(He(b,"/"==b.charAt(0)?nt:mt,!0))),(b=this.a.toString())&&a.push("?",b),(b=this.Tb)&&a.push("#",He(b,pt)),a.join("")},Cr.clone=function(){return new Ae(this)};var lt=/[#\/\?@]/g,mt=/[\#\?:]/g,nt=/[\#\?]/g,ot=/[\#\?@]/g,pt=/#/g;Cr=Je.prototype,Cr.da=null,Cr.ta=null,Cr.Ub=function(){return Ke(this),this.ta},Cr.add=function(a,b){Ke(this),this.a=null,a=Ne(this,a);var c=this.da.get(a);return c||this.da.set(a,c=[]),c.push(b),this.ta++,this},Cr.remove=function(a){return Ke(this),a=Ne(this,a),ve(this.da.c,a)?(this.a=null,this.ta-=this.da.get(a).length,this.da.remove(a)):!1},Cr.clear=function(){this.da=this.a=null,this.ta=0},Cr.ia=function(){return Ke(this),0==this.ta},Cr.I=function(){Ke(this);for(var a=this.da.kb(),b=this.da.I(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c},Cr.kb=function(a){Ke(this);var b=[];if(i(a))Le(this,a)&&(b=J(b,this.da.get(Ne(this,a))));else{a=this.da.kb();for(var c=0;c<a.length;c++)b=J(b,a[c])}return b},Cr.set=function(a,b){return Ke(this),this.a=null,a=Ne(this,a),Le(this,a)&&(this.ta-=this.da.get(a).length),this.da.set(a,[b]),this.ta++,this},Cr.get=function(a,b){var c=a?this.kb(a):[];return 0<c.length?String(c[0]):b},Cr.toString=function(){if(this.a)return this.a;
if(!this.da)return"";for(var a=[],b=this.da.I(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.kb(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f]))),a.push(g)}return this.a=a.join("&")},Cr.clone=function(){var a=new Je;return a.a=this.a,this.da&&(a.da=this.da.clone(),a.ta=this.ta),a},r(Pe,xa),Cr=Pe.prototype,Cr.X=null,Cr.Ie=!1,Cr.start=function(){Qe(this),this.Ie=!1;var a=Re(this),b=Se(this);a&&!b&&this.a.mozRequestAnimationFrame?(this.X=Pa(this.a,"MozBeforePaint",this.c),this.a.mozRequestAnimationFrame(null),this.Ie=!0):this.X=a&&b?a.call(this.a,this.c):this.a.setTimeout(bb(this.c),20)},Cr.Ye=function(){this.Ie&&this.X&&Ua(this.X),this.X=null,this.d.call(this.b,Kr())},Cr.M=function(){Qe(this),Pe.S.M.call(this)};var qt,rt=ab;new We,We.prototype.set=function(a){this.a=a},We.prototype.get=function(){return this.a},r(Xe,eb),Cr=Xe.prototype,Cr.ld=null,Cr.Pc=null,Cr.md=null,Cr.M=function(){Xe.S.M.call(this),this.ld&&(Ua(this.ld),this.ld=null),this.md=this.Pc=null},Cr.oi=function(){var a=dd(this.Pc||window),b=this.md;a==b||a&&b&&a.width==b.width&&a.height==b.height||(this.md=a,this.dispatchEvent("resize"))},r(af,eb),Cr=af.prototype,Cr.aa=null,Cr.sd=null,Cr.le=null,Cr.td=null,Cr.Ka=-1,Cr.Gb=-1,Cr.ae=!1;var st={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},tt={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},ut=_r||bs&&ia("525"),vt=cs&&as;af.prototype.a=function(a){bs&&(17==this.Ka&&!a.o||18==this.Ka&&!a.c||cs&&91==this.Ka&&!a.n)&&(this.Gb=this.Ka=-1),-1==this.Ka&&(a.o&&17!=a.e?this.Ka=17:a.c&&18!=a.e?this.Ka=18:a.n&&91!=a.e&&(this.Ka=91)),ut&&!Ye(a.e,this.Ka,a.d,a.o,a.c)?this.handleEvent(a):(this.Gb=$e(a.e),vt&&(this.ae=a.c))},af.prototype.c=function(a){this.Gb=this.Ka=-1,this.ae=a.c},af.prototype.handleEvent=function(a){var b,c,d=a.a,e=d.altKey;_r&&"keypress"==a.type?(b=this.Gb,c=13!=b&&27!=b?d.keyCode:0):bs&&"keypress"==a.type?(b=this.Gb,c=0<=d.charCode&&63232>d.charCode&&Ze(b)?d.charCode:0):$r?(b=this.Gb,c=Ze(b)?d.keyCode:0):(b=d.keyCode||this.Gb,c=d.charCode||0,vt&&(e=this.ae),cs&&63==c&&224==b&&(b=191));var f=b=$e(b),g=d.keyIdentifier;b?b>=63232&&b in st?f=st[b]:25==b&&a.d&&(f=9):g&&g in tt&&(f=tt[g]),this.Ka=f,a=new df(f,c,0,d),a.c=e,this.dispatchEvent(a)},af.prototype.M=function(){af.S.M.call(this),cf(this)},r(df,Ea),r(ef,eb),ef.prototype.handleEvent=function(b){var c=0,d=0,e=0;b=b.a,"mousewheel"==b.type?(d=1,(_r||bs&&(ds||ia("532.0")))&&(d=40),e=ff(-b.wheelDelta,d),a(b.wheelDeltaX)?(c=ff(-b.wheelDeltaX,d),d=ff(-b.wheelDeltaY,d)):d=e):(e=b.detail,e>100?e=3:-100>e&&(e=-3),a(b.axis)&&b.axis===b.HORIZONTAL_AXIS?c=e:d=e),j(this.c)&&ja(c,-this.c,this.c),j(this.b)&&(d=ja(d,-this.b,this.b)),c=new gf(e,b,0,d),this.dispatchEvent(c)},ef.prototype.M=function(){ef.S.M.call(this),Ua(this.a),this.a=null},r(gf,Ea),r(hf,Aa);var wt=!1;try{wt=1===new MouseEvent("click",{buttons:1}).buttons}catch(xt){}r(mf,lf),Cr=mf.prototype,Cr.yi=function(a){if(!nf(this,a)){1..toString()in this.c&&this.cancel(a);var b=of(a);this.c[1..toString()]=a,Df(this.a,zt,b,a)}},Cr.zi=function(a){if(!nf(this,a)){var b=of(a);Df(this.a,yt,b,a)}},Cr.Ci=function(a){if(!nf(this,a)){var b=ca(this.c,1..toString());b&&b.button===a.button&&(b=of(a),Df(this.a,At,b,a),aa(this.c,1..toString()))}},Cr.Bi=function(a){if(!nf(this,a)){var b=of(a);Cf(this.a,b,a)}},Cr.Ai=function(a){if(!nf(this,a)){var b=of(a);Bf(this.a,b,a)}},Cr.cancel=function(a){var b=of(a);this.a.cancel(b,a),aa(this.c,1..toString())},r(pf,lf),Cr=pf.prototype,Cr.Hi=function(a){this.c[a.a.pointerId]=a;var b=qf(this,a);Df(this.a,zt,b,a)},Cr.Ii=function(a){var b=qf(this,a);Df(this.a,yt,b,a)},Cr.Li=function(a){var b=qf(this,a);Df(this.a,At,b,a),aa(this.c,a.a.pointerId)},Cr.Ji=function(a){var b=qf(this,a);Bf(this.a,b,a)},Cr.Ki=function(a){var b=qf(this,a);Cf(this.a,b,a)},Cr.Gi=function(a){var b=qf(this,a);this.a.cancel(b,a),aa(this.c,a.a.pointerId)},Cr.Fi=function(a){this.a.dispatchEvent(new hf("lostpointercapture",a,a.a))},Cr.Ei=function(a){this.a.dispatchEvent(new hf("gotpointercapture",a,a.a))},r(rf,lf),Cr=rf.prototype,Cr.zk=function(a){Ef(this.a,a)},Cr.Ak=function(a){Ef(this.a,a)},Cr.Dk=function(a){Ef(this.a,a)},Cr.Bk=function(a){Ef(this.a,a)},Cr.Ck=function(a){Ef(this.a,a)},Cr.yk=function(a){Ef(this.a,a)},Cr.xi=function(a){Ef(this.a,a)},Cr.Ph=function(a){Ef(this.a,a)},r(sf,lf),Cr=sf.prototype,Cr.Yf=function(){this.f=0,this.d=void 0},Cr.vl=function(b){var c=b.a.touches,d=X(this.c),e=d.length;if(e>=c.length){var f,g,h,i=[];for(f=0;e>f;++f){g=d[f],h=this.c[g];var j;if(!(j=1==g))a:{j=c.length;for(var k=void 0,l=0;j>l;l++)if(k=c[l],k.identifier===g-2){j=!0;break a}j=!1}j||i.push(h.$b)}for(f=0;f<i.length;++f)this.be(b,i[f])}c=V(this.c),(0===c||1===c&&1..toString()in this.c)&&(this.b=b.a.changedTouches[0].identifier,a(this.d)&&Hr.clearTimeout(this.d)),vf(this,b),this.f++,uf(this,b,this.uk)},Cr.uk=function(a,b){this.c[b.pointerId]={target:b.target,$b:b,Jf:b.target};var c=this.a;b.bubbles=!0,Df(c,Bt,b,a),c=this.a,b.bubbles=!1,Df(c,Dt,b,a),Df(this.a,zt,b,a)},Cr.ul=function(a){a.preventDefault(),uf(this,a,this.Di)},Cr.Di=function(a,b){var c=ca(this.c,b.pointerId);if(c){var d=c.$b,e=c.Jf;Df(this.a,yt,b,a),d&&e!==b.target&&(d.relatedTarget=b.target,b.relatedTarget=e,d.target=e,b.target?(Bf(this.a,d,a),Cf(this.a,b,a)):(b.target=e,b.relatedTarget=null,this.be(a,b))),c.$b=b,c.Jf=b.target}},Cr.tl=function(a){vf(this,a),uf(this,a,this.wl)},Cr.wl=function(a,b){Df(this.a,At,b,a),this.a.$b(b,a);var c=this.a;b.bubbles=!1,Df(c,Et,b,a),aa(this.c,b.pointerId),b.isPrimary&&(this.b=void 0,this.d=Hr.setTimeout(p(this.Yf,this),200))},Cr.sl=function(a){uf(this,a,this.be)},Cr.be=function(a,b){this.a.cancel(b,a),this.a.$b(b,a);var c=this.a;b.bubbles=!1,Df(c,Et,b,a),aa(this.c,b.pointerId),b.isPrimary&&(this.b=void 0,this.d=Hr.setTimeout(p(this.Yf,this),200))},r(wf,eb),wf.prototype.d=function(a){var b=this.b[a.type];b&&b(a)},wf.prototype.$b=function(a,b){a.bubbles=!0,Df(this,Ct,a,b)},wf.prototype.cancel=function(a,b){Df(this,Ft,a,b)},wf.prototype.M=function(){for(var a,b=this.a.length,c=0;b>c;c++)a=this.a[c],zf(this,X(a.e));wf.S.M.call(this)};var yt="pointermove",zt="pointerdown",At="pointerup",Bt="pointerover",Ct="pointerout",Dt="pointerenter",Et="pointerleave",Ft="pointercancel",Gt=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];r(Ff,be),Ff.prototype.preventDefault=function(){Ff.S.preventDefault.call(this),this.a.preventDefault()},Ff.prototype.lb=function(){Ff.S.lb.call(this),this.a.lb()},r(Gf,Ff),r(Hf,eb),Cr=Hf.prototype,Cr.hf=function(a){Jf(this,a);var b=new Gf(Nt,this.c,a);this.dispatchEvent(b),0===this.j&&(B(this.b,Ua),this.b=null,za(this.a),this.a=null),!this.o&&0===a.button&&If(this,this.f)},Cr.ki=function(a){Jf(this,a);var b=new Gf(Mt,this.c,a);this.dispatchEvent(b),this.f=a,this.o=!1,null===this.b&&(this.a=new wf(document),this.b=[Pa(this.a,Lt,this.Zi,!1,this),Pa(this.a,Nt,this.hf,!1,this),Pa(this.d,Ot,this.hf,!1,this)])},Cr.Zi=function(a){if(a.clientX!=this.f.clientX||a.clientY!=this.f.clientY){this.o=!0;var b=new Gf(Kt,this.c,a);this.dispatchEvent(b)}a.preventDefault()},Cr.Tk=function(a){this.dispatchEvent(new Gf(a.type,this.c,a))},Cr.M=function(){null!==this.i&&(Ua(this.i),this.i=null),null!==this.g&&(Ua(this.g),this.g=null),null!==this.b&&(B(this.b,Ua),this.b=null),null!==this.a&&(za(this.a),this.a=null),null!==this.d&&(za(this.d),this.d=null),Hf.S.M.call(this)};var Ht="singleclick",It="click",Jt="dblclick",Kt="pointerdrag",Lt="pointermove",Mt="pointerdown",Nt="pointerup",Ot="pointercancel",Pt={Tl:Ht,Il:It,Jl:Jt,Ml:Kt,Pl:Lt,Ll:Mt,Sl:Nt,Rl:"pointerover",Ql:"pointerout",Nl:"pointerenter",Ol:"pointerleave",Kl:Ot};r(Kf,hb),Cr=Kf.prototype,Cr.yd=c,Cr.Y=function(){return this.e},Cr.W=function(){return this.r},Cr.Z=function(){return this.g},Cr.$=function(){return this.n},r(Mf,lb),Mf.prototype.d=function(){return this.get("brightness")},Mf.prototype.getBrightness=Mf.prototype.d,Mf.prototype.e=function(){return this.get("contrast")},Mf.prototype.getContrast=Mf.prototype.e,Mf.prototype.f=function(){return this.get("hue")},Mf.prototype.getHue=Mf.prototype.f,Mf.prototype.D=function(){return this.get("extent")},Mf.prototype.getExtent=Mf.prototype.D,Mf.prototype.g=function(){return this.get("maxResolution")},Mf.prototype.getMaxResolution=Mf.prototype.g,Mf.prototype.i=function(){return this.get("minResolution")},Mf.prototype.getMinResolution=Mf.prototype.i,Mf.prototype.j=function(){return this.get("opacity")},Mf.prototype.getOpacity=Mf.prototype.j,Mf.prototype.n=function(){return this.get("saturation")},Mf.prototype.getSaturation=Mf.prototype.n,Mf.prototype.b=function(){return this.get("visible")},Mf.prototype.getVisible=Mf.prototype.b,Mf.prototype.t=function(a){this.set("brightness",a)},Mf.prototype.setBrightness=Mf.prototype.t,Mf.prototype.F=function(a){this.set("contrast",a)},Mf.prototype.setContrast=Mf.prototype.F,Mf.prototype.J=function(a){this.set("hue",a)},Mf.prototype.setHue=Mf.prototype.J,Mf.prototype.p=function(a){this.set("extent",a)},Mf.prototype.setExtent=Mf.prototype.p,Mf.prototype.Q=function(a){this.set("maxResolution",a)},Mf.prototype.setMaxResolution=Mf.prototype.Q,Mf.prototype.V=function(a){this.set("minResolution",a)},Mf.prototype.setMinResolution=Mf.prototype.V,Mf.prototype.q=function(a){this.set("opacity",a)},Mf.prototype.setOpacity=Mf.prototype.q,Mf.prototype.ba=function(a){this.set("saturation",a)},Mf.prototype.setSaturation=Mf.prototype.ba,Mf.prototype.ca=function(a){this.set("visible",a)},Mf.prototype.setVisible=Mf.prototype.ca,r(Of,Mf),Of.prototype.Da=function(b){return b=a(b)?b:[],b.push(Nf(this)),b},Of.prototype.a=function(){var b=this.get("source");return a(b)?b:null},Of.prototype.getSource=Of.prototype.a,Of.prototype.Ta=function(){var a=this.a();return null===a?"undefined":a.n},Of.prototype.Zd=function(){this.l()},Of.prototype.Yd=function(){null!==this.Ea&&(Ua(this.Ea),this.Ea=null);var a=this.a();null!==a&&(this.Ea=Pa(a,"change",this.Zd,!1,this)),this.l()},Of.prototype.ga=function(a){this.set("source",a)},Of.prototype.setSource=Of.prototype.ga,r(Pf,eb),Pf.prototype.D=function(){return this.extent},r(Qf,eb),Qf.prototype.mb=function(){return m(this).toString()},Qf.prototype.f=function(){return this.a};var Qt=[0,0,0];Cr=Sf.prototype,Cr.Bb=function(){return ab},Cr.$c=function(a,b,c,d,e){for(e=Wf(this,a,e),a=a[0]-1;a>=this.minZoom;){if(b.call(c,a,Uf(this,e,a,d)))return!0;--a}return!1},Cr.ed=function(){return this.maxZoom},Cr.fd=function(){return this.minZoom},Cr.Lb=function(a){return null===this.d?this.f[a]:this.d},Cr.ka=function(a){return this.a[a]},Cr.Fd=function(){return this.a},Cr.kd=function(a,b,c){return a[0]<this.maxZoom?(c=Wf(this,a,c),Uf(this,c,a[0]+1,b)):null},Cr.Vb=function(a,b,c){return Xf(this,a[0],a[1],b,!1,c)},Cr.Fc=function(a,b,c){return Xf(this,a[0],a[1],this.ka(b),!1,c)},Cr.sa=function(b){return a(this.e)?this.e:this.c[b]},r($f,Kf),Cr=$f.prototype,Cr.zd=zs,Cr.fe=function(a,b,c,d){var e,f,g,h,i=!0;for(g=d.a;g<=d.d;++g)for(h=d.b;h<=d.c;++h)f=this.hb(c,g,h),a[c]&&a[c][f]||(e=b(c,g,h),null===e?i=!1:(a[c]||(a[c]={}),a[c][f]=e));return i},Cr.bd=function(){return 0},Cr.hb=Rc,Cr.za=function(){return this.tileGrid},Cr.Gc=function(a,b,c){return _f(this,c).sa(a)*this.F},Cr.He=c,r(ag,xa),ag.prototype.Zb=c,ag.prototype.o=function(a){2===a.target.state&&bg(this)},Cr=jg.prototype,Cr.Ad=function(){return this.p},Cr.hd=function(){return this.q},Cr.Bd=function(){return this.i},Cr.Cd=function(){return this.n},Cr.jd=function(){return this.r},Cr.Dd=function(a){this.i=a},Cr.Ed=function(a){this.n=a},r(kg,jg),Cr=kg.prototype,Cr.tb=function(){if(null!==this.d)return this.d;var a=this.e,b=this.ab();if("fraction"==this.g||"fraction"==this.o){if(null===b)return null;a=this.e.slice(),"fraction"==this.g&&(a[0]*=b[0]),"fraction"==this.o&&(a[1]*=b[1])}if("top-left"!=this.c){if(null===b)return null;a===this.e&&(a=this.e.slice()),("top-right"==this.c||"bottom-right"==this.c)&&(a[0]=-a[0]+b[0]),("bottom-left"==this.c||"bottom-right"==this.c)&&(a[1]=-a[1]+b[1])}return this.d=a},Cr.yb=function(){return this.a.a},Cr.cd=function(){return this.a.c},Cr.ue=function(){return this.a.b},Cr.te=function(){var a=this.a;if(null===a.e)if(a.o){var b=a.c[0],c=a.c[1],d=ud(b,c);d.fillRect(0,0,b,c),a.e=d.canvas}else a.e=a.a;return a.e},Cr.zb=function(){if(null!==this.f)return this.f;var a=this.t;if("top-left"!=this.b){var b=this.ab(),c=this.a.c;if(null===b||null===c)return null;a=a.slice(),("top-right"==this.b||"bottom-right"==this.b)&&(a[0]=c[0]-b[0]-a[0]),("bottom-left"==this.b||"bottom-right"==this.b)&&(a[1]=c[1]-b[1]-a[1])}return this.f=a},Cr.Pj=function(){return this.a.f},Cr.ab=function(){return null===this.j?this.a.c:this.j},Cr.ne=function(a,b){return Pa(this.a,"change",a,!1,b)},Cr.load=function(){this.a.load()},Cr.Ge=function(a,b){Ta(this.a,"change",a,!1,b)},r(lg,eb),lg.prototype.g=function(){this.b=3,B(this.d,Ua),this.d=null,this.dispatchEvent("change")},lg.prototype.i=function(){this.b=2,this.c=[this.a.width,this.a.height],B(this.d,Ua),this.d=null;var a=ud(1,1);a.drawImage(this.a,0,0);try{a.getImageData(0,0,1,1)}catch(b){this.o=!0}this.dispatchEvent("change")},lg.prototype.load=function(){if(0==this.b){this.b=1,this.d=[Sa(this.a,"error",this.g,!1,this),Sa(this.a,"load",this.i,!1,this)];try{this.a.src=this.f}catch(a){this.g()}}},d(mg),mg.prototype.clear=function(){this.a={},this.c=0},mg.prototype.get=function(a,b){var c=b+":"+a;return c in this.a?this.a[c]:null},mg.prototype.set=function(a,b,c){this.a[b+":"+a]=c,++this.c},r(qg,xa),qg.prototype.Yc=function(a){return new ag(this,a)},qg.prototype.M=function(){T(this.b,za),qg.S.M.call(this)},qg.prototype.Ld=c,qg.prototype.t=function(a,b){for(var c in this.b)if(!(null!==b&&c in b.layerStates)){var d=this.b[c];delete this.b[c],za(d)}},wg.prototype.clear=function(){this.a.length=0,this.c.length=0,_(this.b)},wg.prototype.Ub=function(){return this.a.length},wg.prototype.ia=function(){return 0===this.a.length},r(Cg,wg),Cg.prototype.g=function(){--this.d,this.o()},Dg.prototype.update=function(a,b){this.a.push(a,b,Kr())},r(Gg,lb),Gg.prototype.a=function(){return this.get("active")},Gg.prototype.getActive=Gg.prototype.a,Gg.prototype.b=function(a){this.set("active",a)},Gg.prototype.setActive=Gg.prototype.b,Gg.prototype.setMap=function(a){this.n=a},r(Kg,Gg),r(Tg,Gg),Tg.prototype.q=ab,r(Wg,Tg),Wg.prototype.q=zs,r($g,Tg),$g.prototype.q=zs,r(ch,hb),ch.prototype.f=function(b,c){var d=a(c)?c:[NaN,NaN];return this.Va(b[0],b[1],d,1/0),d},ch.prototype.Jb=zs,ch.prototype.e=function(a,b){return this.ma(yc(a,b)),this},r(eh,ch),Cr=eh.prototype,Cr.Jb=zs,Cr.D=function(a){if(this.g!=this.c){var b=this.k,c=this.k.length,d=this.s,e=Rb(1/0,1/0,-(1/0),-(1/0),this.extent);this.extent=Vb(e,b,0,c,d),this.g=this.c}return hc(this.extent,a)},Cr.vb=function(){return this.k.slice(0,this.s)},Cr.wb=function(){return this.k.slice(this.k.length-this.s)},Cr.xb=function(){return this.a},Cr.ke=function(a){if(this.j!=this.c&&(_(this.o),this.i=0,this.j=this.c),0>a||0!==this.i&&a<=this.i)return this;var b=a.toString();if(this.o.hasOwnProperty(b))return this.o[b];var c=this.mc(a);return c.k.length<this.k.length?this.o[b]=c:(this.i=a,this)},Cr.mc=function(){return this},Cr.ma=function(a){null!==this.k&&(a(this.k,this.k,this.s),this.l())},Cr.Aa=function(b,c){var d=this.k;if(null!==d){var e,f,g=d.length,h=this.s,i=a(d)?d:[],j=0;for(e=0;g>e;e+=h)for(i[j++]=d[e]+b,i[j++]=d[e+1]+c,f=e+2;e+h>f;++f)i[j++]=d[f];a(d)&&i.length!=j&&(i.length=j),this.l()}},r(yh,eh),Cr=yh.prototype,Cr.clone=function(){var a=new yh(null);return zh(a,this.a,this.k.slice()),a},Cr.Va=function(a,b,c,d){return d<Mb(this.D(),a,b)?d:(this.b!=this.c&&(this.n=Math.sqrt(nh(this.k,0,this.k.length,this.s,0)),this.b=this.c),ph(this.k,0,this.k.length,this.s,this.n,!0,a,b,c,d))},Cr.nj=function(){return ih(this.k,0,this.k.length,this.s)},Cr.K=function(){return uh(this.k,0,this.k.length,this.s)},Cr.mc=function(a){var b=[];return b.length=wh(this.k,0,this.k.length,this.s,a,b,0),a=new yh(null),zh(a,"XY",b),a},Cr.H=function(){return"LinearRing"},Cr.U=function(a,b){null===a?zh(this,"XY",null):(hh(this,b,a,1),null===this.k&&(this.k=[]),this.k.length=sh(this.k,0,a,this.s),this.l())},r(Ah,eh),Cr=Ah.prototype,Cr.clone=function(){var a=new Ah(null);return Bh(a,this.a,this.k.slice()),a},Cr.Va=function(a,b,c,d){var e=this.k;if(a=lh(a,b,e[0],e[1]),d>a){for(d=this.s,b=0;d>b;++b)c[b]=e[b];return c.length=d,a}return d},Cr.K=function(){return null===this.k?[]:this.k.slice()},Cr.D=function(a){return this.g!=this.c&&(this.extent=Sb(this.k,this.extent),this.g=this.c),hc(this.extent,a)},Cr.H=function(){return"Point"},Cr.ha=function(a){return Ob(a,this.k[0],this.k[1])},Cr.U=function(a,b){null===a?Bh(this,"XY",null):(hh(this,b,a,0),null===this.k&&(this.k=[]),this.k.length=rh(this.k,a),this.l())},r(Mh,eh),Cr=Mh.prototype,Cr.Ug=function(a){null===this.k?this.k=a.k.slice():L(this.k,a.k),this.b.push(this.k.length),this.l()},Cr.clone=function(){var a=new Mh(null);return Ph(a,this.a,this.k.slice(),this.b.slice()),a},Cr.Va=function(a,b,c,d){return d<Mb(this.D(),a,b)?d:(this.r!=this.c&&(this.t=Math.sqrt(oh(this.k,0,this.b,this.s,0)),this.r=this.c),qh(this.k,0,this.b,this.s,this.t,!0,a,b,c,d))},Cr.Jb=function(a,b){return Eh(Oh(this),0,this.b,this.s,a,b)},Cr.qj=function(){return jh(Oh(this),0,this.b,this.s)},Cr.K=function(){return vh(this.k,0,this.b,this.s)},Cr.ph=function(){return new Ah(Nh(this))},Cr.vh=function(){return this.b.length},Cr.uh=function(a){if(0>a||this.b.length<=a)return null;var b=new yh(null);return zh(b,this.a,this.k.slice(0===a?0:this.b[a-1],this.b[a])),b},Cr.dd=function(){var a,b,c=this.a,d=this.k,e=this.b,f=[],g=0;for(a=0,b=e.length;b>a;++a){var h=e[a],i=new yh(null);zh(i,c,d.slice(g,h)),f.push(i),g=h}return f},Cr.mc=function(a){var b=[],c=[];return b.length=xh(this.k,0,this.b,this.s,Math.sqrt(a),b,0,c),a=new Mh(null),Ph(a,"XY",b,c),a},Cr.H=function(){return"Polygon"},Cr.ha=function(a){return Ih(Oh(this),0,this.b,this.s,a)},Cr.U=function(a,b){if(null===a)Ph(this,"XY",null,this.b);else{hh(this,b,a,2),null===this.k&&(this.k=[]);var c=th(this.k,0,a,this.s,this.b);this.k.length=0===c.length?0:c[c.length-1],this.l()}},r(Rh,Aa),r(Sh,xa),Sh.prototype.M=function(){this.setMap(null)},Sh.prototype.g=function(a){var b=this.b,c=this.f;a.vectorContext.ic(1/0,function(a){a.wa(c.e,c.b),a.xa(c.c),a.Sb(b,null)})},Sh.prototype.N=function(){return this.b},Sh.prototype.setMap=function(a){null!==this.d&&(Ua(this.d),this.d=null,this.a.render(),this.a=null),this.a=a,null!==this.a&&(this.d=Pa(a,"postcompose",this.g,!1,this),Uh(this))},r(Vh,Aa),r(Wh,Tg),Wh.prototype.N=function(){return this.f.N()},Wh.prototype.g=c,r(_h,$h),_h.prototype.update=function(b,c){a(c)||(c=b.length);for(var d=c-this.c,e=this.e,f=this.b,g=0;c>g;){if(0==f)for(;d>=g;)ai(this,b,g),g+=this.c;if(i(b)){for(;c>g;)if(e[f++]=b.charCodeAt(g++),f==this.c){ai(this,e),f=0;break}}else for(;c>g;)if(e[f++]=b[g++],f==this.c){ai(this,e),f=0;break}}this.b=f,this.d+=c},Cr=bi.prototype,Cr.Vj=function(){return this.a},Cr.rh=function(){return this.d},Cr.Wj=function(){return this.b},Cr.sh=function(){return this.e},Cr.xh=function(){return this.f},Cr.Xj=function(){return this.c},Cr.Yj=function(a){this.a=a,this.g=void 0},Cr.el=function(a){this.d=a,this.g=void 0},Cr.Zj=function(a){this.b=a,this.g=void 0},Cr.fl=function(a){this.e=a,this.g=void 0},Cr.gl=function(a){this.f=a,this.g=void 0},Cr.ol=function(a){this.c=a,this.g=void 0},Cr.ub=function(){if(!a(this.g)){var b="s"+(null===this.a?"-":Cd(this.a))+","+(a(this.d)?this.d.toString():"-")+","+(null===this.b?"-":this.b.toString())+","+(a(this.e)?this.e:"-")+","+(a(this.f)?this.f.toString():"-")+","+(a(this.c)?this.c.toString():"-"),c=new _h;c.update(b);var d=Array((56>c.b?c.c:2*c.c)-c.b);for(d[0]=128,b=1;b<d.length-8;++b)d[b]=0;for(var e=8*c.d,b=d.length-8;b<d.length;++b)d[b]=255&e,e/=256;for(c.update(d),d=Array(16),b=e=0;4>b;++b)for(var f=0;32>f;f+=8)d[e++]=c.a[b]>>>f&255;if(8192>d.length)c=String.fromCharCode.apply(null,d);else for(c="",b=0;b<d.length;b+=8192)c+=String.fromCharCode.apply(null,N(d,b,b+8192));this.g=c}return this.g};var Rt=[0,0,0,1],St=[],Tt=[0,0,0,1];ci.prototype.b=function(){return this.a},ci.prototype.d=function(a){this.a=a,this.c=void 0},ci.prototype.ub=function(){return a(this.c)||(this.c="f"+(null===this.a?"-":Cd(this.a))),this.c},r(di,jg),Cr=di.prototype,Cr.tb=function(){return this.g},Cr.Mj=function(){return this.d},Cr.te=function(){return this.f},Cr.yb=function(){return this.a},Cr.ue=function(){return 2},Cr.cd=function(){return this.o},Cr.zb=function(){return this.j},Cr.Nj=function(){return this.b},Cr.ab=function(){return this.t},Cr.Oj=function(){return this.c},Cr.ne=c,Cr.load=c,Cr.Ge=c,Cr.Cf=function(a,b,c,d){b.setTransform(1,0,0,1,0,0),b.translate(c,d),b.beginPath(),b.arc(a.size/2,a.size/2,this.b,0,2*Math.PI,!0),null!==this.d&&(b.fillStyle=Cd(this.d.a),b.fill()),null!==this.c&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.Nc,null===a.lineDash||b.setLineDash(a.lineDash),b.stroke()),b.closePath()},Cr.Bf=function(a,b,c,d){b.setTransform(1,0,0,1,0,0),b.translate(c,d),b.beginPath(),b.arc(a.size/2,a.size/2,this.b,0,2*Math.PI,!0),b.fillStyle=Rt,b.fill(),null!==this.c&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.Nc,null===a.lineDash||b.setLineDash(a.lineDash),b.stroke()),b.closePath()},Cr.ub=function(){var b=null===this.c?"-":this.c.ub(),c=null===this.d?"-":this.d.ub();return(null===this.e||b!=this.e[1]||c!=this.e[2]||this.b!=this.e[3])&&(this.e=["c"+b+c+(a(this.b)?this.b.toString():"-"),b,c,this.b]),this.e[0]},Cr=ei.prototype,Cr.N=function(){return this.g},Cr.lh=function(){return this.d},Cr.$j=function(){return this.e},Cr.ak=function(){return this.f},Cr.bk=function(){return this.b},Cr.ck=function(){return this.c},Cr.Nh=function(){return this.a},Cr.Ff=function(b){k(b)?this.d=b:i(b)?this.d=function(a){return a.get(b)}:null===b?this.d=ii:a(b)&&(this.d=function(){return b}),this.g=b},Cr.ql=function(a){this.a=a},r(ji,Wh),ji.prototype.g=function(){var a=this.n,b=a.a(),c=this.N().D(),d=Zb(c),e=a.e(),c=b.n(c,e),c=b.constrainResolution(c,0,void 0);Jg(a,b,c,d,200)},r(ki,Gg),r(mi,Gg),r(oi,Gg),oi.prototype.i=function(a){var b=ja(this.d,-1,1),c=a.a();a.render(),Ig(a,c,-b,this.f,this.j),this.d=0,this.f=null,this.g=this.e=void 0},r(qi,Tg),qi.prototype.q=zs,r(ui,Tg),ui.prototype.q=zs,r(zi,Mf),Cr=zi.prototype,Cr.ff=function(){this.b()&&this.l()},Cr.ei=function(){null!==this.a&&(B(W(this.a),Ua),this.a=null);var a=this.Yb();if(null!=a){this.a={add:Pa(a,"add",this.di,!1,this),remove:Pa(a,"remove",this.fi,!1,this)};var b,c,d,a=a.a;for(b=0,c=a.length;c>b;b++)d=a[b],this.a[m(d).toString()]=Pa(d,["propertychange","change"],this.ff,!1,this)}this.l()},Cr.di=function(a){a=a.element,this.a[m(a).toString()]=Pa(a,["propertychange","change"],this.ff,!1,this),this.l()},Cr.fi=function(a){a=m(a.element).toString(),Ua(this.a[a]),delete this.a[a],this.l()},Cr.Yb=function(){return this.get("layers")},zi.prototype.getLayers=zi.prototype.Yb,zi.prototype.r=function(a){this.set("layers",a)},zi.prototype.setLayers=zi.prototype.r,zi.prototype.Da=function(b){var c=a(b)?b:[],d=c.length;this.Yb().forEach(function(a){a.Da(c)}),b=Nf(this);var e,f;for(e=c.length;e>d;d++)f=c[d],f.brightness=ja(f.brightness+b.brightness,-1,1),f.contrast*=b.contrast,f.hue+=b.hue,f.opacity*=b.opacity,f.saturation*=b.saturation,f.visible=f.visible&&b.visible,f.maxResolution=Math.min(f.maxResolution,b.maxResolution),f.minResolution=Math.max(f.minResolution,b.minResolution),a(b.extent)&&(f.extent=a(f.extent)?bc(f.extent,b.extent):b.extent);return c},zi.prototype.Ta=function(){return"ready"},r(Ai,mc),Ai.prototype.je=function(a,b){var c=b[1]/6378137;return a/((Math.exp(c)+Math.exp(-c))/2)};var Ut=6378137*Math.PI,Vt=[-Ut,-Ut,Ut,Ut],Wt=[-180,-85,180,85],Xt=D("EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" "),function(a){return new Ai(a)});r(Di,mc),Di.prototype.je=function(a){return a};var Yt=[-180,-90,180,90],Zt=[new Di("CRS:84"),new Di("EPSG:4326","neu"),new Di("urn:ogc:def:crs:EPSG::4326","neu"),new Di("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Di("urn:ogc:def:crs:OGC:1.3:CRS84"),new Di("urn:ogc:def:crs:OGC:2:84"),new Di("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Di("urn:x-ogc:def:crs:EPSG:4326","neu")];r(Fi,Of),r(Gi,Of),Gi.prototype.r=function(){return this.get("preload")},Gi.prototype.getPreload=Gi.prototype.r,Gi.prototype.oa=function(a){this.set("preload",a)},Gi.prototype.setPreload=Gi.prototype.oa,Gi.prototype.ea=function(){return this.get("useInterimTilesOnError")},Gi.prototype.getUseInterimTilesOnError=Gi.prototype.ea,Gi.prototype.qa=function(a){this.set("useInterimTilesOnError",a)},Gi.prototype.setUseInterimTilesOnError=Gi.prototype.qa,r(Hi,Of),Hi.prototype.Uc=function(){return this.eb},Hi.prototype.Vc=function(){return this.r},Hi.prototype.oa=function(b){this.eb=a(b)?b:gi,this.r=null===b?void 0:fi(this.eb),this.l()},Cr=Ii.prototype,Cr.ic=function(b,c){var d=b.toString(),e=this.p[d];a(e)?e.push(c):this.p[d]=[c]},Cr.jc=function(a){if(fc(this.e,a.D())){if(null!==this.c||null!==this.a){null===this.c||Oi(this,this.c),null===this.a||Pi(this,this.a);var b;b=a.k,b=null===b?null:dh(b,0,b.length,a.s,this.F,this.q);var c=b[2]-b[0],d=b[3]-b[1],c=Math.sqrt(c*c+d*d),d=this.b;d.beginPath(),d.arc(b[0],b[1],c,0,2*Math.PI),null===this.c||d.fill(),null===this.a||d.stroke()}""!==this.d&&Ki(this,a.qe(),2,2)}},Cr.ee=function(b,c){var d=c.d(b);if(null!=d&&fc(this.e,d.D())){var e=c.a;a(e)||(e=0),this.ic(e,function(a){a.wa(c.e,c.b),a.cb(c.f),a.xa(c.c),$t[d.H()].call(a,d,null)})}},Cr.Zc=function(a,b){var c,d,e=a.d;for(c=0,d=e.length;d>c;++c){var f=e[c];$t[f.H()].call(this,f,b)}},Cr.rb=function(a){var b=a.k;a=a.s,null===this.f||Ji(this,b,b.length),""!==this.d&&Ki(this,b,b.length,a)},Cr.qb=function(a){var b=a.k;a=a.s,null===this.f||Ji(this,b,b.length),""!==this.d&&Ki(this,b,b.length,a)},Cr.Cb=function(a){if(fc(this.e,a.D())){if(null!==this.a){Pi(this,this.a);var b=this.b,c=a.k;b.beginPath(),Li(this,c,0,c.length,a.s,!1),b.stroke()}""!==this.d&&(a=wj(a),Ki(this,a,2,2))}},Cr.kc=function(a){var b=a.D();if(fc(this.e,b)){if(null!==this.a){Pi(this,this.a);var b=this.b,c=a.k,d=0,e=a.b,f=a.s;b.beginPath();var g,h;for(g=0,h=e.length;h>g;++g)d=Li(this,c,d,e[g],f,!1);b.stroke()}""!==this.d&&(a=zj(a),Ki(this,a,a.length,2))}},Cr.Sb=function(a){if(fc(this.e,a.D())){if(null!==this.a||null!==this.c){null===this.c||Oi(this,this.c),null===this.a||Pi(this,this.a);var b=this.b;b.beginPath(),Mi(this,Oh(a),0,a.b,a.s),null===this.c||b.fill(),null===this.a||b.stroke()}""!==this.d&&(a=Nh(a),Ki(this,a,2,2))}},Cr.lc=function(a){if(fc(this.e,a.D())){if(null!==this.a||null!==this.c){null===this.c||Oi(this,this.c),null===this.a||Pi(this,this.a);var b,c,d=this.b,e=Fj(a),f=0,g=a.b,h=a.s;for(b=0,c=g.length;c>b;++b){var i=g[b];d.beginPath(),f=Mi(this,e,f,i,h),null===this.c||d.fill(),null===this.a||d.stroke()}}""!==this.d&&(a=Ej(a),Ki(this,a,a.length,2))}},Cr.wa=function(b,c){if(null===b)this.c=null;else{var d=b.a;this.c={fillStyle:Cd(null===d?Rt:d)}}if(null===c)this.a=null;else{var d=c.a,e=c.d,f=c.b,g=c.e,h=c.c,i=c.f;this.a={lineCap:a(e)?e:"round",lineDash:null!=f?f:St,lineJoin:a(g)?g:"round",lineWidth:this.r*(a(h)?h:1),miterLimit:a(i)?i:10,strokeStyle:Cd(null===d?Tt:d)}}},Cr.cb=function(a){if(null===a)this.f=null;else{var b=a.tb(),c=a.yb(1),d=a.zb(),e=a.ab();this.J=b[0],this.Q=b[1],this.V=e[1],this.f=c,this.j=a.p,this.Sa=d[0],this.ea=d[1],this.Da=a.q,this.oa=a.i,this.g=a.n,this.Ea=a.r,this.ba=e[0]}},Cr.xa=function(b){if(null===b)this.d="";else{var c=b.a;null===c?this.o=null:(c=c.a,this.o={fillStyle:Cd(null===c?Rt:c)});var d=b.f;if(null===d)this.n=null;else{var c=d.a,e=d.d,f=d.b,g=d.e,h=d.c,d=d.f;this.n={lineCap:a(e)?e:"round",lineDash:null!=f?f:St,lineJoin:a(g)?g:"round",lineWidth:a(h)?h:1,miterLimit:a(d)?d:10,strokeStyle:Cd(null===c?Tt:c)}}var c=b.d,e=b.i,f=b.n,g=b.e,h=b.c,d=b.b,i=b.g;b=b.o,this.ca={font:a(c)?c:"10px sans-serif",textAlign:a(i)?i:"center",textBaseline:a(b)?b:"middle"},this.d=a(d)?d:"",this.qa=a(e)?this.r*e:0,this.Ta=a(f)?this.r*f:0,this.t=a(g)?g:0,this.i=this.r*(a(h)?h:1)}};var $t={Point:Ii.prototype.rb,LineString:Ii.prototype.Cb,Polygon:Ii.prototype.Sb,MultiPoint:Ii.prototype.qb,MultiLineString:Ii.prototype.kc,MultiPolygon:Ii.prototype.lc,GeometryCollection:Ii.prototype.Zc,Circle:Ii.prototype.jc},_t=["Polygon","LineString","Image","Text"];Qi.prototype.Hc=function(a,b,c,d,e){Ti(this,a,b,c,d,e,this.c,void 0)},Qi.prototype.Kb=c,Qi.prototype.he=function(){return this.V},r(Wi,Qi),Wi.prototype.rb=function(a,b){if(null!==this.g){Si(this,b);var c=a.k,d=this.coordinates.length,c=Ri(this,c,0,c.length,a.s,!1);this.c.push([4,d,c,this.g,this.b,this.e,this.f,this.o,this.i,this.n,this.j,this.p,this.q,this.r,this.t]),this.a.push([4,d,c,this.Q,this.b,this.e,this.f,this.o,this.i,this.n,this.j,this.p,this.q,this.r,this.t]),Vi(this,b)}},Wi.prototype.qb=function(a,b){if(null!==this.g){Si(this,b);var c=a.k,d=this.coordinates.length,c=Ri(this,c,0,c.length,a.s,!1);this.c.push([4,d,c,this.g,this.b,this.e,this.f,this.o,this.i,this.n,this.j,this.p,this.q,this.r,this.t]),this.a.push([4,d,c,this.Q,this.b,this.e,this.f,this.o,this.i,this.n,this.j,this.p,this.q,this.r,this.t]),Vi(this,b)}},Wi.prototype.Kb=function(){Ui(this),this.e=this.b=void 0,this.g=this.Q=null,this.t=this.r=this.p=this.j=this.n=this.i=this.o=this.q=this.f=void 0},Wi.prototype.cb=function(a){var b=a.tb(),c=a.ab(),d=a.te(1),e=a.yb(1),f=a.zb();this.b=b[0],this.e=b[1],this.Q=d,this.g=e,this.f=c[1],this.o=a.p,this.i=f[0],this.n=f[1],this.j=a.q,this.p=a.i,this.q=a.n,this.r=a.r,this.t=c[0]},r(Xi,Qi),Cr=Xi.prototype,Cr.he=function(){var a=this.V;return this.d&&(a=Lb(a,this.resolution*(this.d+1)/2)),a},Cr.Cb=function(b,c){var d=this.b,e=d.lineWidth;a(d.strokeStyle)&&a(e)&&(Zi(this),Si(this,c),this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash],[1]),d=b.k,Yi(this,d,0,d.length,b.s),this.a.push([12]),Vi(this,c))},Cr.kc=function(b,c){var d=this.b,e=d.lineWidth;if(a(d.strokeStyle)&&a(e)){Zi(this),Si(this,c),this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash],[1]);var f,g,d=b.b,e=b.k,h=b.s,i=0;for(f=0,g=d.length;g>f;++f)i=Yi(this,e,i,d[f],h);this.a.push([12]),Vi(this,c)}},Cr.Kb=function(){this.b.me!=this.coordinates.length&&this.c.push([12]),Ui(this),this.b=null},Cr.wa=function(b,c){var d=c.a;this.b.strokeStyle=Cd(null===d?Tt:d),d=c.d,this.b.lineCap=a(d)?d:"round",d=c.b,this.b.lineDash=null===d?St:d,d=c.e,this.b.lineJoin=a(d)?d:"round",d=c.c,this.b.lineWidth=a(d)?d:1,d=c.f,this.b.miterLimit=a(d)?d:10,this.d=Math.max(this.d,this.b.lineWidth)},r($i,Qi),Cr=$i.prototype,Cr.jc=function(b,c){var d=this.b,e=d.strokeStyle;if(a(d.fillStyle)||a(e)){aj(this),Si(this,c),this.a.push([9,Cd(Rt)]),a(d.strokeStyle)&&this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash]);var f=b.k,e=this.coordinates.length;Ri(this,f,0,f.length,b.s,!1),f=[1],e=[2,e],this.c.push(f,e),this.a.push(f,e),e=[7],this.a.push(e),a(d.fillStyle)&&this.c.push(e),a(d.strokeStyle)&&(d=[12],this.c.push(d),this.a.push(d)),Vi(this,c)}},Cr.Sb=function(b,c){var d=this.b,e=d.strokeStyle;(a(d.fillStyle)||a(e))&&(aj(this),Si(this,c),this.a.push([9,Cd(Rt)]),a(d.strokeStyle)&&this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash]),d=b.b,e=Oh(b),_i(this,e,0,d,b.s),Vi(this,c))},Cr.lc=function(b,c){var d=this.b,e=d.strokeStyle;
if(a(d.fillStyle)||a(e)){aj(this),Si(this,c),this.a.push([9,Cd(Rt)]),a(d.strokeStyle)&&this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash]);var f,g,d=b.b,e=Fj(b),h=b.s,i=0;for(f=0,g=d.length;g>f;++f)i=_i(this,e,i,d[f],h);Vi(this,c)}},Cr.Kb=function(){Ui(this),this.b=null;var a=this.ga;if(0!==a){var b,c,d=this.coordinates;for(b=0,c=d.length;c>b;++b)d[b]=a*Math.round(d[b]/a)}},Cr.he=function(){var a=this.V;return this.d&&(a=Lb(a,this.resolution*(this.d+1)/2)),a},Cr.wa=function(b,c){var d=this.b;if(null===b)d.fillStyle=void 0;else{var e=b.a;d.fillStyle=Cd(null===e?Rt:e)}null===c?(d.strokeStyle=void 0,d.lineCap=void 0,d.lineDash=null,d.lineJoin=void 0,d.lineWidth=void 0,d.miterLimit=void 0):(e=c.a,d.strokeStyle=Cd(null===e?Tt:e),e=c.d,d.lineCap=a(e)?e:"round",e=c.b,d.lineDash=null===e?St:e.slice(),e=c.e,d.lineJoin=a(e)?e:"round",e=c.c,d.lineWidth=a(e)?e:1,e=c.f,d.miterLimit=a(e)?e:10,this.d=Math.max(this.d,d.lineWidth))},r(bj,Qi),bj.prototype.sb=function(a,b,c,d,e,f){if(""!==this.g&&null!==this.f&&(null!==this.b||null!==this.e)){if(null!==this.b){e=this.b;var g=this.p;if(null===g||g.fillStyle!=e.fillStyle){var h=[9,e.fillStyle];this.c.push(h),this.a.push(h),null===g?this.p={fillStyle:e.fillStyle}:g.fillStyle=e.fillStyle}}null!==this.e&&(e=this.e,g=this.q,null===g||g.lineCap!=e.lineCap||g.lineDash!=e.lineDash||g.lineJoin!=e.lineJoin||g.lineWidth!=e.lineWidth||g.miterLimit!=e.miterLimit||g.strokeStyle!=e.strokeStyle)&&(h=[10,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,!1],this.c.push(h),this.a.push(h),null===g?this.q={lineCap:e.lineCap,lineDash:e.lineDash,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle}:(g.lineCap=e.lineCap,g.lineDash=e.lineDash,g.lineJoin=e.lineJoin,g.lineWidth=e.lineWidth,g.miterLimit=e.miterLimit,g.strokeStyle=e.strokeStyle)),e=this.f,g=this.r,(null===g||g.font!=e.font||g.textAlign!=e.textAlign||g.textBaseline!=e.textBaseline)&&(h=[11,e.font,e.textAlign,e.textBaseline],this.c.push(h),this.a.push(h),null===g?this.r={font:e.font,textAlign:e.textAlign,textBaseline:e.textBaseline}:(g.font=e.font,g.textAlign=e.textAlign,g.textBaseline=e.textBaseline)),Si(this,f),e=this.coordinates.length,a=Ri(this,a,b,c,d,!1),a=[5,e,a,this.g,this.o,this.i,this.n,this.j,null!==this.b,null!==this.e],this.c.push(a),this.a.push(a),Vi(this,f)}},bj.prototype.xa=function(b){if(null===b)this.g="";else{var c=b.a;null===c?this.b=null:(c=c.a,c=Cd(null===c?Rt:c),null===this.b?this.b={fillStyle:c}:this.b.fillStyle=c);var d=b.f;if(null===d)this.e=null;else{var c=d.a,e=d.d,f=d.b,g=d.e,h=d.c,d=d.f,e=a(e)?e:"round",f=null!=f?f.slice():St,g=a(g)?g:"round",h=a(h)?h:1,d=a(d)?d:10,c=Cd(null===c?Tt:c);if(null===this.e)this.e={lineCap:e,lineDash:f,lineJoin:g,lineWidth:h,miterLimit:d,strokeStyle:c};else{var i=this.e;i.lineCap=e,i.lineDash=f,i.lineJoin=g,i.lineWidth=h,i.miterLimit=d,i.strokeStyle=c}}var j=b.d,c=b.i,e=b.n,f=b.e,h=b.c,d=b.b,g=b.g,i=b.o;b=a(j)?j:"10px sans-serif",g=a(g)?g:"center",i=a(i)?i:"middle",null===this.f?this.f={font:b,textAlign:g,textBaseline:i}:(j=this.f,j.font=b,j.textAlign=g,j.textBaseline=i),this.g=a(d)?d:"",this.o=a(c)?c:0,this.i=a(e)?e:0,this.n=a(f)?f:0,this.j=a(h)?h:1}},cj.prototype.a=function(b,c){var d=a(b)?b.toString():"0",e=this.c[d];return a(e)||(e={},this.c[d]=e),d=e[c],a(d)||(d=new au[c](this.g,this.b,this.f),e[c]=d),d},cj.prototype.ia=function(){return $(this.c)};var au={Image:Wi,LineString:Xi,Polygon:$i,Text:bj};r(hj,ag),hj.prototype.j=function(b,c,d){ij(this,"precompose",d,b,void 0);var e=this.p();if(null!==e){var f=c.extent,g=a(f);if(g){var h=cc(f),i=dc(f),j=Yb(f),f=Xb(f);pg(b.coordinateToPixelMatrix,h,h),pg(b.coordinateToPixelMatrix,i,i),pg(b.coordinateToPixelMatrix,j,j),pg(b.coordinateToPixelMatrix,f,f),d.save(),d.beginPath(),d.moveTo(h[0],h[1]),d.lineTo(i[0],i[1]),d.lineTo(j[0],j[1]),d.lineTo(f[0],f[1]),d.clip()}h=this.n(),i=d.globalAlpha,d.globalAlpha=c.opacity,0===b.viewState.rotation?(c=h[13],j=e.width*h[0],f=e.height*h[5],d.drawImage(e,0,0,+e.width,+e.height,Math.round(h[12]),Math.round(c),Math.round(j),Math.round(f))):(d.setTransform(h[0],h[1],h[4],h[5],h[12],h[13]),d.drawImage(e,0,0),d.setTransform(1,0,0,1,0,0)),d.globalAlpha=i,g&&d.restore()}ij(this,"postcompose",d,b,void 0)};var bu=function(){var a=null,b=null;return function(c){if(null===a){a=ud(1,1),b=a.createImageData(1,1);var d=b.data;d[0]=42,d[1]=84,d[2]=126,d[3]=255}var d=a.canvas,e=c[0]<=d.width&&c[1]<=d.height;return e||(d.width=c[0],d.height=c[1],d=c[0]-1,c=c[1]-1,a.putImageData(b,d,c),c=a.getImageData(d,c,1,1),e=P(b.data,c.data)),e}}();r(kj,hj),kj.prototype.Zb=function(a,b,c,d){var e=this.a;return e.a().yd(b.viewState.resolution,b.viewState.rotation,a,b.skippedFeatureUids,function(a){return c.call(d,a,e)})},kj.prototype.p=function(){return null===this.c?null:this.c.c()},kj.prototype.n=function(){return this.d},kj.prototype.i=function(b,c){var d,e=b.pixelRatio,f=b.viewState,g=f.center,h=f.resolution,i=f.rotation,j=this.a.a(),k=b.viewHints;if(d=b.extent,a(c.extent)&&(d=bc(d,c.extent)),k[0]||k[1]||gc(d)||(f=f.projection,k=j.g,null===k||(f=k),d=j.rc(d,h,e,f),null!==d&&(f=d.state,0==f?(Sa(d,"change",this.o,!1,this),d.load()):2==f&&(this.c=d))),null!==this.c){d=this.c;var f=d.D(),k=d.resolution,l=d.e,h=e*k/(h*l);ng(this.d,e*b.size[0]/2,e*b.size[1]/2,h,h,i,l*(f[0]-g[0])/k,l*(g[1]-f[3])/k),dg(b.attributions,d.f),eg(b,j)}return!0},r(lj,hj),lj.prototype.p=function(){return this.e},lj.prototype.n=function(){return this.r},lj.prototype.i=function(b,c){var d,e=b.pixelRatio,f=b.viewState,g=f.projection,h=this.a,i=h.a(),j=_f(i,g),k=i.bd(),l=pa(j.a,f.resolution,0),m=i.Gc(l,b.pixelRatio,g),n=j.ka(l),o=n/(m/j.sa(l)),q=f.center;if(n==f.resolution?(q=hg(q,n,b.size),d=_b(q,n,f.rotation,b.size)):d=b.extent,a(c.extent)&&(d=bc(d,c.extent)),gc(d))return!1;var r,s,t=Tf(j,d,n),u=m*(t.d-t.a+1),v=m*(t.c-t.b+1);null===this.e?(s=ud(u,v),this.e=s.canvas,this.c=[u,v],this.q=s,this.g=!bu(this.c)):(r=this.e,s=this.q,this.c[0]<u||this.c[1]<v||this.g&&(this.c[0]>u||this.c[1]>v)?(r.width=u,r.height=v,this.c=[u,v],this.g=!bu(this.c),this.d=null):(u=this.c[0],v=this.c[1],l==this.t&&Wc(this.d,t)||(this.d=null)));var w,x;null===this.d?(u/=m,v/=m,w=t.a-Math.floor((u-(t.d-t.a+1))/2),x=t.b-Math.floor((v-(t.c-t.b+1))/2),this.t=l,this.d=new Uc(w,w+u-1,x,x+v-1),this.f=Array(u*v),v=this.d):(v=this.d,u=v.d-v.a+1),r={},r[l]={};var y=[],z=p(i.fe,i,r,gg(function(a){return null!==a&&2==a.state},i,e,g)),A=h.ea();a(A)||(A=!0);var B,C,E,F=Qb(),G=new Uc(0,0,0,0);for(x=t.a;x<=t.d;++x)for(E=t.b;E<=t.c;++E)C=i.Fb(l,x,E,e,g),w=C.state,2==w||4==w||3==w&&!A?r[l][Tc(C.a)]=C:(B=j.$c(C.a,z,null,G,F),B||(y.push(C),B=j.kd(C.a,G,F),null===B||z(l+1,B)));for(z=0,B=y.length;B>z;++z)C=y[z],x=m*(C.a[1]-v.a),E=m*(v.c-C.a[2]),s.clearRect(x,E,m,m);y=D(X(r),Number),O(y);var H,I,J,K,L,M,N=i.t,P=cc(Wf(j,[l,v.a,v.c],F)),z=0;for(B=y.length;B>z;++z)if(H=y[z],m=i.Gc(H,e,g),K=r[H],H==l)for(J in K)C=K[J],I=(C.a[2]-v.b)*u+(C.a[1]-v.a),this.f[I]!=C&&(x=m*(C.a[1]-v.a),E=m*(v.c-C.a[2]),w=C.state,4!=w&&(3!=w||A)&&N||s.clearRect(x,E,m,m),2==w&&s.drawImage(C.Na(),k,k,m,m,x,E,m,m),this.f[I]=C);else for(J in H=j.ka(H)/n,K)for(C=K[J],I=Wf(j,C.a,F),x=(I[0]-P[0])/o,E=(P[1]-I[3])/o,M=H*m,L=H*m,w=C.state,4!=w&&N||s.clearRect(x,E,M,L),2==w&&s.drawImage(C.Na(),k,k,m,m,x,E,M,L),C=Uf(j,I,l,G),w=Math.max(C.a,v.a),E=Math.min(C.d,v.d),x=Math.max(C.b,v.b),C=Math.min(C.c,v.c);E>=w;++w)for(L=x;C>=L;++L)I=(L-v.b)*u+(w-v.a),this.f[I]=void 0;return fg(b.usedTiles,i,l,t),ig(b,i,j,e,g,d,l,h.r()),cg(b,i),eg(b,i),ng(this.r,e*b.size[0]/2,e*b.size[1]/2,e*o/f.resolution,e*o/f.resolution,f.rotation,(P[0]-q[0])/o,(q[1]-P[1])/o),!0},r(mj,eh),Cr=mj.prototype,Cr.clone=function(){var a=new mj(null);return gh(a,this.a,this.k.slice()),a.l(),a},Cr.Va=function(a,b,c,d){var e=this.k;a-=e[0];var f=b-e[1];if(b=a*a+f*f,d>b){if(0===b)for(d=0;d<this.s;++d)c[d]=e[d];else for(d=this.vf()/Math.sqrt(b),c[0]=e[0]+d*a,c[1]=e[1]+d*f,d=2;d<this.s;++d)c[d]=e[d];return c.length=this.s,b}return d},Cr.Jb=function(a,b){var c=this.k,d=a-c[0],c=b-c[1];return d*d+c*c<=nj(this)},Cr.qe=function(){return this.k.slice(0,this.s)},Cr.D=function(a){if(this.g!=this.c){var b=this.k,c=b[this.s]-b[0];this.extent=Rb(b[0]-c,b[1]-c,b[0]+c,b[1]+c,this.extent),this.g=this.c}return hc(this.extent,a)},Cr.vf=function(){return Math.sqrt(nj(this))},Cr.H=function(){return"Circle"},Cr.kj=function(a){var b=this.s,c=a.slice();c[b]=c[0]+(this.k[b]-this.k[0]);var d;for(d=1;b>d;++d)c[b+d]=a[d];gh(this,this.a,c),this.l()},Cr.ag=function(a,b,c){if(null===a)gh(this,"XY",null);else{hh(this,c,a,0),null===this.k&&(this.k=[]),c=this.k,a=rh(c,a),c[a++]=c[0]+b;var d;for(b=1,d=this.s;d>b;++b)c[a++]=c[b];c.length=a}this.l()},Cr.jl=function(a){this.k[this.s]=this.k[0]+a,this.l()},r(oj,ch),Cr=oj.prototype,Cr.clone=function(){var a=new oj(null);return a.bg(this.d),a},Cr.Va=function(a,b,c,d){if(d<Mb(this.D(),a,b))return d;var e,f,g=this.d;for(e=0,f=g.length;f>e;++e)d=g[e].Va(a,b,c,d);return d},Cr.Jb=function(a,b){var c,d,e=this.d;for(c=0,d=e.length;d>c;++c)if(e[c].Jb(a,b))return!0;return!1},Cr.D=function(a){if(this.g!=this.c){var b,c,d=Rb(1/0,1/0,-(1/0),-(1/0),this.extent),e=this.d;for(b=0,c=e.length;c>b;++b)Ub(d,e[b].D());this.extent=d,this.g=this.c}return hc(this.extent,a)},Cr.af=function(){return pj(this.d)},Cr.ke=function(a){if(this.j!=this.c&&(_(this.o),this.i=0,this.j=this.c),0>a||0!==this.i&&a<this.i)return this;var b=a.toString();if(this.o.hasOwnProperty(b))return this.o[b];var c,d,e=[],f=this.d,g=!1;for(c=0,d=f.length;d>c;++c){var h=f[c],i=h.ke(a);e.push(i),i!==h&&(g=!0)}return g?(a=new oj(null),qj(a),a.d=e,rj(a),a.l(),this.o[b]=a):(this.i=a,this)},Cr.H=function(){return"GeometryCollection"},Cr.ha=function(a){var b,c,d=this.d;for(b=0,c=d.length;c>b;++b)if(d[b].ha(a))return!0;return!1},Cr.ia=function(){return 0==this.d.length},Cr.bg=function(a){a=pj(a),qj(this),this.d=a,rj(this),this.l()},Cr.ma=function(a){var b,c,d=this.d;for(b=0,c=d.length;c>b;++b)d[b].ma(a);this.l()},Cr.Aa=function(a,b){var c,d,e=this.d;for(c=0,d=e.length;d>c;++c)e[c].Aa(a,b);this.l()},Cr.M=function(){qj(this),oj.S.M.call(this)},r(vj,eh),Cr=vj.prototype,Cr.Sg=function(a){null===this.k?this.k=a.slice():L(this.k,a),this.l()},Cr.clone=function(){var a=new vj(null);return xj(a,this.a,this.k.slice()),a},Cr.Va=function(a,b,c,d){return d<Mb(this.D(),a,b)?d:(this.p!=this.c&&(this.q=Math.sqrt(nh(this.k,0,this.k.length,this.s,0)),this.p=this.c),ph(this.k,0,this.k.length,this.s,this.q,!1,a,b,c,d))},Cr.lj=function(b,c){return"XYM"!=this.a&&"XYZM"!=this.a?null:tj(this.k,0,this.k.length,this.s,b,a(c)?c:!1)},Cr.K=function(){return uh(this.k,0,this.k.length,this.s)},Cr.mj=function(){var a,b=this.k,c=this.s,d=b[0],e=b[1],f=0;for(a=0+c;a<this.k.length;a+=c)var g=b[a],h=b[a+1],f=f+Math.sqrt((g-d)*(g-d)+(h-e)*(h-e)),d=g,e=h;return f},Cr.mc=function(a){var b=[];return b.length=wh(this.k,0,this.k.length,this.s,a,b,0),a=new vj(null),xj(a,"XY",b),a},Cr.H=function(){return"LineString"},Cr.ha=function(a){return Hh(this.k,0,this.k.length,this.s,a)},Cr.U=function(a,b){null===a?xj(this,"XY",null):(hh(this,b,a,1),null===this.k&&(this.k=[]),this.k.length=sh(this.k,0,a,this.s),this.l())},r(yj,eh),Cr=yj.prototype,Cr.Tg=function(a){null===this.k?this.k=a.k.slice():L(this.k,a.k.slice()),this.b.push(this.k.length),this.l()},Cr.clone=function(){var a=new yj(null);return Aj(a,this.a,this.k.slice(),this.b.slice()),a},Cr.Va=function(a,b,c,d){return d<Mb(this.D(),a,b)?d:(this.n!=this.c&&(this.p=Math.sqrt(oh(this.k,0,this.b,this.s,0)),this.n=this.c),qh(this.k,0,this.b,this.s,this.p,!1,a,b,c,d))},Cr.oj=function(b,c,d){return"XYM"!=this.a&&"XYZM"!=this.a||0===this.k.length?null:uj(this.k,this.b,this.s,b,a(c)?c:!1,a(d)?d:!1)},Cr.K=function(){return vh(this.k,0,this.b,this.s)},Cr.th=function(a){if(0>a||this.b.length<=a)return null;var b=new vj(null);return xj(b,this.a,this.k.slice(0===a?0:this.b[a-1],this.b[a])),b},Cr.Ec=function(){var a,b,c=this.k,d=this.b,e=this.a,f=[],g=0;for(a=0,b=d.length;b>a;++a){var h=d[a],i=new vj(null);xj(i,e,c.slice(g,h)),f.push(i),g=h}return f},Cr.mc=function(a){var b,c,d=[],e=[],f=this.k,g=this.b,h=this.s,i=0,j=0;for(b=0,c=g.length;c>b;++b){var k=g[b],j=wh(f,i,k,h,a,d,j);e.push(j),i=k}return d.length=j,a=new yj(null),Aj(a,"XY",d,e),a},Cr.H=function(){return"MultiLineString"},Cr.ha=function(a){a:{var b,c,d=this.k,e=this.b,f=this.s,g=0;for(b=0,c=e.length;c>b;++b){if(Hh(d,g,e[b],f,a)){a=!0;break a}g=e[b]}a=!1}return a},Cr.U=function(a,b){if(null===a)Aj(this,"XY",null,this.b);else{hh(this,b,a,2),null===this.k&&(this.k=[]);var c=th(this.k,0,a,this.s,this.b);this.k.length=0===c.length?0:c[c.length-1],this.l()}},r(Cj,eh),Cr=Cj.prototype,Cr.Vg=function(a){null===this.k?this.k=a.k.slice():L(this.k,a.k),this.l()},Cr.clone=function(){var a=new Cj(null);return gh(a,this.a,this.k.slice()),a.l(),a},Cr.Va=function(a,b,c,d){if(d<Mb(this.D(),a,b))return d;var e,f,g,h=this.k,i=this.s;for(e=0,f=h.length;f>e;e+=i)if(g=lh(a,b,h[e],h[e+1]),d>g){for(d=g,g=0;i>g;++g)c[g]=h[e+g];c.length=i}return d},Cr.K=function(){return uh(this.k,0,this.k.length,this.s)},Cr.Ch=function(a){var b=null===this.k?0:this.k.length/this.s;return 0>a||a>=b?null:(b=new Ah(null),Bh(b,this.a,this.k.slice(a*this.s,(a+1)*this.s)),b)},Cr.xd=function(){var a,b,c=this.k,d=this.a,e=this.s,f=[];for(a=0,b=c.length;b>a;a+=e){var g=new Ah(null);Bh(g,d,c.slice(a,a+e)),f.push(g)}return f},Cr.H=function(){return"MultiPoint"},Cr.ha=function(a){var b,c,d,e,f=this.k,g=this.s;for(b=0,c=f.length;c>b;b+=g)if(d=f[b],e=f[b+1],Ob(a,d,e))return!0;return!1},Cr.U=function(a,b){null===a?gh(this,"XY",null):(hh(this,b,a,1),null===this.k&&(this.k=[]),this.k.length=sh(this.k,0,a,this.s)),this.l()},r(Dj,eh),Cr=Dj.prototype,Cr.Wg=function(a){if(null===this.k)this.k=a.k.slice(),a=a.b.slice(),this.b.push();else{var b=this.k.length;L(this.k,a.k),a=a.b.slice();var c,d;for(c=0,d=a.length;d>c;++c)a[c]+=b}this.b.push(a),this.l()},Cr.clone=function(){var a=new Dj(null);return Gj(a,this.a,this.k.slice(),this.b.slice()),a},Cr.Va=function(b,c,d,e){if(e<Mb(this.D(),b,c))return e;if(this.r!=this.c){var f,g,h=this.b,i=0,j=0;for(f=0,g=h.length;g>f;++f)var k=h[f],j=oh(this.k,i,k,this.s,j),i=k[k.length-1];this.t=Math.sqrt(j),this.r=this.c}h=Fj(this),i=this.b,j=this.s,f=this.t,g=0;var l,m,k=a(void 0)?void 0:[NaN,NaN];for(l=0,m=i.length;m>l;++l){var n=i[l];e=qh(h,g,n,j,f,!0,b,c,d,e,k),g=n[n.length-1]}return e},Cr.Jb=function(a,b){var c;a:{c=Fj(this);var d=this.b,e=0;if(0!==d.length){var f,g;for(f=0,g=d.length;g>f;++f){var h=d[f];if(Eh(c,e,h,this.s,a,b)){c=!0;break a}e=h[h.length-1]}}c=!1}return c},Cr.pj=function(){var a,b,c=Fj(this),d=this.b,e=0,f=0;for(a=0,b=d.length;b>a;++a)var g=d[a],f=f+jh(c,e,g,this.s),e=g[g.length-1];return f},Cr.K=function(){var b,c,d=this.k,e=this.b,f=this.s,g=0,h=a(void 0)?void 0:[],i=0;for(b=0,c=e.length;c>b;++b){var j=e[b];h[i++]=vh(d,g,j,f,h[i]),g=j[j.length-1]}return h.length=i,h},Cr.qh=function(){var a=new Cj(null),b=Ej(this).slice();return gh(a,"XY",b),a.l(),a},Cr.mc=function(a){var b=[],c=[],d=this.k,e=this.b,f=this.s;a=Math.sqrt(a);var g,h,i=0,j=0;for(g=0,h=e.length;h>g;++g){var k=e[g],l=[],j=xh(d,i,k,f,a,b,j,l);c.push(l),i=k[k.length-1]}return b.length=j,d=new Dj(null),Gj(d,"XY",b,c),d},Cr.Dh=function(a){if(0>a||this.b.length<=a)return null;var b;0===a?b=0:(b=this.b[a-1],b=b[b.length-1]),a=this.b[a].slice();var c=a[a.length-1];if(0!==b){var d,e;for(d=0,e=a.length;e>d;++d)a[d]-=b}return d=new Mh(null),Ph(d,this.a,this.k.slice(b,c),a),d},Cr.gd=function(){var a,b,c,d,e=this.a,f=this.k,g=this.b,h=[],i=0;for(a=0,b=g.length;b>a;++a){var j=g[a].slice(),k=j[j.length-1];if(0!==i)for(c=0,d=j.length;d>c;++c)j[c]-=i;c=new Mh(null),Ph(c,e,f.slice(i,k),j),h.push(c),i=k}return h},Cr.H=function(){return"MultiPolygon"},Cr.ha=function(a){a:{var b,c,d=Fj(this),e=this.b,f=this.s,g=0;for(b=0,c=e.length;c>b;++b){var h=e[b];if(Ih(d,g,h,f,a)){a=!0;break a}g=h[h.length-1]}a=!1}return a},Cr.U=function(b,c){if(null===b)Gj(this,"XY",null,this.b);else{hh(this,c,b,3),null===this.k&&(this.k=[]);var d,e,f=this.k,g=this.s,h=this.b,i=0,h=a(h)?h:[],j=0;for(d=0,e=b.length;e>d;++d)i=th(f,i,b[d],g,h[j]),h[j++]=i,i=i[i.length-1];h.length=j,0===h.length?this.k.length=0:(f=h[h.length-1],this.k.length=0===f.length?0:f[f.length-1]),this.l()}};var cu={Point:function(a,b,c,d){var e=c.f;if(null!==e){var f=a.a(c.a,"Image");f.cb(e),f.rb(b,d)}e=c.c,null!==e&&(a=a.a(c.a,"Text"),a.xa(e),a.sb(b.K(),0,2,2,b,d))},LineString:function(a,b,c,d){var e=c.b;if(null!==e){var f=a.a(c.a,"LineString");f.wa(null,e),f.Cb(b,d)}e=c.c,null!==e&&(a=a.a(c.a,"Text"),a.xa(e),a.sb(wj(b),0,2,2,b,d))},Polygon:function(a,b,c,d){var e=c.e,f=c.b;if(null!==e||null!==f){var g=a.a(c.a,"Polygon");g.wa(e,f),g.Sb(b,d)}e=c.c,null!==e&&(a=a.a(c.a,"Text"),a.xa(e),a.sb(Nh(b),0,2,2,b,d))},MultiPoint:function(a,b,c,d){var e=c.f;if(null!==e){var f=a.a(c.a,"Image");f.cb(e),f.qb(b,d)}e=c.c,null!==e&&(a=a.a(c.a,"Text"),a.xa(e),c=b.k,a.sb(c,0,c.length,b.s,b,d))},MultiLineString:function(a,b,c,d){var e=c.b;if(null!==e){var f=a.a(c.a,"LineString");f.wa(null,e),f.kc(b,d)}e=c.c,null!==e&&(a=a.a(c.a,"Text"),a.xa(e),c=zj(b),a.sb(c,0,c.length,2,b,d))},MultiPolygon:function(a,b,c,d){var e=c.e,f=c.b;if(null!==f||null!==e){var g=a.a(c.a,"Polygon");g.wa(e,f),g.lc(b,d)}e=c.c,null!==e&&(a=a.a(c.a,"Text"),a.xa(e),c=Ej(b),a.sb(c,0,c.length,2,b,d))},GeometryCollection:function(a,b,c,d){b=b.d;var e,f;for(e=0,f=b.length;f>e;++e)cu[b[e].H()](a,b[e],c,d)},Circle:function(a,b,c,d){var e=c.e,f=c.b;if(null!==e||null!==f){var g=a.a(c.a,"Polygon");g.wa(e,f),g.jc(b,d)}e=c.c,null!==e&&(a=a.a(c.a,"Text"),a.xa(e),a.sb(b.qe(),0,2,2,b,d))}};r(Mj,hj),Mj.prototype.j=function(a,b,c){var d=jj(this,a);ij(this,"precompose",c,a,d);var e=this.c;if(null!==e&&!e.ia()){var f;gb(this.a,"render")?(this.e.canvas.width=c.canvas.width,this.e.canvas.height=c.canvas.height,f=this.e):f=c;var g=f.globalAlpha;f.globalAlpha=b.opacity,fj(e,f,a.pixelRatio,d,a.viewState.rotation,a.skippedFeatureUids),f!=c&&(ij(this,"render",f,a,d),c.drawImage(f.canvas,0,0)),f.globalAlpha=g}ij(this,"postcompose",c,a,d)},Mj.prototype.Zb=function(a,b,c,d){if(null!==this.c){var e=this.a,f={};return ej(this.c,b.viewState.resolution,b.viewState.rotation,a,b.skippedFeatureUids,function(a){var b=m(a).toString();return b in f?void 0:(f[b]=!0,c.call(d,a,e))})}},Mj.prototype.t=function(){bg(this)},Mj.prototype.i=function(b){function c(b){var c;if(a(b.a)?c=b.a.call(b,i):a(d.r)&&(c=d.r(b,i)),null!=c){if(null!=c){var e,f,g=!1;for(e=0,f=c.length;f>e;++e)g=Kj(l,b,c[e],Jj(i,j),this.t,this)||g;b=g}else b=!1;this.d=this.d||b}}var d=this.a,e=d.a();if(dg(b.attributions,e.e),eg(b,e),!this.d&&(b.viewHints[0]||b.viewHints[1]))return!0;var f=b.extent,g=b.viewState,h=g.projection,i=g.resolution,j=b.pixelRatio;b=d.c;var k=d.Ab,g=d.get("renderOrder");if(a(g)||(g=Ij),f=Lb(f,k*i),!this.d&&this.q==i&&this.r==b&&this.g==g&&Nb(this.f,f))return!0;za(this.c),this.c=null,this.d=!1;var l=new cj(.5*i/j,f,i);if(e.Hb(f,i,h),null===g)e.Db(f,i,c,this);else{var m=[];e.Db(f,i,function(a){m.push(a)},this),O(m,g),B(m,c,this)}return dj(l),this.q=i,this.r=b,this.g=g,this.f=f,this.c=l,!0},r(Nj,qg),Nj.prototype.Yc=function(a){return a instanceof Fi?new kj(this,a):a instanceof Gi?new lj(this,a):a instanceof Hi?new Mj(this,a):null},Nj.prototype.H=function(){return"canvas"},Nj.prototype.Ld=function(a){if(null===a)this.c&&(Xd(this.a,!1),this.c=!1);else{var b=this.o,c=a.size[0]*a.pixelRatio,d=a.size[1]*a.pixelRatio;this.a.width!=c||this.a.height!=d?(this.a.width=c,this.a.height=d):b.clearRect(0,0,this.a.width,this.a.height),rg(a),Oj(this,"precompose",a);var e,f,g,h,c=a.layerStatesArray,d=a.viewState.resolution;for(e=0,f=c.length;f>e;++e)h=c[e],g=h.layer,g=ug(this,g),h.visible&&d>=h.minResolution&&d<h.maxResolution&&"ready"==h.gc&&g.i(a,h)&&g.j(a,h,b);Oj(this,"postcompose",a),this.c||(Xd(this.a,!0),this.c=!0),vg(this,a),a.postRenderFunctions.push(sg)}},r(Pj,ag),Pj.prototype.e=c,Pj.prototype.i=c,r(Qj,Pj),Qj.prototype.Zb=function(a,b,c,d){var e=this.a;return e.a().yd(b.viewState.resolution,b.viewState.rotation,a,b.skippedFeatureUids,function(a){return c.call(d,a,e)})},Qj.prototype.e=function(){id(this.target),this.c=null},Qj.prototype.f=function(b,c){var d=b.viewState,e=d.center,f=d.resolution,g=d.rotation,h=this.c,i=this.a.a(),j=b.viewHints,k=b.extent;return a(c.extent)&&(k=bc(k,c.extent)),j[0]||j[1]||gc(k)||(d=d.projection,j=i.g,null===j||(d=j),k=i.rc(k,f,b.pixelRatio,d),null!==k&&(d=k.state,0==d?(Sa(k,"change",this.o,!1,this),k.load()):2==d&&(h=k))),null!==h&&(d=h.D(),j=h.resolution,k=Ab(),ng(k,b.size[0]/2,b.size[1]/2,j/f,j/f,g,(d[0]-e[0])/j,(e[1]-d[3])/j),h!=this.c&&(e=h.c(this),e.style.maxWidth="none",e.style.position="absolute",id(this.target),this.target.appendChild(e),this.c=h),og(k,this.d)||(wd(this.target,k),Db(this.d,k)),dg(b.attributions,h.f),eg(b,i)),!0},r(Rj,Pj),Rj.prototype.e=function(){id(this.target),this.g=0},Rj.prototype.f=function(b,c){if(!c.visible)return this.d&&(Xd(this.target,!1),this.d=!1),!0;var d,e=b.pixelRatio,f=b.viewState,g=f.projection,h=this.a,i=h.a(),j=_f(i,g),k=i.bd(),l=pa(j.a,f.resolution,0),m=j.ka(l),n=f.center;m==f.resolution?(n=hg(n,m,b.size),d=_b(n,m,f.rotation,b.size)):d=b.extent,a(c.extent)&&(d=bc(d,c.extent));var m=Tf(j,d,m),o={};o[l]={};var q=p(i.fe,i,o,gg(function(a){return null!==a&&2==a.state},i,e,g)),r=h.ea();a(r)||(r=!0);var s,t,u,v,w=Qb(),x=new Uc(0,0,0,0);for(u=m.a;u<=m.d;++u)for(v=m.b;v<=m.c;++v)s=i.Fb(l,u,v,e,g),t=s.state,2==t?o[l][Tc(s.a)]=s:4==t||3==t&&!r||(t=j.$c(s.a,q,null,x,w),t||(s=j.kd(s.a,x,w),null===s||q(l+1,s)));var y;if(this.g!=i.c){for(y in this.c)r=this.c[+y],ld(r.target);this.c={},this.g=i.c}w=D(X(o),Number),O(w);var z,q={};for(u=0,v=w.length;v>u;++u){y=w[u],y in this.c?r=this.c[y]:(r=j.Fc(n,y),r=new Sj(j,r),q[y]=!0,this.c[y]=r),y=o[y];for(z in y)Tj(r,y[z],k);Uj(r)}for(k=D(X(this.c),Number),O(k),u=Ab(),z=0,w=k.length;w>z;++z)if(y=k[z],r=this.c[y],y in o)if(s=r.g,v=r.f,ng(u,b.size[0]/2,b.size[1]/2,s/f.resolution,s/f.resolution,f.rotation,(v[0]-n[0])/s,(n[1]-v[1])/s),Wj(r,u),y in q){for(--y;y>=0;--y)if(y in this.c){jd(r.target,this.c[y].target);break}0>y&&kd(this.target,r.target,0)}else b.viewHints[0]||b.viewHints[1]||Vj(r,d,x);else ld(r.target),delete this.c[y];return c.opacity!=this.n&&(this.n=this.target.style.opacity=c.opacity),c.visible&&!this.d&&(Xd(this.target,!0),this.d=!0),fg(b.usedTiles,i,l,m),ig(b,i,j,e,g,d,l,h.r()),cg(b,i),eg(b,i),!0},r(Xj,Pj),Xj.prototype.i=function(a,b){var c=a.viewState,d=c.rotation,e=a.pixelRatio,c=ng(this.r,e*a.size[0]/2,e*a.size[1]/2,e/c.resolution,-e/c.resolution,-c.rotation,-c.center[0],-c.center[1]),f=this.g;f.canvas.width=a.size[0],f.canvas.height=a.size[1],Yj(this,"precompose",a,c);var g=this.c;null===g||g.ia()||(f.globalAlpha=b.opacity,fj(g,f,e,c,d,a.skippedFeatureUids),Yj(this,"render",a,c)),Yj(this,"postcompose",a,c)},Xj.prototype.Zb=function(a,b,c,d){if(null!==this.c){var e=this.a,f={};return ej(this.c,b.viewState.resolution,b.viewState.rotation,a,b.skippedFeatureUids,function(a){var b=m(a).toString();return b in f?void 0:(f[b]=!0,c.call(d,a,e))})}},Xj.prototype.t=function(){bg(this)},Xj.prototype.f=function(b){function c(b){var c;if(a(b.a)?c=b.a.call(b,i):a(d.r)&&(c=d.r(b,i)),null!=c){if(null!=c){var e,f,g=!1;for(e=0,f=c.length;f>e;++e)g=Kj(l,b,c[e],Jj(i,j),this.t,this)||g;b=g}else b=!1;this.d=this.d||b}}var d=this.a,e=d.a();if(dg(b.attributions,e.e),eg(b,e),!this.d&&(b.viewHints[0]||b.viewHints[1]))return!0;var f=b.extent,g=b.viewState,h=g.projection,i=g.resolution,j=b.pixelRatio;b=d.c;var k=d.Ab,g=d.get("renderOrder");if(a(g)||(g=Ij),f=Lb(f,k*i),!this.d&&this.p==i&&this.q==b&&this.j==g&&Nb(this.n,f))return!0;za(this.c),this.c=null,this.d=!1;var l=new cj(.5*i/j,f,i);if(e.Hb(f,i,h),null===g)e.Db(f,i,c,this);else{var m=[];e.Db(f,i,function(a){m.push(a)},this),O(m,g),B(m,c,this)}return dj(l),this.p=i,this.q=b,this.j=g,this.n=f,this.c=l,!0},r(Zj,qg),Zj.prototype.M=function(){ld(this.a),Zj.S.M.call(this)},Zj.prototype.Yc=function(a){if(a instanceof Fi)a=new Qj(this,a);else if(a instanceof Gi)a=new Rj(this,a);else{if(!(a instanceof Hi))return null;a=new Xj(this,a)}return a},Zj.prototype.H=function(){return"dom"},Zj.prototype.Ld=function(a){if(null===a)this.o&&(Xd(this.a,!1),this.o=!1);else{var b;b=function(a,b){kd(this.a,a,b)};var c=this.e;(gb(c,"precompose")||gb(c,"postcompose"))&&(c=this.c.canvas,c.width=a.size[0],c.height=a.size[1]),$j(this,"precompose",a);var d,e,f,g,c=a.layerStatesArray;for(d=0,e=c.length;e>d;++d)g=c[d],f=g.layer,f=ug(this,f),b.call(this,f.target,d),"ready"==g.gc?f.f(a,g)&&f.i(a,g):f.e();b=a.layerStates;for(var h in this.b)h in b||(f=this.b[h],ld(f.target));this.o||(Xd(this.a,!0),this.o=!0),rg(a),vg(this,a),a.postRenderFunctions.push(sg),$j(this,"postcompose",a)}},r(ak,_j),ak.prototype.H=function(){return 35632},r(bk,_j),bk.prototype.H=function(){return 35633},r(ck,ak),d(ck),r(dk,bk),d(dk),r(fk,ak),d(fk),r(gk,bk),d(gk),Cr=jk.prototype,Cr.qb=function(a){var b=a.k;lk(this,b,b.length,a.s)},Cr.rb=function(a){var b=a.k;lk(this,b,b.length,a.s)},Cr.Kb=function(a){var b=a.a;this.o.push(this.c.length),this.g=new ik(this.a),Lk(a,34962,this.g),this.d=new ik(this.c),Lk(a,34963,this.d);var c,d,e,f={},g=this.b.length;for(e=0;g>e;++e)c=this.b[e],d=m(c).toString(),d in f?a=ca(f,d):(a=b.createTexture(),b.bindTexture(3553,a),b.texParameteri(3553,10242,33071),b.texParameteri(3553,10243,33071),b.texParameteri(3553,10241,9729),b.texParameteri(3553,10240,9729),b.texImage2D(3553,0,6408,6408,5121,c),f[d]=a),this.f[e]=a;this.q=this.n=this.i=void 0,this.b=null,this.t=this.r=void 0,this.c=null,this.ca=this.ba=this.V=this.Q=this.J=this.F=void 0,this.a=null,this.la=void 0},Cr.Hc=function(a,b,c,d,e,f,g,h,i,j,k){f=a.a,Lk(a,34962,this.g),Lk(a,34963,this.d);var l,m,n=h||1!=i||j||1!=k;for(n?(l=ck.Ja(),m=dk.Ja()):(l=fk.Ja(),m=gk.Ja()),m=Ok(a,l,m),n?null===this.j?this.j=l=new ek(f,m):l=this.j:null===this.p?this.p=l=new hk(f,m):l=this.p,a.Gd(m),f.enableVertexAttribArray(l.d),f.vertexAttribPointer(l.d,2,5126,!1,32,0),f.enableVertexAttribArray(l.a),f.vertexAttribPointer(l.a,2,5126,!1,32,8),f.enableVertexAttribArray(l.e),f.vertexAttribPointer(l.e,2,5126,!1,32,16),f.enableVertexAttribArray(l.c),f.vertexAttribPointer(l.c,1,5126,!1,32,24),f.enableVertexAttribArray(l.b),f.vertexAttribPointer(l.b,1,5126,!1,32,28),m=this.ea,ng(m,0,0,2/(c*e[0]),2/(c*e[1]),-d,-(b[0]-this.e[0]),-(b[1]-this.e[1])),b=this.Ra,c=2/e[0],e=2/e[1],Eb(b),b[0]=c,b[5]=e,b[10]=1,b[15]=1,e=this.ga,Eb(e),0!==d&&Ib(e,-d),f.uniformMatrix4fv(l.g,!1,m),f.uniformMatrix4fv(l.i,!1,b),f.uniformMatrix4fv(l.o,!1,e),f.uniform1f(l.f,g),n&&f.uniformMatrix4fv(l.n,!1,Fd(this.Sa,h,i,j,k)),d=0,g=this.f.length,h=0;g>d;++d)f.bindTexture(3553,this.f[d]),i=this.o[d],f.drawElements(4,i-h,a.e?5125:5123,h*(a.e?4:2)),h=i;f.disableVertexAttribArray(l.d),f.disableVertexAttribArray(l.a),f.disableVertexAttribArray(l.e),f.disableVertexAttribArray(l.c),f.disableVertexAttribArray(l.b)},Cr.cb=function(a){var b=a.tb(),c=a.yb(1),d=a.cd(),e=a.p,f=a.zb(),g=a.q,h=a.i,i=a.ab();a=a.n,0===this.b.length?this.b.push(c):m(this.b[this.b.length-1])!=m(c)&&(this.o.push(this.c.length),this.b.push(c)),this.i=b[0],this.n=b[1],this.q=i[1],this.r=d[1],this.t=d[0],this.F=e,this.J=f[0],this.Q=f[1],this.ba=h,this.V=g,this.ca=a,this.la=i[0]},mk.prototype.a=function(b,c){var d=this.c[c];return a(d)||(d=new du[c](this.d,this.b),this.c[c]=d),d},mk.prototype.ia=function(){return $(this.c)};var du={Image:jk};Cr=qk.prototype,Cr.ic=function(b,c){var d=b.toString(),e=this.c[d];a(e)?e.push(c):this.c[d]=[c]},Cr.jc=function(){},Cr.ee=function(b,c){var d=c.d(b);if(null!=d&&fc(this.a,d.D())){var e=c.a;a(e)||(e=0),this.ic(e,function(a){a.wa(c.e,c.b),a.cb(c.f),a.xa(c.c);var b=eu[d.H()];b&&b.call(a,d,null)})}},Cr.Zc=function(a,b){var c,d,e=a.d;for(c=0,d=e.length;d>c;++c){var f=e[c],g=eu[f.H()];g&&g.call(this,f,b)}},Cr.rb=function(a,b){var c=this.b,d=new mk(1,this.a).a(0,"Image");d.cb(this.d),d.rb(a,b),d.Kb(c),d.Hc(this.b,this.e,this.g,this.o,this.i,this.a,this.f,1,0,1,0,1,{}),kk(d,c)()},Cr.Cb=function(){},Cr.kc=function(){},Cr.qb=function(a,b){var c=this.b,d=new mk(1,this.a).a(0,"Image");d.cb(this.d),d.qb(a,b),d.Kb(c),d.Hc(this.b,this.e,this.g,this.o,this.i,this.a,this.f,1,0,1,0,1,{}),kk(d,c)()},Cr.lc=function(){},Cr.Sb=function(){},Cr.sb=function(){},Cr.wa=function(){},Cr.cb=function(a){this.d=a},Cr.xa=function(){};var eu={Point:qk.prototype.rb,MultiPoint:qk.prototype.qb,GeometryCollection:qk.prototype.Zc};r(rk,ak),d(rk),r(sk,bk),d(sk),r(uk,ak),d(uk),r(vk,bk),d(vk),r(xk,ag),xk.prototype.xf=function(a,b,c){zk(this,"precompose",c,a),Lk(c,34962,this.J);var d,e,f=c.a,g=b.brightness||1!=b.contrast||b.hue||1!=b.saturation;g?(d=rk.Ja(),e=sk.Ja()):(d=uk.Ja(),e=vk.Ja()),d=Ok(c,d,e),g?null===this.g?this.g=e=new tk(f,d):e=this.g:null===this.i?this.i=e=new wk(f,d):e=this.i,c.Gd(d)&&(f.enableVertexAttribArray(e.a),f.vertexAttribPointer(e.a,2,5126,!1,16,0),f.enableVertexAttribArray(e.c),f.vertexAttribPointer(e.c,2,5126,!1,16,8),f.uniform1i(e.e,0)),f.uniformMatrix4fv(e.f,!1,this.q),f.uniformMatrix4fv(e.d,!1,this.F),g&&f.uniformMatrix4fv(e.g,!1,Fd(this.Q,b.brightness,b.contrast,b.hue,b.saturation)),f.uniform1f(e.b,b.opacity),f.bindTexture(3553,this.Qa),f.drawArrays(5,0,4),zk(this,"postcompose",c,a)},xk.prototype.n=function(){this.e=this.Qa=null,this.f=void 0},r(Ak,xk),Ak.prototype.Zb=function(a,b,c,d){var e=this.a;return e.a().yd(b.viewState.resolution,b.viewState.rotation,a,b.skippedFeatureUids,function(a){return c.call(d,a,e)})},Ak.prototype.re=function(b,c){var d=this.b.d,e=b.viewState,f=e.center,g=e.resolution,h=e.rotation,i=this.c,j=this.Qa,k=this.a.a(),l=b.viewHints,m=b.extent;return a(c.extent)&&(m=bc(m,c.extent)),l[0]||l[1]||gc(m)||(e=e.projection,l=k.g,null===l||(e=l),m=k.rc(m,g,b.pixelRatio,e),null!==m&&(e=m.state,0==e?(Sa(m,"change",this.o,!1,this),m.load()):2==e&&(i=m,j=Bk(this,m),null===this.Qa||b.postRenderFunctions.push(q(function(a,b){a.isContextLost()||a.deleteTexture(b)},d,this.Qa))))),null!==i&&(d=this.b.f.g,Ck(this,d.width,d.height,f,g,h,i.D()),f=this.q,Eb(f),Hb(f,1,-1),Gb(f,0,-1),this.c=i,this.Qa=j,dg(b.attributions,i.f),eg(b,k)),!0},r(Dk,ak),d(Dk),r(Ek,bk),d(Ek),r(Gk,xk),Gk.prototype.M=function(){Mk(this.b.f,this.r),Gk.S.M.call(this)},Gk.prototype.n=function(){Gk.S.n.call(this),this.c=null},Gk.prototype.re=function(b,c,d){var e,f=this.b,g=d.a,h=b.viewState,i=h.projection,j=this.a,k=j.a(),l=_f(k,i),m=pa(l.a,h.resolution,0),n=l.ka(m),o=k.Gc(m,b.pixelRatio,i),q=o/l.sa(m),r=n/q,s=k.bd(),t=h.center;if(n==h.resolution?(t=hg(t,n,b.size),e=_b(t,n,h.rotation,b.size)):e=b.extent,n=Tf(l,e,n),null!==this.d&&Yc(this.d,n)&&this.j==k.c)r=this.p;else{var u=[n.d-n.a+1,n.c-n.b+1],u=Math.max(u[0]*o,u[1]*o),v=Math.pow(2,Math.ceil(Math.log(u)/Math.LN2)),u=r*v,w=l.Lb(m),x=w[0]+n.a*o*r,r=w[1]+n.b*o*r,r=[x,r,x+u,r+u];yk(this,b,v),g.viewport(0,0,v,v),g.clearColor(0,0,0,0),g.clear(16384),g.disable(3042),v=Ok(d,this.t,this.V),d.Gd(v),null===this.c&&(this.c=new Fk(g,v)),Lk(d,34962,this.r),g.enableVertexAttribArray(this.c.a),g.vertexAttribPointer(this.c.a,2,5126,!1,16,0),g.enableVertexAttribArray(this.c.c),g.vertexAttribPointer(this.c.c,2,5126,!1,16,8),g.uniform1i(this.c.b,0),d={},d[m]={};var y=p(k.fe,k,d,gg(function(a){return null!==a&&2==a.state&&Jk(f.c,a.mb())},k,q,i)),z=j.ea();a(z)||(z=!0);var A,B,C,v=!0,x=Qb(),E=new Uc(0,0,0,0);for(B=n.a;B<=n.d;++B)for(C=n.b;C<=n.c;++C)if(w=k.Fb(m,B,C,q,i),!a(c.extent)||(A=Wf(l,w.a,x),fc(A,c.extent))){if(A=w.state,2==A){if(Jk(f.c,w.mb())){d[m][Tc(w.a)]=w;continue}}else if(4==A||3==A&&!z)continue;v=!1,A=l.$c(w.a,y,null,E,x),A||(w=l.kd(w.a,E,x),null===w||y(m+1,w))}c=D(X(d),Number),O(c);for(var F,G,H,y=new Float32Array(4),z=0,E=c.length;E>z;++z)for(F in G=d[c[z]])w=G[F],A=Wf(l,w.a,x),B=2*(A[2]-A[0])/u,C=2*(A[3]-A[1])/u,H=2*(A[0]-r[0])/u-1,A=2*(A[1]-r[1])/u-1,zb(y,B,C,H,A),g.uniform4fv(this.c.d,y),Qk(f,w,o,s*q),g.drawArrays(5,0,4);v?(this.d=n,this.p=r,this.j=k.c):(this.p=this.d=null,this.j=-1,b.animate=!0)}fg(b.usedTiles,k,m,n);var I=f.i;return ig(b,k,l,q,i,e,m,j.r(),function(a){var b;(b=2!=a.state||Jk(f.c,a.mb()))||(b=a.mb()in I.b),b||yg(I,[a,Vf(l,a.a),l.ka(a.a[0]),o,s*q])},this),cg(b,k),eg(b,k),g=this.q,Eb(g),Gb(g,(t[0]-r[0])/(r[2]-r[0]),(t[1]-r[1])/(r[3]-r[1])),
0!==h.rotation&&Ib(g,h.rotation),Hb(g,b.size[0]*h.resolution/(r[2]-r[0]),b.size[1]*h.resolution/(r[3]-r[1])),Gb(g,-.5,-.5),!0},r(Hk,xk),Cr=Hk.prototype,Cr.xf=function(a,b,c){var d=a.viewState,e=this.c;null===e||e.ia()||pk(e,c,d.center,d.resolution,d.rotation,a.size,a.pixelRatio,b.opacity,b.brightness,b.contrast,b.hue,b.saturation,a.skippedFeatureUids)},Cr.M=function(){var a=this.c;null!==a&&(nk(a,this.b.f)(),this.c=null),Hk.S.M.call(this)},Cr.Zb=function(){},Cr.vj=function(){bg(this)},Cr.re=function(b,c,d){function e(b){var c;if(a(b.a)?c=b.a.call(b,j):a(f.r)&&(c=f.r(b,j)),null!=c){if(null!=c){var d,e,g=!1;for(d=0,e=c.length;e>d;++d)g=Kj(n,b,c[d],Jj(j,k),this.vj,this)||g;b=g}else b=!1;this.d=this.d||b}}var f=this.a;if(c=f.a(),dg(b.attributions,c.e),eg(b,c),!this.d&&(b.viewHints[0]||b.viewHints[1]))return!0;var g=b.extent,h=b.viewState,i=h.projection,j=h.resolution,k=b.pixelRatio,h=f.c,l=f.Ab,m=f.get("renderOrder");if(a(m)||(m=Ij),g=Lb(g,l*j),!this.d&&this.r==j&&this.t==h&&this.p==m&&Nb(this.j,g))return!0;null===this.c||b.postRenderFunctions.push(nk(this.c,d)),this.d=!1;var n=new mk(.5*j/k,g);if(c.Hb(g,j,i),null===m)c.Db(g,j,e,this);else{var o=[];c.Db(g,j,function(a){o.push(a)},this),O(o,m),B(o,e,this)}return ok(n,d),this.r=j,this.t=h,this.p=m,this.j=g,this.c=n,!0},Cr=Ik.prototype,Cr.clear=function(){this.b=0,this.d={},this.c=this.a=null},Cr.forEach=function(a,b){for(var c=this.a;null!==c;)a.call(b,c.dc,c.ud,this),c=c.Za},Cr.get=function(a){return a=this.d[a],a===this.c?a.dc:(a===this.a?(this.a=this.a.Za,this.a.Mb=null):(a.Za.Mb=a.Mb,a.Mb.Za=a.Za),a.Za=null,a.Mb=this.c,this.c=this.c.Za=a,a.dc)},Cr.Ub=function(){return this.b},Cr.I=function(){var a,b=Array(this.b),c=0;for(a=this.c;null!==a;a=a.Mb)b[c++]=a.ud;return b},Cr.kb=function(){var a,b=Array(this.b),c=0;for(a=this.c;null!==a;a=a.Mb)b[c++]=a.dc;return b},Cr.pop=function(){var a=this.a;return delete this.d[a.ud],null!==a.Za&&(a.Za.Mb=null),this.a=a.Za,null===this.a&&(this.c=null),--this.b,a.dc},Cr.set=function(a,b){var c={ud:a,Za:null,Mb:this.c,dc:b};null===this.c?this.a=c:this.c.Za=c,this.c=c,this.d[a]=c,++this.b},Cr=Kk.prototype,Cr.M=function(){var a=this.a;a.isContextLost()||(T(this.c,function(b){a.deleteBuffer(b.buffer)}),T(this.b,function(b){a.deleteProgram(b)}),T(this.d,function(b){a.deleteShader(b)}))},Cr.kk=function(){return this.a},Cr.lk=function(){_(this.c),_(this.d),_(this.b),this.f=null},Cr.mk=function(){},Cr.Gd=function(a){return a==this.f?!1:(this.a.useProgram(a),this.f=a,!0)},r(Pk,qg),Cr=Pk.prototype,Cr.Yc=function(a){return a instanceof Fi?new Ak(this,a):a instanceof Gi?new Gk(this,a):a instanceof Hi?new Hk(this,a):null},Cr.M=function(){var a=this.d;a.isContextLost()||this.c.forEach(function(b){null===b||a.deleteTexture(b.Qa)}),za(this.f),Pk.S.M.call(this)},Cr.$g=function(a,b){for(var c,d=this.d;1024<this.c.Ub()-this.o;){if(c=this.c.a.dc,null===c){if(+this.c.a.ud==b.index)break;--this.o}else d.deleteTexture(c.Qa);this.c.pop()}},Cr.H=function(){return"webgl"},Cr.tj=function(a){a.preventDefault(),this.c.clear(),this.o=0,T(this.b,function(a){a.n()})},Cr.uj=function(){Sk(this),this.e.render()},Cr.Ld=function(a){var b=this.f,c=this.d;if(c.isContextLost())return!1;if(null===a)return this.n&&(Xd(this.a,!1),this.n=!1),!1;this.j=a.focus,this.c.set((-a.index).toString(),null),++this.o;var d,e,f,g,h=[],i=a.layerStatesArray,j=a.viewState.resolution;for(d=0,e=i.length;e>d;++d)g=i[d],g.visible&&j>=g.minResolution&&j<g.maxResolution&&"ready"==g.gc&&(f=ug(this,g.layer),f.re(a,g,b)&&h.push(g));for(i=a.size[0]*a.pixelRatio,j=a.size[1]*a.pixelRatio,(this.a.width!=i||this.a.height!=j)&&(this.a.width=i,this.a.height=j),c.bindFramebuffer(36160,null),c.clearColor(0,0,0,0),c.clear(16384),c.enable(3042),c.viewport(0,0,this.a.width,this.a.height),Rk(this,"precompose",a),d=0,e=h.length;e>d;++d)g=h[d],f=ug(this,g.layer),f.xf(a,g,b);this.n||(Xd(this.a,!0),this.n=!0),rg(a),1024<this.c.Ub()-this.o&&a.postRenderFunctions.push(p(this.$g,this)),this.i.ia()||(a.postRenderFunctions.push(this.r),a.animate=!0),Rk(this,"postcompose",a),vg(this,a),a.postRenderFunctions.push(sg)};var fu=["canvas","webgl","dom"];r(Tk,lb),Cr=Tk.prototype,Cr.Qg=function(a){this.i.push(a)},Cr.Rg=function(a){this.g.push(a)},Cr.Se=function(a){this.Eb().Yb().push(a)},Cr.Te=function(a){this.n.push(a)},Cr.Ua=function(a){this.render(),Array.prototype.push.apply(this.F,arguments)},Cr.M=function(){ld(this.b),Tk.S.M.call(this)},Cr.oe=function(b,c,d,e,f){return null!==this.d?(b=this.Ga(b),tg(this.ba,b,this.d,c,a(d)?d:null,a(e)?e:As,a(f)?f:null)):void 0},Cr.ih=function(a){return this.Ga(this.ad(a))},Cr.ad=function(b){if(a(b.offsetX)&&a(b.offsetY))return[b.offsetX,b.offsetY];if(a(b.changedTouches)){var c=b.changedTouches[0];return b=Td(this.b),[c.clientX-b.x,c.clientY-b.y]}return c=this.b,b=Td(b),c=Td(c),c=new $c(b.x-c.x,b.y-c.y),[c.x,c.y]},Cr.qc=function(){return this.get("target")},Tk.prototype.getTarget=Tk.prototype.qc,Cr=Tk.prototype,Cr.Fh=function(){var b=this.qc();return a(b)?bd(b):null},Cr.Ga=function(a){var b=this.d;return null===b?null:(a=a.slice(),pg(b.pixelToCoordinateMatrix,a,a))},Cr.hh=function(){return this.i},Cr.Ah=function(){return this.n},Cr.oh=function(){return this.g},Cr.Eb=function(){return this.get("layergroup")},Tk.prototype.getLayerGroup=Tk.prototype.Eb,Tk.prototype.ea=function(){return this.Eb().Yb()},Tk.prototype.f=function(a){var b=this.d;return null===b?null:(a=a.slice(0,2),pg(b.coordinateToPixelMatrix,a,a))},Tk.prototype.e=function(){return this.get("size")},Tk.prototype.getSize=Tk.prototype.e,Tk.prototype.a=function(){return this.get("view")},Tk.prototype.getView=Tk.prototype.a,Cr=Tk.prototype,Cr.Lh=function(){return this.b},Cr.Jh=function(a,b,c,d){var e=this.d;return null!==e&&b in e.wantedTiles&&e.wantedTiles[b][Tc(a.a)]?(a=c[0]-e.focus[0],c=c[1]-e.focus[1],65536*Math.log(d)+Math.sqrt(a*a+c*c)/d):1/0},Cr.ef=function(a,b){var c=new Ff(b||a.type,this,a);this.gf(c)},Cr.gf=function(a){if(null!==this.d){this.V=a.coordinate,a.frameState=this.d;var b,c=this.g.a;if(!1!==this.dispatchEvent(a))for(b=c.length-1;b>=0;b--){var d=c[b];if(d.a()&&!d.handleEvent(a))break}}},Cr.ni=function(){var a=this.d,b=this.Ab;if(!b.ia()){var c=16,d=c,e=0;if(null!==a){var e=a.viewHints,f=this.Vc;e[0]&&(c=!1===f.loadTilesWhileAnimating?0:8,d=2),e[1]&&(c=!1===f.loadTilesWhileInteracting?0:8,d=2),e=V(a.wantedTiles)}if(c*=e,d*=e,b.d<c){for(Bg(b),c=Math.min(c-b.d,d,b.Ub()),d=0;c>d;++d)e=xg(b)[0],Sa(e,"change",b.g,!1,b),e.load();b.d+=c}}for(b=this.oa,c=0,d=b.length;d>c;++c)b[c](this,a);b.length=0},Cr.pi=function(){this.render()},Cr.qi=function(){var b=this.qc(),b=a(b)?bd(b):null;cf(this.r),null===b?ld(this.b):(b.appendChild(this.b),bf(this.r,null===this.ga?b:this.ga)),this.j()},Cr.ri=function(){this.render()},Cr.si=function(){this.render()},Cr.$i=function(){null!==this.Q&&(Ua(this.Q),this.Q=null);var a=this.a();null!==a&&(this.Q=Pa(a,"propertychange",this.si,!1,this)),this.render()},Cr.bi=function(){this.render()},Cr.ci=function(){this.render()},Cr.ai=function(){if(null!==this.p){for(var a=this.p.length,b=0;a>b;++b)Ua(this.p[b]);this.p=null}a=this.Eb(),null!=a&&(this.p=[Pa(a,"propertychange",this.ci,!1,this),Pa(a,"change",this.bi,!1,this)]),this.render()},Cr.Zk=function(){var a=this.q;Qe(a),a.Ye()},Cr.render=function(){null!=this.q.X||this.q.start()},Cr.Uk=function(b){return a(this.i.remove(b))?b:void 0},Cr.Vk=function(b){var c;return a(this.g.remove(b))&&(c=b),c},Cr.Wk=function(a){return this.Eb().Yb().remove(a)},Cr.Xk=function(b){return a(this.n.remove(b))?b:void 0},Cr.Yk=function(b){var c,d,e,f=this.e(),g=this.a(),h=null;if(a(f)&&0<f[0]&&0<f[1]&&null!==g&&Hc(g)){var h=K(g.j),i=this.Eb().Da(),j={};for(c=0,d=i.length;d>c;++c)j[m(i[c].layer)]=i[c];e=Gc(g),h={animate:!1,attributions:{},coordinateToPixelMatrix:this.Uc,extent:null,focus:null===this.V?e.center:this.V,index:this.Wd++,layerStates:j,layerStatesArray:i,logos:ea(this.Xd),pixelRatio:this.Yd,pixelToCoordinateMatrix:this.Zd,postRenderFunctions:[],size:f,skippedFeatureUids:this.ca,tileQueue:this.Ab,time:b,usedTiles:{},viewState:e,viewHints:h,wantedTiles:{}}}if(null!==h){for(b=this.F,c=f=0,d=b.length;d>c;++c)g=b[c],g(this,h)&&(b[f++]=g);b.length=f,h.extent=_b(e.center,e.resolution,e.rotation,h.size)}this.d=h,this.ba.Ld(h),null!==h&&(h.animate&&this.render(),Array.prototype.push.apply(this.oa,h.postRenderFunctions),0!==this.F.length||h.viewHints[0]||h.viewHints[1]||Tb(h.extent,this.Ea)||(this.dispatchEvent(new be("moveend",this,h)),c=h.extent,d=this.Ea,a(d)&&(d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3]))),this.dispatchEvent(new be("postrender",this,h)),Ue(this.ni,this)},Cr.cg=function(a){this.set("layergroup",a)},Tk.prototype.setLayerGroup=Tk.prototype.cg,Tk.prototype.J=function(a){this.set("size",a)},Tk.prototype.setSize=Tk.prototype.J,Tk.prototype.qa=function(a){this.set("target",a)},Tk.prototype.setTarget=Tk.prototype.qa,Tk.prototype.Ta=function(a){this.set("view",a)},Tk.prototype.setView=Tk.prototype.Ta,Tk.prototype.eb=function(a){a=m(a).toString(),this.ca[a]=!0,this.render()},Tk.prototype.j=function(){var b=this.qc(),b=a(b)?bd(b):null;if(null===b)this.J(void 0);else{var c=od(b),d=_r&&b.currentStyle;d&&sd(ad(c))&&"auto"!=d.width&&"auto"!=d.height&&!d.boxSizing?(c=Yd(b,d.width,"width","pixelWidth"),b=Yd(b,d.height,"height","pixelHeight"),b=new _c(c,b)):(d=new _c(b.offsetWidth,b.offsetHeight),c=$d(b,"padding"),b=ae(b),b=new _c(d.width-b.left-c.left-c.right-b.right,d.height-b.top-c.top-c.bottom-b.bottom)),this.J([b.width,b.height])}},Tk.prototype.fc=function(a){a=m(a).toString(),delete this.ca[a],this.render()},Ei(),r(Vk,lb),Vk.prototype.d=function(){return this.get("element")},Vk.prototype.getElement=Vk.prototype.d,Vk.prototype.e=function(){return this.get("map")},Vk.prototype.getMap=Vk.prototype.e,Vk.prototype.g=function(){return this.get("offset")},Vk.prototype.getOffset=Vk.prototype.g,Vk.prototype.n=function(){return this.get("position")},Vk.prototype.getPosition=Vk.prototype.n,Vk.prototype.i=function(){return this.get("positioning")},Vk.prototype.getPositioning=Vk.prototype.i,Cr=Vk.prototype,Cr.Uh=function(){id(this.aa);var a=this.d();null!=a&&hd(this.aa,a)},Cr.hi=function(){null!==this.b&&(ld(this.aa),Ua(this.b),this.b=null);var a=this.e();null!=a&&(this.b=Pa(a,"postrender",this.render,!1,this),Wk(this),a=this.r?a.t:a.Da,this.q?kd(a,this.aa,0):hd(a,this.aa))},Cr.render=function(){Wk(this)},Cr.ji=function(){Wk(this)},Cr.li=function(){Wk(this)},Cr.mi=function(){Wk(this)},Cr.Ee=function(a){this.set("element",a)},Vk.prototype.setElement=Vk.prototype.Ee,Vk.prototype.setMap=function(a){this.set("map",a)},Vk.prototype.setMap=Vk.prototype.setMap,Vk.prototype.j=function(a){this.set("offset",a)},Vk.prototype.setOffset=Vk.prototype.j,Vk.prototype.f=function(a){this.set("position",a)},Vk.prototype.setPosition=Vk.prototype.f,Vk.prototype.p=function(a){this.set("positioning",a)},Vk.prototype.setPositioning=Vk.prototype.p,r(Xk,ce),Cr=Xk.prototype,Cr.setMap=function(a){var b=this.a;null===a&&null!==b&&Ta(b,mb("view"),this.uf,!1,this),Xk.S.setMap.call(this,a),null!==a&&(0===this.b.ea().Ib()&&this.b.O("layergroup",a),Yk(this),Pa(a,mb("view"),this.uf,!1,this),this.b.j(),$k(this))},Cr.uf=function(){Yk(this)},Cr.hj=function(a){a.preventDefault(),al(this)},Cr.gj=function(){return this.f},Cr.jj=function(a){this.f!==a&&(this.f=a,Kd(this.element,"ol-uncollapsible"),!a&&this.e&&al(this))},Cr.ij=function(a){this.f&&this.e!==a&&al(this)},Cr.fj=function(){return this.e},r(bl,ce);var gu=[1,2,5];bl.prototype.j=function(){return this.get("units")},bl.prototype.getUnits=bl.prototype.j,bl.prototype.F=function(){dl(this)},bl.prototype.p=function(a){this.set("units",a)},bl.prototype.setUnits=bl.prototype.p,r(el,xa);var hu=[];el.prototype.La=function(a,b,c,d){g(b)||(b&&(hu[0]=b.toString()),b=hu);for(var e=0;e<b.length;e++){var f=Pa(a,b[e],c||this.handleEvent,d||!1,this.c||this);if(!f)break;this.a[f.key]=f}return this},el.prototype.Fe=function(a,b,c,d,e){if(g(b))for(var f=0;f<b.length;f++)this.Fe(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.c||this,c=$a(c),d=!!d,b=Ha(a)?Ma(a.gb,String(b),c,d,e):a&&(a=Za(a))?Ma(a,b,c,d,e):null,b&&(Ua(b),delete this.a[b.key]);return this},el.prototype.M=function(){el.S.M.call(this),fl(this)},el.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},r(gl,eb);var iu=_r||as&&ia("1.9.3");Cr=gl.prototype,Cr.clientX=0,Cr.clientY=0,Cr.screenX=0,Cr.screenY=0,Cr.dg=0,Cr.eg=0,Cr.nc=0,Cr.oc=0,Cr.Rb=!1,Cr.M=function(){gl.S.M.call(this),Ta(this.handle,["touchstart","mousedown"],this.df,!1,this),fl(this.c),iu&&this.b.releaseCapture(),this.handle=this.target=null},Cr.df=function(a){var b="mousedown"==a.type;if(this.Rb||b&&!Ga(a))this.dispatchEvent("earlycancel");else if(hl(a),this.dispatchEvent(new ml("start",this,a.clientX,a.clientY))){this.Rb=!0,a.preventDefault();var b=this.b,c=b.documentElement,d=!iu;this.c.La(b,["touchmove","mousemove"],this.ii,d),this.c.La(b,["touchend","mouseup"],this.od,d),iu?(c.setCapture(!1),this.c.La(c,"losecapture",this.od)):this.c.La(b?b.parentWindow||b.defaultView:window,"blur",this.od),this.e&&this.c.La(this.e,"scroll",this.sk,d),this.clientX=this.dg=a.clientX,this.clientY=this.eg=a.clientY,this.screenX=a.screenX,this.screenY=a.screenY,this.nc=this.target.offsetLeft,this.oc=this.target.offsetTop,this.d=td(ad(this.b)),Kr()}},Cr.od=function(a){if(fl(this.c),iu&&this.b.releaseCapture(),this.Rb){hl(a),this.Rb=!1;var b=kl(this,this.nc),c=ll(this,this.oc);this.dispatchEvent(new ml("end",this,a.clientX,a.clientY,0,b,c))}else this.dispatchEvent("earlycancel")},Cr.ii=function(a){hl(a);var b=1*(a.clientX-this.clientX),c=a.clientY-this.clientY;if(this.clientX=a.clientX,this.clientY=a.clientY,this.screenX=a.screenX,this.screenY=a.screenY,!this.Rb){var d=this.dg-this.clientX,e=this.eg-this.clientY;if(d*d+e*e>0){if(!this.dispatchEvent(new ml("start",this,a.clientX,a.clientY)))return void(this.Sa||this.od(a));this.Rb=!0}}c=il(this,b,c),b=c.x,c=c.y,this.Rb&&this.dispatchEvent(new ml("beforedrag",this,a.clientX,a.clientY,0,b,c))&&(jl(this,a,b,c),a.preventDefault())},Cr.sk=function(a){var b=il(this,0,0);a.clientX=this.clientX,a.clientY=this.clientY,jl(this,a,b.x,b.y)},r(ml,Aa),r(nl,ce);var ju=0;Cr=nl.prototype,Cr.setMap=function(a){nl.S.setMap.call(this,a),null===a||a.render()},Cr.Qh=function(a){var b=this.a,c=b.a(),d=c.b();b.Ua(Pc({resolution:d,duration:200,easing:Jc})),a=pl(this,a.offsetX-this.g[0]/2,a.offsetY-this.g[1]/2),a=ql(this,a),c.d(c.constrainResolution(a))},Cr.Th=function(){Ic(this.a.a(),1)},Cr.Rh=function(a){a=pl(this,a.left,a.top),this.e=ql(this,a),this.a.a().d(this.e)},Cr.Sh=function(){var a=this.a,b=a.a();Ic(b,-1),a.Ua(Pc({resolution:this.e,duration:200,easing:Jc})),a=b.constrainResolution(this.e),b.d(a)},r(rl,ce),rl.prototype.e=function(a){a.preventDefault();var b=this.a;a=b.a();var c=null===this.b?a.q.D():this.b,b=b.e();a.ge(c,b)},r(sl,lb),sl.prototype.M=function(){this.b(!1),sl.S.M.call(this)},sl.prototype.j=function(a){if(a=a.a,null!=a.alpha){var b=ma(a.alpha);this.set("alpha",b),"boolean"==typeof a.absolute&&a.absolute?this.set("heading",b):null!=a.webkitCompassHeading&&null!=a.webkitCompassAccuracy&&-1!=a.webkitCompassAccuracy&&this.set("heading",ma(a.webkitCompassHeading))}null!=a.beta&&this.set("beta",ma(a.beta)),null!=a.gamma&&this.set("gamma",ma(a.gamma)),this.l()},sl.prototype.e=function(){return this.get("alpha")},sl.prototype.getAlpha=sl.prototype.e,sl.prototype.f=function(){return this.get("beta")},sl.prototype.getBeta=sl.prototype.f,sl.prototype.g=function(){return this.get("gamma")},sl.prototype.getGamma=sl.prototype.g,sl.prototype.i=function(){return this.get("heading")},sl.prototype.getHeading=sl.prototype.i,sl.prototype.d=function(){return this.get("tracking")},sl.prototype.getTracking=sl.prototype.d,sl.prototype.n=function(){if(Us){var a=this.d();a&&null===this.a?this.a=Pa(Hr,"deviceorientation",this.j,!1,this):a||null===this.a||(Ua(this.a),this.a=null)}},sl.prototype.b=function(a){this.set("tracking",a)},sl.prototype.setTracking=sl.prototype.b,r(tl,lb),tl.prototype.a=function(){return this.get("checked")},tl.prototype.getChecked=tl.prototype.a,tl.prototype.b=function(){return this.get("value")},tl.prototype.getValue=tl.prototype.b,tl.prototype.e=function(a){this.set("value",a)},tl.prototype.setValue=tl.prototype.e,tl.prototype.d=function(a){this.set("checked",a)},tl.prototype.setChecked=tl.prototype.d,tl.prototype.g=function(){var a=this.i;"checkbox"===a.type||"radio"===a.type?this.d(a.checked):this.e(a.value)},tl.prototype.f=function(){this.i.checked=this.a()},tl.prototype.n=function(){this.i.value=this.b()},r(ul,lb),ul.prototype.clone=function(){var a=new ul(this.L());a.e(this.b);var b=this.N();return null!=b&&a.Ma(b.clone()),b=this.g,null===b||a.i(b),a},ul.prototype.N=function(){return this.get(this.b)},ul.prototype.getGeometry=ul.prototype.N,Cr=ul.prototype,Cr.nh=function(){return this.X},Cr.mh=function(){return this.b},Cr.Si=function(){return this.g},Cr.Ti=function(){return this.a},Cr.$h=function(){this.l()},Cr.pd=function(){null!==this.f&&(Ua(this.f),this.f=null);var a=this.N();null!=a&&(this.f=Pa(a,"change",this.$h,!1,this),this.l())},Cr.Ma=function(a){this.set(this.b,a)},ul.prototype.setGeometry=ul.prototype.Ma,ul.prototype.i=function(a){this.g=a,null===a?a=void 0:k(a)||(a=g(a)?a:[a],a=_a(a)),this.a=a,this.l()},ul.prototype.d=function(a){this.X=a,this.l()},ul.prototype.e=function(a){Ta(this,mb(this.b),this.pd,!1,this),this.b=a,Pa(this,mb(this.b),this.pd,!1,this),this.pd()},Cr=vl.prototype,Cr.rf=function(a){this.a.push(a)},Cr.Ni=function(){return this.a},Cr.sf=function(){wl(this)},Cr.Yh=function(a){a=a.element,this.c[m(a).toString()]=Pa(a,"change",this.sf,!1,this),wl(this)},Cr.Zh=function(a){a=m(a.element).toString(),Ua(this.c[a]),delete this.c[a],wl(this)},Cr.Qi=function(){wl(this)},Cr.Ri=function(b){if(null!==this.a){var c=this.f;a(c)||(c=gi);var d=b.a;b=b.frameState;var e,f,g,h,i=b.viewState.resolution,j=Jj(i,b.pixelRatio);this.a.forEach(function(b){if(h=b.a,g=a(h)?h.call(b,i):c(b,i),null!=g)for(f=g.length,e=0;f>e;++e)Kj(d,b,g[e],j,this.Qi,this)},this)}},Cr.wd=function(a){this.a.remove(a)},Cr.Mc=function(a){null!==this.b&&(B(this.b,Ua),this.b=null),null!==this.c&&(B(W(this.c),Ua),this.c=null),this.a=a,null!==a&&(this.b=[Pa(a,"add",this.Yh,!1,this),Pa(a,"remove",this.Zh,!1,this)],this.c={},a.forEach(function(a){this.c[m(a).toString()]=Pa(a,"change",this.sf,!1,this)},this)),wl(this)},Cr.setMap=function(a){null!==this.d&&(Ua(this.d),this.d=null),wl(this),this.e=a,null!==a&&(this.d=Pa(a,"postcompose",this.Ri,!1,this),a.render())},Cr.tf=function(a){this.g=a,this.f=fi(a),wl(this)},Cr.Oi=function(){return this.g},Cr.Pi=function(){return this.f};var ku=Hr.JSON.parse,lu=Hr.JSON.stringify;r(Bl,xl),Cr=Bl.prototype,Cr.H=function(){return"json"},Cr.Nb=function(a,b){return Fl(this,Cl(a),yl(this,a,b))},Cr.ja=function(a,b){return this.b(Cl(a),yl(this,a,b))},Cr.Jc=function(a,b){var c=Cl(a),d=yl(this,a,b);return El(c,d)},Cr.Ba=function(a){return a=Cl(a).crs,null!=a?"name"==a.type?wc(a.properties.name):"EPSG"==a.type?wc("EPSG:"+a.properties.code):null:this.defaultDataProjection},Cr.Pd=function(a,b){return lu(this.a(a,b))},Cr.Qb=function(a,b){return lu(this.d(a,b))},Cr.Qc=function(a,b){return lu(this.e(a,b))},r(Dl,Bl);var mu={Point:function(a){return new Ah(a.coordinates)},LineString:function(a){return new vj(a.coordinates)},Polygon:function(a){return new Mh(a.coordinates)},MultiPoint:function(a){return new Cj(a.coordinates)},MultiLineString:function(a){return new yj(a.coordinates)},MultiPolygon:function(a){return new Dj(a.coordinates)},GeometryCollection:function(a,b){var c=D(a.geometries,function(a){return El(a,b)});return new oj(c)}},nu={Point:function(a){return{type:"Point",coordinates:a.K()}},LineString:function(a){return{type:"LineString",coordinates:a.K()}},Polygon:function(a){return{type:"Polygon",coordinates:a.K()}},MultiPoint:function(a){return{type:"MultiPoint",coordinates:a.K()}},MultiLineString:function(a){return{type:"MultiLineString",coordinates:a.K()}},MultiPolygon:function(a){return{type:"MultiPolygon",coordinates:a.K()}},GeometryCollection:function(a,b){return{type:"GeometryCollection",geometries:D(a.d,function(a){return nu[a.H()](Al(a,!0,b))})}},Circle:function(){return{type:"GeometryCollection",geometries:[]}}};Dl.prototype.b=function(a,b){if("Feature"==a.type)return[Fl(this,a,b)];if("FeatureCollection"==a.type){var c,d,e=[],f=a.features;for(c=0,d=f.length;d>c;++c)e.push(Fl(this,f[c],b));return e}return[]},Dl.prototype.a=function(a,b){b=zl(this,b);var c={type:"Feature"},d=a.X;return null!=d&&(c.id=d),d=a.N(),null!=d&&(d=nu[d.H()](Al(d,!0,b)),c.geometry=d),d=a.L(),aa(d,a.b),$(d)||(c.properties=d),c},Dl.prototype.d=function(a,b){b=zl(this,b);var c,d,e=[];for(c=0,d=a.length;d>c;++c)e.push(this.a(a[c],b));return{type:"FeatureCollection",features:e}},Dl.prototype.e=function(a,b){return nu[a.H()](Al(a,!0,zl(this,b)))};var ou;a:{if(!document.implementation||!document.implementation.createDocument){if("undefined"!=typeof ActiveXObject){var pu=new ActiveXObject("MSXML2.DOMDocument");if(pu){pu.resolveExternals=!1,pu.validateOnParse=!1;try{pu.setProperty("ProhibitDTD",!0),pu.setProperty("MaxXMLSize",2048),pu.setProperty("MaxElementDepth",256)}catch(qu){}}if(pu){ou=pu;break a}}throw Error("Your browser does not support creating new documents")}ou=document.implementation.createDocument("","",null)}var ru=ou,su=document.implementation&&document.implementation.createDocument?Hl:Il,tu=_r?Ml:Ll,uu=_r?Ol:Nl,vu=_r?Ql:Pl,wu=document.implementation&&document.implementation.createDocument?Rl:Sl,xu=document.implementation&&document.implementation.createDocument?Tl:Ul,yu=document.implementation&&document.implementation.createDocument?Vl:Wl,zu=em();r(lm,xl),Cr=lm.prototype,Cr.H=function(){return"xml"},Cr.Nb=function(a,b){if(uu(a))return mm(this,a,b);if(vu(a))return this.Pf(a,b);if(i(a)){var c=Xl(a);return mm(this,c,b)}return null},Cr.ja=function(a,b){if(uu(a))return nm(this,a,b);if(vu(a))return this.Ob(a,b);if(i(a)){var c=Xl(a);return nm(this,c,b)}return[]},Cr.Jc=function(b,c){if(uu(b))return this.i(b,c);if(vu(b)){var d=this.Id(b,[yl(this,b,a(c)?c:{})]);return a(d)?d:null}return i(b)?(d=Xl(b),this.i(d,c)):null},Cr.Ba=function(a){return uu(a)?this.Lc(a):vu(a)?this.tc(a):i(a)?(a=Xl(a),this.Lc(a)):null},Cr.Pd=function(a,b){var c=this.p(a,b);return Gl(c)},Cr.Qb=function(a,b){var c=this.a(a,b);return Gl(c)},Cr.Qc=function(a,b){var c=this.o(a,b);return Gl(c)},r(om,lm),Cr=om.prototype,Cr.pe=function(b,c){var d,e=tu(b);if("FeatureCollection"==e)d=im(null,this.Td,b,c,this);else if("featureMembers"==e||"featureMember"==e){d=c[0];var f=ca(d,"featureType");if(!a(f)&&null!==b.firstElementChild){var g=b.firstElementChild,f=g.nodeName.split(":").pop();d.featureType=f,d.featureNS=g.namespaceURI}var g={},h={};g[f]="featureMembers"==e?Zl(this.ye,this):$l(this.ye,this),h[ca(d,"featureNS")]=g,d=im([],h,b,c)}return a(d)||(d=[]),d},Cr.Td=Object({"http://www.opengis.net/gml":{featureMember:Zl(om.prototype.pe),featureMembers:$l(om.prototype.pe)}}),Cr.Id=function(a,b){var c=b[0],d=a.firstElementChild.getAttribute("srsName");return c.srsName=d,d=im(null,this.Le,a,b,this),null!=d?Al(d,!1,c):void 0},Cr.ye=function(b,c){var d,e,f=b.getAttribute("fid")||wu(b,"http://www.opengis.net/gml","id"),g={};for(d=b.firstElementChild;null!==d;d=d.nextElementSibling){var h=tu(d);if(0===d.childNodes.length||1===d.childNodes.length&&3===d.firstChild.nodeType){var i=Jl(d,!1);/^[\s\xa0]*$/.test(i)&&(i=void 0),g[h]=i}else"boundedBy"!==h&&(e=h),g[h]=this.Id(d,c)}return d=new ul(g),a(e)&&d.e(e),f&&d.d(f),d},Cr.Vf=function(a,b){var c=this.Hd(a,b);if(null!=c){var d=new Ah(null);return Bh(d,"XYZ",c),d}},Cr.Tf=function(b,c){var d=im([],this.yg,b,c,this);return a(d)?new Cj(d):void 0},Cr.Sf=function(b,c){var d=im([],this.xg,b,c,this);if(a(d)){var e=new yj(null);return Bj(e,d),e}},Cr.Uf=function(b,c){var d=im([],this.zg,b,c,this);if(a(d)){var e=new Dj(null);return Hj(e,d),e}},Cr.Kf=function(a,b){hm(this.Cg,a,b,this)},Cr.mf=function(a,b){hm(this.vg,a,b,this)},Cr.Lf=function(a,b){hm(this.Dg,a,b,this)},Cr.Jd=function(a,b){var c=this.Hd(a,b);if(null!=c){var d=new vj(null);return xj(d,"XYZ",c),d}},Cr.Ik=function(a,b){var c=im(null,this.Sc,a,b,this);return null!=c?c:void 0},Cr.Rf=function(b,c){var d=this.Hd(b,c);if(a(d)){var e=new yh(null);return zh(e,"XYZ",d),e}},Cr.Kd=function(b,c){var d=im([null],this.Ud,b,c,this);if(a(d)&&null!==d[0]){var e,f,g=new Mh(null),h=d[0],i=[h.length];for(e=1,f=d.length;f>e;++e)L(h,d[e]),i.push(h.length);return Ph(g,"XYZ",h,i),g}},Cr.Hd=function(a,b){return im(null,this.Sc,a,b,this)},Cr.yg=Object({"http://www.opengis.net/gml":{pointMember:Zl(om.prototype.Kf),pointMembers:Zl(om.prototype.Kf)}}),Cr.xg=Object({"http://www.opengis.net/gml":{lineStringMember:Zl(om.prototype.mf),lineStringMembers:Zl(om.prototype.mf)}}),Cr.zg=Object({"http://www.opengis.net/gml":{polygonMember:Zl(om.prototype.Lf),polygonMembers:Zl(om.prototype.Lf)}}),Cr.Cg=Object({"http://www.opengis.net/gml":{Point:Zl(om.prototype.Hd)}}),Cr.vg=Object({"http://www.opengis.net/gml":{LineString:Zl(om.prototype.Jd)}}),Cr.Dg=Object({"http://www.opengis.net/gml":{Polygon:Zl(om.prototype.Kd)}}),Cr.Tc=Object({"http://www.opengis.net/gml":{LinearRing:$l(om.prototype.Ik)}}),Cr.Ob=function(b,c){var d={featureType:this.featureType,featureNS:this.featureNS};return a(c)&&fa(d,yl(this,b,c)),this.pe(b,[d])},Cr.tc=function(b){return wc(a(this.n)?this.n:b.firstElementChild.getAttribute("srsName"))},r(Bm,om),Cr=Bm.prototype,Cr.Lk=function(b,c){var d=im([],this.wg,b,c,this);if(a(d)){var e=new yj(null);return Bj(e,d),e}},Cr.Mk=function(b,c){var d=im([],this.Ag,b,c,this);if(a(d)){var e=new Dj(null);return Hj(e,d),e}},Cr.We=function(a,b){hm(this.sg,a,b,this)},Cr.fg=function(a,b){hm(this.Gg,a,b,this)},Cr.Ok=function(a,b){return im([null],this.Bg,a,b,this)},Cr.Qk=function(a,b){return im([null],this.Fg,a,b,this)},Cr.Pk=function(a,b){return im([null],this.Ud,a,b,this)},Cr.Kk=function(a,b){return im([null],this.Sc,a,b,this)},Cr.vi=function(b,c){var d=im(void 0,this.Tc,b,c,this);a(d)&&c[c.length-1].push(d)},Cr.ah=function(b,c){var d=im(void 0,this.Tc,b,c,this);a(d)&&(c[c.length-1][0]=d)},Cr.Wf=function(b,c){var d=im([null],this.Hg,b,c,this);if(a(d)&&null!==d[0]){var e,f,g=new Mh(null),h=d[0],i=[h.length];for(e=1,f=d.length;f>e;++e)L(h,d[e]),i.push(h.length);return Ph(g,"XYZ",h,i),g}},Cr.Nf=function(b,c){var d=im([null],this.tg,b,c,this);if(a(d)){var e=new vj(null);return xj(e,"XYZ",d),e}},Cr.Hk=function(a,b){var c=im([null],this.ug,a,b,this);return Rb(c[1][0],c[1][1],c[2][0],c[2][1])},Cr.Jk=function(a,b){for(var c,d=Jl(a,!1),e=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,f=[];c=e.exec(d);)f.push(parseFloat(c[1])),d=d.substr(c[0].length);if(""===d){if(d=ca(b[0],"srsName"),e="enu",null===d||(e=nc(wc(d))),"neu"===e)for(d=0,e=f.length;e>d;d+=3)c=f[d],f[d]=f[d+1],f[d+1]=c;return d=f.length,2==d&&f.push(0),0===d?void 0:f}},Cr.Ae=function(a,b){var c=Jl(a,!1).replace(/^\s*|\s*$/g,""),d=ca(b[0],"srsName"),e=a.parentNode.getAttribute("srsDimension"),g="enu";null===d||(g=nc(wc(d))),c=c.split(/\s+/),d=2,f(a.getAttribute("srsDimension"))?f(a.getAttribute("dimension"))?null===e||(d=vm(e)):d=vm(a.getAttribute("dimension")):d=vm(a.getAttribute("srsDimension"));for(var h,i,j=[],k=0,l=c.length;l>k;k+=d)e=parseFloat(c[k]),h=parseFloat(c[k+1]),i=3===d?parseFloat(c[k+2]):0,"en"===g.substr(0,2)?j.push(e,h,i):j.push(h,e,i);return j},Cr.Sc=Object({"http://www.opengis.net/gml":{pos:$l(Bm.prototype.Jk),posList:$l(Bm.prototype.Ae)}}),Cr.Ud=Object({"http://www.opengis.net/gml":{interior:Bm.prototype.vi,exterior:Bm.prototype.ah}}),Cr.Le=Object({"http://www.opengis.net/gml":{Point:$l(om.prototype.Vf),MultiPoint:$l(om.prototype.Tf),LineString:$l(om.prototype.Jd),MultiLineString:$l(om.prototype.Sf),LinearRing:$l(om.prototype.Rf),Polygon:$l(om.prototype.Kd),MultiPolygon:$l(om.prototype.Uf),Surface:$l(Bm.prototype.Wf),MultiSurface:$l(Bm.prototype.Mk),Curve:$l(Bm.prototype.Nf),MultiCurve:$l(Bm.prototype.Lk),Envelope:$l(Bm.prototype.Hk)}}),Cr.wg=Object({"http://www.opengis.net/gml":{curveMember:Zl(Bm.prototype.We),curveMembers:Zl(Bm.prototype.We)}}),Cr.Ag=Object({"http://www.opengis.net/gml":{surfaceMember:Zl(Bm.prototype.fg),surfaceMembers:Zl(Bm.prototype.fg)}}),Cr.sg=Object({"http://www.opengis.net/gml":{LineString:Zl(om.prototype.Jd),Curve:Zl(Bm.prototype.Nf)}}),Cr.Gg=Object({"http://www.opengis.net/gml":{Polygon:Zl(om.prototype.Kd),Surface:Zl(Bm.prototype.Wf)}}),Cr.Hg=Object({"http://www.opengis.net/gml":{patches:$l(Bm.prototype.Ok)}}),Cr.tg=Object({"http://www.opengis.net/gml":{segments:$l(Bm.prototype.Qk)}}),Cr.ug=Object({"http://www.opengis.net/gml":{lowerCorner:Zl(Bm.prototype.Ae),upperCorner:Zl(Bm.prototype.Ae)}}),Cr.Bg=Object({"http://www.opengis.net/gml":{PolygonPatch:$l(Bm.prototype.Pk)}}),Cr.Fg=Object({"http://www.opengis.net/gml":{LineStringSegment:$l(Bm.prototype.Kk)}}),Cr.og=function(a,b,c){var d=ca(c[c.length-1],"srsName");null!=d&&a.setAttribute("srsName",d),d=su(a.namespaceURI,"pos"),a.appendChild(d),c=ca(c[c.length-1],"srsName"),a="enu",null!=c&&(a=nc(wc(c))),b=b.K(),Am(d,"en"===a.substr(0,2)?b[0]+" "+b[1]:b[1]+" "+b[0])};var Au={"http://www.opengis.net/gml":{lowerCorner:cm(Am),upperCorner:cm(Am)}};Cr=Bm.prototype,Cr.zl=function(b,c,d){var e=ca(d[d.length-1],"srsName");a(e)&&b.setAttribute("srsName",e),km({node:b},Au,zu,[c[0]+" "+c[1],c[2]+" "+c[3]],d,["lowerCorner","upperCorner"],this)},Cr.lg=function(a,b,c){var d=ca(c[c.length-1],"srsName");null!=d&&a.setAttribute("srsName",d),d=su(a.namespaceURI,"posList"),a.appendChild(d),Cm(d,b,c)},Cr.Eg=function(b,c){var d=c[c.length-1],e=d.node,f=ca(d,"exteriorWritten");return a(f)||(d.exteriorWritten=!0),su(e.namespaceURI,a(f)?"interior":"exterior")},Cr.Sd=function(a,b,c){var d=ca(c[c.length-1],"srsName");"PolygonPatch"!==a.nodeName&&null!=d&&a.setAttribute("srsName",d),"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName?(b=b.dd(),km({node:a,srsName:d},Eu,this.Eg,b,c,void 0,this)):"Surface"===a.nodeName&&(d=su(a.namespaceURI,"patches"),a.appendChild(d),a=su(d.namespaceURI,"PolygonPatch"),d.appendChild(a),this.Sd(a,b,c))},Cr.Od=function(a,b,c){var d=ca(c[c.length-1],"srsName");"LineStringSegment"!==a.nodeName&&null!=d&&a.setAttribute("srsName",d),"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?(d=su(a.namespaceURI,"posList"),a.appendChild(d),Cm(d,b,c)):"Curve"===a.nodeName&&(d=su(a.namespaceURI,"segments"),a.appendChild(d),a=su(d.namespaceURI,"LineStringSegment"),d.appendChild(a),this.Od(a,b,c))},Cr.ng=function(a,b,c){var d=c[c.length-1],e=ca(d,"srsName"),d=ca(d,"surface");null!=e&&a.setAttribute("srsName",e),b=b.gd(),km({node:a,srsName:e,surface:d},Bu,this.b,b,c,void 0,this)},Cr.Dl=function(a,b,c){var d=ca(c[c.length-1],"srsName");null!=d&&a.setAttribute("srsName",d),b=b.xd(),km({node:a,srsName:d},Cu,em("pointMember"),b,c,void 0,this)},Cr.mg=function(a,b,c){var d=c[c.length-1],e=ca(d,"srsName"),d=ca(d,"curve");null!=e&&a.setAttribute("srsName",e),b=b.Ec(),km({node:a,srsName:e,curve:d},Du,this.b,b,c,void 0,this)},Cr.pg=function(a,b,c){var d=su(a.namespaceURI,"LinearRing");a.appendChild(d),this.lg(d,b,c)},Cr.qg=function(b,c,d){var e=this.c(c,d);a(e)&&(b.appendChild(e),this.Sd(e,c,d))},Cr.Gl=function(a,b,c){var d=su(a.namespaceURI,"Point");a.appendChild(d),this.og(d,b,c)},Cr.kg=function(b,c,d){var e=this.c(c,d);a(e)&&(b.appendChild(e),this.Od(e,c,d))},Cr.Rd=function(b,c,d){var e=d[d.length-1],f=ea(e);f.node=b;var h;h=g(c)?a(e.dataProjection)?Cc(c,e.featureProjection,e.dataProjection):c:Al(c,!0,e),km(f,Fu,this.c,[h],d,void 0,this)},Cr.hg=function(b,c,d){var e=c.X;a(e)&&b.setAttribute("fid",e);var e=d[d.length-1],f=ca(e,"featureNS"),g=c.b;a(e.ac)||(e.ac={},e.ac[f]={});var h=c.L();c=[];var i,j=[];for(i in h){var k=h[i];null!==k&&(c.push(i),j.push(k),i==g?i in e.ac[f]||(e.ac[f][i]=cm(this.Rd,this)):i in e.ac[f]||(e.ac[f][i]=cm(Am)))}i=ea(e),i.node=b,km(i,e.ac,em(void 0,f),j,d,c)};var Bu={"http://www.opengis.net/gml":{surfaceMember:cm(Bm.prototype.qg),polygonMember:cm(Bm.prototype.qg)}},Cu={"http://www.opengis.net/gml":{pointMember:cm(Bm.prototype.Gl)
}},Du={"http://www.opengis.net/gml":{lineStringMember:cm(Bm.prototype.kg),curveMember:cm(Bm.prototype.kg)}},Eu={"http://www.opengis.net/gml":{exterior:cm(Bm.prototype.pg),interior:cm(Bm.prototype.pg)}},Fu={"http://www.opengis.net/gml":{Curve:cm(Bm.prototype.Od),MultiCurve:cm(Bm.prototype.mg),Point:cm(Bm.prototype.og),MultiPoint:cm(Bm.prototype.Dl),LineString:cm(Bm.prototype.Od),MultiLineString:cm(Bm.prototype.mg),LinearRing:cm(Bm.prototype.lg),Polygon:cm(Bm.prototype.Sd),MultiPolygon:cm(Bm.prototype.ng),Surface:cm(Bm.prototype.Sd),MultiSurface:cm(Bm.prototype.ng),Envelope:cm(Bm.prototype.zl)}},Gu={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};Bm.prototype.b=function(a,b){return su("http://www.opengis.net/gml",Gu[b[b.length-1].node.nodeName])},Bm.prototype.c=function(a,b){var c,d=b[b.length-1],e=ca(d,"multiSurface"),f=ca(d,"surface"),h=ca(d,"curve"),d=ca(d,"multiCurve");return g(a)?c="Envelope":(c=a.H(),"MultiPolygon"===c&&!0===e?c="MultiSurface":"Polygon"===c&&!0===f?c="Surface":"LineString"===c&&!0===h?c="Curve":"MultiLineString"===c&&!0===d&&(c="MultiCurve")),su("http://www.opengis.net/gml",c)},Bm.prototype.o=function(b,c){c=zl(this,c);var d=su("http://www.opengis.net/gml","geom"),e={node:d,srsName:this.srsName,curve:this.d,surface:this.g,multiSurface:this.f,multiCurve:this.e};return a(c)&&fa(e,c),this.Rd(d,b,[e]),d},Bm.prototype.a=function(b,c){c=zl(this,c);var d=su("http://www.opengis.net/gml","featureMembers");yu(d,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var e={srsName:this.srsName,curve:this.d,surface:this.g,multiSurface:this.f,multiCurve:this.e,featureNS:this.featureNS,featureType:this.featureType};a(c)&&fa(e,c);var e=[e],f=e[e.length-1],g=ca(f,"featureType"),h=ca(f,"featureNS"),i={};return i[h]={},i[h][g]=cm(this.hg,this),f=ea(f),f.node=d,km(f,i,em(g,h),b,e),d},r(Dm,om),Cr=Dm.prototype,Cr.Qf=function(a,b){var c=Jl(a,!1).replace(/^\s*|\s*$/g,""),d=ca(b[0],"srsName"),e=a.parentNode.getAttribute("srsDimension"),g="enu";null===d||(g=nc(wc(d))),c=c.split(/[\s,]+/),d=2,f(a.getAttribute("srsDimension"))?f(a.getAttribute("dimension"))?null===e||(d=vm(e)):d=vm(a.getAttribute("dimension")):d=vm(a.getAttribute("srsDimension"));for(var h,i,j=[],k=0,l=c.length;l>k;k+=d)e=parseFloat(c[k]),h=parseFloat(c[k+1]),i=3===d?parseFloat(c[k+2]):0,"en"===g.substr(0,2)?j.push(e,h,i):j.push(h,e,i);return j},Cr.Gk=function(a,b){var c=im([null],this.rg,a,b,this);return Rb(c[1][0],c[1][1],c[1][3],c[1][4])},Cr.ti=function(b,c){var d=im(void 0,this.Tc,b,c,this);a(d)&&c[c.length-1].push(d)},Cr.tk=function(b,c){var d=im(void 0,this.Tc,b,c,this);a(d)&&(c[c.length-1][0]=d)},Cr.Sc=Object({"http://www.opengis.net/gml":{coordinates:$l(Dm.prototype.Qf)}}),Cr.Ud=Object({"http://www.opengis.net/gml":{innerBoundaryIs:Dm.prototype.ti,outerBoundaryIs:Dm.prototype.tk}}),Cr.rg=Object({"http://www.opengis.net/gml":{coordinates:Zl(Dm.prototype.Qf)}}),Cr.Le=Object({"http://www.opengis.net/gml":{Point:$l(om.prototype.Vf),MultiPoint:$l(om.prototype.Tf),LineString:$l(om.prototype.Jd),MultiLineString:$l(om.prototype.Sf),LinearRing:$l(om.prototype.Rf),Polygon:$l(om.prototype.Kd),MultiPolygon:$l(om.prototype.Uf),Box:$l(Dm.prototype.Gk)}}),r(Em,lm);var Hu=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Iu={rte:Im,trk:Jm,wpt:Km},Ju=bm(Hu,{rte:Zl(Im),trk:Zl(Jm),wpt:Zl(Km)}),Ku=bm(Hu,{text:am(wm,"linkText"),type:am(wm,"linkType")}),Lu=bm(Hu,{name:am(wm),cmt:am(wm),desc:am(wm),src:am(wm),link:Gm,number:am(um),extensions:Hm,type:am(wm),rtept:function(b,c){var d=im({},Mu,b,c);a(d)&&Fm(ca(c[c.length-1],"flatCoordinates"),b,d)}}),Mu=bm(Hu,{ele:am(sm),time:am(rm)}),Nu=bm(Hu,{name:am(wm),cmt:am(wm),desc:am(wm),src:am(wm),link:Gm,number:am(um),type:am(wm),extensions:Hm,trkseg:function(a,b){var c=b[b.length-1];hm(Ou,a,b),ca(c,"ends").push(ca(c,"flatCoordinates").length)}}),Ou=bm(Hu,{trkpt:function(b,c){var d=im({},Pu,b,c);a(d)&&Fm(ca(c[c.length-1],"flatCoordinates"),b,d)}}),Pu=bm(Hu,{ele:am(sm),time:am(rm)}),Qu=bm(Hu,{ele:am(sm),time:am(rm),magvar:am(sm),geoidheight:am(sm),name:am(wm),cmt:am(wm),desc:am(wm),src:am(wm),link:Gm,sym:am(wm),type:am(wm),fix:am(wm),sat:am(um),hdop:am(sm),vdop:am(sm),pdop:am(sm),ageofdgpsdata:am(sm),dgpsid:am(um),extensions:Hm});Em.prototype.Pf=function(b,c){if(!G(Hu,b.namespaceURI))return null;var d=Iu[b.localName];return a(d)?(d=d(b,[yl(this,b,c)]),a(d)?(Lm(this,[d]),d):null):null},Em.prototype.Ob=function(b,c){if(!G(Hu,b.namespaceURI))return[];if("gpx"==b.localName){var d=im([],Ju,b,[yl(this,b,c)]);if(a(d))return Lm(this,d),d}return[]},Em.prototype.Lc=function(){return this.defaultDataProjection},Em.prototype.tc=function(){return this.defaultDataProjection};var Ru=["text","type"],Su=gm(Hu,{text:cm(Am),type:cm(Am)}),Tu=gm(Hu,"name cmt desc src link number type rtept".split(" ")),Uu=gm(Hu,{name:cm(Am),cmt:cm(Am),desc:cm(Am),src:cm(Am),link:cm(Mm),number:cm(zm),type:cm(Am),rtept:dm(cm(Nm))}),Vu=gm(Hu,"name cmt desc src link number type trkseg".split(" ")),Wu=gm(Hu,{name:cm(Am),cmt:cm(Am),desc:cm(Am),src:cm(Am),link:cm(Mm),number:cm(zm),type:cm(Am),trkseg:dm(cm(function(a,b,c){km({node:a,geometryLayout:b.a,properties:{}},Yu,Xu,b.K(),c)}))}),Xu=em("trkpt"),Yu=gm(Hu,{trkpt:cm(Nm)}),Zu=gm(Hu,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),$u=gm(Hu,{ele:cm(ym),time:cm(function(a,b){var c=new Date(1e3*b),c=c.getUTCFullYear()+"-"+w(c.getUTCMonth()+1)+"-"+w(c.getUTCDate())+"T"+w(c.getUTCHours())+":"+w(c.getUTCMinutes())+":"+w(c.getUTCSeconds())+"Z";a.appendChild(ru.createTextNode(c))}),magvar:cm(ym),geoidheight:cm(ym),name:cm(Am),cmt:cm(Am),desc:cm(Am),src:cm(Am),link:cm(Mm),sym:cm(Am),type:cm(Am),fix:cm(Am),sat:cm(zm),hdop:cm(ym),vdop:cm(ym),pdop:cm(ym),ageofdgpsdata:cm(ym),dgpsid:cm(zm)}),_u={Point:"wpt",LineString:"rte",MultiLineString:"trk"},av=gm(Hu,{rte:cm(function(b,c,d){var e=d[0],f=c.L();b={node:b,properties:f},c=c.N(),a(c)&&(c=Al(c,!0,e),b.geometryLayout=c.a,e=c.K(),f.rtept=e),e=Tu[d[d.length-1].node.namespaceURI],f=fm(f,e),km(b,Uu,zu,f,d,e)}),trk:cm(function(b,c,d){var e=d[0],f=c.L();b={node:b,properties:f},c=c.N(),a(c)&&(c=Al(c,!0,e),e=c.Ec(),f.trkseg=e),e=Vu[d[d.length-1].node.namespaceURI],f=fm(f,e),km(b,Wu,zu,f,d,e)}),wpt:cm(function(b,c,d){var e=d[0],f=d[d.length-1],g=c.L();f.properties=g,c=c.N(),a(c)&&(c=Al(c,!0,e),f.geometryLayout=c.a,Nm(b,c.K(),d))})});Em.prototype.a=function(a,b){b=zl(this,b);var c=su("http://www.topografix.com/GPX/1/1","gpx");return km({node:c},av,Om,a,[b]),c},r(Sm,xl),Cr=Sm.prototype,Cr.H=function(){return"text"},Cr.Nb=function(a,b){return this.Ic(i(a)?a:"",zl(this,b))},Cr.ja=function(a,b){return this.ze(i(a)?a:"",zl(this,b))},Cr.Jc=function(a,b){return this.Kc(i(a)?a:"",zl(this,b))},Cr.Ba=function(a){return this.Ce(i(a)?a:"")},Cr.Pd=function(a,b){return this.Qd(a,zl(this,b))},Cr.Qb=function(a,b){return this.ig(a,zl(this,b))},Cr.Qc=function(a,b){return this.Rc(a,zl(this,b))},r(Tm,Sm);var bv=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,cv=/^H.([A-Z]{3}).*?:(.*)/,dv=/^HFDTE(\d{2})(\d{2})(\d{2})/;Tm.prototype.Ic=function(a,b){var c,d,e=this.a,f=Pm(a),g={},h=[],i=2e3,j=0,k=1;for(c=0,d=f.length;d>c;++c){var l,m=f[c];if("B"==m.charAt(0)){if(l=bv.exec(m)){var m=parseInt(l[1],10),n=parseInt(l[2],10),o=parseInt(l[3],10),p=parseInt(l[4],10)+parseInt(l[5],10)/6e4;"S"==l[6]&&(p=-p);var q=parseInt(l[7],10)+parseInt(l[8],10)/6e4;"W"==l[9]&&(q=-q),h.push(q,p),"none"!=e&&h.push("gps"==e?parseInt(l[11],10):"barometric"==e?parseInt(l[12],10):0),h.push(Date.UTC(i,j,k,m,n,o)/1e3)}}else"H"==m.charAt(0)&&((l=dv.exec(m))?(k=parseInt(l[1],10),j=parseInt(l[2],10)-1,i=2e3+parseInt(l[3],10)):(l=cv.exec(m))&&(g[l[1]]=Nr(l[2]),dv.exec(m)))}return 0===h.length?null:(f=new vj(null),xj(f,"none"==e?"XYM":"XYZM",h),e=new ul(Al(f,!1,b)),e.G(g),e)},Tm.prototype.ze=function(a,b){var c=this.Ic(a,b);return null===c?[]:[c]},Tm.prototype.Ce=function(){return this.defaultDataProjection},Cr=Um.prototype,Cr.kh=function(){return this.d},Cr.yh=function(){return this.i},Cr.zh=function(){return this.n},Cr.dk=function(){return this.a},Cr.ek=function(){return this.e},Cr.fk=function(){return this.c},Cr.gk=function(){return this.f},Cr.hk=function(){return this.b},Cr.Hh=function(){return this.g},Cr.Ih=function(){return this.o},Cr.dl=function(a){this.d=a},Cr.cl=function(a){this.a=a},Cr.ik=function(a){this.e=a},Cr.jk=function(a){this.c=a},Cr.kl=function(a){this.f=a},Cr.ll=function(a){this.b=a},Cr.ml=function(a){this.g=a},Cr.nl=function(a){this.o=a},r(Vm,lm);var ev=["http://www.google.com/kml/ext/2.2"],fv=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],gv=[255,255,255,1],hv=new ci({color:gv}),iv=[2,20],jv=[32,32],kv=new kg({anchor:iv,anchorXUnits:"pixels",anchorYUnits:"pixels",crossOrigin:"anonymous",rotation:0,scale:1,size:jv,src:"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"}),lv=new bi({color:gv,width:1}),mv=new Um({font:"normal 16px Helvetica",fill:hv,stroke:lv,scale:1}),nv=[new ei({fill:hv,image:kv,text:mv,stroke:lv,zIndex:0})],ov={fraction:"fraction",pixels:"pixels"},pv=bm(fv,{value:$l(wm)}),qv=bm(fv,{Data:function(b,c){var d=b.getAttribute("name");if(null!==d){var e=im(void 0,pv,b,c);a(e)&&(c[c.length-1][d]=e)}},SchemaData:function(a,b){hm(Gv,a,b)}}),rv=bm(fv,{coordinates:$l(Xm)}),sv=bm(fv,{innerBoundaryIs:function(b,c){var d=im(void 0,xv,b,c);a(d)&&c[c.length-1].push(d)},outerBoundaryIs:function(b,c){var d=im(void 0,Cv,b,c);a(d)&&(c[c.length-1][0]=d)}}),tv=bm(fv,{when:function(b,c){var d=c[c.length-1].gg,e=Jl(b,!1);if(e=/^\s*(\d{4})($|-(\d{2})($|-(\d{2})($|T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?)))))\s*$/.exec(e)){var f=Date.UTC(parseInt(e[1],10),a(e[3])?parseInt(e[3],10)-1:0,a(e[5])?parseInt(e[5],10):1,a(e[7])?parseInt(e[7],10):0,a(e[8])?parseInt(e[8],10):0,a(e[9])?parseInt(e[9],10):0);if(a(e[10])&&"Z"!=e[10]){var g="-"==e[11]?-1:1,f=f+60*g*parseInt(e[12],10);a(e[13])&&(f+=3600*g*parseInt(e[13],10))}d.push(f)}else d.push(0)}},bm(ev,{coord:function(a,b){var c=b[b.length-1].k,d=Jl(a,!1);(d=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(d))?c.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]),0):c.push(0,0,0,0)}})),uv=bm(fv,{coordinates:$l(Xm)}),vv=bm(fv,{href:am(Ym)},bm(ev,{x:am(sm),y:am(sm),w:am(sm),h:am(sm)})),wv=bm(fv,{Icon:am(function(b,c){var d=im({},vv,b,c);return a(d)?d:null}),heading:am(sm),hotSpot:am(function(a){var b=a.getAttribute("xunits"),c=a.getAttribute("yunits");return{x:parseFloat(a.getAttribute("x")),Je:ov[b],y:parseFloat(a.getAttribute("y")),Ke:ov[c]}}),scale:am(Zm)}),xv=bm(fv,{LinearRing:$l($m)}),yv=bm(fv,{color:am(Wm),scale:am(Zm)}),zv=bm(fv,{color:am(Wm),width:am(sm)}),Av=bm(fv,{LineString:Zl(an),LinearRing:Zl(bn),MultiGeometry:Zl(cn),Point:Zl(dn),Polygon:Zl(en)}),Bv=bm(ev,{Track:Zl(_m)}),Cv=bm(fv,{LinearRing:$l($m)}),Dv=bm(fv,{Style:am(fn),key:am(wm),styleUrl:am(function(a){var b=Nr(Jl(a,!1));return null!=a.baseURI?Fe(a.baseURI,b).toString():b})}),Ev=bm(fv,{ExtendedData:function(a,b){hm(qv,a,b)},MultiGeometry:am(cn,"geometry"),LineString:am(an,"geometry"),LinearRing:am(bn,"geometry"),Point:am(dn,"geometry"),Polygon:am(en,"geometry"),Style:am(fn),StyleMap:function(b,c){var d=im(void 0,Iv,b,c);if(a(d)){var e=c[c.length-1];g(d)?e.Style=d:i(d)&&(e.styleUrl=d)}},address:am(wm),description:am(wm),name:am(wm),open:am(pm),phoneNumber:am(wm),styleUrl:am(Ym),visibility:am(pm)},bm(ev,{MultiTrack:am(function(b,c){var d=im([],Bv,b,c);if(a(d)){var e=new yj(null);return Bj(e,d),e}},"geometry"),Track:am(_m,"geometry")})),Fv=bm(fv,{color:am(Wm),fill:am(pm),outline:am(pm)}),Gv=bm(fv,{SimpleData:function(a,b){var c=a.getAttribute("name");if(null!==c){var d=wm(a);b[b.length-1][c]=d}}}),Hv=bm(fv,{IconStyle:function(b,c){var d=im({},wv,b,c);if(a(d)){var e,f=c[c.length-1],g=ca(d,"Icon",{});e=ca(g,"href"),e=a(e)?e:"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png";var h,i,j,k=ca(d,"hotSpot");a(k)?(h=[k.x,k.y],i=k.Je,j=k.Ke):"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"===e?(h=iv,j=i="pixels"):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(e)&&(h=[.5,0],j=i="fraction");var l,k=ca(g,"x"),m=ca(g,"y");a(k)&&a(m)&&(l=[k,m]);var n,k=ca(g,"w"),g=ca(g,"h");a(k)&&a(g)&&(n=[k,g]);var o,g=ca(d,"heading");a(g)&&(o=ma(g)),d=ca(d,"scale"),"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"==e&&(n=jv),h=new kg({anchor:h,anchorOrigin:"bottom-left",anchorXUnits:i,anchorYUnits:j,crossOrigin:"anonymous",offset:l,offsetOrigin:"bottom-left",rotation:o,scale:d,size:n,src:e}),f.imageStyle=h}},LabelStyle:function(b,c){var d=im({},yv,b,c);a(d)&&(c[c.length-1].textStyle=new Um({fill:new ci({color:ca(d,"color",gv)}),scale:ca(d,"scale")}))},LineStyle:function(b,c){var d=im({},zv,b,c);a(d)&&(c[c.length-1].strokeStyle=new bi({color:ca(d,"color",gv),width:ca(d,"width",1)}))},PolyStyle:function(b,c){var d=im({},Fv,b,c);if(a(d)){var e=c[c.length-1];e.fillStyle=new ci({color:ca(d,"color",gv)});var f=ca(d,"fill");a(f)&&(e.fill=f),d=ca(d,"outline"),a(d)&&(e.outline=d)}}}),Iv=bm(fv,{Pair:function(b,c){var d=im({},Dv,b,c);if(a(d)){var e=ca(d,"key");a(e)&&"normal"==e&&(e=ca(d,"styleUrl"),a(e)&&(c[c.length-1]=e),d=ca(d,"Style"),a(d)&&(c[c.length-1]=d))}}});Cr=Vm.prototype,Cr.Of=function(b,c){tu(b);var d=bm(fv,{Folder:Yl(this.Of,this),Placemark:Zl(this.Be,this),Style:p(this.Sk,this),StyleMap:p(this.Rk,this)}),d=im([],d,b,c,this);return a(d)?d:void 0},Cr.Be=function(b,c){var d=im({geometry:null},Ev,b,c);if(a(d)){var e=new ul,f=b.getAttribute("id");return null===f||e.d(f),f=c[0],null!=d.geometry&&Al(d.geometry,!1,f),e.G(d),this.b&&e.i(this.d),e}},Cr.Sk=function(b,c){var d=b.getAttribute("id");if(null!==d){var e=fn(b,c);a(e)&&(d=null!=b.baseURI?Fe(b.baseURI,"#"+d).toString():"#"+d,this.c[d]=e)}},Cr.Rk=function(b,c){var d=b.getAttribute("id");if(null!==d){var e=im(void 0,Iv,b,c);a(e)&&(d=null!=b.baseURI?Fe(b.baseURI,"#"+d).toString():"#"+d,this.c[d]=e)}},Cr.Pf=function(b,c){if(!G(fv,b.namespaceURI))return null;var d=this.Be(b,[yl(this,b,c)]);return a(d)?d:null},Cr.Ob=function(b,c){if(!G(fv,b.namespaceURI))return[];var d;if(d=tu(b),"Document"==d||"Folder"==d)return d=this.Of(b,[yl(this,b,c)]),a(d)?d:[];if("Placemark"==d)return d=this.Be(b,[yl(this,b,c)]),a(d)?[d]:[];if("kml"==d){d=[];var e;for(e=b.firstElementChild;null!==e;e=e.nextElementSibling){var f=this.Ob(e,c);a(f)&&L(d,f)}return d}return[]},Cr.Nk=function(a){return uu(a)?gn(this,a):vu(a)?hn(this,a):i(a)?(a=Xl(a),gn(this,a)):void 0},Cr.Lc=function(){return this.defaultDataProjection},Cr.tc=function(){return this.defaultDataProjection};var Jv=gm(fv,["Document","Placemark"]),Kv=gm(fv,{Document:cm(function(a,b,c){km({node:a},Lv,qn,b,c)}),Placemark:cm(ln)}),Lv=gm(fv,{Placemark:cm(ln)}),Mv={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry"},Nv=gm(fv,["href"],gm(ev,["x","y","w","h"])),Ov=gm(fv,{href:cm(Am)},gm(ev,{x:cm(ym),y:cm(ym),w:cm(ym),h:cm(ym)})),Pv=gm(fv,["scale","heading","Icon","hotSpot"]),Qv=gm(fv,{Icon:cm(function(a,b,c){a={node:a};var d=Nv[c[c.length-1].node.namespaceURI],e=fm(b,d);km(a,Ov,zu,e,c,d),d=Nv[ev[0]],e=fm(b,d),km(a,Ov,pn,e,c,d)}),heading:cm(ym),hotSpot:cm(function(a,b){a.setAttribute("x",b.x),a.setAttribute("y",b.y),a.setAttribute("xunits",b.Je),a.setAttribute("yunits",b.Ke)}),scale:cm(on)}),Rv=gm(fv,["color","scale"]),Sv=gm(fv,{color:cm(jn),scale:cm(on)}),Tv=gm(fv,["color","width"]),Uv=gm(fv,{color:cm(jn),width:cm(ym)}),Vv=gm(fv,{LinearRing:cm(mn)}),Wv=gm(fv,{LineString:cm(mn),Point:cm(mn),Polygon:cm(nn)}),Xv=gm(fv,"name open visibility address phoneNumber description styleUrl Style".split(" ")),Yv=gm(fv,{MultiGeometry:cm(function(a,b,c){a={node:a};var d,e,f=b.H();"MultiPoint"==f?(d=b.xd(),e=fw):"MultiLineString"==f?(d=b.Ec(),e=gw):"MultiPolygon"==f&&(d=b.gd(),e=iw),km(a,Wv,e,d,c)}),LineString:cm(mn),LinearRing:cm(mn),Point:cm(mn),Polygon:cm(nn),Style:cm(function(a,b,c){a={node:a};var d={},e=b.e,f=b.b,g=b.f;b=b.c,null!==g&&(d.IconStyle=g),null!==b&&(d.LabelStyle=b),null!==f&&(d.LineStyle=f),null!==e&&(d.PolyStyle=e),b=aw[c[c.length-1].node.namespaceURI],d=fm(d,b),km(a,bw,zu,d,c,b)}),address:cm(Am),description:cm(Am),name:cm(Am),open:cm(xm),phoneNumber:cm(Am),styleUrl:cm(Am),visibility:cm(xm)}),Zv=gm(fv,{coordinates:cm(function(a,b,c){c=c[c.length-1];var d=ca(c,"layout");c=ca(c,"stride");var e;"XY"==d||"XYM"==d?e=2:("XYZ"==d||"XYZM"==d)&&(e=3);var f,g=b.length,h="";if(g>0){for(h+=b[0],d=1;e>d;++d)h+=","+b[d];for(f=c;g>f;f+=c)for(h+=" "+b[f],d=1;e>d;++d)h+=","+b[f+d]}Am(a,h)})}),$v=gm(fv,{outerBoundaryIs:cm(kn),innerBoundaryIs:cm(kn)}),_v=gm(fv,{color:cm(jn)}),aw=gm(fv,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),bw=gm(fv,{IconStyle:cm(function(a,b,c){a={node:a};var d={},e=b.ab(),f=b.cd(),g={href:b.a.f};if(null!==e){g.w=e[0],g.h=e[1];var h=b.tb(),i=b.zb();null!==i&&null!==f&&0!==i[0]&&i[1]!==e[1]&&(g.x=i[0],g.y=f[1]-(i[1]+e[1])),null!==h&&0!==h[0]&&h[1]!==e[1]&&(d.hotSpot={x:h[0],Je:"pixels",y:e[1]-h[1],Ke:"pixels"})}d.Icon=g,e=b.n,1!==e&&(d.scale=e),b=b.i,0!==b&&(d.heading=b),b=Pv[c[c.length-1].node.namespaceURI],d=fm(d,b),km(a,Qv,zu,d,c,b)}),LabelStyle:cm(function(b,c,d){b={node:b};var e={},f=c.a;null!==f&&(e.color=f.a),c=c.c,a(c)&&1!==c&&(e.scale=c),c=Rv[d[d.length-1].node.namespaceURI],e=fm(e,c),km(b,Sv,zu,e,d,c)}),LineStyle:cm(function(a,b,c){a={node:a};var d=Tv[c[c.length-1].node.namespaceURI];b=fm({color:b.a,width:b.c},d),km(a,Uv,zu,b,c,d)}),PolyStyle:cm(function(a,b,c){km({node:a},_v,cw,[b.a],c)})}),cw=em("color"),dw=em("coordinates"),ew=em("innerBoundaryIs"),fw=em("Point"),gw=em("LineString"),hw=em("LinearRing"),iw=em("Polygon"),jw=em("outerBoundaryIs");Vm.prototype.a=function(a,b){b=zl(this,b);var c=su(fv[4],"kml");yu(c,"http://www.w3.org/2000/xmlns/","xmlns:gx",ev[0]),yu(c,"http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),yu(c,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var d={node:c},e={};1<a.length?e.Document=a:1==a.length&&(e.Placemark=a[0]);var f=Jv[c.namespaceURI],e=fm(e,f);return km(d,Kv,zu,e,[b],f),c},r(sn,lm);var kw=[null],lw=bm(kw,{nd:function(a,b){b[b.length-1].pc.push(a.getAttribute("ref"))},tag:tn}),mw=bm(kw,{node:function(a,b){var c=b[0],d=b[b.length-1],e=a.getAttribute("id"),f=[parseFloat(a.getAttribute("lon")),parseFloat(a.getAttribute("lat"))];d.pf[e]=f;var g=im({Oc:{}},nw,a,b);$(g.Oc)||(f=new Ah(f),Al(f,!1,c),c=new ul(f),c.d(e),c.G(g.Oc),d.features.push(c))},way:function(a,b){for(var c=b[0],d=a.getAttribute("id"),e=im({pc:[],Oc:{}},lw,a,b),f=b[b.length-1],g=[],h=0,i=e.pc.length;i>h;h++)L(g,ca(f.pf,e.pc[h]));e.pc[0]==e.pc[e.pc.length-1]?(h=new Mh(null),Ph(h,"XY",g,[g.length])):(h=new vj(null),xj(h,"XY",g)),Al(h,!1,c),c=new ul(h),c.d(d),c.G(e.Oc),f.features.push(c)}}),nw=bm(kw,{tag:tn});sn.prototype.Ob=function(b,c){var d=yl(this,b,c);return"osm"==b.localName&&(d=im({pf:{},features:[]},mw,b,[d]),a(d.features))?d.features:[]},sn.prototype.Lc=function(){return this.defaultDataProjection},sn.prototype.tc=function(){return this.defaultDataProjection},vn.prototype.a=function(a){return uu(a)?ao(this,a):vu(a)?bo(this,a):i(a)?(a=Xl(a),ao(this,a)):null},r(xn,Sm),Cr=xn.prototype,Cr.Ic=function(a,b){var c=this.Kc(a,b);return new ul(c)},Cr.ze=function(a,b){return[this.Ic(a,b)]},Cr.Kc=function(a,b){var c=zn(a,2,this.a);return wn(c,c.length,2,c),c=uh(c,0,c.length,2),Al(new vj(c),!1,zl(this,b))},Cr.Ce=function(){return this.defaultDataProjection},Cr.Qd=function(a,b){var c=a.N();return null!=c?this.Rc(c,b):""},Cr.ig=function(a,b){return this.Qd(a[0],b)},Cr.Rc=function(a,b){a=Al(a,!0,zl(this,b));var c=a.k,d=a.s;return wn(c,c.length,d,c),yn(c,d,this.a)},r(Cn,Bl),Cn.prototype.b=function(b,c){if("Topology"==b.type){var d,e=null,f=null;a(b.transform)&&(d=b.transform,e=d.scale,f=d.translate);var g=b.arcs;if(a(d)){d=e;var h,i,j=f;for(h=0,i=g.length;i>h;++h)for(var k=g[h],l=d,m=j,n=0,o=0,p=void 0,q=void 0,r=void 0,q=0,r=k.length;r>q;++q)p=k[q],n+=p[0],o+=p[1],p[0]=n,p[1]=o,Gn(p,l,m)}for(d=[],j=W(b.objects),h=0,i=j.length;i>h;++h)"GeometryCollection"===j[h].type?(k=j[h],d.push.apply(d,En(k,g,e,f,c))):(k=j[h],d.push(Fn(k,g,e,f,c)));return d}return[]},Cn.prototype.Ba=function(){return this.defaultDataProjection};var ow={Point:function(a,b,c){return a=a.coordinates,null===b||null===c||Gn(a,b,c),new Ah(a)},LineString:function(a,b){var c=Dn(a.arcs,b);return new vj(c)},Polygon:function(a,b){var c,d,e=[];for(c=0,d=a.arcs.length;d>c;++c)e[c]=Dn(a.arcs[c],b);return new Mh(e)},MultiPoint:function(a,b,c){a=a.coordinates;var d,e;if(null!==b&&null!==c)for(d=0,e=a.length;e>d;++d)Gn(a[d],b,c);return new Cj(a)},MultiLineString:function(a,b){var c,d,e=[];for(c=0,d=a.arcs.length;d>c;++c)e[c]=Dn(a.arcs[c],b);return new yj(e)},MultiPolygon:function(a,b){var c,d,e,f,g,h,i=[];for(g=0,h=a.arcs.length;h>g;++g){for(c=a.arcs[g],d=[],e=0,f=c.length;f>e;++e)d[e]=Dn(c[e],b);i[g]=d}return new Dj(i)}};r(Hn,lm),Hn.prototype.Ob=function(b,c){var d={featureType:this.e,featureNS:this.b};return fa(d,yl(this,b,a(c)?c:{})),d=im([],this.c.Td,b,[d],this.c),a(d)||(d=[]),d},Hn.prototype.g=function(a){return uu(a)?Kn(a):vu(a)?im({},tw,a,[]):i(a)?(a=Xl(a),Kn(a)):void 0},Hn.prototype.f=function(a){return uu(a)?In(this,a):vu(a)?Jn(this,a):i(a)?(a=Xl(a),In(this,a)):void 0};var pw={"http://www.opengis.net/gml":{boundedBy:am(om.prototype.Id,"bounds")}},qw={"http://www.opengis.net/wfs":{totalInserted:am(um),totalUpdated:am(um),totalDeleted:am(um)}},rw={"http://www.opengis.net/ogc":{FeatureId:Zl(function(a){return a.getAttribute("fid")})}},sw={"http://www.opengis.net/wfs":{Feature:function(a,b){hm(rw,a,b)}}},tw={"http://www.opengis.net/wfs":{TransactionSummary:am(function(a,b){return im({},qw,a,b)},"transactionSummary"),InsertResults:am(function(a,b){return im([],sw,a,b)},"insertIds")}},uw={"http://www.opengis.net/wfs":{PropertyName:cm(Am)}},vw={"http://www.opengis.net/wfs":{Insert:cm(function(a,b,c){var d=c[c.length-1],d=su(ca(d,"featureNS"),ca(d,"featureType"));a.appendChild(d),Bm.prototype.hg(d,b,c)}),Update:cm(function(b,c,d){var e=d[d.length-1],f=ca(e,"featureType"),g=ca(e,"featurePrefix"),g=a(g)?g:"feature",h=ca(e,"featureNS");if(b.setAttribute("typeName",g+":"+f),yu(b,"http://www.w3.org/2000/xmlns/","xmlns:"+g,h),f=c.X,a(f)){for(var g=c.I(),h=[],i=0,j=g.length;j>i;i++){var k=c.get(g[i]);a(k)&&h.push({name:g[i],value:k})}km({node:b,srsName:ca(e,"srsName")},vw,em("Property"),h,d),Ln(b,f)}}),Delete:cm(function(b,c,d){var e=d[d.length-1];d=ca(e,"featureType");var f=ca(e,"featurePrefix"),f=a(f)?f:"feature",e=ca(e,"featureNS");b.setAttribute("typeName",f+":"+d),yu(b,"http://www.w3.org/2000/xmlns/","xmlns:"+f,e),c=c.X,a(c)&&Ln(b,c)}),Property:cm(function(a,b,c){var d=su("http://www.opengis.net/wfs","Name");a.appendChild(d),Am(d,b.name),null!=b.value&&(d=su("http://www.opengis.net/wfs","Value"),a.appendChild(d),b.value instanceof ch?Bm.prototype.Rd(d,b.value,c):Am(d,b.value))}),Native:cm(function(b,c){a(c.yl)&&b.setAttribute("vendorId",c.yl),a(c.al)&&b.setAttribute("safeToIgnore",c.al),a(c.value)&&Am(b,c.value)})}},ww={"http://www.opengis.net/wfs":{Query:cm(function(b,c,d){var e=d[d.length-1],f=ca(e,"featurePrefix"),g=ca(e,"featureNS"),h=ca(e,"propertyNames"),i=ca(e,"srsName");b.setAttribute("typeName",(a(f)?f+":":"")+c),a(i)&&b.setAttribute("srsName",i),a(g)&&yu(b,"http://www.w3.org/2000/xmlns/","xmlns:"+f,g),c=ea(e),c.node=b,km(c,uw,em("PropertyName"),h,d),e=ca(e,"bbox"),a(e)&&(h=su("http://www.opengis.net/ogc","Filter"),c=ca(d[d.length-1],"geometryName"),f=su("http://www.opengis.net/ogc","BBOX"),h.appendChild(f),g=su("http://www.opengis.net/ogc","PropertyName"),Am(g,c),f.appendChild(g),Bm.prototype.Rd(f,e,d),b.appendChild(h))})}};Hn.prototype.n=function(b){var c=su("http://www.opengis.net/wfs","GetFeature");c.setAttribute("service","WFS"),c.setAttribute("version","1.1.0"),a(b)&&(a(b.handle)&&c.setAttribute("handle",b.handle),a(b.outputFormat)&&c.setAttribute("outputFormat",b.outputFormat),a(b.maxFeatures)&&c.setAttribute("maxFeatures",b.maxFeatures),a(b.resultType)&&c.setAttribute("resultType",b.resultType),a(b.rl)&&c.setAttribute("startIndex",b.rl),a(b.count)&&c.setAttribute("count",b.count)),yu(c,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.d);var d=b.featureTypes;b=[{node:c,srsName:b.srsName,featureNS:a(b.featureNS)?b.featureNS:this.b,featurePrefix:b.featurePrefix,geometryName:b.geometryName,bbox:b.bbox,Mf:a(b.Mf)?b.Mf:[]}];var e=ea(b[b.length-1]);return e.node=c,km(e,ww,em("Query"),d,b),c},Hn.prototype.j=function(b,c,d,e){var f=[],g=su("http://www.opengis.net/wfs","Transaction");g.setAttribute("service","WFS"),g.setAttribute("version","1.1.0");var h,i;return a(e)&&(h=a(e.gmlOptions)?e.gmlOptions:{},a(e.handle)&&g.setAttribute("handle",e.handle)),yu(g,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.d),null!=b&&(i={node:g,featureNS:e.featureNS,featureType:e.featureType,featurePrefix:e.featurePrefix},fa(i,h),km(i,vw,em("Insert"),b,f)),null!=c&&(i={node:g,featureNS:e.featureNS,featureType:e.featureType,featurePrefix:e.featurePrefix},fa(i,h),km(i,vw,em("Update"),c,f)),null!=d&&km({node:g,featureNS:e.featureNS,featureType:e.featureType,featurePrefix:e.featurePrefix},vw,em("Delete"),d,f),a(e.nativeElements)&&km({node:g,featureNS:e.featureNS,featureType:e.featureType,featurePrefix:e.featurePrefix},vw,em("Native"),e.nativeElements,f),g},Hn.prototype.Lc=function(a){for(a=a.firstChild;null!==a;a=a.nextSibling)if(1==a.nodeType)return this.tc(a);return null},Hn.prototype.tc=function(a){if(a=a.firstElementChild.firstElementChild,null!=a)for(a=a.firstElementChild;null!==a;a=a.nextElementSibling)if(0!==a.childNodes.length&&(1!==a.childNodes.length||3!==a.firstChild.nodeType)){var b=[{}];return this.c.Id(a,b),wc(b.pop().srsName)}return null},r(Mn,Sm);var xw={Point:Nn,LineString:On,Polygon:Pn,MultiPoint:function(a){var b=[];a=a.xd();for(var c=0,d=a.length;d>c;++c)b.push("("+Nn(a[c])+")");return b.join(",")},MultiLineString:function(a){var b=[];a=a.Ec();for(var c=0,d=a.length;d>c;++c)b.push("("+On(a[c])+")");return b.join(",")},MultiPolygon:function(a){var b=[];a=a.gd();for(var c=0,d=a.length;d>c;++c)b.push("("+Pn(a[c])+")");return b.join(",")},GeometryCollection:function(a){var b=[];a=a.af();for(var c=0,d=a.length;d>c;++c)b.push(Qn(a[c]));return b.join(",")}};Cr=Mn.prototype,Cr.Ic=function(b,c){var d=this.Kc(b,c);if(a(d)){var e=new ul;return e.Ma(d),e}return null},Cr.ze=function(a,b){var c=[],d=this.Kc(a,b);c=this.a&&"GeometryCollection"==d.H()?d.d:[d];for(var e=[],f=0,g=c.length;g>f;++f)d=new ul,d.Ma(c[f]),e.push(d);return e},Cr.Kc=function(b,c){var d;return d=new Un(new Rn(b)),d.a=Tn(d.c),d=Vn(d),a(d)?Al(d,!1,c):null},Cr.Ce=function(){return null},Cr.Qd=function(b,c){var d=b.N();return a(d)?this.Rc(d,c):""},Cr.ig=function(a,b){if(1==a.length)return this.Qd(a[0],b);for(var c=[],d=0,e=a.length;e>d;++d)c.push(a[d].N());return c=new oj(c),this.Rc(c,b)},Cr.Rc=function(a,b){return Qn(Al(a,!0,b))},Cr=Un.prototype,Cr.match=function(a){return(a=this.a.type==a)&&(this.a=Tn(this.c)),a},Cr.we=function(){if(this.match(2)){var a=Wn(this);if(this.match(3))return a}else if(Zn(this))return null;throw Error($n(this))},Cr.ve=function(){if(this.match(2)){var a=Xn(this);if(this.match(3))return a}else if(Zn(this))return[];throw Error($n(this))},Cr.xe=function(){if(this.match(2)){var a=Yn(this);if(this.match(3))return a}else if(Zn(this))return[];throw Error($n(this))},Cr.wk=function(){if(this.match(2)){var a;if(2==this.a.type)for(a=[this.we()];this.match(5);)a.push(this.we());else a=Xn(this);if(this.match(3))return a}else if(Zn(this))return[];throw Error($n(this))},Cr.vk=function(){if(this.match(2)){var a=Yn(this);if(this.match(3))return a}else if(Zn(this))return[];throw Error($n(this))},Cr.xk=function(){if(this.match(2)){for(var a=[this.xe()];this.match(5);)a.push(this.xe());if(this.match(3))return a}else if(Zn(this))return[];throw Error($n(this))};var yw={POINT:Ah,LINESTRING:vj,POLYGON:Mh,MULTIPOINT:Cj,MULTILINESTRING:yj,MULTIPOLYGON:Dj},zw={POINT:Un.prototype.we,LINESTRING:Un.prototype.ve,POLYGON:Un.prototype.xe,MULTIPOINT:Un.prototype.wk,MULTILINESTRING:Un.prototype.vk,MULTIPOLYGON:Un.prototype.xk};r(_n,vn);var Aw=[null,"http://www.opengis.net/wms"],Bw=bm(Aw,{Service:am(function(a,b){return im({},Dw,a,b)}),Capability:am(function(a,b){return im({},Cw,a,b)})}),Cw=bm(Aw,{Request:am(function(a,b){return im({},Lw,a,b)}),Exception:am(function(a,b){return im([],Hw,a,b)}),Layer:am(function(a,b){return im({},Iw,a,b)})}),Dw=bm(Aw,{Name:am(wm),Title:am(wm),Abstract:am(wm),KeywordList:am(go),OnlineResource:am(un),ContactInformation:am(function(a,b){return im({},Ew,a,b)}),Fees:am(wm),AccessConstraints:am(wm),LayerLimit:am(um),MaxWidth:am(um),MaxHeight:am(um)}),Ew=bm(Aw,{ContactPersonPrimary:am(function(a,b){return im({},Fw,a,b)}),ContactPosition:am(wm),ContactAddress:am(function(a,b){return im({},Gw,a,b)}),ContactVoiceTelephone:am(wm),ContactFacsimileTelephone:am(wm),ContactElectronicMailAddress:am(wm)}),Fw=bm(Aw,{ContactPerson:am(wm),ContactOrganization:am(wm)}),Gw=bm(Aw,{AddressType:am(wm),Address:am(wm),City:am(wm),StateOrProvince:am(wm),PostCode:am(wm),Country:am(wm)}),Hw=bm(Aw,{Format:Zl(wm)}),Iw=bm(Aw,{Name:am(wm),Title:am(wm),Abstract:am(wm),KeywordList:am(go),CRS:_l(wm),EX_GeographicBoundingBox:am(function(b,c){var d=im({},Kw,b,c);if(a(d)){var e=ca(d,"westBoundLongitude"),f=ca(d,"southBoundLatitude"),g=ca(d,"eastBoundLongitude"),d=ca(d,"northBoundLatitude");return a(e)&&a(f)&&a(g)&&a(d)?[e,f,g,d]:void 0}}),BoundingBox:_l(function(a){var b=[tm(a.getAttribute("minx")),tm(a.getAttribute("miny")),tm(a.getAttribute("maxx")),tm(a.getAttribute("maxy"))],c=[tm(a.getAttribute("resx")),tm(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),extent:b,res:c}}),Dimension:_l(function(a){return{name:a.getAttribute("name"),units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:qm(a.getAttribute("multipleValues")),nearestValue:qm(a.getAttribute("nearestValue")),current:qm(a.getAttribute("current")),values:wm(a)}}),Attribution:am(function(a,b){return im({},Jw,a,b)}),AuthorityURL:_l(function(b,c){var d=co(b,c);if(a(d)){var e=b.getAttribute("name");return d.name=e,d}}),Identifier:_l(wm),MetadataURL:_l(function(b,c){var d=co(b,c);if(a(d)){var e=b.getAttribute("type");return d.type=e,d}}),DataURL:_l(co),FeatureListURL:_l(co),Style:_l(function(a,b){return im({},Pw,a,b)}),MinScaleDenominator:am(sm),MaxScaleDenominator:am(sm),Layer:_l(function(b,c){var d=c[c.length-1],e=im({},Iw,b,c);if(a(e)){var f=qm(b.getAttribute("queryable"));return a(f)||(f=ca(d,"queryable")),e.queryable=a(f)?f:!1,f=vm(b.getAttribute("cascaded")),a(f)||(f=ca(d,"cascaded")),e.cascaded=f,f=qm(b.getAttribute("opaque")),a(f)||(f=ca(d,"opaque")),e.opaque=a(f)?f:!1,f=qm(b.getAttribute("noSubsets")),a(f)||(f=ca(d,"noSubsets")),e.noSubsets=a(f)?f:!1,f=tm(b.getAttribute("fixedWidth")),a(f)||(f=ca(d,"fixedWidth")),e.fixedWidth=f,f=tm(b.getAttribute("fixedHeight")),a(f)||(f=ca(d,"fixedHeight")),e.fixedHeight=f,B(["Style","CRS","AuthorityURL"],function(b){var c=ca(d,b);if(a(c)){var f=da(e,b),f=f.concat(c);e[b]=f}}),B("EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" "),function(b){a(ca(e,b))||(e[b]=ca(d,b))}),e}})}),Jw=bm(Aw,{Title:am(wm),OnlineResource:am(un),LogoURL:am(fo)}),Kw=bm(Aw,{westBoundLongitude:am(sm),eastBoundLongitude:am(sm),southBoundLatitude:am(sm),northBoundLatitude:am(sm)}),Lw=bm(Aw,{GetCapabilities:am(eo),GetMap:am(eo),GetFeatureInfo:am(eo)}),Mw=bm(Aw,{Format:_l(wm),DCPType:_l(function(a,b){return im({},Nw,a,b)})}),Nw=bm(Aw,{HTTP:am(function(a,b){return im({},Ow,a,b)})}),Ow=bm(Aw,{Get:am(co),
Post:am(co)}),Pw=bm(Aw,{Name:am(wm),Title:am(wm),Abstract:am(wm),LegendURL:_l(fo),StyleSheetURL:am(co),StyleURL:am(co)}),Qw=bm(Aw,{Format:am(wm),OnlineResource:am(un)}),Rw=bm(Aw,{Keyword:Zl(wm)});r(ho,lm),ho.prototype.Ob=function(b,c){var d={featureType:this.featureType,featureNS:this.featureNS};return a(c)&&fa(d,yl(this,b,c)),io(this,b,[d])};var Sw=new kc(6378137);r(jo,lb),Cr=jo.prototype,Cr.M=function(){this.b(!1),jo.S.M.call(this)},Cr.Ui=function(){var a=this.g();null!=a&&(this.e=zc(wc("EPSG:4326"),a),null===this.a||this.set("position",this.e(this.a)))},Cr.Vi=function(){if(Vs){var b=this.i();b&&!a(this.d)?this.d=Hr.navigator.geolocation.watchPosition(p(this.Ek,this),p(this.Fk,this),this.f()):!b&&a(this.d)&&(Hr.navigator.geolocation.clearWatch(this.d),this.d=void 0)}},Cr.Ek=function(a){a=a.coords,this.set("accuracy",a.accuracy),this.set("altitude",null===a.altitude?void 0:a.altitude),this.set("altitudeAccuracy",null===a.altitudeAccuracy?void 0:a.altitudeAccuracy),this.set("heading",null===a.heading?void 0:ma(a.heading)),null===this.a?this.a=[a.longitude,a.latitude]:(this.a[0]=a.longitude,this.a[1]=a.latitude);var b=this.e(this.a);this.set("position",b),this.set("speed",null===a.speed?void 0:a.speed),a=Qh(Sw,this.a,a.accuracy),a.ma(this.e),this.set("accuracyGeometry",a),this.l()},Cr.Fk=function(a){a.type="error",this.b(!1),this.dispatchEvent(a)},Cr.$e=function(){return this.get("accuracy")},jo.prototype.getAccuracy=jo.prototype.$e,jo.prototype.p=function(){return this.get("accuracyGeometry")||null},jo.prototype.getAccuracyGeometry=jo.prototype.p,jo.prototype.q=function(){return this.get("altitude")},jo.prototype.getAltitude=jo.prototype.q,jo.prototype.r=function(){return this.get("altitudeAccuracy")},jo.prototype.getAltitudeAccuracy=jo.prototype.r,jo.prototype.F=function(){return this.get("heading")},jo.prototype.getHeading=jo.prototype.F,jo.prototype.J=function(){return this.get("position")},jo.prototype.getPosition=jo.prototype.J,jo.prototype.g=function(){return this.get("projection")},jo.prototype.getProjection=jo.prototype.g,jo.prototype.t=function(){return this.get("speed")},jo.prototype.getSpeed=jo.prototype.t,jo.prototype.i=function(){return this.get("tracking")},jo.prototype.getTracking=jo.prototype.i,jo.prototype.f=function(){return this.get("trackingOptions")},jo.prototype.getTrackingOptions=jo.prototype.f,jo.prototype.n=function(a){this.set("projection",a)},jo.prototype.setProjection=jo.prototype.n,jo.prototype.b=function(a){this.set("tracking",a)},jo.prototype.setTracking=jo.prototype.b,jo.prototype.j=function(a){this.set("trackingOptions",a)},jo.prototype.setTrackingOptions=jo.prototype.j;var Tw=new bi({color:"rgba(0,0,0,0.2)"}),Uw=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001];Cr=no.prototype,Cr.Wi=function(){return this.g},Cr.wh=function(){return this.a},Cr.Bh=function(){return this.c},Cr.jf=function(a){var b=a.vectorContext,c=a.frameState;a=c.extent;var d=c.viewState,e=d.center,f=d.projection,d=d.resolution,c=c.pixelRatio,c=d*d/(4*c*c);if(null===this.o||!xc(this.o,f)){var g=f.D(),h=f.d,i=h[2],j=h[1],k=h[0];this.b=h[3],this.d=i,this.e=j,this.f=k,h=wc("EPSG:4326"),this.i=yc(h,f),this.j=yc(f,h),this.n=this.j(Zb(g)),this.o=f}for(var l,f=this.n[0],g=this.n[1],h=-1,j=Math.pow(this.r*d,2),k=[],m=[],d=0,i=Uw.length;i>d&&(l=Uw[d]/2,k[0]=f-l,k[1]=g-l,m[0]=f+l,m[1]=g+l,this.i(k,k),this.i(m,m),l=Math.pow(m[0]-k[0],2)+Math.pow(m[1]-k[1],2),!(j>=l));++d)h=Uw[d];if(d=h,-1==d)this.a.length=this.c.length=0;else{for(f=this.j(e),e=f[0],f=f[1],g=this.p,e=Math.floor(e/d)*d,j=ja(e,this.f,this.d),i=oo(this,j,c,a,0),h=0;j!=this.f&&h++<g;)j=Math.max(j-d,this.f),i=oo(this,j,c,a,i);for(j=ja(e,this.f,this.d),h=0;j!=this.d&&h++<g;)j=Math.min(j+d,this.d),i=oo(this,j,c,a,i);for(this.a.length=i,f=Math.floor(f/d)*d,e=ja(f,this.e,this.b),i=po(this,e,c,a,0),h=0;e!=this.e&&h++<g;)e=Math.max(e-d,this.e),i=po(this,e,c,a,i);for(e=ja(f,this.e,this.b),h=0;e!=this.b&&h++<g;)e=Math.min(e+d,this.b),i=po(this,e,c,a,i);this.c.length=i}for(b.wa(null,this.q),a=0,c=this.a.length;c>a;++a)e=this.a[a],b.Cb(e,null);for(a=0,c=this.c.length;c>a;++a)e=this.c[a],b.Cb(e,null)},Cr.setMap=function(a){null!==this.g&&(this.g.v("postcompose",this.jf,this),this.g.render()),null!==a&&(a.u("postcompose",this.jf,this),a.render()),this.g=a},r(qo,Pf),qo.prototype.c=function(b){if(a(b)){var c=m(b);return c in this.d?this.d[c]:(b=$(this.d)?this.a:this.a.cloneNode(!1),this.d[c]=b)}return this.a},qo.prototype.i=function(){this.state=3,B(this.b,Ua),this.b=null,this.dispatchEvent("change")},qo.prototype.n=function(){a(this.resolution)||(this.resolution=ac(this.extent)/this.a.height),this.state=2,B(this.b,Ua),this.b=null,this.dispatchEvent("change")},qo.prototype.load=function(){0==this.state&&(this.state=1,this.b=[Sa(this.a,"error",this.i,!1,this),Sa(this.a,"load",this.n,!1,this)],this.g(this,this.o))},r(ro,Pf),ro.prototype.c=function(){return this.a},r(so,Qf),Cr=so.prototype,Cr.Na=function(b){if(a(b)){var c=m(b);return c in this.d?this.d[c]:(b=$(this.d)?this.c:this.c.cloneNode(!1),this.d[c]=b)}return this.c},Cr.mb=function(){return this.g},Cr.Xi=function(){this.state=3,B(this.b,Ua),this.b=null,Rf(this)},Cr.Yi=function(){this.state=this.c.naturalWidth&&this.c.naturalHeight?2:4,B(this.b,Ua),this.b=null,Rf(this)},Cr.load=function(){0==this.state&&(this.state=1,this.b=[Sa(this.c,"error",this.Xi,!1,this),Sa(this.c,"load",this.Yi,!1,this)],this.o(this,this.g))},r(vo,eb),Cr=vo.prototype,Cr.Dc=!1,Cr.M=function(){vo.S.M.call(this),this.a.hc()},Cr.nk=function(a){var b=a.a.dataTransfer;(this.Dc=!(!b||!(b.types&&(G(b.types,"Files")||G(b.types,"public.file-url"))||b.files&&0<b.files.length)))&&a.preventDefault()},Cr.ok=function(a){this.Dc&&(a.preventDefault(),a.a.dataTransfer.dropEffect="none")},Cr.pk=function(a){this.Dc&&(a.preventDefault(),a.lb(),a=a.a.dataTransfer,a.effectAllowed="all",a.dropEffect="copy")},Cr.qk=function(a){this.Dc&&(a.preventDefault(),a.lb(),a=new Ea(a.a),a.type="drop",this.dispatchEvent(a))};var Vw,Ww=!1,Xw=[],Yw=0,Zw=2,$w=3;Co.prototype.then=function(a,b,c){return Fo(this,k(a)?a:null,k(b)?b:null,c)},wo(Co),Co.prototype.cancel=function(a){this.c==Yw&&yo(function(){var b=new Lo(a);Do(this,b)},this)},Co.prototype.g=function(a){this.c=Yw,Go(this,Zw,a)},Co.prototype.o=function(a){this.c=Yw,Go(this,$w,a)},Co.prototype.i=function(){for(;this.a&&this.a.length;){var a=this.a;this.a=[];for(var b=0;b<a.length;b++)Jo(this,a[b],this.c,this.f)}this.e=!1};var _w=Te;r(Lo,s),Lo.prototype.name="cancel",Mo.prototype.cancel=function(a){if(this.a)this.b instanceof Mo&&this.b.cancel();else{if(this.c){var b=this.c;delete this.c,a?b.cancel(a):(b.o--,0>=b.o&&b.cancel())}this.p?this.p.call(this.j,this):this.i=!0,this.a||(a=new To,Oo(this),No(this,!1,a))}},Mo.prototype.n=function(a,b){this.g=!1,No(this,a,b)},Mo.prototype.then=function(a,b,c){var d,e,f=new Co(function(a,b){d=a,e=b});return Po(this,d,function(a){a instanceof To?f.cancel():e(a)}),f.then(a,b,c)},wo(Mo),r(So,s),So.prototype.message="Deferred has already fired",So.prototype.name="AlreadyCalledError",r(To,s),To.prototype.message="Deferred was canceled",To.prototype.name="CanceledError",Uo.prototype.c=function(){throw delete ax[this.X],this.a};var ax={};r(Vo,s);var bx={AbortError:3,EncodingError:5,InvalidModificationError:9,InvalidStateError:7,NotFoundError:1,NotReadableError:4,NoModificationAllowedError:6,PathExistsError:12,QuotaExceededError:10,SecurityError:2,SyntaxError:8,TypeMismatchError:11};r(Xo,Aa),r(Yo,eb),Yo.prototype.getError=function(){return this.bb.error&&new Vo(this.bb.error,"reading file")},Yo.prototype.a=function(a){this.dispatchEvent(new Xo(a,this))},Yo.prototype.M=function(){Yo.S.M.call(this),delete this.bb},r($o,Gg),$o.prototype.M=function(){a(this.d)&&Ua(this.d),$o.S.M.call(this)},$o.prototype.g=function(a){a=a.a.dataTransfer.files;var b,c,d;for(b=0,c=a.length;c>b;++b){var e=d=a[b],f=new Yo,g=Zo(f);f.bb.readAsText(e,""),Po(g,q(this.i,d),null,this)}},$o.prototype.i=function(a,b){var c=this.n,d=this.j;null===d&&(d=c.a().q);var e,f,c=this.f,g=[];for(e=0,f=c.length;f>e;++e){var h,i=new c[e];try{h=i.ja(b)}catch(j){h=null}if(null!==h){var k,l,i=i.Ba(b),i=yc(i,d);for(k=0,l=h.length;l>k;++k){var m=h[k],n=m.N();null!=n&&n.ma(i),g.push(m)}}}this.dispatchEvent(new _o(cx,this,a,g,d))},$o.prototype.setMap=function(b){a(this.d)&&(Ua(this.d),this.d=void 0),null!==this.e&&(za(this.e),this.e=null),$o.S.setMap.call(this,b),null!==b&&(this.e=new vo(b.b),this.d=Pa(this.e,"drop",this.g,!1,this))};var cx="addfeatures";r(_o,Aa),r(ap,$c),ap.prototype.clone=function(){return new ap(this.x,this.y)},ap.prototype.scale=$c.prototype.scale,ap.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},ap.prototype.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;return this.x=this.x*b-this.y*a,this.y=c,this},r(bp,Tg);var dx;!function(){var a={Ze:{}};!function(){function b(a,c){return this instanceof b?(this.$d=Math.max(4,a||9),this.Qe=Math.max(2,Math.ceil(.4*this.$d)),c&&this.Og(c),void this.clear()):new b(a,c)}function c(a,b){a.bbox=d(a,0,a.children.length,b)}function d(a,b,c,d){for(var f,g=[1/0,1/0,-(1/0),-(1/0)];c>b;b++)f=a.children[b],e(g,a.ua?d(f):f.bbox);return g}function e(a,b){a[0]=Math.min(a[0],b[0]),a[1]=Math.min(a[1],b[1]),a[2]=Math.max(a[2],b[2]),a[3]=Math.max(a[3],b[3])}function f(a,b){return a.bbox[0]-b.bbox[0]}function g(a,b){return a.bbox[1]-b.bbox[1]}function h(a){return(a[2]-a[0])*(a[3]-a[1])}function i(a){return a[2]-a[0]+(a[3]-a[1])}function j(a,b){return a[0]<=b[0]&&a[1]<=b[1]&&b[2]<=a[2]&&b[3]<=a[3]}function k(a,b){return b[0]<=a[2]&&b[1]<=a[3]&&b[2]>=a[0]&&b[3]>=a[1]}function l(a,b,c,d,e){for(var f,g=[b,c];g.length;)c=g.pop(),b=g.pop(),d>=c-b||(f=b+Math.ceil((c-b)/d/2)*d,m(a,b,c,f,e),g.push(b,f,f,c))}function m(a,b,c,d,e){for(var f,g,h,i,j;c>b;){for(c-b>600&&(f=c-b+1,g=d-b+1,h=Math.log(f),i=.5*Math.exp(2*h/3),j=.5*Math.sqrt(h*i*(f-i)/f)*(0>g-f/2?-1:1),h=Math.max(b,Math.floor(d-g*i/f+j)),g=Math.min(c,Math.floor(d+(f-g)*i/f+j)),m(a,h,g,d,e)),f=a[d],g=b,i=c,n(a,b,d),0<e(a[c],f)&&n(a,b,c);i>g;){for(n(a,g,i),g++,i--;0>e(a[g],f);)g++;for(;0<e(a[i],f);)i--}0===e(a[b],f)?n(a,b,i):(i++,n(a,i,c)),d>=i&&(b=i+1),i>=d&&(c=i-1)}}function n(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}b.prototype={all:function(){return this.Me(this.data,[])},search:function(a){var b=this.data,c=[],d=this.Ca;if(!k(a,b.bbox))return c;for(var e,f,g,h,i=[];b;){for(e=0,f=b.children.length;f>e;e++)g=b.children[e],h=b.ua?d(g):g.bbox,k(a,h)&&(b.ua?c.push(g):j(a,h)?this.Me(g,c):i.push(g));b=i.pop()}return c},load:function(a){if(!a||!a.length)return this;if(a.length<this.Qe){for(var b=0,c=a.length;c>b;b++)this.na(a[b]);return this}return a=this.Oe(a.slice(),0,a.length-1,0),this.data.children.length?this.data.height===a.height?this.Re(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this.Pe(a,this.data.height-a.height-1,!0)):this.data=a,this},na:function(a){return a&&this.Pe(a,this.data.height-1),this},clear:function(){return this.data={children:[],height:1,bbox:[1/0,1/0,-(1/0),-(1/0)],ua:!0},this},remove:function(a){if(!a)return this;for(var b,c,d,e,f=this.data,g=this.Ca(a),h=[],i=[];f||h.length;){if(f||(f=h.pop(),c=h[h.length-1],b=i.pop(),e=!0),f.ua&&(d=f.children.indexOf(a),-1!==d)){f.children.splice(d,1),h.push(f),this.Ng(h);break}e||f.ua||!j(f.bbox,g)?c?(b++,f=c.children[b],e=!1):f=null:(h.push(f),i.push(b),b=0,c=f,f=f.children[0])}return this},Ca:function(a){return a},ce:function(a,b){return a[0]-b[0]},de:function(a,b){return a[1]-b[1]},toJSON:function(){return this.data},Me:function(a,b){for(var c=[];a;)a.ua?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},Oe:function(a,b,d,e){var f,g=d-b+1,h=this.$d;if(h>=g)return f={children:a.slice(b,d+1),height:1,bbox:null,ua:!0},c(f,this.Ca),f;e||(e=Math.ceil(Math.log(g)/Math.log(h)),h=Math.ceil(g/Math.pow(h,e-1))),f={children:[],height:e,bbox:null};var i,j,k,g=Math.ceil(g/h),h=g*Math.ceil(Math.sqrt(h));for(l(a,b,d,h,this.ce);d>=b;b+=h)for(j=Math.min(b+h-1,d),l(a,b,j,g,this.de),i=b;j>=i;i+=g)k=Math.min(i+g-1,j),f.children.push(this.Oe(a,i,k,e-1));return c(f,this.Ca),f},Mg:function(a,b,c,d){for(var e,f,g,i,j,k,l,m;d.push(b),!b.ua&&d.length-1!==c;){for(l=m=1/0,e=0,f=b.children.length;f>e;e++){g=b.children[e],j=h(g.bbox),k=a;var n=g.bbox;k=(Math.max(n[2],k[2])-Math.min(n[0],k[0]))*(Math.max(n[3],k[3])-Math.min(n[1],k[1]))-j,m>k?(m=k,l=l>j?j:l,i=g):k===m&&l>j&&(l=j,i=g)}b=i}return b},Pe:function(a,b,c){var d=this.Ca;c=c?a.bbox:d(a);var d=[],f=this.Mg(c,this.data,b,d);for(f.children.push(a),e(f.bbox,c);b>=0&&d[b].children.length>this.$d;)this.Pg(d,b),b--;this.Jg(c,d,b)},Pg:function(a,b){var d=a[b],e=d.children.length,f=this.Qe;this.Kg(d,f,e),e={children:d.children.splice(this.Lg(d,f,e)),height:d.height},d.ua&&(e.ua=!0),c(d,this.Ca),c(e,this.Ca),b?a[b-1].children.push(e):this.Re(d,e)},Re:function(a,b){this.data={children:[a,b],height:a.height+1},c(this.data,this.Ca)},Lg:function(a,b,c){var e,f,g,i,j,k,l;for(j=k=1/0,e=b;c-b>=e;e++){f=d(a,0,e,this.Ca),g=d(a,e,c,this.Ca);var m=f,n=g;i=Math.max(m[0],n[0]);var o=Math.max(m[1],n[1]),p=Math.min(m[2],n[2]),m=Math.min(m[3],n[3]);i=Math.max(0,p-i)*Math.max(0,m-o),f=h(f)+h(g),j>i?(j=i,l=e,k=k>f?f:k):i===j&&k>f&&(k=f,l=e)}return l},Kg:function(a,b,c){var d=a.ua?this.ce:f,e=a.ua?this.de:g,h=this.Ne(a,b,c,d);b=this.Ne(a,b,c,e),b>h&&a.children.sort(d)},Ne:function(a,b,c,f){a.children.sort(f),f=this.Ca;var g,h,j=d(a,0,b,f),k=d(a,c-b,c,f),l=i(j)+i(k);for(g=b;c-b>g;g++)h=a.children[g],e(j,a.ua?f(h):h.bbox),l+=i(j);for(g=c-b-1;g>=b;g--)h=a.children[g],e(k,a.ua?f(h):h.bbox),l+=i(k);return l},Jg:function(a,b,c){for(;c>=0;c--)e(b[c].bbox,a)},Ng:function(a){for(var b,d=a.length-1;d>=0;d--)0===a[d].children.length?d>0?(b=a[d-1].children,b.splice(b.indexOf(a[d]),1)):this.clear():c(a[d],this.Ca)},Og:function(a){var b=["return a"," - b",";"];this.ce=new Function("a","b",b.join(a[0])),this.de=new Function("a","b",b.join(a[1])),this.Ca=new Function("a","return [a"+a.join(", a")+"];")}},"function"==typeof define&&define.Ul?define(function(){return b}):"undefined"!=typeof a?a.Ze=b:"undefined"!=typeof self?self.a=b:window.a=b}(),dx=a.Ze}(),Cr=fp.prototype,Cr.na=function(a,b){var c=[a[0],a[1],a[2],a[3],b];this.a.na(c),ba(this.c,m(b).toString(),c)},Cr.load=function(a,b){for(var c=Array(b.length),d=0,e=b.length;e>d;d++){var f=a[d],g=b[d],f=[f[0],f[1],f[2],f[3],g];c[d]=f,ba(this.c,m(g).toString(),f)}this.a.load(c)},Cr.remove=function(a){a=m(a).toString();var b=ca(this.c,a);return aa(this.c,a),null!==this.a.remove(b)},Cr.update=function(a,b){this.remove(b),this.na(a,b)},Cr.forEach=function(a,b){return jp(gp(this),a,b)},Cr.ia=function(){return $(this.c)},Cr.clear=function(){this.a.clear(),this.c={}},Cr.D=function(){return this.a.data.bbox},r(kp,Kf),Cr=kp.prototype,Cr.Pa=function(a){var b=m(a).toString();lp(this,b,a);var c=a.N();null!=c?(c=c.D(),this.b.na(c,a)):this.d[b]=a,mp(this,b,a),this.dispatchEvent(new pp("addfeature",a)),this.l()},Cr.ya=function(a){this.fb(a),this.l()},Cr.fb=function(a){var b,c,d,e,f=[],g=[];for(c=0,d=a.length;d>c;c++){e=a[c],b=m(e).toString(),lp(this,b,e);var h=e.N();null!=h?(b=h.D(),f.push(b),g.push(e)):this.d[b]=e}for(this.b.load(f,g),c=0,d=a.length;d>c;c++)e=a[c],b=m(e).toString(),mp(this,b,e),this.dispatchEvent(new pp("addfeature",e))},Cr.clear=function(a){if(a){for(var b in this.i)B(this.i[b],Ua);this.i={},this.f={},this.o={}}else a=this.Xf,this.b.forEach(a,this),T(this.d,a,this);this.b.clear(),this.d={},this.dispatchEvent(new pp("clear")),this.l()},Cr.Xa=function(a,b){return this.b.forEach(a,b)},Cr.ra=function(a,b,c){return ip(this.b,a,b,c)},Cr.Db=function(a,b,c,d){return this.ra(a,c,d)},Cr.Fa=function(a,b,c){return this.ra(a,function(d){return d.N().ha(a)&&(d=b.call(c,d))?d:void 0})},Cr.va=function(){var a=gp(this.b);return $(this.d)||L(a,W(this.d)),a},Cr.Ia=function(a){var b=[];return np(this,a,function(a){b.push(a)}),b},Cr.Ya=function(a){var b=a[0],c=a[1],d=null,e=[NaN,NaN],f=1/0,g=[-(1/0),-(1/0),1/0,1/0];return ip(this.b,g,function(a){var h=a.N(),i=f;f=h.Va(b,c,e,f),i>f&&(d=a,a=Math.sqrt(f),g[0]=b-a,g[1]=c-a,g[2]=b+a,g[3]=c+a)}),d},Cr.D=function(){return this.b.D()},Cr.Ha=function(b){return b=this.f[b.toString()],a(b)?b:null},Cr.Af=function(b){b=b.target;var c=m(b).toString(),d=b.N();null!=d?(d=d.D(),c in this.d?(delete this.d[c],this.b.na(d,b)):this.b.update(d,b)):c in this.d||(this.b.remove(b),this.d[c]=b),d=b.X,a(d)?(d=d.toString(),c in this.o?(delete this.o[c],this.f[d]=b):this.f[d]!==b&&(op(this,b),this.f[d]=b)):c in this.o||(op(this,b),this.o[c]=b),this.l(),this.dispatchEvent(new pp("changefeature",b))},Cr.ia=function(){return this.b.ia()&&$(this.d)},Cr.Hb=c,Cr.$a=function(a){var b=m(a).toString();b in this.d?delete this.d[b]:this.b.remove(a),this.Xf(a),this.l()},Cr.Xf=function(b){var c=m(b).toString();B(this.i[c],Ua),delete this.i[c];var d=b.X;a(d)?delete this.f[d.toString()]:delete this.o[c],this.dispatchEvent(new pp("removefeature",b))},r(pp,Aa),r(qp,Aa),r(rp,Tg),rp.prototype.setMap=function(a){rp.S.setMap.call(this,a),this.ea()},rp.prototype.V=function(){var a,b=zp(this),c=b.N();this.d===ex?a=c.K():this.d===fx?(a=c.K(),a.pop(),c.U(a)):this.d===gx&&(this.f[0].pop(),this.f[0].push(this.f[0][0]),c.U(this.f),a=c.K()),"MultiPoint"===this.F?b.Ma(new Cj([a])):"MultiLineString"===this.F?b.Ma(new yj([a])):"MultiPolygon"===this.F&&b.Ma(new Dj([a])),null===this.ba||this.ba.push(b),null===this.ga||this.ga.Pa(b),this.dispatchEvent(new qp("drawend",b))},rp.prototype.q=zs,rp.prototype.ea=function(){var a=this.n,b=this.a();null!==a&&b||zp(this),this.J.setMap(b?a:null)};var ex="Point",fx="LineString",gx="Polygon";r(Bp,Tg),Cr=Bp.prototype,Cr.wf=function(b){var c=b.N();a(this.F[c.H()])&&this.F[c.H()].call(this,b,c),b=this.n,null===b||Hp(this,this.Q,b)},Cr.setMap=function(a){this.j.setMap(a),Bp.S.setMap.call(this,a)},Cr.Wh=function(a){this.wf(a.element)},Cr.Xh=function(a){var b=a.element;a=this.d;var c,d=[];for(ip(a,b.N().D(),function(a){b===a.feature&&d.push(a)}),c=d.length-1;c>=0;--c)a.remove(d[c]);null!==this.f&&0===this.r.Ib()&&(this.j.wd(this.f),this.f=null)},Cr.Fl=function(a,b){var c=b.K(),c={feature:a,geometry:b,fa:[c,c]};this.d.na(b.D(),c)},Cr.Cl=function(a,b){var c,d,e,f=b.K();for(d=0,e=f.length;e>d;++d)c=f[d],c={feature:a,geometry:b,depth:[d],index:d,fa:[c,c]},this.d.na(b.D(),c)},Cr.jg=function(a,b){var c,d,e,f,g=b.K();for(c=0,d=g.length-1;d>c;++c)e=g.slice(c,c+2),f={feature:a,geometry:b,index:c,fa:e},this.d.na(Jb(e),f)},Cr.Bl=function(a,b){var c,d,e,f,g,h,i,j=b.K();for(f=0,g=j.length;g>f;++f)for(c=j[f],d=0,e=c.length-1;e>d;++d)h=c.slice(d,d+2),i={feature:a,geometry:b,depth:[f],index:d,fa:h},this.d.na(Jb(h),i)},Cr.Hl=function(a,b){var c,d,e,f,g,h,i,j=b.K();for(f=0,g=j.length;g>f;++f)for(c=j[f],d=0,e=c.length-1;e>d;++d)h=c.slice(d,d+2),i={feature:a,geometry:b,depth:[f],index:d,fa:h},this.d.na(Jb(h),i)},Cr.El=function(a,b){var c,d,e,f,g,h,i,j,k,l,m=b.K();for(h=0,i=m.length;i>h;++h)for(j=m[h],f=0,g=j.length;g>f;++f)for(c=j[f],d=0,e=c.length-1;e>d;++d)k=c.slice(d,d+2),l={feature:a,geometry:b,depth:[f,h],index:d,fa:k},this.d.na(Jb(k),l)},Cr.Al=function(a,b){var c,d=b.d;for(c=0;c<d.length;++c)this.F[d[c].H()].call(this,a,d[c])},Cr.ui=function(a,b){for(var c,d=a.fa,e=a.feature,f=a.geometry,g=a.depth,h=a.index;b.length<f.s;)b.push(0);switch(f.H()){case"MultiLineString":c=f.K(),c[g[0]].splice(h+1,0,b);break;case"Polygon":c=f.K(),c[g[0]].splice(h+1,0,b);break;case"MultiPolygon":c=f.K(),c[g[1]][g[0]].splice(h+1,0,b);break;case"LineString":c=f.K(),c.splice(h+1,0,b);break;default:return}f.U(c),c=this.d,c.remove(a),Ip(this,f,h,g,1);var i={fa:[d[0],b],feature:e,geometry:f,depth:g,index:h};c.na(Jb(i.fa),i),this.g.push([i,1]),d={fa:[b,d[1]],feature:e,geometry:f,depth:g,index:h+1},c.na(Jb(d.fa),d),this.g.push([d,0])},r(Kp,Gg),Kp.prototype.j=function(){return this.d.a},Kp.prototype.setMap=function(a){var b=this.n,c=this.d.a;null===b||c.forEach(b.fc,b),Kp.S.setMap.call(this,a),this.d.setMap(a),null===a||c.forEach(a.eb,a)},Kp.prototype.i=function(a){a=a.element;var b=this.n;null===b||b.eb(a)},Kp.prototype.q=function(a){a=a.element;var b=this.n;null===b||b.fc(a)},r(Np,Hi);var hx=["#00f","#0ff","#0f0","#ff0","#f00"];Np.prototype.qa=function(){return this.get("gradient")},Np.prototype.getGradient=Np.prototype.qa,Np.prototype.Wd=function(){for(var a=this.qa(),b=ud(1,256),c=b.createLinearGradient(0,0,1,256),d=1/(a.length-1),e=0,f=a.length;f>e;++e)c.addColorStop(e*d,a[e]);b.fillStyle=c,b.fillRect(0,0,1,256),this.ea=b.getImageData(0,0,1,256).data},Np.prototype.Xd=function(a){a=a.context;var b,c,d,e=a.canvas,e=a.getImageData(0,0,e.width,e.height),f=e.data;for(b=0,c=f.length;c>b;b+=4)(d=4*f[b+3])&&(f[b]=this.ea[d],f[b+1]=this.ea[d+1],f[b+2]=this.ea[d+2]);a.putImageData(e,0,0)},Np.prototype.fc=function(a){this.set("gradient",a)},Np.prototype.setGradient=Np.prototype.fc;var ix=0,jx=1;r(Up,s);var kx=0;Vp.prototype.send=function(a,b,c,d){a=a||null,d=d||"_"+(kx++).toString(36)+Kr().toString(36),Hr._callbacks_||(Hr._callbacks_={});var e=this.c.clone();if(a)for(var f in a)if(!a.hasOwnProperty||a.hasOwnProperty(f)){var h=e,i=f,j=a[f];g(j)||(j=[String(j)]),Me(h.a,i,j)}return b&&(Hr._callbacks_[d]=Xp(d,b),b=this.a,f="_callbacks_."+d,g(f)||(f=[String(f)]),Me(e.a,b,f)),b=Qp(e.toString(),{timeout:this.bc,Zg:!0}),Po(b,null,Wp(d,a,c),void 0),{X:d,Xe:b}},Vp.prototype.cancel=function(a){a&&(a.Xe&&a.Xe.cancel(),a.X&&Yp(a.X,!1))},r(dq,Ik),r(gq,$f),Cr=gq.prototype,Cr.zd=function(){return eq(this.b)},Cr.se=function(a){fq(this.b,a)},Cr.Fb=function(b,c,d,e,f){var g=this.hb(b,c,d);return Jk(this.b,g)?this.b.get(g):(b=[b,c,d],e=this.tileUrlFunction(b,e,f),e=new this.tileClass(b,a(e)?0:4,a(e)?e:"",this.crossOrigin,this.tileLoadFunction),this.b.set(g,e),e)},Cr.ib=function(){return this.tileLoadFunction},Cr.jb=function(){return this.tileUrlFunction},Cr.ob=function(a){this.b.clear(),this.tileLoadFunction=a,this.l()},Cr.pa=function(a){this.b.clear(),this.tileUrlFunction=a,this.l()},Cr.He=function(a,b,c){a=this.hb(a,b,c),Jk(this.b,a)&&this.b.get(a)},r(iq,Sf),iq.prototype.Bb=function(b){b=a(b)?b:{};var c=this.minZoom,d=this.maxZoom,e=a(b.wrapX)?b.wrapX:!0,f=null;if(a(b.extent)){var g,f=Array(d+1);for(g=0;d>=g;++g)f[g]=c>g?null:Uf(this,b.extent,g)}return function(a,b,g){if(b=a[0],c>b||b>d)return null;var h=Math.pow(2,b),i=a[1];if(e)i=ka(i,h);else if(0>i||i>=h)return null;return a=a[2],-h>a||a>-1||null!==f&&!Xc(f[b],i,a)?null:Qc(b,i,-a-1,g)}},iq.prototype.kd=function(a,b){if(a[0]<this.maxZoom){var c=2*a[1],d=2*a[2];return Vc(c,c+1,d,d+1,b)}return null},iq.prototype.$c=function(a,b,c,d){for(d=Vc(0,a[1],0,a[2],d),a=a[0]-1;a>=this.minZoom;--a)if(d.a=d.d>>=1,d.b=d.c>>=1,b.call(c,a,d))return!0;return!1},r(jq,gq);var lx=new Zc({html:'<a class="ol-attribution-bing-tos" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'});jq.prototype.f=function(a){if(200!=a.statusCode||"OK"!=a.statusDescription||"ValidCredentials"!=a.authenticationResultCode||1!=a.resourceSets.length||1!=a.resourceSets[0].resources.length)Lf(this,"error");else{var b=a.brandLogoUri,c=a.resourceSets[0].resources[0],d=-1==this.a?c.zoomMax:this.a,e=new iq({extent:Zf(this.g),minZoom:c.zoomMin,maxZoom:d,tileSize:c.imageWidth});this.tileGrid=e;var f=this.d;if(this.tileUrlFunction=bq(e.Bb(),_p(D(c.imageUrlSubdomains,function(a){var b=c.imageUrl.replace("{subdomain}",a).replace("{culture}",f);return function(a){return null===a?void 0:b.replace("{quadkey}",Sc(a))}}))),c.imageryProviders){var g=zc(wc("EPSG:4326"),this.g);a=D(c.imageryProviders,function(a){var b=a.attribution,c={};return B(a.coverageAreas,function(a){var b=a.zoomMin,f=Math.min(a.zoomMax,d);a=a.bbox,a=jc([a[1],a[0],a[3],a[2]],g);var h,i;for(h=b;f>=h;++h)i=h.toString(),b=Uf(e,a,h),i in c?c[i].push(b):c[i]=[b]}),new Zc({html:b,tileRanges:c})}),a.push(lx),this.e=a}this.r=b,Lf(this,"ready")}},r(kq,kp),kq.prototype.Hb=function(a,b,c){b!==this.j&&(this.clear(),this.j=b,this.p.Hb(a,b,c),lq(this),this.ya(this.a))},kq.prototype.t=function(){this.clear(),lq(this),this.ya(this.a),this.l()},oq.prototype.a=null;var mx;r(qq,oq),mx=new qq,r(tq,eb);var nx="",ox=/^https?$/i,px=["POST","PUT"];Cr=tq.prototype,Cr.send=function(a,b,c,d){if(this.T)throw Error("[goog.net.XhrIo] Object is active with another request="+this.p+"; newUri="+a);b=b?b.toUpperCase():"GET",this.p=a,this.e="",this.n=!1,this.a=!0,this.T=rq(this.i?this.i:mx),this.o=pq(this.i?this.i:mx),this.T.onreadystatechange=p(this.Hf,this);try{this.j=!0,this.T.open(b,String(a),!0),this.j=!1}catch(e){return void wq(this,e)}a=c||"";var f=this.r.clone();d&&se(d,function(a,b){f.set(b,a)}),d=F(f.I()),c=Hr.FormData&&a instanceof Hr.FormData,!G(px,b)||d||c||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),f.forEach(function(a,b){this.T.setRequestHeader(b,a)},this),this.f&&(this.T.responseType=this.f),"withCredentials"in this.T&&(this.T.withCredentials=this.t);try{Aq(this),0<this.g&&((this.q=uq(this.T))?(this.T.timeout=this.g,this.T.ontimeout=p(this.bc,this)):this.b=nq(this.bc,this.g,this)),this.d=!0,this.T.send(a),this.d=!1}catch(g){wq(this,g)}},Cr.bc=function(){"undefined"!=typeof Gr&&this.T&&(this.e="Timed out after "+this.g+"ms, aborting",this.dispatchEvent("timeout"),this.T&&this.a&&(this.a=!1,this.c=!0,this.T.abort(),this.c=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),zq(this)))},Cr.M=function(){this.T&&(this.a&&(this.a=!1,this.c=!0,this.T.abort(),this.c=!1),zq(this,!0)),tq.S.M.call(this)},Cr.Hf=function(){this.Sa||(this.j||this.d||this.c?yq(this):this.rk())},Cr.rk=function(){yq(this)},r(Gq,kp),Gq.prototype.a=function(a){return this.format.ja(a,{featureProjection:this.g})},r(Iq,Gq),Iq.prototype.j=function(){Lf(this,"error")},Iq.prototype.p=function(a){this.fb(a),Lf(this,"ready")},r(Jq,Iq),r(Kq,Iq),r(Lq,Iq),r(Mq,Kf),r(Pq,Mq),Pq.prototype.rc=function(a,b,c,d){b=Nq(this,b);var e=this.p;return null!==e&&this.q==this.c&&e.resolution==b&&e.e==c&&Nb(e.D(),a)?e:(a=a.slice(),ic(a,this.F),d=this.t(a,b,c,[ec(a)/b*c,ac(a)/b*c],d),null===d||(e=new ro(a,b,c,this.e,d)),this.p=e,this.q=this.c,e)},r(Qq,Mq),Qq.prototype.J=function(){return this.a},Qq.prototype.rc=function(b,c,d,e){c=Nq(this,c),d=this.t?d:1;var f=this.d;return null!==f&&this.i==this.c&&f.resolution==c&&f.e==d&&Nb(f.D(),b)?f:(1!=this.f&&(b=b.slice(),ic(b,this.f)),e=this.j(b,[ec(b)/c*d,ac(b)/c*d],e),f=a(e)?new qo(b,c,d,this.e,e,this.q,this.F):null,this.d=f,this.i=this.c,f)},Qq.prototype.V=function(a){fa(this.a,a),this.l()},Qq.prototype.Q=function(a,b,c,d){var e;e=this.p;var f=ec(c),g=ac(c),h=d[0],i=d[1],j=.0254/this.b;return e=i*f>h*g?f*e/(h*j):g*e/(i*j),c=Zb(c),d={OPERATION:this.ba?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol.source.ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.b,SETDISPLAYWIDTH:Math.round(d[0]),SETDISPLAYHEIGHT:Math.round(d[1]),SETVIEWSCALE:e,SETVIEWCENTERX:c[0],SETVIEWCENTERY:c[1]},fa(d,b),xe(ze([a],d))},r(Rq,Mq),Rq.prototype.rc=function(a){return fc(a,this.a.D())?this.a:null},r(Sq,Pq),Cr=Sq.prototype,Cr.Xg=function(b,c,d,e,f){var g=new cj(.5*c/d,b,c);this.a.Hb(b,c,f);var h=!1;return this.a.Db(b,c,function(b){var e;if(!(e=h)){var f;if(a(b.a)?f=b.a.call(b,c):a(this.f)&&(f=this.f(b,c)),null!=f){var i,j=!1;for(e=0,i=f.length;i>e;++e)j=Kj(g,b,f[e],Jj(c,d),this.zj,this)||j;e=j}else e=!1}h=e},this),dj(g),h?null:(this.d[0]!=e[0]||this.d[1]!=e[1]?(this.b.canvas.width=e[0],this.b.canvas.height=e[1],this.d[0]=e[0],this.d[1]=e[1]):this.b.clearRect(0,0,e[0],e[1]),b=Tq(this,Zb(b),c,d,e),fj(g,this.b,d,b,0,{}),this.i=g,this.b.canvas)},Cr.yd=function(a,b,c,d,e){if(null!==this.i){var f={};return ej(this.i,a,0,c,d,function(a){var b=m(a).toString();return b in f?void 0:(f[b]=!0,e(a))})}},Cr.wj=function(){return this.a},Cr.xj=function(){return this.j},Cr.yj=function(){return this.f},Cr.zj=function(){this.l()},Cr.Aj=function(){Lf(this,this.a.n)},Cr.yf=function(b){this.j=a(b)?b:gi,this.f=null===b?void 0:fi(this.j),this.l()},r(Uq,Mq);var qx=[101,101];Cr=Uq.prototype,Cr.Bj=function(b,c,d,e){if(a(this.b)){var f=_b(b,c,0,qx),g={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:ca(this.a,"LAYERS")};return fa(g,this.a,e),e=Math.floor((f[3]-b[1])/c),g[this.f?"I":"X"]=Math.floor((b[0]-f[0])/c),g[this.f?"J":"Y"]=e,Vq(this,f,qx,1,wc(d),g)}},Cr.Cj=function(){return this.a},Cr.rc=function(b,c,d,e){if(!a(this.b))return null;c=Nq(this,c),1==d||this.F&&a(this.q)||(d=1);var f=this.d;if(null!==f&&this.p==this.c&&f.resolution==c&&f.e==d&&Nb(f.D(),b))return f;f={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0},fa(f,this.a),b=b.slice();var g=(b[0]+b[2])/2,h=(b[1]+b[3])/2;if(1!=this.j){var i=this.j*ec(b)/2,j=this.j*ac(b)/2;b[0]=g-i,b[1]=h-j,b[2]=g+i,b[3]=h+j}var i=c/d,j=Math.ceil(ec(b)/i),k=Math.ceil(ac(b)/i);return b[0]=g-i*j/2,b[2]=g+i*j/2,b[1]=h-i*k/2,b[3]=h+i*k/2,this.i[0]=j,this.i[1]=k,e=Vq(this,b,this.i,d,e,f),this.d=new qo(b,c,d,this.e,e,this.t,this.J),this.p=this.c,this.d},Cr.Dj=function(){return this.b},Cr.Ej=function(a){a!=this.b&&(this.b=a,this.d=null,this.l())},Cr.Fj=function(a){fa(this.a,a),Wq(this),this.d=null,this.l()},r(Xq,Iq),r(Yq,gq),Yq.prototype.pa=function(a){Yq.S.pa.call(this,bq(this.d,a))},Yq.prototype.a=function(a){this.pa($p(cq(a)))},r(Zq,Yq);var rx=new Zc({html:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'});r($q,Yq);var sx=new Zc({html:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a>'}),tx={osm:{maxZoom:19,attributions:[sx,rx]},sat:{maxZoom:18,attributions:[sx,new Zc({html:"Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency"})]},hyb:{maxZoom:18,attributions:[sx,rx]}};r(_q,Iq),r(ar,Gq),ar.prototype.fb=function(b){var c,d,e=[];for(c=0,d=b.length;d>c;++c){var f=b[c],g=f.X;a(g)?g in this.j||(e.push(f),this.j[g]=!0):e.push(f)}ar.S.fb.call(this,e)},ar.prototype.clear=function(){_(this.j),this.p.clear(),ar.S.clear.call(this)},ar.prototype.Hb=function(a,b,c){var d=this.p;a=this.t(a,b);var e,f;for(e=0,f=a.length;f>e;++e){var g=a[e];ip(d,g,function(a){return Nb(a.extent,g)})||(this.q.call(this,g,b,c),d.na(g,{extent:g.slice()}))}};var ux={terrain:{Wa:"jpg",opaque:!0},"terrain-background":{Wa:"jpg",opaque:!0},"terrain-labels":{Wa:"png",opaque:!1},"terrain-lines":{Wa:"png",opaque:!1},"toner-background":{Wa:"png",opaque:!0},toner:{Wa:"png",opaque:!0},"toner-hybrid":{Wa:"png",opaque:!1},"toner-labels":{Wa:"png",opaque:!1},"toner-lines":{Wa:"png",opaque:!1},"toner-lite":{Wa:"png",opaque:!0},watercolor:{Wa:"jpg",opaque:!0}},vx={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:3,maxZoom:16}};r(br,Yq);var wx=[new Zc({html:'Map tiles by <a href="http://stamen.com/">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.'}),rx];return r(cr,Qf),cr.prototype.Na=function(b){if(b=a(b)?m(b):-1,b in this.c)return this.c[b];var c=this.b,d=ud(c,c);return d.strokeStyle="black",d.strokeRect(.5,.5,c+.5,c+.5),d.fillStyle="black",d.textAlign="center",d.textBaseline="middle",d.font="24px sans-serif",d.fillText(Tc(this.a),c/2,c/2),this.c[b]=d.canvas},r(dr,$f),dr.prototype.zd=function(){return eq(this.a)},dr.prototype.se=function(a){fq(this.a,a)},dr.prototype.Fb=function(a,b,c){var d=this.hb(a,b,c);return Jk(this.a,d)?this.a.get(d):(a=new cr([a,b,c],this.tileGrid),this.a.set(d,a),a)},r(er,gq),er.prototype.a=function(b){var c,d=wc("EPSG:4326"),e=this.g;a(b.bounds)&&(c=jc(b.bounds,zc(d,e)));var f=b.minzoom||0,g=b.maxzoom||22;if(this.tileGrid=e=new iq({extent:Zf(e),maxZoom:g,minZoom:f}),this.tileUrlFunction=bq(e.Bb({extent:c,wrapX:this.d}),$p(b.tiles)),a(b.attribution)){d=a(c)?c:d.D(),c={};for(var h;g>=f;++f)h=f.toString(),c[h]=[Uf(e,d,f)];this.e=[new Zc({html:b.attribution,tileRanges:c})]}Lf(this,"ready")},r(fr,$f),Cr=fr.prototype,Cr.zd=function(){return eq(this.a)},Cr.se=function(a){fq(this.a,a)},Cr.Gh=function(){return this.d},Cr.eh=function(a,b,c,d,e){null===this.tileGrid?!0===e?Ue(function(){c.call(d,null)}):c.call(d,null):(b=this.tileGrid.Vb(a,b),ir(this.Fb(b[0],b[1],b[2],1,this.g),a,c,d,e))},Cr.Gj=function(b){
var c,d=wc("EPSG:4326"),e=this.g;a(b.bounds)&&(c=jc(b.bounds,zc(d,e)));var f=b.minzoom||0,g=b.maxzoom||22;this.tileGrid=e=new iq({extent:Zf(e),maxZoom:g,minZoom:f}),this.d=b.template;var h=b.grids;if(null!=h){if(this.b=bq(e.Bb({extent:c}),$p(h)),a(b.attribution)){for(d=a(c)?c:d.D(),c={};g>=f;++f)h=f.toString(),c[h]=[Uf(e,d,f)];this.e=[new Zc({html:b.attribution,tileRanges:c})]}Lf(this,"ready")}else Lf(this,"error")},Cr.Fb=function(b,c,d,e,f){var g=this.hb(b,c,d);return Jk(this.a,g)?this.a.get(g):(b=[b,c,d],e=this.b(b,e,f),e=new gr(b,a(e)?0:4,a(e)?e:"",Wf(this.tileGrid,b),this.f),this.a.set(g,e),e)},Cr.He=function(a,b,c){a=this.hb(a,b,c),Jk(this.a,a)&&this.a.get(a)},r(gr,Qf),Cr=gr.prototype,Cr.Na=function(){return null},Cr.mb=function(){return this.g},Cr.Vh=function(){this.state=3,Rf(this)},Cr.gi=function(a){this.b=a.grid,this.e=a.keys,this.d=a.data,this.state=4,Rf(this)},Cr.load=function(){this.o&&jr(this)},r(kr,Gq),Cr=kr.prototype,Cr.clear=function(){_(this.j)},Cr.Db=function(b,c,d,e){var f=this.p,g=this.j;c=pa(f.a,c,0),b=Uf(f,b,c);for(var h,f=b.a;f<=b.d;++f)for(h=b.b;h<=b.c;++h){var i=g[c+"/"+f+"/"+h];if(a(i)){var j,k;for(j=0,k=i.length;k>j;++j){var l=d.call(e,i[j]);if(l)return l}}}},Cr.va=function(){var a,b=this.j,c=[];for(a in b)L(c,b[a]);return c},Cr.jh=function(a,b){var c=[];return lr(this,a,b,function(a){c.push(a)}),c},Cr.Hb=function(b,d,e){function f(a,b){j[a]=b,Lf(this,"ready")}var g=this.t,h=this.p,i=this.q,j=this.j;d=pa(h.a,d,0),b=Uf(h,b,d);var k,l,h=[d,0,0];for(k=b.a;k<=b.d;++k)for(l=b.b;l<=b.c;++l){var m=d+"/"+k+"/"+l;if(!(m in j)){h[0]=d,h[1]=k,h[2]=l,g(h,e,h);var n=i(h,1,e);a(n)&&(j[m]=[],Hq(this,n,q(f,m),c,this))}}},r(mr,gq),Cr=mr.prototype,Cr.Hj=function(a,b,c,d){c=wc(c);var e=this.tileGrid;if(null===e&&(e=_f(this,c)),b=e.Vb(a,b),!(e.a.length<=b[0])){var f=e.ka(b[0]),g=Wf(e,b,this.q),e=e.sa(b[0]),h=this.o;return 0!==h&&(e+=2*h,g=Lb(g,f*h,g)),h={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:ca(this.a,"LAYERS")},fa(h,this.a,d),d=Math.floor((g[3]-a[1])/f),h[this.d?"I":"X"]=Math.floor((a[0]-g[0])/f),h[this.d?"J":"Y"]=d,nr(this,b,e,g,1,c,h)}},Cr.bd=function(){return this.o},Cr.hb=function(a,b,c){return this.j+mr.S.hb.call(this,a,b,c)},Cr.Ij=function(){return this.a},Cr.Gc=function(b,c,d){return b=mr.S.Gc.call(this,b,c,d),1!=c&&this.p&&a(this.i)?b*c+.5|0:b},Cr.Kh=function(){return this.f},Cr.Jj=function(b){b=a(b)?cq(b):null,this.zf(b)},Cr.zf=function(a){this.f=null!=a?a:[],or(this),this.l()},Cr.Kj=function(b,c,d){var e=this.tileGrid;if(null===e&&(e=_f(this,d)),!(e.a.length<=b[0])){1==c||this.p&&a(this.i)||(c=1);var f=e.ka(b[0]),g=Wf(e,b,this.q),e=e.sa(b[0]),h=this.o;return 0!==h&&(e+=2*h,g=Lb(g,f*h,g)),1!=c&&(e=e*c+.5|0),f={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0},fa(f,this.a),nr(this,b,e,g,c,d,f)}},Cr.Lj=function(a){fa(this.a,a),or(this),pr(this),this.l()},r(qr,Iq),r(rr,Sf),rr.prototype.g=function(){return this.b},r(sr,gq),sr.prototype.f=function(){return this.a},sr.prototype.hb=function(a,b,c){return this.d+sr.S.hb.call(this,a,b,c)},sr.prototype.o=function(a){fa(this.a,a),tr(this),this.l()},r(ur,Sf),ur.prototype.Bb=function(b){b=a(b)?b:{};var c=this.minZoom,d=this.maxZoom,e=null;if(a(b.extent)){var f,e=Array(d+1);for(f=0;d>=f;++f)e[f]=c>f?null:Uf(this,b.extent,f)}return function(a,b,f){if(b=a[0],c>b||b>d)return null;var g=Math.pow(2,b),h=a[1];return 0>h||h>=g?null:(a=a[2],-g>a||a>-1||null!==e&&!Xc(e[b],h,-a-1)?null:Qc(b,h,-a-1,f))}},r(vr,gq),r(wr,so),wr.prototype.Na=function(b){var c=a(b)?m(b).toString():"";if(c in this.e)return this.e[c];if(b=wr.S.Na.call(this,b),2==this.state){if(256==b.width&&256==b.height)return this.e[c]=b;var d=ud(256,256);return d.drawImage(b,0,0),this.e[c]=d.canvas}return b},xr.prototype.add=function(b,c,d,e,f,g){if(c+this.a>this.b||d+this.a>this.b)return null;if(e=yr(this,!1,b,c,d,e,g),null===e)return null;var h=null;return a(f)&&(h=yr(this,!0,b,c,d,f,g)),{offsetX:e.offsetX,offsetY:e.offsetY,image:e.image,Wl:null===h?void 0:h.offsetX,Xl:null===h?void 0:h.offsetY,kf:null===h?void 0:h.image}},zr.prototype.get=function(a){return ca(this.d,a,null)},zr.prototype.add=function(a,b,c,d,e){var f,g,h;for(g=0,h=this.c.length;h>g;++g)if(f=this.c[g],f.width>=b+this.a&&f.height>=c+this.a)return h={offsetX:f.x+this.a,offsetY:f.y+this.a,image:this.b},this.d[a]=h,d.call(e,this.e,f.x+this.a,f.y+this.a),a=g,b+=this.a,c+=this.a,e=d=void 0,f.width-b>f.height-c?(d={x:f.x+b,y:f.y,width:f.width-b,height:f.height},e={x:f.x,y:f.y+c,width:b,height:f.height-c},Ar(this,a,d,e)):(d={x:f.x+b,y:f.y,width:f.width-b,height:c},e={x:f.x,y:f.y+c,width:f.width,height:f.height-c},Ar(this,a,d,e)),h;return null},r(Br,jg),Cr=Br.prototype,Cr.tb=function(){return this.t},Cr.Qj=function(){return this.g},Cr.Rj=function(){return this.o},Cr.te=function(){return this.j},Cr.yb=function(){return this.b},Cr.cd=function(){return this.F},Cr.ue=function(){return 2},Cr.zb=function(){return this.J},Cr.Sj=function(){return this.a},Cr.Tj=function(){return this.c},Cr.Eh=function(){return this.f},Cr.ab=function(){return this.Q},Cr.Uj=function(){return this.e},Cr.ne=c,Cr.load=c,Cr.Ge=c,Cr.Ef=function(a,b,c,d){var e;for(b.setTransform(1,0,0,1,0,0),b.translate(c,d),b.beginPath(),this.f!==this.c&&(this.a*=2),c=0;c<=this.a;c++)d=2*c*Math.PI/this.a-Math.PI/2+this.g,e=0===c%2?this.c:this.f,b.lineTo(a.size/2+e*Math.cos(d),a.size/2+e*Math.sin(d));null!==this.o&&(b.fillStyle=Cd(this.o.a),b.fill()),null!==this.e&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.Nc,null===a.lineDash||b.setLineDash(a.lineDash),b.stroke()),b.closePath()},Cr.Df=function(a,b,c,d){b.setTransform(1,0,0,1,0,0),b.translate(c,d),b.beginPath(),this.f!==this.c&&(this.a*=2);var e;for(c=0;c<=this.a;c++)e=2*c*Math.PI/this.a-Math.PI/2+this.g,d=0===c%2?this.c:this.f,b.lineTo(a.size/2+d*Math.cos(e),a.size/2+d*Math.sin(e));b.fillStyle=Rt,b.fill(),null!==this.e&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.Nc,null===a.lineDash||b.setLineDash(a.lineDash),b.stroke()),b.closePath()},Cr.ub=function(){var b=null===this.e?"-":this.e.ub(),c=null===this.o?"-":this.o.ub();return(null===this.d||b!=this.d[1]||c!=this.d[2]||this.c!=this.d[3]||this.f!=this.d[4]||this.g!=this.d[5]||this.a!=this.d[6])&&(this.d=["r"+b+c+(a(this.c)?this.c.toString():"-")+(a(this.f)?this.f.toString():"-")+(a(this.g)?this.g.toString():"-")+(a(this.a)?this.a.toString():"-"),b,c,this.c,this.f,this.g,this.a]),this.d[0]},b("ol.animation.bounce",function(b){var c=b.resolution,d=a(b.start)?b.start:Kr(),e=a(b.duration)?b.duration:1e3,f=a(b.easing)?b.easing:Mc;return function(a,b){if(b.time<d)return b.animate=!0,b.viewHints[0]+=1,!0;if(b.time<d+e){var g=f((b.time-d)/e),h=c-b.viewState.resolution;return b.animate=!0,b.viewState.resolution+=g*h,b.viewHints[0]+=1,!0}return!1}},Fr),b("ol.animation.pan",Nc,Fr),b("ol.animation.rotate",Oc,Fr),b("ol.animation.zoom",Pc,Fr),b("ol.Attribution",Zc,Fr),Zc.prototype.getHTML=Zc.prototype.b,yd.prototype.element=yd.prototype.element,b("ol.Collection",zd,Fr),zd.prototype.clear=zd.prototype.clear,zd.prototype.extend=zd.prototype.qf,zd.prototype.forEach=zd.prototype.forEach,zd.prototype.getArray=zd.prototype.Mi,zd.prototype.item=zd.prototype.item,zd.prototype.getLength=zd.prototype.Ib,zd.prototype.insertAt=zd.prototype.rd,zd.prototype.pop=zd.prototype.pop,zd.prototype.push=zd.prototype.push,zd.prototype.remove=zd.prototype.remove,zd.prototype.removeAt=zd.prototype.De,zd.prototype.setAt=zd.prototype.bl,b("ol.coordinate.add",pb,Fr),b("ol.coordinate.createStringXY",function(a){return function(b){return wb(b,a)}},Fr),b("ol.coordinate.format",sb,Fr),b("ol.coordinate.rotate",ub,Fr),b("ol.coordinate.toStringHDMS",function(b){return a(b)?rb(b[1],"NS")+" "+rb(b[0],"EW"):""},Fr),b("ol.coordinate.toStringXY",wb,Fr),b("ol.DeviceOrientation",sl,Fr),sl.prototype.getAlpha=sl.prototype.e,sl.prototype.getBeta=sl.prototype.f,sl.prototype.getGamma=sl.prototype.g,sl.prototype.getHeading=sl.prototype.i,sl.prototype.getTracking=sl.prototype.d,sl.prototype.setTracking=sl.prototype.b,b("ol.easing.easeIn",function(a){return Math.pow(a,3)},Fr),b("ol.easing.easeOut",Jc,Fr),b("ol.easing.inAndOut",Kc,Fr),b("ol.easing.linear",Lc,Fr),b("ol.easing.upAndDown",Mc,Fr),b("ol.extent.boundingExtent",Jb,Fr),b("ol.extent.buffer",Lb,Fr),b("ol.extent.containsCoordinate",function(a,b){return Ob(a,b[0],b[1])},Fr),b("ol.extent.containsExtent",Nb,Fr),b("ol.extent.containsXY",Ob,Fr),b("ol.extent.createEmpty",Qb,Fr),b("ol.extent.equals",Tb,Fr),b("ol.extent.extend",Ub,Fr),b("ol.extent.getBottomLeft",Xb,Fr),b("ol.extent.getBottomRight",Yb,Fr),b("ol.extent.getCenter",Zb,Fr),b("ol.extent.getHeight",ac,Fr),b("ol.extent.getIntersection",bc,Fr),b("ol.extent.getSize",function(a){return[a[2]-a[0],a[3]-a[1]]},Fr),b("ol.extent.getTopLeft",cc,Fr),b("ol.extent.getTopRight",dc,Fr),b("ol.extent.getWidth",ec,Fr),b("ol.extent.intersects",fc,Fr),b("ol.extent.isEmpty",gc,Fr),b("ol.extent.applyTransform",jc,Fr),b("ol.Feature",ul,Fr),ul.prototype.clone=ul.prototype.clone,ul.prototype.getGeometry=ul.prototype.N,ul.prototype.getId=ul.prototype.nh,ul.prototype.getGeometryName=ul.prototype.mh,ul.prototype.getStyle=ul.prototype.Si,ul.prototype.getStyleFunction=ul.prototype.Ti,ul.prototype.setGeometry=ul.prototype.Ma,ul.prototype.setStyle=ul.prototype.i,ul.prototype.setId=ul.prototype.d,ul.prototype.setGeometryName=ul.prototype.e,b("ol.FeatureOverlay",vl,Fr),vl.prototype.addFeature=vl.prototype.rf,vl.prototype.getFeatures=vl.prototype.Ni,vl.prototype.removeFeature=vl.prototype.wd,vl.prototype.setFeatures=vl.prototype.Mc,vl.prototype.setMap=vl.prototype.setMap,vl.prototype.setStyle=vl.prototype.tf,vl.prototype.getStyle=vl.prototype.Oi,vl.prototype.getStyleFunction=vl.prototype.Pi,b("ol.Geolocation",jo,Fr),jo.prototype.getAccuracy=jo.prototype.$e,jo.prototype.getAccuracyGeometry=jo.prototype.p,jo.prototype.getAltitude=jo.prototype.q,jo.prototype.getAltitudeAccuracy=jo.prototype.r,jo.prototype.getHeading=jo.prototype.F,jo.prototype.getPosition=jo.prototype.J,jo.prototype.getProjection=jo.prototype.g,jo.prototype.getSpeed=jo.prototype.t,jo.prototype.getTracking=jo.prototype.i,jo.prototype.getTrackingOptions=jo.prototype.f,jo.prototype.setProjection=jo.prototype.n,jo.prototype.setTracking=jo.prototype.b,jo.prototype.setTrackingOptions=jo.prototype.j,b("ol.Graticule",no,Fr),no.prototype.getMap=no.prototype.Wi,no.prototype.getMeridians=no.prototype.wh,no.prototype.getParallels=no.prototype.Bh,no.prototype.setMap=no.prototype.setMap,b("ol.has.DEVICE_PIXEL_RATIO",Qs,Fr),b("ol.has.CANVAS",Ts,Fr),b("ol.has.DEVICE_ORIENTATION",Us,Fr),b("ol.has.GEOLOCATION",Vs,Fr),b("ol.has.TOUCH",Ws,Fr),b("ol.has.WEBGL",Ls,Fr),qo.prototype.getImage=qo.prototype.c,so.prototype.getImage=so.prototype.Na,b("ol.Kinetic",Dg,Fr),b("ol.loadingstrategy.all",function(){return[[-(1/0),-(1/0),1/0,1/0]]},Fr),b("ol.loadingstrategy.bbox",Pp,Fr),b("ol.loadingstrategy.createTile",function(a){return function(b,c){var d=pa(a.a,c,0),e=Uf(a,b,d),f=[],d=[d,0,0];for(d[1]=e.a;d[1]<=e.d;++d[1])for(d[2]=e.b;d[2]<=e.c;++d[2])f.push(Wf(a,d));return f}},Fr),b("ol.Map",Tk,Fr),Tk.prototype.addControl=Tk.prototype.Qg,Tk.prototype.addInteraction=Tk.prototype.Rg,Tk.prototype.addLayer=Tk.prototype.Se,Tk.prototype.addOverlay=Tk.prototype.Te,Tk.prototype.beforeRender=Tk.prototype.Ua,Tk.prototype.forEachFeatureAtPixel=Tk.prototype.oe,Tk.prototype.getEventCoordinate=Tk.prototype.ih,Tk.prototype.getEventPixel=Tk.prototype.ad,Tk.prototype.getTarget=Tk.prototype.qc,Tk.prototype.getTargetElement=Tk.prototype.Fh,Tk.prototype.getCoordinateFromPixel=Tk.prototype.Ga,Tk.prototype.getControls=Tk.prototype.hh,Tk.prototype.getOverlays=Tk.prototype.Ah,Tk.prototype.getInteractions=Tk.prototype.oh,Tk.prototype.getLayerGroup=Tk.prototype.Eb,Tk.prototype.getLayers=Tk.prototype.ea,Tk.prototype.getPixelFromCoordinate=Tk.prototype.f,Tk.prototype.getSize=Tk.prototype.e,Tk.prototype.getView=Tk.prototype.a,Tk.prototype.getViewport=Tk.prototype.Lh,Tk.prototype.renderSync=Tk.prototype.Zk,Tk.prototype.render=Tk.prototype.render,Tk.prototype.removeControl=Tk.prototype.Uk,Tk.prototype.removeInteraction=Tk.prototype.Vk,Tk.prototype.removeLayer=Tk.prototype.Wk,Tk.prototype.removeOverlay=Tk.prototype.Xk,Tk.prototype.setLayerGroup=Tk.prototype.cg,Tk.prototype.setSize=Tk.prototype.J,Tk.prototype.setTarget=Tk.prototype.qa,Tk.prototype.setView=Tk.prototype.Ta,Tk.prototype.updateSize=Tk.prototype.j,Ff.prototype.originalEvent=Ff.prototype.originalEvent,Ff.prototype.pixel=Ff.prototype.pixel,Ff.prototype.coordinate=Ff.prototype.coordinate,Ff.prototype.preventDefault=Ff.prototype.preventDefault,Ff.prototype.stopPropagation=Ff.prototype.lb,be.prototype.map=be.prototype.map,be.prototype.frameState=be.prototype.frameState,jb.prototype.key=jb.prototype.key,jb.prototype.oldValue=jb.prototype.oldValue,kb.prototype.transform=kb.prototype.e,b("ol.Object",lb,Fr),lb.prototype.bindTo=lb.prototype.O,lb.prototype.get=lb.prototype.get,lb.prototype.getKeys=lb.prototype.I,lb.prototype.getProperties=lb.prototype.L,lb.prototype.set=lb.prototype.set,lb.prototype.setProperties=lb.prototype.G,lb.prototype.unbind=lb.prototype.P,lb.prototype.unbindAll=lb.prototype.R,b("ol.Observable",hb,Fr),b("ol.Observable.unByKey",ib,Fr),hb.prototype.changed=hb.prototype.l,hb.prototype.getRevision=hb.prototype.A,hb.prototype.on=hb.prototype.u,hb.prototype.once=hb.prototype.B,hb.prototype.un=hb.prototype.v,hb.prototype.unByKey=hb.prototype.C,b("ol.WEBGL_MAX_TEXTURE_SIZE",Dr,Fr),b("ol.inherits",r,Fr),b("ol.Overlay",Vk,Fr),Vk.prototype.getElement=Vk.prototype.d,Vk.prototype.getMap=Vk.prototype.e,Vk.prototype.getOffset=Vk.prototype.g,Vk.prototype.getPosition=Vk.prototype.n,Vk.prototype.getPositioning=Vk.prototype.i,Vk.prototype.setElement=Vk.prototype.Ee,Vk.prototype.setMap=Vk.prototype.setMap,Vk.prototype.setOffset=Vk.prototype.j,Vk.prototype.setPosition=Vk.prototype.f,Vk.prototype.setPositioning=Vk.prototype.p,Qf.prototype.getTileCoord=Qf.prototype.f,b("ol.View",Dc,Fr),Dc.prototype.constrainCenter=Dc.prototype.i,Dc.prototype.constrainResolution=Dc.prototype.constrainResolution,Dc.prototype.constrainRotation=Dc.prototype.constrainRotation,Dc.prototype.getCenter=Dc.prototype.a,Dc.prototype.calculateExtent=Dc.prototype.g,Dc.prototype.getProjection=Dc.prototype.J,Dc.prototype.getResolution=Dc.prototype.b,Dc.prototype.getResolutionForExtent=Dc.prototype.n,Dc.prototype.getRotation=Dc.prototype.e,Dc.prototype.getZoom=Dc.prototype.Oh,Dc.prototype.fitExtent=Dc.prototype.ge,Dc.prototype.fitGeometry=Dc.prototype.dh,Dc.prototype.centerOn=Dc.prototype.Yg,Dc.prototype.rotate=Dc.prototype.rotate,Dc.prototype.setCenter=Dc.prototype.Oa,Dc.prototype.setResolution=Dc.prototype.d,Dc.prototype.setRotation=Dc.prototype.r,Dc.prototype.setZoom=Dc.prototype.Q,b("ol.xml.getAllTextContent",Jl,Fr),b("ol.xml.parse",Xl,Fr),b("ol.webgl.Context",Kk,Fr),Kk.prototype.getGL=Kk.prototype.kk,Kk.prototype.useProgram=Kk.prototype.Gd,b("ol.tilegrid.TileGrid",Sf,Fr),Sf.prototype.getMaxZoom=Sf.prototype.ed,Sf.prototype.getMinZoom=Sf.prototype.fd,Sf.prototype.getOrigin=Sf.prototype.Lb,Sf.prototype.getResolution=Sf.prototype.ka,Sf.prototype.getResolutions=Sf.prototype.Fd,Sf.prototype.getTileCoordForCoordAndResolution=Sf.prototype.Vb,Sf.prototype.getTileCoordForCoordAndZ=Sf.prototype.Fc,Sf.prototype.getTileSize=Sf.prototype.sa,b("ol.tilegrid.WMTS",rr,Fr),rr.prototype.getMatrixIds=rr.prototype.g,b("ol.tilegrid.XYZ",iq,Fr),b("ol.tilegrid.Zoomify",ur,Fr),b("ol.style.AtlasManager",xr,Fr),b("ol.style.Circle",di,Fr),di.prototype.getAnchor=di.prototype.tb,di.prototype.getFill=di.prototype.Mj,di.prototype.getImage=di.prototype.yb,di.prototype.getOrigin=di.prototype.zb,di.prototype.getRadius=di.prototype.Nj,di.prototype.getSize=di.prototype.ab,di.prototype.getStroke=di.prototype.Oj,b("ol.style.Fill",ci,Fr),ci.prototype.getColor=ci.prototype.b,ci.prototype.setColor=ci.prototype.d,b("ol.style.Icon",kg,Fr),kg.prototype.getAnchor=kg.prototype.tb,kg.prototype.getImage=kg.prototype.yb,kg.prototype.getOrigin=kg.prototype.zb,kg.prototype.getSrc=kg.prototype.Pj,kg.prototype.getSize=kg.prototype.ab,b("ol.style.Image",jg,Fr),jg.prototype.getOpacity=jg.prototype.Ad,jg.prototype.getRotateWithView=jg.prototype.hd,jg.prototype.getRotation=jg.prototype.Bd,jg.prototype.getScale=jg.prototype.Cd,jg.prototype.getSnapToPixel=jg.prototype.jd,jg.prototype.getImage=jg.prototype.yb,jg.prototype.setRotation=jg.prototype.Dd,jg.prototype.setScale=jg.prototype.Ed,b("ol.style.RegularShape",Br,Fr),Br.prototype.getAnchor=Br.prototype.tb,Br.prototype.getAngle=Br.prototype.Qj,Br.prototype.getFill=Br.prototype.Rj,Br.prototype.getImage=Br.prototype.yb,Br.prototype.getOrigin=Br.prototype.zb,Br.prototype.getPoints=Br.prototype.Sj,Br.prototype.getRadius=Br.prototype.Tj,Br.prototype.getRadius2=Br.prototype.Eh,Br.prototype.getSize=Br.prototype.ab,Br.prototype.getStroke=Br.prototype.Uj,b("ol.style.Stroke",bi,Fr),bi.prototype.getColor=bi.prototype.Vj,bi.prototype.getLineCap=bi.prototype.rh,bi.prototype.getLineDash=bi.prototype.Wj,bi.prototype.getLineJoin=bi.prototype.sh,bi.prototype.getMiterLimit=bi.prototype.xh,bi.prototype.getWidth=bi.prototype.Xj,bi.prototype.setColor=bi.prototype.Yj,bi.prototype.setLineCap=bi.prototype.el,bi.prototype.setLineDash=bi.prototype.Zj,bi.prototype.setLineJoin=bi.prototype.fl,bi.prototype.setMiterLimit=bi.prototype.gl,bi.prototype.setWidth=bi.prototype.ol,b("ol.style.Style",ei,Fr),ei.prototype.getGeometry=ei.prototype.N,ei.prototype.getGeometryFunction=ei.prototype.lh,ei.prototype.getFill=ei.prototype.$j,ei.prototype.getImage=ei.prototype.ak,ei.prototype.getStroke=ei.prototype.bk,ei.prototype.getText=ei.prototype.ck,ei.prototype.getZIndex=ei.prototype.Nh,ei.prototype.setGeometry=ei.prototype.Ff,ei.prototype.setZIndex=ei.prototype.ql,b("ol.style.Text",Um,Fr),Um.prototype.getFont=Um.prototype.kh,Um.prototype.getOffsetX=Um.prototype.yh,Um.prototype.getOffsetY=Um.prototype.zh,Um.prototype.getFill=Um.prototype.dk,Um.prototype.getRotation=Um.prototype.ek,Um.prototype.getScale=Um.prototype.fk,Um.prototype.getStroke=Um.prototype.gk,Um.prototype.getText=Um.prototype.hk,Um.prototype.getTextAlign=Um.prototype.Hh,Um.prototype.getTextBaseline=Um.prototype.Ih,Um.prototype.setFont=Um.prototype.dl,Um.prototype.setFill=Um.prototype.cl,Um.prototype.setRotation=Um.prototype.ik,Um.prototype.setScale=Um.prototype.jk,Um.prototype.setStroke=Um.prototype.kl,Um.prototype.setText=Um.prototype.ll,Um.prototype.setTextAlign=Um.prototype.ml,Um.prototype.setTextBaseline=Um.prototype.nl,b("ol.Sphere",kc,Fr),b("ol.source.BingMaps",jq,Fr),b("ol.source.BingMaps.TOS_ATTRIBUTION",lx,Fr),b("ol.source.Cluster",kq,Fr),Gq.prototype.readFeatures=Gq.prototype.a,b("ol.source.GeoJSON",Jq,Fr),b("ol.source.GPX",Kq,Fr),b("ol.source.IGC",Lq,Fr),b("ol.source.ImageCanvas",Pq,Fr),b("ol.source.ImageMapGuide",Qq,Fr),Qq.prototype.getParams=Qq.prototype.J,Qq.prototype.updateParams=Qq.prototype.V,b("ol.source.Image",Mq,Fr),b("ol.source.ImageStatic",Rq,Fr),b("ol.source.ImageVector",Sq,Fr),Sq.prototype.getSource=Sq.prototype.wj,Sq.prototype.getStyle=Sq.prototype.xj,Sq.prototype.getStyleFunction=Sq.prototype.yj,Sq.prototype.setStyle=Sq.prototype.yf,b("ol.source.ImageWMS",Uq,Fr),Uq.prototype.getGetFeatureInfoUrl=Uq.prototype.Bj,Uq.prototype.getParams=Uq.prototype.Cj,Uq.prototype.getUrl=Uq.prototype.Dj,Uq.prototype.setUrl=Uq.prototype.Ej,Uq.prototype.updateParams=Uq.prototype.Fj,b("ol.source.KML",Xq,Fr),b("ol.source.MapQuest",$q,Fr),b("ol.source.OSM",Zq,Fr),b("ol.source.OSM.ATTRIBUTION",rx,Fr),b("ol.source.OSMXML",_q,Fr),b("ol.source.ServerVector",ar,Fr),ar.prototype.readFeatures=ar.prototype.a,b("ol.source.Source",Kf,Fr),Kf.prototype.getAttributions=Kf.prototype.Y,Kf.prototype.getLogo=Kf.prototype.W,Kf.prototype.getProjection=Kf.prototype.Z,Kf.prototype.getState=Kf.prototype.$,b("ol.source.Stamen",br,Fr),b("ol.source.StaticVector",Iq,Fr),b("ol.source.TileDebug",dr,Fr),b("ol.source.TileImage",gq,Fr),gq.prototype.getTileLoadFunction=gq.prototype.ib,gq.prototype.getTileUrlFunction=gq.prototype.jb,gq.prototype.setTileLoadFunction=gq.prototype.ob,gq.prototype.setTileUrlFunction=gq.prototype.pa,b("ol.source.TileJSON",er,Fr),b("ol.source.Tile",$f,Fr),$f.prototype.getTileGrid=$f.prototype.za,b("ol.source.TileUTFGrid",fr,Fr),fr.prototype.getTemplate=fr.prototype.Gh,fr.prototype.forDataAtCoordinateAndResolution=fr.prototype.eh,b("ol.source.TileVector",kr,Fr),kr.prototype.getFeatures=kr.prototype.va,kr.prototype.getFeaturesAtCoordinateAndResolution=kr.prototype.jh,b("ol.source.TileWMS",mr,Fr),mr.prototype.getGetFeatureInfoUrl=mr.prototype.Hj,mr.prototype.getParams=mr.prototype.Ij,mr.prototype.getUrls=mr.prototype.Kh,mr.prototype.setUrl=mr.prototype.Jj,mr.prototype.setUrls=mr.prototype.zf,mr.prototype.updateParams=mr.prototype.Lj,b("ol.source.TopoJSON",qr,Fr),b("ol.source.Vector",kp,Fr),kp.prototype.addFeature=kp.prototype.Pa,kp.prototype.addFeatures=kp.prototype.ya,kp.prototype.clear=kp.prototype.clear,kp.prototype.forEachFeature=kp.prototype.Xa,kp.prototype.forEachFeatureInExtent=kp.prototype.ra,kp.prototype.forEachFeatureIntersectingExtent=kp.prototype.Fa,kp.prototype.getFeatures=kp.prototype.va,kp.prototype.getFeaturesAtCoordinate=kp.prototype.Ia,kp.prototype.getClosestFeatureToCoordinate=kp.prototype.Ya,kp.prototype.getExtent=kp.prototype.D,kp.prototype.getFeatureById=kp.prototype.Ha,kp.prototype.removeFeature=kp.prototype.$a,pp.prototype.feature=pp.prototype.feature,b("ol.source.WMTS",sr,Fr),sr.prototype.getDimensions=sr.prototype.f,sr.prototype.updateDimensions=sr.prototype.o,b("ol.source.XYZ",Yq,Fr),Yq.prototype.setTileUrlFunction=Yq.prototype.pa,Yq.prototype.setUrl=Yq.prototype.a,b("ol.source.Zoomify",vr,Fr),Rh.prototype.vectorContext=Rh.prototype.vectorContext,Rh.prototype.frameState=Rh.prototype.frameState,Rh.prototype.context=Rh.prototype.context,Rh.prototype.glContext=Rh.prototype.glContext,qk.prototype.drawAsync=qk.prototype.ic,qk.prototype.drawCircleGeometry=qk.prototype.jc,qk.prototype.drawFeature=qk.prototype.ee,qk.prototype.drawGeometryCollectionGeometry=qk.prototype.Zc,qk.prototype.drawPointGeometry=qk.prototype.rb,qk.prototype.drawLineStringGeometry=qk.prototype.Cb,qk.prototype.drawMultiLineStringGeometry=qk.prototype.kc,qk.prototype.drawMultiPointGeometry=qk.prototype.qb,qk.prototype.drawMultiPolygonGeometry=qk.prototype.lc,qk.prototype.drawPolygonGeometry=qk.prototype.Sb,qk.prototype.drawText=qk.prototype.sb,qk.prototype.setFillStrokeStyle=qk.prototype.wa,qk.prototype.setImageStyle=qk.prototype.cb,qk.prototype.setTextStyle=qk.prototype.xa,Ii.prototype.drawAsync=Ii.prototype.ic,Ii.prototype.drawCircleGeometry=Ii.prototype.jc,Ii.prototype.drawFeature=Ii.prototype.ee,Ii.prototype.drawPointGeometry=Ii.prototype.rb,Ii.prototype.drawMultiPointGeometry=Ii.prototype.qb,Ii.prototype.drawLineStringGeometry=Ii.prototype.Cb,Ii.prototype.drawMultiLineStringGeometry=Ii.prototype.kc,Ii.prototype.drawPolygonGeometry=Ii.prototype.Sb,Ii.prototype.drawMultiPolygonGeometry=Ii.prototype.lc,Ii.prototype.setFillStrokeStyle=Ii.prototype.wa,Ii.prototype.setImageStyle=Ii.prototype.cb,Ii.prototype.setTextStyle=Ii.prototype.xa,b("ol.proj.common.add",Ei,Fr),b("ol.proj.METERS_PER_UNIT",Gs,Fr),b("ol.proj.Projection",mc,Fr),mc.prototype.getCode=mc.prototype.gh,mc.prototype.getExtent=mc.prototype.D,mc.prototype.getUnits=mc.prototype.rj,mc.prototype.getMetersPerUnit=mc.prototype.ie,mc.prototype.getWorldExtent=mc.prototype.Mh,mc.prototype.isGlobal=mc.prototype.wi,mc.prototype.setExtent=mc.prototype.sj,mc.prototype.setWorldExtent=mc.prototype.pl,b("ol.proj.addEquivalentProjections",oc,Fr),b("ol.proj.addProjection",qc,Fr),b("ol.proj.addCoordinateTransforms",uc,Fr),b("ol.proj.get",wc,Fr),b("ol.proj.getTransform",yc,Fr),b("ol.proj.transform",function(a,b,c){return yc(b,c)(a,void 0,a.length)},Fr),b("ol.proj.transformExtent",Cc,Fr),b("ol.layer.Heatmap",Np,Fr),Np.prototype.getGradient=Np.prototype.qa,Np.prototype.setGradient=Np.prototype.fc,b("ol.layer.Image",Fi,Fr),Fi.prototype.getSource=Fi.prototype.a,b("ol.layer.Layer",Of,Fr),Of.prototype.getSource=Of.prototype.a,Of.prototype.setSource=Of.prototype.ga,b("ol.layer.Base",Mf,Fr),Mf.prototype.getBrightness=Mf.prototype.d,Mf.prototype.getContrast=Mf.prototype.e,Mf.prototype.getHue=Mf.prototype.f,Mf.prototype.getExtent=Mf.prototype.D,Mf.prototype.getMaxResolution=Mf.prototype.g,Mf.prototype.getMinResolution=Mf.prototype.i,Mf.prototype.getOpacity=Mf.prototype.j,Mf.prototype.getSaturation=Mf.prototype.n,Mf.prototype.getVisible=Mf.prototype.b,Mf.prototype.setBrightness=Mf.prototype.t,Mf.prototype.setContrast=Mf.prototype.F,Mf.prototype.setHue=Mf.prototype.J,Mf.prototype.setExtent=Mf.prototype.p,Mf.prototype.setMaxResolution=Mf.prototype.Q,Mf.prototype.setMinResolution=Mf.prototype.V,Mf.prototype.setOpacity=Mf.prototype.q,Mf.prototype.setSaturation=Mf.prototype.ba,Mf.prototype.setVisible=Mf.prototype.ca,b("ol.layer.Group",zi,Fr),zi.prototype.getLayers=zi.prototype.Yb,zi.prototype.setLayers=zi.prototype.r,b("ol.layer.Tile",Gi,Fr),Gi.prototype.getPreload=Gi.prototype.r,Gi.prototype.getSource=Gi.prototype.a,Gi.prototype.setPreload=Gi.prototype.oa,Gi.prototype.getUseInterimTilesOnError=Gi.prototype.ea,Gi.prototype.setUseInterimTilesOnError=Gi.prototype.qa,b("ol.layer.Vector",Hi,Fr),Hi.prototype.getSource=Hi.prototype.a,Hi.prototype.getStyle=Hi.prototype.Uc,Hi.prototype.getStyleFunction=Hi.prototype.Vc,Hi.prototype.setStyle=Hi.prototype.oa,b("ol.interaction.DoubleClickZoom",Kg,Fr),b("ol.interaction.DoubleClickZoom.handleEvent",Lg,Fr),b("ol.interaction.DragAndDrop",$o,Fr),b("ol.interaction.DragAndDrop.handleEvent",As,Fr),_o.prototype.features=_o.prototype.features,_o.prototype.file=_o.prototype.file,_o.prototype.projection=_o.prototype.projection,Vh.prototype.coordinate=Vh.prototype.coordinate,b("ol.interaction.DragBox",Wh,Fr),Wh.prototype.getGeometry=Wh.prototype.N,b("ol.interaction.DragPan",Wg,Fr),b("ol.interaction.DragRotateAndZoom",bp,Fr),b("ol.interaction.DragRotate",$g,Fr),b("ol.interaction.DragZoom",ji,Fr),qp.prototype.feature=qp.prototype.feature,b("ol.interaction.Draw",rp,Fr),b("ol.interaction.Draw.handleEvent",tp,Fr),rp.prototype.finishDrawing=rp.prototype.V,b("ol.interaction.Interaction",Gg,Fr),Gg.prototype.getActive=Gg.prototype.a,Gg.prototype.setActive=Gg.prototype.b,b("ol.interaction.defaults",yi,Fr),b("ol.interaction.KeyboardPan",ki,Fr),b("ol.interaction.KeyboardPan.handleEvent",li,Fr),b("ol.interaction.KeyboardZoom",mi,Fr),b("ol.interaction.KeyboardZoom.handleEvent",ni,Fr),b("ol.interaction.Modify",Bp,Fr),b("ol.interaction.Modify.handleEvent",Gp,Fr),b("ol.interaction.MouseWheelZoom",oi,Fr),b("ol.interaction.MouseWheelZoom.handleEvent",pi,Fr),b("ol.interaction.PinchRotate",qi,Fr),b("ol.interaction.PinchZoom",ui,Fr),b("ol.interaction.Pointer",Tg,Fr),b("ol.interaction.Pointer.handleEvent",Vg,Fr),b("ol.interaction.Select",Kp,Fr),Kp.prototype.getFeatures=Kp.prototype.j,b("ol.interaction.Select.handleEvent",Lp,Fr),Kp.prototype.setMap=Kp.prototype.setMap,b("ol.geom.Circle",mj,Fr),mj.prototype.clone=mj.prototype.clone,mj.prototype.getCenter=mj.prototype.qe,mj.prototype.getExtent=mj.prototype.D,mj.prototype.getRadius=mj.prototype.vf,mj.prototype.getType=mj.prototype.H,mj.prototype.setCenter=mj.prototype.kj,mj.prototype.setCenterAndRadius=mj.prototype.ag,mj.prototype.setRadius=mj.prototype.jl,mj.prototype.transform=mj.prototype.e,b("ol.geom.Geometry",ch,Fr),ch.prototype.clone=ch.prototype.clone,ch.prototype.getClosestPoint=ch.prototype.f,ch.prototype.getExtent=ch.prototype.D,ch.prototype.getType=ch.prototype.H,ch.prototype.applyTransform=ch.prototype.ma,ch.prototype.intersectsExtent=ch.prototype.ha,ch.prototype.translate=ch.prototype.Aa,ch.prototype.transform=ch.prototype.e,b("ol.geom.GeometryCollection",oj,Fr),oj.prototype.clone=oj.prototype.clone,oj.prototype.getExtent=oj.prototype.D,oj.prototype.getGeometries=oj.prototype.af,oj.prototype.getType=oj.prototype.H,oj.prototype.intersectsExtent=oj.prototype.ha,oj.prototype.setGeometries=oj.prototype.bg,oj.prototype.applyTransform=oj.prototype.ma,oj.prototype.translate=oj.prototype.Aa,b("ol.geom.LinearRing",yh,Fr),yh.prototype.clone=yh.prototype.clone,yh.prototype.getArea=yh.prototype.nj,yh.prototype.getCoordinates=yh.prototype.K,yh.prototype.getType=yh.prototype.H,yh.prototype.setCoordinates=yh.prototype.U,b("ol.geom.LineString",vj,Fr),vj.prototype.appendCoordinate=vj.prototype.Sg,vj.prototype.clone=vj.prototype.clone,vj.prototype.getCoordinateAtM=vj.prototype.lj,vj.prototype.getCoordinates=vj.prototype.K,vj.prototype.getLength=vj.prototype.mj,vj.prototype.getType=vj.prototype.H,vj.prototype.intersectsExtent=vj.prototype.ha,vj.prototype.setCoordinates=vj.prototype.U,b("ol.geom.MultiLineString",yj,Fr),yj.prototype.appendLineString=yj.prototype.Tg,yj.prototype.clone=yj.prototype.clone,yj.prototype.getCoordinateAtM=yj.prototype.oj,yj.prototype.getCoordinates=yj.prototype.K,yj.prototype.getLineString=yj.prototype.th,yj.prototype.getLineStrings=yj.prototype.Ec,yj.prototype.getType=yj.prototype.H,yj.prototype.intersectsExtent=yj.prototype.ha,yj.prototype.setCoordinates=yj.prototype.U,b("ol.geom.MultiPoint",Cj,Fr),Cj.prototype.appendPoint=Cj.prototype.Vg,Cj.prototype.clone=Cj.prototype.clone,Cj.prototype.getCoordinates=Cj.prototype.K,Cj.prototype.getPoint=Cj.prototype.Ch,Cj.prototype.getPoints=Cj.prototype.xd,Cj.prototype.getType=Cj.prototype.H,Cj.prototype.intersectsExtent=Cj.prototype.ha,Cj.prototype.setCoordinates=Cj.prototype.U,b("ol.geom.MultiPolygon",Dj,Fr),Dj.prototype.appendPolygon=Dj.prototype.Wg,Dj.prototype.clone=Dj.prototype.clone,Dj.prototype.getArea=Dj.prototype.pj,Dj.prototype.getCoordinates=Dj.prototype.K,Dj.prototype.getInteriorPoints=Dj.prototype.qh,Dj.prototype.getPolygon=Dj.prototype.Dh,Dj.prototype.getPolygons=Dj.prototype.gd,Dj.prototype.getType=Dj.prototype.H,Dj.prototype.intersectsExtent=Dj.prototype.ha,Dj.prototype.setCoordinates=Dj.prototype.U,b("ol.geom.Point",Ah,Fr),Ah.prototype.clone=Ah.prototype.clone,Ah.prototype.getCoordinates=Ah.prototype.K,Ah.prototype.getType=Ah.prototype.H,Ah.prototype.intersectsExtent=Ah.prototype.ha,Ah.prototype.setCoordinates=Ah.prototype.U,b("ol.geom.Polygon",Mh,Fr),Mh.prototype.appendLinearRing=Mh.prototype.Ug,Mh.prototype.clone=Mh.prototype.clone,Mh.prototype.getArea=Mh.prototype.qj,Mh.prototype.getCoordinates=Mh.prototype.K,Mh.prototype.getInteriorPoint=Mh.prototype.ph,Mh.prototype.getLinearRingCount=Mh.prototype.vh,Mh.prototype.getLinearRing=Mh.prototype.uh,Mh.prototype.getLinearRings=Mh.prototype.dd,Mh.prototype.getType=Mh.prototype.H,Mh.prototype.intersectsExtent=Mh.prototype.ha,Mh.prototype.setCoordinates=Mh.prototype.U,b("ol.geom.Polygon.circular",Qh,Fr),b("ol.geom.Polygon.fromExtent",function(a){var b=a[0],c=a[1],d=a[2];return a=a[3],b=[b,c,b,a,d,a,d,c,b,c],c=new Mh(null),Ph(c,"XY",b,[b.length]),c},Fr),b("ol.geom.SimpleGeometry",eh,Fr),eh.prototype.getExtent=eh.prototype.D,eh.prototype.getFirstCoordinate=eh.prototype.vb,eh.prototype.getLastCoordinate=eh.prototype.wb,eh.prototype.getLayout=eh.prototype.xb,eh.prototype.applyTransform=eh.prototype.ma,eh.prototype.translate=eh.prototype.Aa,b("ol.format.Feature",xl,Fr),b("ol.format.GeoJSON",Dl,Fr),Dl.prototype.readFeature=Dl.prototype.Nb,Dl.prototype.readFeatures=Dl.prototype.ja,Dl.prototype.readGeometry=Dl.prototype.Jc,Dl.prototype.readProjection=Dl.prototype.Ba,Dl.prototype.writeFeature=Dl.prototype.Pd,Dl.prototype.writeFeatureObject=Dl.prototype.a,Dl.prototype.writeFeatures=Dl.prototype.Qb,Dl.prototype.writeFeaturesObject=Dl.prototype.d,Dl.prototype.writeGeometry=Dl.prototype.Qc,Dl.prototype.writeGeometryObject=Dl.prototype.e,b("ol.format.GPX",Em,Fr),Em.prototype.readFeature=Em.prototype.Nb,Em.prototype.readFeatures=Em.prototype.ja,Em.prototype.readProjection=Em.prototype.Ba,Em.prototype.writeFeatures=Em.prototype.Qb,Em.prototype.writeFeaturesNode=Em.prototype.a,b("ol.format.IGC",Tm,Fr),Tm.prototype.readFeature=Tm.prototype.Nb,Tm.prototype.readFeatures=Tm.prototype.ja,Tm.prototype.readProjection=Tm.prototype.Ba,b("ol.format.KML",Vm,Fr),Vm.prototype.readFeature=Vm.prototype.Nb,Vm.prototype.readFeatures=Vm.prototype.ja,Vm.prototype.readName=Vm.prototype.Nk,
Vm.prototype.readProjection=Vm.prototype.Ba,Vm.prototype.writeFeatures=Vm.prototype.Qb,Vm.prototype.writeFeaturesNode=Vm.prototype.a,b("ol.format.OSMXML",sn,Fr),sn.prototype.readFeatures=sn.prototype.ja,sn.prototype.readProjection=sn.prototype.Ba,b("ol.format.Polyline",xn,Fr),b("ol.format.Polyline.encodeDeltas",yn,Fr),b("ol.format.Polyline.decodeDeltas",zn,Fr),b("ol.format.Polyline.encodeFloats",An,Fr),b("ol.format.Polyline.decodeFloats",Bn,Fr),xn.prototype.readFeature=xn.prototype.Nb,xn.prototype.readFeatures=xn.prototype.ja,xn.prototype.readGeometry=xn.prototype.Jc,xn.prototype.readProjection=xn.prototype.Ba,xn.prototype.writeGeometry=xn.prototype.Qc,b("ol.format.TopoJSON",Cn,Fr),Cn.prototype.readFeatures=Cn.prototype.ja,Cn.prototype.readProjection=Cn.prototype.Ba,b("ol.format.WFS",Hn,Fr),Hn.prototype.readFeatures=Hn.prototype.ja,Hn.prototype.readTransactionResponse=Hn.prototype.g,Hn.prototype.readFeatureCollectionMetadata=Hn.prototype.f,Hn.prototype.writeGetFeature=Hn.prototype.n,Hn.prototype.writeTransaction=Hn.prototype.j,Hn.prototype.readProjection=Hn.prototype.Ba,b("ol.format.WKT",Mn,Fr),Mn.prototype.readFeature=Mn.prototype.Nb,Mn.prototype.readFeatures=Mn.prototype.ja,Mn.prototype.readGeometry=Mn.prototype.Jc,Mn.prototype.writeFeature=Mn.prototype.Pd,Mn.prototype.writeFeatures=Mn.prototype.Qb,Mn.prototype.writeGeometry=Mn.prototype.Qc,b("ol.format.WMSCapabilities",_n,Fr),_n.prototype.read=_n.prototype.a,b("ol.format.WMSGetFeatureInfo",ho,Fr),ho.prototype.readFeatures=ho.prototype.ja,b("ol.format.GML2",Dm,Fr),b("ol.format.GML3",Bm,Fr),Bm.prototype.writeGeometryNode=Bm.prototype.o,Bm.prototype.writeFeatures=Bm.prototype.Qb,Bm.prototype.writeFeaturesNode=Bm.prototype.a,b("ol.format.GML",Bm,Fr),Bm.prototype.writeFeatures=Bm.prototype.Qb,Bm.prototype.writeFeaturesNode=Bm.prototype.a,b("ol.format.GMLBase",om,Fr),om.prototype.readFeatures=om.prototype.ja,b("ol.events.condition.altKeyOnly",function(a){return a=a.a,a.c&&!a.g&&!a.d},Fr),b("ol.events.condition.altShiftKeysOnly",Mg,Fr),b("ol.events.condition.always",As,Fr),b("ol.events.condition.click",function(a){return a.type==It},Fr),b("ol.events.condition.mouseMove",Ng,Fr),b("ol.events.condition.never",zs,Fr),b("ol.events.condition.singleClick",Og,Fr),b("ol.events.condition.noModifierKeys",Pg,Fr),b("ol.events.condition.platformModifierKeyOnly",function(a){return a=a.a,!a.c&&a.g&&!a.d},Fr),b("ol.events.condition.shiftKeyOnly",Qg,Fr),b("ol.events.condition.targetNotEditable",Rg,Fr),b("ol.events.condition.mouseOnly",Sg,Fr),b("ol.dom.Input",tl,Fr),tl.prototype.getChecked=tl.prototype.a,tl.prototype.getValue=tl.prototype.b,tl.prototype.setValue=tl.prototype.e,tl.prototype.setChecked=tl.prototype.d,b("ol.control.Attribution",de,Fr),b("ol.control.Attribution.render",ee,Fr),de.prototype.getCollapsible=de.prototype.bj,de.prototype.setCollapsible=de.prototype.ej,de.prototype.setCollapsed=de.prototype.dj,de.prototype.getCollapsed=de.prototype.aj,b("ol.control.Control",ce,Fr),ce.prototype.getMap=ce.prototype.d,ce.prototype.setMap=ce.prototype.setMap,b("ol.control.defaults",je,Fr),b("ol.control.FullScreen",ne,Fr),b("ol.control.MousePosition",oe,Fr),b("ol.control.MousePosition.render",pe,Fr),oe.prototype.getCoordinateFormat=oe.prototype.g,oe.prototype.getProjection=oe.prototype.p,oe.prototype.setMap=oe.prototype.setMap,oe.prototype.setCoordinateFormat=oe.prototype.r,oe.prototype.setProjection=oe.prototype.q,b("ol.control.OverviewMap",Xk,Fr),Xk.prototype.setMap=Xk.prototype.setMap,b("ol.control.OverviewMap.render",Zk,Fr),Xk.prototype.getCollapsible=Xk.prototype.gj,Xk.prototype.setCollapsible=Xk.prototype.jj,Xk.prototype.setCollapsed=Xk.prototype.ij,Xk.prototype.getCollapsed=Xk.prototype.fj,b("ol.control.Rotate",ge,Fr),b("ol.control.Rotate.render",he,Fr),b("ol.control.ScaleLine",bl,Fr),bl.prototype.getUnits=bl.prototype.j,b("ol.control.ScaleLine.render",cl,Fr),bl.prototype.setUnits=bl.prototype.p,b("ol.control.Zoom",ie,Fr),b("ol.control.ZoomSlider",nl,Fr),b("ol.control.ZoomSlider.render",ol,Fr),b("ol.control.ZoomToExtent",rl,Fr),b("ol.color.asArray",Bd,Fr),b("ol.color.asString",Cd,Fr),lb.prototype.changed=lb.prototype.l,lb.prototype.getRevision=lb.prototype.A,lb.prototype.on=lb.prototype.u,lb.prototype.once=lb.prototype.B,lb.prototype.un=lb.prototype.v,lb.prototype.unByKey=lb.prototype.C,zd.prototype.bindTo=zd.prototype.O,zd.prototype.get=zd.prototype.get,zd.prototype.getKeys=zd.prototype.I,zd.prototype.getProperties=zd.prototype.L,zd.prototype.set=zd.prototype.set,zd.prototype.setProperties=zd.prototype.G,zd.prototype.unbind=zd.prototype.P,zd.prototype.unbindAll=zd.prototype.R,zd.prototype.changed=zd.prototype.l,zd.prototype.getRevision=zd.prototype.A,zd.prototype.on=zd.prototype.u,zd.prototype.once=zd.prototype.B,zd.prototype.un=zd.prototype.v,zd.prototype.unByKey=zd.prototype.C,sl.prototype.bindTo=sl.prototype.O,sl.prototype.get=sl.prototype.get,sl.prototype.getKeys=sl.prototype.I,sl.prototype.getProperties=sl.prototype.L,sl.prototype.set=sl.prototype.set,sl.prototype.setProperties=sl.prototype.G,sl.prototype.unbind=sl.prototype.P,sl.prototype.unbindAll=sl.prototype.R,sl.prototype.changed=sl.prototype.l,sl.prototype.getRevision=sl.prototype.A,sl.prototype.on=sl.prototype.u,sl.prototype.once=sl.prototype.B,sl.prototype.un=sl.prototype.v,sl.prototype.unByKey=sl.prototype.C,ul.prototype.bindTo=ul.prototype.O,ul.prototype.get=ul.prototype.get,ul.prototype.getKeys=ul.prototype.I,ul.prototype.getProperties=ul.prototype.L,ul.prototype.set=ul.prototype.set,ul.prototype.setProperties=ul.prototype.G,ul.prototype.unbind=ul.prototype.P,ul.prototype.unbindAll=ul.prototype.R,ul.prototype.changed=ul.prototype.l,ul.prototype.getRevision=ul.prototype.A,ul.prototype.on=ul.prototype.u,ul.prototype.once=ul.prototype.B,ul.prototype.un=ul.prototype.v,ul.prototype.unByKey=ul.prototype.C,jo.prototype.bindTo=jo.prototype.O,jo.prototype.get=jo.prototype.get,jo.prototype.getKeys=jo.prototype.I,jo.prototype.getProperties=jo.prototype.L,jo.prototype.set=jo.prototype.set,jo.prototype.setProperties=jo.prototype.G,jo.prototype.unbind=jo.prototype.P,jo.prototype.unbindAll=jo.prototype.R,jo.prototype.changed=jo.prototype.l,jo.prototype.getRevision=jo.prototype.A,jo.prototype.on=jo.prototype.u,jo.prototype.once=jo.prototype.B,jo.prototype.un=jo.prototype.v,jo.prototype.unByKey=jo.prototype.C,so.prototype.getTileCoord=so.prototype.f,Tk.prototype.bindTo=Tk.prototype.O,Tk.prototype.get=Tk.prototype.get,Tk.prototype.getKeys=Tk.prototype.I,Tk.prototype.getProperties=Tk.prototype.L,Tk.prototype.set=Tk.prototype.set,Tk.prototype.setProperties=Tk.prototype.G,Tk.prototype.unbind=Tk.prototype.P,Tk.prototype.unbindAll=Tk.prototype.R,Tk.prototype.changed=Tk.prototype.l,Tk.prototype.getRevision=Tk.prototype.A,Tk.prototype.on=Tk.prototype.u,Tk.prototype.once=Tk.prototype.B,Tk.prototype.un=Tk.prototype.v,Tk.prototype.unByKey=Tk.prototype.C,Ff.prototype.map=Ff.prototype.map,Ff.prototype.frameState=Ff.prototype.frameState,Gf.prototype.originalEvent=Gf.prototype.originalEvent,Gf.prototype.pixel=Gf.prototype.pixel,Gf.prototype.coordinate=Gf.prototype.coordinate,Gf.prototype.preventDefault=Gf.prototype.preventDefault,Gf.prototype.stopPropagation=Gf.prototype.lb,Gf.prototype.map=Gf.prototype.map,Gf.prototype.frameState=Gf.prototype.frameState,Vk.prototype.bindTo=Vk.prototype.O,Vk.prototype.get=Vk.prototype.get,Vk.prototype.getKeys=Vk.prototype.I,Vk.prototype.getProperties=Vk.prototype.L,Vk.prototype.set=Vk.prototype.set,Vk.prototype.setProperties=Vk.prototype.G,Vk.prototype.unbind=Vk.prototype.P,Vk.prototype.unbindAll=Vk.prototype.R,Vk.prototype.changed=Vk.prototype.l,Vk.prototype.getRevision=Vk.prototype.A,Vk.prototype.on=Vk.prototype.u,Vk.prototype.once=Vk.prototype.B,Vk.prototype.un=Vk.prototype.v,Vk.prototype.unByKey=Vk.prototype.C,Dc.prototype.bindTo=Dc.prototype.O,Dc.prototype.get=Dc.prototype.get,Dc.prototype.getKeys=Dc.prototype.I,Dc.prototype.getProperties=Dc.prototype.L,Dc.prototype.set=Dc.prototype.set,Dc.prototype.setProperties=Dc.prototype.G,Dc.prototype.unbind=Dc.prototype.P,Dc.prototype.unbindAll=Dc.prototype.R,Dc.prototype.changed=Dc.prototype.l,Dc.prototype.getRevision=Dc.prototype.A,Dc.prototype.on=Dc.prototype.u,Dc.prototype.once=Dc.prototype.B,Dc.prototype.un=Dc.prototype.v,Dc.prototype.unByKey=Dc.prototype.C,rr.prototype.getMaxZoom=rr.prototype.ed,rr.prototype.getMinZoom=rr.prototype.fd,rr.prototype.getOrigin=rr.prototype.Lb,rr.prototype.getResolution=rr.prototype.ka,rr.prototype.getResolutions=rr.prototype.Fd,rr.prototype.getTileCoordForCoordAndResolution=rr.prototype.Vb,rr.prototype.getTileCoordForCoordAndZ=rr.prototype.Fc,rr.prototype.getTileSize=rr.prototype.sa,iq.prototype.getMaxZoom=iq.prototype.ed,iq.prototype.getMinZoom=iq.prototype.fd,iq.prototype.getOrigin=iq.prototype.Lb,iq.prototype.getResolution=iq.prototype.ka,iq.prototype.getResolutions=iq.prototype.Fd,iq.prototype.getTileCoordForCoordAndResolution=iq.prototype.Vb,iq.prototype.getTileCoordForCoordAndZ=iq.prototype.Fc,iq.prototype.getTileSize=iq.prototype.sa,ur.prototype.getMaxZoom=ur.prototype.ed,ur.prototype.getMinZoom=ur.prototype.fd,ur.prototype.getOrigin=ur.prototype.Lb,ur.prototype.getResolution=ur.prototype.ka,ur.prototype.getResolutions=ur.prototype.Fd,ur.prototype.getTileCoordForCoordAndResolution=ur.prototype.Vb,ur.prototype.getTileCoordForCoordAndZ=ur.prototype.Fc,ur.prototype.getTileSize=ur.prototype.sa,di.prototype.getOpacity=di.prototype.Ad,di.prototype.getRotateWithView=di.prototype.hd,di.prototype.getRotation=di.prototype.Bd,di.prototype.getScale=di.prototype.Cd,di.prototype.getSnapToPixel=di.prototype.jd,di.prototype.setRotation=di.prototype.Dd,di.prototype.setScale=di.prototype.Ed,kg.prototype.getOpacity=kg.prototype.Ad,kg.prototype.getRotateWithView=kg.prototype.hd,kg.prototype.getRotation=kg.prototype.Bd,kg.prototype.getScale=kg.prototype.Cd,kg.prototype.getSnapToPixel=kg.prototype.jd,kg.prototype.setRotation=kg.prototype.Dd,kg.prototype.setScale=kg.prototype.Ed,Br.prototype.getOpacity=Br.prototype.Ad,Br.prototype.getRotateWithView=Br.prototype.hd,Br.prototype.getRotation=Br.prototype.Bd,Br.prototype.getScale=Br.prototype.Cd,Br.prototype.getSnapToPixel=Br.prototype.jd,Br.prototype.setRotation=Br.prototype.Dd,Br.prototype.setScale=Br.prototype.Ed,Kf.prototype.changed=Kf.prototype.l,Kf.prototype.getRevision=Kf.prototype.A,Kf.prototype.on=Kf.prototype.u,Kf.prototype.once=Kf.prototype.B,Kf.prototype.un=Kf.prototype.v,Kf.prototype.unByKey=Kf.prototype.C,$f.prototype.getAttributions=$f.prototype.Y,$f.prototype.getLogo=$f.prototype.W,$f.prototype.getProjection=$f.prototype.Z,$f.prototype.getState=$f.prototype.$,$f.prototype.changed=$f.prototype.l,$f.prototype.getRevision=$f.prototype.A,$f.prototype.on=$f.prototype.u,$f.prototype.once=$f.prototype.B,$f.prototype.un=$f.prototype.v,$f.prototype.unByKey=$f.prototype.C,gq.prototype.getTileGrid=gq.prototype.za,gq.prototype.getAttributions=gq.prototype.Y,gq.prototype.getLogo=gq.prototype.W,gq.prototype.getProjection=gq.prototype.Z,gq.prototype.getState=gq.prototype.$,gq.prototype.changed=gq.prototype.l,gq.prototype.getRevision=gq.prototype.A,gq.prototype.on=gq.prototype.u,gq.prototype.once=gq.prototype.B,gq.prototype.un=gq.prototype.v,gq.prototype.unByKey=gq.prototype.C,jq.prototype.getTileLoadFunction=jq.prototype.ib,jq.prototype.getTileUrlFunction=jq.prototype.jb,jq.prototype.setTileLoadFunction=jq.prototype.ob,jq.prototype.setTileUrlFunction=jq.prototype.pa,jq.prototype.getTileGrid=jq.prototype.za,jq.prototype.getAttributions=jq.prototype.Y,jq.prototype.getLogo=jq.prototype.W,jq.prototype.getProjection=jq.prototype.Z,jq.prototype.getState=jq.prototype.$,jq.prototype.changed=jq.prototype.l,jq.prototype.getRevision=jq.prototype.A,jq.prototype.on=jq.prototype.u,jq.prototype.once=jq.prototype.B,jq.prototype.un=jq.prototype.v,jq.prototype.unByKey=jq.prototype.C,kp.prototype.getAttributions=kp.prototype.Y,kp.prototype.getLogo=kp.prototype.W,kp.prototype.getProjection=kp.prototype.Z,kp.prototype.getState=kp.prototype.$,kp.prototype.changed=kp.prototype.l,kp.prototype.getRevision=kp.prototype.A,kp.prototype.on=kp.prototype.u,kp.prototype.once=kp.prototype.B,kp.prototype.un=kp.prototype.v,kp.prototype.unByKey=kp.prototype.C,kq.prototype.addFeature=kq.prototype.Pa,kq.prototype.addFeatures=kq.prototype.ya,kq.prototype.clear=kq.prototype.clear,kq.prototype.forEachFeature=kq.prototype.Xa,kq.prototype.forEachFeatureInExtent=kq.prototype.ra,kq.prototype.forEachFeatureIntersectingExtent=kq.prototype.Fa,kq.prototype.getFeatures=kq.prototype.va,kq.prototype.getFeaturesAtCoordinate=kq.prototype.Ia,kq.prototype.getClosestFeatureToCoordinate=kq.prototype.Ya,kq.prototype.getExtent=kq.prototype.D,kq.prototype.getFeatureById=kq.prototype.Ha,kq.prototype.removeFeature=kq.prototype.$a,kq.prototype.getAttributions=kq.prototype.Y,kq.prototype.getLogo=kq.prototype.W,kq.prototype.getProjection=kq.prototype.Z,kq.prototype.getState=kq.prototype.$,kq.prototype.changed=kq.prototype.l,kq.prototype.getRevision=kq.prototype.A,kq.prototype.on=kq.prototype.u,kq.prototype.once=kq.prototype.B,kq.prototype.un=kq.prototype.v,kq.prototype.unByKey=kq.prototype.C,Gq.prototype.addFeature=Gq.prototype.Pa,Gq.prototype.addFeatures=Gq.prototype.ya,Gq.prototype.clear=Gq.prototype.clear,Gq.prototype.forEachFeature=Gq.prototype.Xa,Gq.prototype.forEachFeatureInExtent=Gq.prototype.ra,Gq.prototype.forEachFeatureIntersectingExtent=Gq.prototype.Fa,Gq.prototype.getFeatures=Gq.prototype.va,Gq.prototype.getFeaturesAtCoordinate=Gq.prototype.Ia,Gq.prototype.getClosestFeatureToCoordinate=Gq.prototype.Ya,Gq.prototype.getExtent=Gq.prototype.D,Gq.prototype.getFeatureById=Gq.prototype.Ha,Gq.prototype.removeFeature=Gq.prototype.$a,Gq.prototype.getAttributions=Gq.prototype.Y,Gq.prototype.getLogo=Gq.prototype.W,Gq.prototype.getProjection=Gq.prototype.Z,Gq.prototype.getState=Gq.prototype.$,Gq.prototype.changed=Gq.prototype.l,Gq.prototype.getRevision=Gq.prototype.A,Gq.prototype.on=Gq.prototype.u,Gq.prototype.once=Gq.prototype.B,Gq.prototype.un=Gq.prototype.v,Gq.prototype.unByKey=Gq.prototype.C,Iq.prototype.readFeatures=Iq.prototype.a,Iq.prototype.addFeature=Iq.prototype.Pa,Iq.prototype.addFeatures=Iq.prototype.ya,Iq.prototype.clear=Iq.prototype.clear,Iq.prototype.forEachFeature=Iq.prototype.Xa,Iq.prototype.forEachFeatureInExtent=Iq.prototype.ra,Iq.prototype.forEachFeatureIntersectingExtent=Iq.prototype.Fa,Iq.prototype.getFeatures=Iq.prototype.va,Iq.prototype.getFeaturesAtCoordinate=Iq.prototype.Ia,Iq.prototype.getClosestFeatureToCoordinate=Iq.prototype.Ya,Iq.prototype.getExtent=Iq.prototype.D,Iq.prototype.getFeatureById=Iq.prototype.Ha,Iq.prototype.removeFeature=Iq.prototype.$a,Iq.prototype.getAttributions=Iq.prototype.Y,Iq.prototype.getLogo=Iq.prototype.W,Iq.prototype.getProjection=Iq.prototype.Z,Iq.prototype.getState=Iq.prototype.$,Iq.prototype.changed=Iq.prototype.l,Iq.prototype.getRevision=Iq.prototype.A,Iq.prototype.on=Iq.prototype.u,Iq.prototype.once=Iq.prototype.B,Iq.prototype.un=Iq.prototype.v,Iq.prototype.unByKey=Iq.prototype.C,Jq.prototype.readFeatures=Jq.prototype.a,Jq.prototype.addFeature=Jq.prototype.Pa,Jq.prototype.addFeatures=Jq.prototype.ya,Jq.prototype.clear=Jq.prototype.clear,Jq.prototype.forEachFeature=Jq.prototype.Xa,Jq.prototype.forEachFeatureInExtent=Jq.prototype.ra,Jq.prototype.forEachFeatureIntersectingExtent=Jq.prototype.Fa,Jq.prototype.getFeatures=Jq.prototype.va,Jq.prototype.getFeaturesAtCoordinate=Jq.prototype.Ia,Jq.prototype.getClosestFeatureToCoordinate=Jq.prototype.Ya,Jq.prototype.getExtent=Jq.prototype.D,Jq.prototype.getFeatureById=Jq.prototype.Ha,Jq.prototype.removeFeature=Jq.prototype.$a,Jq.prototype.getAttributions=Jq.prototype.Y,Jq.prototype.getLogo=Jq.prototype.W,Jq.prototype.getProjection=Jq.prototype.Z,Jq.prototype.getState=Jq.prototype.$,Jq.prototype.changed=Jq.prototype.l,Jq.prototype.getRevision=Jq.prototype.A,Jq.prototype.on=Jq.prototype.u,Jq.prototype.once=Jq.prototype.B,Jq.prototype.un=Jq.prototype.v,Jq.prototype.unByKey=Jq.prototype.C,Kq.prototype.readFeatures=Kq.prototype.a,Kq.prototype.addFeature=Kq.prototype.Pa,Kq.prototype.addFeatures=Kq.prototype.ya,Kq.prototype.clear=Kq.prototype.clear,Kq.prototype.forEachFeature=Kq.prototype.Xa,Kq.prototype.forEachFeatureInExtent=Kq.prototype.ra,Kq.prototype.forEachFeatureIntersectingExtent=Kq.prototype.Fa,Kq.prototype.getFeatures=Kq.prototype.va,Kq.prototype.getFeaturesAtCoordinate=Kq.prototype.Ia,Kq.prototype.getClosestFeatureToCoordinate=Kq.prototype.Ya,Kq.prototype.getExtent=Kq.prototype.D,Kq.prototype.getFeatureById=Kq.prototype.Ha,Kq.prototype.removeFeature=Kq.prototype.$a,Kq.prototype.getAttributions=Kq.prototype.Y,Kq.prototype.getLogo=Kq.prototype.W,Kq.prototype.getProjection=Kq.prototype.Z,Kq.prototype.getState=Kq.prototype.$,Kq.prototype.changed=Kq.prototype.l,Kq.prototype.getRevision=Kq.prototype.A,Kq.prototype.on=Kq.prototype.u,Kq.prototype.once=Kq.prototype.B,Kq.prototype.un=Kq.prototype.v,Kq.prototype.unByKey=Kq.prototype.C,Lq.prototype.readFeatures=Lq.prototype.a,Lq.prototype.addFeature=Lq.prototype.Pa,Lq.prototype.addFeatures=Lq.prototype.ya,Lq.prototype.clear=Lq.prototype.clear,Lq.prototype.forEachFeature=Lq.prototype.Xa,Lq.prototype.forEachFeatureInExtent=Lq.prototype.ra,Lq.prototype.forEachFeatureIntersectingExtent=Lq.prototype.Fa,Lq.prototype.getFeatures=Lq.prototype.va,Lq.prototype.getFeaturesAtCoordinate=Lq.prototype.Ia,Lq.prototype.getClosestFeatureToCoordinate=Lq.prototype.Ya,Lq.prototype.getExtent=Lq.prototype.D,Lq.prototype.getFeatureById=Lq.prototype.Ha,Lq.prototype.removeFeature=Lq.prototype.$a,Lq.prototype.getAttributions=Lq.prototype.Y,Lq.prototype.getLogo=Lq.prototype.W,Lq.prototype.getProjection=Lq.prototype.Z,Lq.prototype.getState=Lq.prototype.$,Lq.prototype.changed=Lq.prototype.l,Lq.prototype.getRevision=Lq.prototype.A,Lq.prototype.on=Lq.prototype.u,Lq.prototype.once=Lq.prototype.B,Lq.prototype.un=Lq.prototype.v,Lq.prototype.unByKey=Lq.prototype.C,Mq.prototype.getAttributions=Mq.prototype.Y,Mq.prototype.getLogo=Mq.prototype.W,Mq.prototype.getProjection=Mq.prototype.Z,Mq.prototype.getState=Mq.prototype.$,Mq.prototype.changed=Mq.prototype.l,Mq.prototype.getRevision=Mq.prototype.A,Mq.prototype.on=Mq.prototype.u,Mq.prototype.once=Mq.prototype.B,Mq.prototype.un=Mq.prototype.v,Mq.prototype.unByKey=Mq.prototype.C,Pq.prototype.getAttributions=Pq.prototype.Y,Pq.prototype.getLogo=Pq.prototype.W,Pq.prototype.getProjection=Pq.prototype.Z,Pq.prototype.getState=Pq.prototype.$,Pq.prototype.changed=Pq.prototype.l,Pq.prototype.getRevision=Pq.prototype.A,Pq.prototype.on=Pq.prototype.u,Pq.prototype.once=Pq.prototype.B,Pq.prototype.un=Pq.prototype.v,Pq.prototype.unByKey=Pq.prototype.C,Qq.prototype.getAttributions=Qq.prototype.Y,Qq.prototype.getLogo=Qq.prototype.W,Qq.prototype.getProjection=Qq.prototype.Z,Qq.prototype.getState=Qq.prototype.$,Qq.prototype.changed=Qq.prototype.l,Qq.prototype.getRevision=Qq.prototype.A,Qq.prototype.on=Qq.prototype.u,Qq.prototype.once=Qq.prototype.B,Qq.prototype.un=Qq.prototype.v,Qq.prototype.unByKey=Qq.prototype.C,Rq.prototype.getAttributions=Rq.prototype.Y,Rq.prototype.getLogo=Rq.prototype.W,Rq.prototype.getProjection=Rq.prototype.Z,Rq.prototype.getState=Rq.prototype.$,Rq.prototype.changed=Rq.prototype.l,Rq.prototype.getRevision=Rq.prototype.A,Rq.prototype.on=Rq.prototype.u,Rq.prototype.once=Rq.prototype.B,Rq.prototype.un=Rq.prototype.v,Rq.prototype.unByKey=Rq.prototype.C,Sq.prototype.getAttributions=Sq.prototype.Y,Sq.prototype.getLogo=Sq.prototype.W,Sq.prototype.getProjection=Sq.prototype.Z,Sq.prototype.getState=Sq.prototype.$,Sq.prototype.changed=Sq.prototype.l,Sq.prototype.getRevision=Sq.prototype.A,Sq.prototype.on=Sq.prototype.u,Sq.prototype.once=Sq.prototype.B,Sq.prototype.un=Sq.prototype.v,Sq.prototype.unByKey=Sq.prototype.C,Uq.prototype.getAttributions=Uq.prototype.Y,Uq.prototype.getLogo=Uq.prototype.W,Uq.prototype.getProjection=Uq.prototype.Z,Uq.prototype.getState=Uq.prototype.$,Uq.prototype.changed=Uq.prototype.l,Uq.prototype.getRevision=Uq.prototype.A,Uq.prototype.on=Uq.prototype.u,Uq.prototype.once=Uq.prototype.B,Uq.prototype.un=Uq.prototype.v,Uq.prototype.unByKey=Uq.prototype.C,Xq.prototype.readFeatures=Xq.prototype.a,Xq.prototype.addFeature=Xq.prototype.Pa,Xq.prototype.addFeatures=Xq.prototype.ya,Xq.prototype.clear=Xq.prototype.clear,Xq.prototype.forEachFeature=Xq.prototype.Xa,Xq.prototype.forEachFeatureInExtent=Xq.prototype.ra,Xq.prototype.forEachFeatureIntersectingExtent=Xq.prototype.Fa,Xq.prototype.getFeatures=Xq.prototype.va,Xq.prototype.getFeaturesAtCoordinate=Xq.prototype.Ia,Xq.prototype.getClosestFeatureToCoordinate=Xq.prototype.Ya,Xq.prototype.getExtent=Xq.prototype.D,Xq.prototype.getFeatureById=Xq.prototype.Ha,Xq.prototype.removeFeature=Xq.prototype.$a,Xq.prototype.getAttributions=Xq.prototype.Y,Xq.prototype.getLogo=Xq.prototype.W,Xq.prototype.getProjection=Xq.prototype.Z,Xq.prototype.getState=Xq.prototype.$,Xq.prototype.changed=Xq.prototype.l,Xq.prototype.getRevision=Xq.prototype.A,Xq.prototype.on=Xq.prototype.u,Xq.prototype.once=Xq.prototype.B,Xq.prototype.un=Xq.prototype.v,Xq.prototype.unByKey=Xq.prototype.C,Yq.prototype.getTileLoadFunction=Yq.prototype.ib,Yq.prototype.getTileUrlFunction=Yq.prototype.jb,Yq.prototype.setTileLoadFunction=Yq.prototype.ob,Yq.prototype.getTileGrid=Yq.prototype.za,Yq.prototype.getAttributions=Yq.prototype.Y,Yq.prototype.getLogo=Yq.prototype.W,Yq.prototype.getProjection=Yq.prototype.Z,Yq.prototype.getState=Yq.prototype.$,Yq.prototype.changed=Yq.prototype.l,Yq.prototype.getRevision=Yq.prototype.A,Yq.prototype.on=Yq.prototype.u,Yq.prototype.once=Yq.prototype.B,Yq.prototype.un=Yq.prototype.v,Yq.prototype.unByKey=Yq.prototype.C,$q.prototype.setTileUrlFunction=$q.prototype.pa,$q.prototype.setUrl=$q.prototype.a,$q.prototype.getTileLoadFunction=$q.prototype.ib,$q.prototype.getTileUrlFunction=$q.prototype.jb,$q.prototype.setTileLoadFunction=$q.prototype.ob,$q.prototype.getTileGrid=$q.prototype.za,$q.prototype.getAttributions=$q.prototype.Y,$q.prototype.getLogo=$q.prototype.W,$q.prototype.getProjection=$q.prototype.Z,$q.prototype.getState=$q.prototype.$,$q.prototype.changed=$q.prototype.l,$q.prototype.getRevision=$q.prototype.A,$q.prototype.on=$q.prototype.u,$q.prototype.once=$q.prototype.B,$q.prototype.un=$q.prototype.v,$q.prototype.unByKey=$q.prototype.C,Zq.prototype.setTileUrlFunction=Zq.prototype.pa,Zq.prototype.setUrl=Zq.prototype.a,Zq.prototype.getTileLoadFunction=Zq.prototype.ib,Zq.prototype.getTileUrlFunction=Zq.prototype.jb,Zq.prototype.setTileLoadFunction=Zq.prototype.ob,Zq.prototype.getTileGrid=Zq.prototype.za,Zq.prototype.getAttributions=Zq.prototype.Y,Zq.prototype.getLogo=Zq.prototype.W,Zq.prototype.getProjection=Zq.prototype.Z,Zq.prototype.getState=Zq.prototype.$,Zq.prototype.changed=Zq.prototype.l,Zq.prototype.getRevision=Zq.prototype.A,Zq.prototype.on=Zq.prototype.u,Zq.prototype.once=Zq.prototype.B,Zq.prototype.un=Zq.prototype.v,Zq.prototype.unByKey=Zq.prototype.C,_q.prototype.readFeatures=_q.prototype.a,_q.prototype.addFeature=_q.prototype.Pa,_q.prototype.addFeatures=_q.prototype.ya,_q.prototype.clear=_q.prototype.clear,_q.prototype.forEachFeature=_q.prototype.Xa,_q.prototype.forEachFeatureInExtent=_q.prototype.ra,_q.prototype.forEachFeatureIntersectingExtent=_q.prototype.Fa,_q.prototype.getFeatures=_q.prototype.va,_q.prototype.getFeaturesAtCoordinate=_q.prototype.Ia,_q.prototype.getClosestFeatureToCoordinate=_q.prototype.Ya,_q.prototype.getExtent=_q.prototype.D,_q.prototype.getFeatureById=_q.prototype.Ha,_q.prototype.removeFeature=_q.prototype.$a,_q.prototype.getAttributions=_q.prototype.Y,_q.prototype.getLogo=_q.prototype.W,_q.prototype.getProjection=_q.prototype.Z,_q.prototype.getState=_q.prototype.$,_q.prototype.changed=_q.prototype.l,_q.prototype.getRevision=_q.prototype.A,_q.prototype.on=_q.prototype.u,_q.prototype.once=_q.prototype.B,_q.prototype.un=_q.prototype.v,_q.prototype.unByKey=_q.prototype.C,ar.prototype.addFeature=ar.prototype.Pa,ar.prototype.addFeatures=ar.prototype.ya,ar.prototype.forEachFeature=ar.prototype.Xa,ar.prototype.forEachFeatureInExtent=ar.prototype.ra,ar.prototype.forEachFeatureIntersectingExtent=ar.prototype.Fa,ar.prototype.getFeatures=ar.prototype.va,ar.prototype.getFeaturesAtCoordinate=ar.prototype.Ia,ar.prototype.getClosestFeatureToCoordinate=ar.prototype.Ya,ar.prototype.getExtent=ar.prototype.D,ar.prototype.getFeatureById=ar.prototype.Ha,ar.prototype.removeFeature=ar.prototype.$a,ar.prototype.getAttributions=ar.prototype.Y,ar.prototype.getLogo=ar.prototype.W,ar.prototype.getProjection=ar.prototype.Z,ar.prototype.getState=ar.prototype.$,ar.prototype.changed=ar.prototype.l,ar.prototype.getRevision=ar.prototype.A,ar.prototype.on=ar.prototype.u,ar.prototype.once=ar.prototype.B,ar.prototype.un=ar.prototype.v,ar.prototype.unByKey=ar.prototype.C,br.prototype.setTileUrlFunction=br.prototype.pa,br.prototype.setUrl=br.prototype.a,br.prototype.getTileLoadFunction=br.prototype.ib,br.prototype.getTileUrlFunction=br.prototype.jb,br.prototype.setTileLoadFunction=br.prototype.ob,br.prototype.getTileGrid=br.prototype.za,br.prototype.getAttributions=br.prototype.Y,br.prototype.getLogo=br.prototype.W,br.prototype.getProjection=br.prototype.Z,br.prototype.getState=br.prototype.$,br.prototype.changed=br.prototype.l,br.prototype.getRevision=br.prototype.A,br.prototype.on=br.prototype.u,br.prototype.once=br.prototype.B,br.prototype.un=br.prototype.v,br.prototype.unByKey=br.prototype.C,dr.prototype.getTileGrid=dr.prototype.za,dr.prototype.getAttributions=dr.prototype.Y,dr.prototype.getLogo=dr.prototype.W,dr.prototype.getProjection=dr.prototype.Z,dr.prototype.getState=dr.prototype.$,dr.prototype.changed=dr.prototype.l,dr.prototype.getRevision=dr.prototype.A,dr.prototype.on=dr.prototype.u,dr.prototype.once=dr.prototype.B,dr.prototype.un=dr.prototype.v,dr.prototype.unByKey=dr.prototype.C,er.prototype.getTileLoadFunction=er.prototype.ib,er.prototype.getTileUrlFunction=er.prototype.jb,er.prototype.setTileLoadFunction=er.prototype.ob,er.prototype.setTileUrlFunction=er.prototype.pa,er.prototype.getTileGrid=er.prototype.za,er.prototype.getAttributions=er.prototype.Y,er.prototype.getLogo=er.prototype.W,er.prototype.getProjection=er.prototype.Z,er.prototype.getState=er.prototype.$,er.prototype.changed=er.prototype.l,er.prototype.getRevision=er.prototype.A,er.prototype.on=er.prototype.u,er.prototype.once=er.prototype.B,er.prototype.un=er.prototype.v,er.prototype.unByKey=er.prototype.C,fr.prototype.getTileGrid=fr.prototype.za,fr.prototype.getAttributions=fr.prototype.Y,fr.prototype.getLogo=fr.prototype.W,fr.prototype.getProjection=fr.prototype.Z,fr.prototype.getState=fr.prototype.$,fr.prototype.changed=fr.prototype.l,fr.prototype.getRevision=fr.prototype.A,fr.prototype.on=fr.prototype.u,fr.prototype.once=fr.prototype.B,fr.prototype.un=fr.prototype.v,fr.prototype.unByKey=fr.prototype.C,kr.prototype.readFeatures=kr.prototype.a,kr.prototype.forEachFeatureIntersectingExtent=kr.prototype.Fa,kr.prototype.getFeaturesAtCoordinate=kr.prototype.Ia,kr.prototype.getFeatureById=kr.prototype.Ha,kr.prototype.getAttributions=kr.prototype.Y,kr.prototype.getLogo=kr.prototype.W,kr.prototype.getProjection=kr.prototype.Z,kr.prototype.getState=kr.prototype.$,kr.prototype.changed=kr.prototype.l,kr.prototype.getRevision=kr.prototype.A,kr.prototype.on=kr.prototype.u,kr.prototype.once=kr.prototype.B,kr.prototype.un=kr.prototype.v,kr.prototype.unByKey=kr.prototype.C,mr.prototype.getTileLoadFunction=mr.prototype.ib,mr.prototype.getTileUrlFunction=mr.prototype.jb,mr.prototype.setTileLoadFunction=mr.prototype.ob,mr.prototype.setTileUrlFunction=mr.prototype.pa,mr.prototype.getTileGrid=mr.prototype.za,mr.prototype.getAttributions=mr.prototype.Y,mr.prototype.getLogo=mr.prototype.W,mr.prototype.getProjection=mr.prototype.Z,mr.prototype.getState=mr.prototype.$,mr.prototype.changed=mr.prototype.l,mr.prototype.getRevision=mr.prototype.A,mr.prototype.on=mr.prototype.u,mr.prototype.once=mr.prototype.B,mr.prototype.un=mr.prototype.v,mr.prototype.unByKey=mr.prototype.C,qr.prototype.readFeatures=qr.prototype.a,qr.prototype.addFeature=qr.prototype.Pa,qr.prototype.addFeatures=qr.prototype.ya,qr.prototype.clear=qr.prototype.clear,qr.prototype.forEachFeature=qr.prototype.Xa,qr.prototype.forEachFeatureInExtent=qr.prototype.ra,qr.prototype.forEachFeatureIntersectingExtent=qr.prototype.Fa,qr.prototype.getFeatures=qr.prototype.va,qr.prototype.getFeaturesAtCoordinate=qr.prototype.Ia,qr.prototype.getClosestFeatureToCoordinate=qr.prototype.Ya,qr.prototype.getExtent=qr.prototype.D,qr.prototype.getFeatureById=qr.prototype.Ha,qr.prototype.removeFeature=qr.prototype.$a,qr.prototype.getAttributions=qr.prototype.Y,qr.prototype.getLogo=qr.prototype.W,qr.prototype.getProjection=qr.prototype.Z,qr.prototype.getState=qr.prototype.$,qr.prototype.changed=qr.prototype.l,qr.prototype.getRevision=qr.prototype.A,qr.prototype.on=qr.prototype.u,qr.prototype.once=qr.prototype.B,qr.prototype.un=qr.prototype.v,qr.prototype.unByKey=qr.prototype.C,sr.prototype.getTileLoadFunction=sr.prototype.ib,sr.prototype.getTileUrlFunction=sr.prototype.jb,sr.prototype.setTileLoadFunction=sr.prototype.ob,sr.prototype.setTileUrlFunction=sr.prototype.pa,sr.prototype.getTileGrid=sr.prototype.za,sr.prototype.getAttributions=sr.prototype.Y,sr.prototype.getLogo=sr.prototype.W,sr.prototype.getProjection=sr.prototype.Z,sr.prototype.getState=sr.prototype.$,sr.prototype.changed=sr.prototype.l,sr.prototype.getRevision=sr.prototype.A,sr.prototype.on=sr.prototype.u,sr.prototype.once=sr.prototype.B,sr.prototype.un=sr.prototype.v,sr.prototype.unByKey=sr.prototype.C,vr.prototype.getTileLoadFunction=vr.prototype.ib,vr.prototype.getTileUrlFunction=vr.prototype.jb,vr.prototype.setTileLoadFunction=vr.prototype.ob,vr.prototype.setTileUrlFunction=vr.prototype.pa,vr.prototype.getTileGrid=vr.prototype.za,vr.prototype.getAttributions=vr.prototype.Y,vr.prototype.getLogo=vr.prototype.W,vr.prototype.getProjection=vr.prototype.Z,vr.prototype.getState=vr.prototype.$,vr.prototype.changed=vr.prototype.l,vr.prototype.getRevision=vr.prototype.A,vr.prototype.on=vr.prototype.u,vr.prototype.once=vr.prototype.B,vr.prototype.un=vr.prototype.v,vr.prototype.unByKey=vr.prototype.C,Mf.prototype.bindTo=Mf.prototype.O,Mf.prototype.get=Mf.prototype.get,Mf.prototype.getKeys=Mf.prototype.I,Mf.prototype.getProperties=Mf.prototype.L,Mf.prototype.set=Mf.prototype.set,Mf.prototype.setProperties=Mf.prototype.G,Mf.prototype.unbind=Mf.prototype.P,Mf.prototype.unbindAll=Mf.prototype.R,Mf.prototype.changed=Mf.prototype.l,Mf.prototype.getRevision=Mf.prototype.A,Mf.prototype.on=Mf.prototype.u,Mf.prototype.once=Mf.prototype.B,Mf.prototype.un=Mf.prototype.v,Mf.prototype.unByKey=Mf.prototype.C,Of.prototype.getBrightness=Of.prototype.d,Of.prototype.getContrast=Of.prototype.e,Of.prototype.getHue=Of.prototype.f,Of.prototype.getExtent=Of.prototype.D,Of.prototype.getMaxResolution=Of.prototype.g,Of.prototype.getMinResolution=Of.prototype.i,Of.prototype.getOpacity=Of.prototype.j,Of.prototype.getSaturation=Of.prototype.n,Of.prototype.getVisible=Of.prototype.b,Of.prototype.setBrightness=Of.prototype.t,Of.prototype.setContrast=Of.prototype.F,Of.prototype.setHue=Of.prototype.J,Of.prototype.setExtent=Of.prototype.p,Of.prototype.setMaxResolution=Of.prototype.Q,Of.prototype.setMinResolution=Of.prototype.V,Of.prototype.setOpacity=Of.prototype.q,Of.prototype.setSaturation=Of.prototype.ba,Of.prototype.setVisible=Of.prototype.ca,Of.prototype.bindTo=Of.prototype.O,Of.prototype.get=Of.prototype.get,Of.prototype.getKeys=Of.prototype.I,Of.prototype.getProperties=Of.prototype.L,Of.prototype.set=Of.prototype.set,Of.prototype.setProperties=Of.prototype.G,Of.prototype.unbind=Of.prototype.P,Of.prototype.unbindAll=Of.prototype.R,Of.prototype.changed=Of.prototype.l,Of.prototype.getRevision=Of.prototype.A,Of.prototype.on=Of.prototype.u,Of.prototype.once=Of.prototype.B,Of.prototype.un=Of.prototype.v,Of.prototype.unByKey=Of.prototype.C,Hi.prototype.setSource=Hi.prototype.ga,Hi.prototype.getBrightness=Hi.prototype.d,Hi.prototype.getContrast=Hi.prototype.e,Hi.prototype.getHue=Hi.prototype.f,Hi.prototype.getExtent=Hi.prototype.D,
Hi.prototype.getMaxResolution=Hi.prototype.g,Hi.prototype.getMinResolution=Hi.prototype.i,Hi.prototype.getOpacity=Hi.prototype.j,Hi.prototype.getSaturation=Hi.prototype.n,Hi.prototype.getVisible=Hi.prototype.b,Hi.prototype.setBrightness=Hi.prototype.t,Hi.prototype.setContrast=Hi.prototype.F,Hi.prototype.setHue=Hi.prototype.J,Hi.prototype.setExtent=Hi.prototype.p,Hi.prototype.setMaxResolution=Hi.prototype.Q,Hi.prototype.setMinResolution=Hi.prototype.V,Hi.prototype.setOpacity=Hi.prototype.q,Hi.prototype.setSaturation=Hi.prototype.ba,Hi.prototype.setVisible=Hi.prototype.ca,Hi.prototype.bindTo=Hi.prototype.O,Hi.prototype.get=Hi.prototype.get,Hi.prototype.getKeys=Hi.prototype.I,Hi.prototype.getProperties=Hi.prototype.L,Hi.prototype.set=Hi.prototype.set,Hi.prototype.setProperties=Hi.prototype.G,Hi.prototype.unbind=Hi.prototype.P,Hi.prototype.unbindAll=Hi.prototype.R,Hi.prototype.changed=Hi.prototype.l,Hi.prototype.getRevision=Hi.prototype.A,Hi.prototype.on=Hi.prototype.u,Hi.prototype.once=Hi.prototype.B,Hi.prototype.un=Hi.prototype.v,Hi.prototype.unByKey=Hi.prototype.C,Np.prototype.getSource=Np.prototype.a,Np.prototype.getStyle=Np.prototype.Uc,Np.prototype.getStyleFunction=Np.prototype.Vc,Np.prototype.setStyle=Np.prototype.oa,Np.prototype.setSource=Np.prototype.ga,Np.prototype.getBrightness=Np.prototype.d,Np.prototype.getContrast=Np.prototype.e,Np.prototype.getHue=Np.prototype.f,Np.prototype.getExtent=Np.prototype.D,Np.prototype.getMaxResolution=Np.prototype.g,Np.prototype.getMinResolution=Np.prototype.i,Np.prototype.getOpacity=Np.prototype.j,Np.prototype.getSaturation=Np.prototype.n,Np.prototype.getVisible=Np.prototype.b,Np.prototype.setBrightness=Np.prototype.t,Np.prototype.setContrast=Np.prototype.F,Np.prototype.setHue=Np.prototype.J,Np.prototype.setExtent=Np.prototype.p,Np.prototype.setMaxResolution=Np.prototype.Q,Np.prototype.setMinResolution=Np.prototype.V,Np.prototype.setOpacity=Np.prototype.q,Np.prototype.setSaturation=Np.prototype.ba,Np.prototype.setVisible=Np.prototype.ca,Np.prototype.bindTo=Np.prototype.O,Np.prototype.get=Np.prototype.get,Np.prototype.getKeys=Np.prototype.I,Np.prototype.getProperties=Np.prototype.L,Np.prototype.set=Np.prototype.set,Np.prototype.setProperties=Np.prototype.G,Np.prototype.unbind=Np.prototype.P,Np.prototype.unbindAll=Np.prototype.R,Np.prototype.changed=Np.prototype.l,Np.prototype.getRevision=Np.prototype.A,Np.prototype.on=Np.prototype.u,Np.prototype.once=Np.prototype.B,Np.prototype.un=Np.prototype.v,Np.prototype.unByKey=Np.prototype.C,Fi.prototype.setSource=Fi.prototype.ga,Fi.prototype.getBrightness=Fi.prototype.d,Fi.prototype.getContrast=Fi.prototype.e,Fi.prototype.getHue=Fi.prototype.f,Fi.prototype.getExtent=Fi.prototype.D,Fi.prototype.getMaxResolution=Fi.prototype.g,Fi.prototype.getMinResolution=Fi.prototype.i,Fi.prototype.getOpacity=Fi.prototype.j,Fi.prototype.getSaturation=Fi.prototype.n,Fi.prototype.getVisible=Fi.prototype.b,Fi.prototype.setBrightness=Fi.prototype.t,Fi.prototype.setContrast=Fi.prototype.F,Fi.prototype.setHue=Fi.prototype.J,Fi.prototype.setExtent=Fi.prototype.p,Fi.prototype.setMaxResolution=Fi.prototype.Q,Fi.prototype.setMinResolution=Fi.prototype.V,Fi.prototype.setOpacity=Fi.prototype.q,Fi.prototype.setSaturation=Fi.prototype.ba,Fi.prototype.setVisible=Fi.prototype.ca,Fi.prototype.bindTo=Fi.prototype.O,Fi.prototype.get=Fi.prototype.get,Fi.prototype.getKeys=Fi.prototype.I,Fi.prototype.getProperties=Fi.prototype.L,Fi.prototype.set=Fi.prototype.set,Fi.prototype.setProperties=Fi.prototype.G,Fi.prototype.unbind=Fi.prototype.P,Fi.prototype.unbindAll=Fi.prototype.R,Fi.prototype.changed=Fi.prototype.l,Fi.prototype.getRevision=Fi.prototype.A,Fi.prototype.on=Fi.prototype.u,Fi.prototype.once=Fi.prototype.B,Fi.prototype.un=Fi.prototype.v,Fi.prototype.unByKey=Fi.prototype.C,zi.prototype.getBrightness=zi.prototype.d,zi.prototype.getContrast=zi.prototype.e,zi.prototype.getHue=zi.prototype.f,zi.prototype.getExtent=zi.prototype.D,zi.prototype.getMaxResolution=zi.prototype.g,zi.prototype.getMinResolution=zi.prototype.i,zi.prototype.getOpacity=zi.prototype.j,zi.prototype.getSaturation=zi.prototype.n,zi.prototype.getVisible=zi.prototype.b,zi.prototype.setBrightness=zi.prototype.t,zi.prototype.setContrast=zi.prototype.F,zi.prototype.setHue=zi.prototype.J,zi.prototype.setExtent=zi.prototype.p,zi.prototype.setMaxResolution=zi.prototype.Q,zi.prototype.setMinResolution=zi.prototype.V,zi.prototype.setOpacity=zi.prototype.q,zi.prototype.setSaturation=zi.prototype.ba,zi.prototype.setVisible=zi.prototype.ca,zi.prototype.bindTo=zi.prototype.O,zi.prototype.get=zi.prototype.get,zi.prototype.getKeys=zi.prototype.I,zi.prototype.getProperties=zi.prototype.L,zi.prototype.set=zi.prototype.set,zi.prototype.setProperties=zi.prototype.G,zi.prototype.unbind=zi.prototype.P,zi.prototype.unbindAll=zi.prototype.R,zi.prototype.changed=zi.prototype.l,zi.prototype.getRevision=zi.prototype.A,zi.prototype.on=zi.prototype.u,zi.prototype.once=zi.prototype.B,zi.prototype.un=zi.prototype.v,zi.prototype.unByKey=zi.prototype.C,Gi.prototype.setSource=Gi.prototype.ga,Gi.prototype.getBrightness=Gi.prototype.d,Gi.prototype.getContrast=Gi.prototype.e,Gi.prototype.getHue=Gi.prototype.f,Gi.prototype.getExtent=Gi.prototype.D,Gi.prototype.getMaxResolution=Gi.prototype.g,Gi.prototype.getMinResolution=Gi.prototype.i,Gi.prototype.getOpacity=Gi.prototype.j,Gi.prototype.getSaturation=Gi.prototype.n,Gi.prototype.getVisible=Gi.prototype.b,Gi.prototype.setBrightness=Gi.prototype.t,Gi.prototype.setContrast=Gi.prototype.F,Gi.prototype.setHue=Gi.prototype.J,Gi.prototype.setExtent=Gi.prototype.p,Gi.prototype.setMaxResolution=Gi.prototype.Q,Gi.prototype.setMinResolution=Gi.prototype.V,Gi.prototype.setOpacity=Gi.prototype.q,Gi.prototype.setSaturation=Gi.prototype.ba,Gi.prototype.setVisible=Gi.prototype.ca,Gi.prototype.bindTo=Gi.prototype.O,Gi.prototype.get=Gi.prototype.get,Gi.prototype.getKeys=Gi.prototype.I,Gi.prototype.getProperties=Gi.prototype.L,Gi.prototype.set=Gi.prototype.set,Gi.prototype.setProperties=Gi.prototype.G,Gi.prototype.unbind=Gi.prototype.P,Gi.prototype.unbindAll=Gi.prototype.R,Gi.prototype.changed=Gi.prototype.l,Gi.prototype.getRevision=Gi.prototype.A,Gi.prototype.on=Gi.prototype.u,Gi.prototype.once=Gi.prototype.B,Gi.prototype.un=Gi.prototype.v,Gi.prototype.unByKey=Gi.prototype.C,Gg.prototype.bindTo=Gg.prototype.O,Gg.prototype.get=Gg.prototype.get,Gg.prototype.getKeys=Gg.prototype.I,Gg.prototype.getProperties=Gg.prototype.L,Gg.prototype.set=Gg.prototype.set,Gg.prototype.setProperties=Gg.prototype.G,Gg.prototype.unbind=Gg.prototype.P,Gg.prototype.unbindAll=Gg.prototype.R,Gg.prototype.changed=Gg.prototype.l,Gg.prototype.getRevision=Gg.prototype.A,Gg.prototype.on=Gg.prototype.u,Gg.prototype.once=Gg.prototype.B,Gg.prototype.un=Gg.prototype.v,Gg.prototype.unByKey=Gg.prototype.C,Kg.prototype.getActive=Kg.prototype.a,Kg.prototype.setActive=Kg.prototype.b,Kg.prototype.bindTo=Kg.prototype.O,Kg.prototype.get=Kg.prototype.get,Kg.prototype.getKeys=Kg.prototype.I,Kg.prototype.getProperties=Kg.prototype.L,Kg.prototype.set=Kg.prototype.set,Kg.prototype.setProperties=Kg.prototype.G,Kg.prototype.unbind=Kg.prototype.P,Kg.prototype.unbindAll=Kg.prototype.R,Kg.prototype.changed=Kg.prototype.l,Kg.prototype.getRevision=Kg.prototype.A,Kg.prototype.on=Kg.prototype.u,Kg.prototype.once=Kg.prototype.B,Kg.prototype.un=Kg.prototype.v,Kg.prototype.unByKey=Kg.prototype.C,$o.prototype.getActive=$o.prototype.a,$o.prototype.setActive=$o.prototype.b,$o.prototype.bindTo=$o.prototype.O,$o.prototype.get=$o.prototype.get,$o.prototype.getKeys=$o.prototype.I,$o.prototype.getProperties=$o.prototype.L,$o.prototype.set=$o.prototype.set,$o.prototype.setProperties=$o.prototype.G,$o.prototype.unbind=$o.prototype.P,$o.prototype.unbindAll=$o.prototype.R,$o.prototype.changed=$o.prototype.l,$o.prototype.getRevision=$o.prototype.A,$o.prototype.on=$o.prototype.u,$o.prototype.once=$o.prototype.B,$o.prototype.un=$o.prototype.v,$o.prototype.unByKey=$o.prototype.C,Tg.prototype.getActive=Tg.prototype.a,Tg.prototype.setActive=Tg.prototype.b,Tg.prototype.bindTo=Tg.prototype.O,Tg.prototype.get=Tg.prototype.get,Tg.prototype.getKeys=Tg.prototype.I,Tg.prototype.getProperties=Tg.prototype.L,Tg.prototype.set=Tg.prototype.set,Tg.prototype.setProperties=Tg.prototype.G,Tg.prototype.unbind=Tg.prototype.P,Tg.prototype.unbindAll=Tg.prototype.R,Tg.prototype.changed=Tg.prototype.l,Tg.prototype.getRevision=Tg.prototype.A,Tg.prototype.on=Tg.prototype.u,Tg.prototype.once=Tg.prototype.B,Tg.prototype.un=Tg.prototype.v,Tg.prototype.unByKey=Tg.prototype.C,Wh.prototype.getActive=Wh.prototype.a,Wh.prototype.setActive=Wh.prototype.b,Wh.prototype.bindTo=Wh.prototype.O,Wh.prototype.get=Wh.prototype.get,Wh.prototype.getKeys=Wh.prototype.I,Wh.prototype.getProperties=Wh.prototype.L,Wh.prototype.set=Wh.prototype.set,Wh.prototype.setProperties=Wh.prototype.G,Wh.prototype.unbind=Wh.prototype.P,Wh.prototype.unbindAll=Wh.prototype.R,Wh.prototype.changed=Wh.prototype.l,Wh.prototype.getRevision=Wh.prototype.A,Wh.prototype.on=Wh.prototype.u,Wh.prototype.once=Wh.prototype.B,Wh.prototype.un=Wh.prototype.v,Wh.prototype.unByKey=Wh.prototype.C,Wg.prototype.getActive=Wg.prototype.a,Wg.prototype.setActive=Wg.prototype.b,Wg.prototype.bindTo=Wg.prototype.O,Wg.prototype.get=Wg.prototype.get,Wg.prototype.getKeys=Wg.prototype.I,Wg.prototype.getProperties=Wg.prototype.L,Wg.prototype.set=Wg.prototype.set,Wg.prototype.setProperties=Wg.prototype.G,Wg.prototype.unbind=Wg.prototype.P,Wg.prototype.unbindAll=Wg.prototype.R,Wg.prototype.changed=Wg.prototype.l,Wg.prototype.getRevision=Wg.prototype.A,Wg.prototype.on=Wg.prototype.u,Wg.prototype.once=Wg.prototype.B,Wg.prototype.un=Wg.prototype.v,Wg.prototype.unByKey=Wg.prototype.C,bp.prototype.getActive=bp.prototype.a,bp.prototype.setActive=bp.prototype.b,bp.prototype.bindTo=bp.prototype.O,bp.prototype.get=bp.prototype.get,bp.prototype.getKeys=bp.prototype.I,bp.prototype.getProperties=bp.prototype.L,bp.prototype.set=bp.prototype.set,bp.prototype.setProperties=bp.prototype.G,bp.prototype.unbind=bp.prototype.P,bp.prototype.unbindAll=bp.prototype.R,bp.prototype.changed=bp.prototype.l,bp.prototype.getRevision=bp.prototype.A,bp.prototype.on=bp.prototype.u,bp.prototype.once=bp.prototype.B,bp.prototype.un=bp.prototype.v,bp.prototype.unByKey=bp.prototype.C,$g.prototype.getActive=$g.prototype.a,$g.prototype.setActive=$g.prototype.b,$g.prototype.bindTo=$g.prototype.O,$g.prototype.get=$g.prototype.get,$g.prototype.getKeys=$g.prototype.I,$g.prototype.getProperties=$g.prototype.L,$g.prototype.set=$g.prototype.set,$g.prototype.setProperties=$g.prototype.G,$g.prototype.unbind=$g.prototype.P,$g.prototype.unbindAll=$g.prototype.R,$g.prototype.changed=$g.prototype.l,$g.prototype.getRevision=$g.prototype.A,$g.prototype.on=$g.prototype.u,$g.prototype.once=$g.prototype.B,$g.prototype.un=$g.prototype.v,$g.prototype.unByKey=$g.prototype.C,ji.prototype.getGeometry=ji.prototype.N,ji.prototype.getActive=ji.prototype.a,ji.prototype.setActive=ji.prototype.b,ji.prototype.bindTo=ji.prototype.O,ji.prototype.get=ji.prototype.get,ji.prototype.getKeys=ji.prototype.I,ji.prototype.getProperties=ji.prototype.L,ji.prototype.set=ji.prototype.set,ji.prototype.setProperties=ji.prototype.G,ji.prototype.unbind=ji.prototype.P,ji.prototype.unbindAll=ji.prototype.R,ji.prototype.changed=ji.prototype.l,ji.prototype.getRevision=ji.prototype.A,ji.prototype.on=ji.prototype.u,ji.prototype.once=ji.prototype.B,ji.prototype.un=ji.prototype.v,ji.prototype.unByKey=ji.prototype.C,rp.prototype.getActive=rp.prototype.a,rp.prototype.setActive=rp.prototype.b,rp.prototype.bindTo=rp.prototype.O,rp.prototype.get=rp.prototype.get,rp.prototype.getKeys=rp.prototype.I,rp.prototype.getProperties=rp.prototype.L,rp.prototype.set=rp.prototype.set,rp.prototype.setProperties=rp.prototype.G,rp.prototype.unbind=rp.prototype.P,rp.prototype.unbindAll=rp.prototype.R,rp.prototype.changed=rp.prototype.l,rp.prototype.getRevision=rp.prototype.A,rp.prototype.on=rp.prototype.u,rp.prototype.once=rp.prototype.B,rp.prototype.un=rp.prototype.v,rp.prototype.unByKey=rp.prototype.C,ki.prototype.getActive=ki.prototype.a,ki.prototype.setActive=ki.prototype.b,ki.prototype.bindTo=ki.prototype.O,ki.prototype.get=ki.prototype.get,ki.prototype.getKeys=ki.prototype.I,ki.prototype.getProperties=ki.prototype.L,ki.prototype.set=ki.prototype.set,ki.prototype.setProperties=ki.prototype.G,ki.prototype.unbind=ki.prototype.P,ki.prototype.unbindAll=ki.prototype.R,ki.prototype.changed=ki.prototype.l,ki.prototype.getRevision=ki.prototype.A,ki.prototype.on=ki.prototype.u,ki.prototype.once=ki.prototype.B,ki.prototype.un=ki.prototype.v,ki.prototype.unByKey=ki.prototype.C,mi.prototype.getActive=mi.prototype.a,mi.prototype.setActive=mi.prototype.b,mi.prototype.bindTo=mi.prototype.O,mi.prototype.get=mi.prototype.get,mi.prototype.getKeys=mi.prototype.I,mi.prototype.getProperties=mi.prototype.L,mi.prototype.set=mi.prototype.set,mi.prototype.setProperties=mi.prototype.G,mi.prototype.unbind=mi.prototype.P,mi.prototype.unbindAll=mi.prototype.R,mi.prototype.changed=mi.prototype.l,mi.prototype.getRevision=mi.prototype.A,mi.prototype.on=mi.prototype.u,mi.prototype.once=mi.prototype.B,mi.prototype.un=mi.prototype.v,mi.prototype.unByKey=mi.prototype.C,Bp.prototype.getActive=Bp.prototype.a,Bp.prototype.setActive=Bp.prototype.b,Bp.prototype.bindTo=Bp.prototype.O,Bp.prototype.get=Bp.prototype.get,Bp.prototype.getKeys=Bp.prototype.I,Bp.prototype.getProperties=Bp.prototype.L,Bp.prototype.set=Bp.prototype.set,Bp.prototype.setProperties=Bp.prototype.G,Bp.prototype.unbind=Bp.prototype.P,Bp.prototype.unbindAll=Bp.prototype.R,Bp.prototype.changed=Bp.prototype.l,Bp.prototype.getRevision=Bp.prototype.A,Bp.prototype.on=Bp.prototype.u,Bp.prototype.once=Bp.prototype.B,Bp.prototype.un=Bp.prototype.v,Bp.prototype.unByKey=Bp.prototype.C,oi.prototype.getActive=oi.prototype.a,oi.prototype.setActive=oi.prototype.b,oi.prototype.bindTo=oi.prototype.O,oi.prototype.get=oi.prototype.get,oi.prototype.getKeys=oi.prototype.I,oi.prototype.getProperties=oi.prototype.L,oi.prototype.set=oi.prototype.set,oi.prototype.setProperties=oi.prototype.G,oi.prototype.unbind=oi.prototype.P,oi.prototype.unbindAll=oi.prototype.R,oi.prototype.changed=oi.prototype.l,oi.prototype.getRevision=oi.prototype.A,oi.prototype.on=oi.prototype.u,oi.prototype.once=oi.prototype.B,oi.prototype.un=oi.prototype.v,oi.prototype.unByKey=oi.prototype.C,qi.prototype.getActive=qi.prototype.a,qi.prototype.setActive=qi.prototype.b,qi.prototype.bindTo=qi.prototype.O,qi.prototype.get=qi.prototype.get,qi.prototype.getKeys=qi.prototype.I,qi.prototype.getProperties=qi.prototype.L,qi.prototype.set=qi.prototype.set,qi.prototype.setProperties=qi.prototype.G,qi.prototype.unbind=qi.prototype.P,qi.prototype.unbindAll=qi.prototype.R,qi.prototype.changed=qi.prototype.l,qi.prototype.getRevision=qi.prototype.A,qi.prototype.on=qi.prototype.u,qi.prototype.once=qi.prototype.B,qi.prototype.un=qi.prototype.v,qi.prototype.unByKey=qi.prototype.C,ui.prototype.getActive=ui.prototype.a,ui.prototype.setActive=ui.prototype.b,ui.prototype.bindTo=ui.prototype.O,ui.prototype.get=ui.prototype.get,ui.prototype.getKeys=ui.prototype.I,ui.prototype.getProperties=ui.prototype.L,ui.prototype.set=ui.prototype.set,ui.prototype.setProperties=ui.prototype.G,ui.prototype.unbind=ui.prototype.P,ui.prototype.unbindAll=ui.prototype.R,ui.prototype.changed=ui.prototype.l,ui.prototype.getRevision=ui.prototype.A,ui.prototype.on=ui.prototype.u,ui.prototype.once=ui.prototype.B,ui.prototype.un=ui.prototype.v,ui.prototype.unByKey=ui.prototype.C,Kp.prototype.getActive=Kp.prototype.a,Kp.prototype.setActive=Kp.prototype.b,Kp.prototype.bindTo=Kp.prototype.O,Kp.prototype.get=Kp.prototype.get,Kp.prototype.getKeys=Kp.prototype.I,Kp.prototype.getProperties=Kp.prototype.L,Kp.prototype.set=Kp.prototype.set,Kp.prototype.setProperties=Kp.prototype.G,Kp.prototype.unbind=Kp.prototype.P,Kp.prototype.unbindAll=Kp.prototype.R,Kp.prototype.changed=Kp.prototype.l,Kp.prototype.getRevision=Kp.prototype.A,Kp.prototype.on=Kp.prototype.u,Kp.prototype.once=Kp.prototype.B,Kp.prototype.un=Kp.prototype.v,Kp.prototype.unByKey=Kp.prototype.C,ch.prototype.changed=ch.prototype.l,ch.prototype.getRevision=ch.prototype.A,ch.prototype.on=ch.prototype.u,ch.prototype.once=ch.prototype.B,ch.prototype.un=ch.prototype.v,ch.prototype.unByKey=ch.prototype.C,eh.prototype.clone=eh.prototype.clone,eh.prototype.getClosestPoint=eh.prototype.f,eh.prototype.getType=eh.prototype.H,eh.prototype.intersectsExtent=eh.prototype.ha,eh.prototype.transform=eh.prototype.e,eh.prototype.changed=eh.prototype.l,eh.prototype.getRevision=eh.prototype.A,eh.prototype.on=eh.prototype.u,eh.prototype.once=eh.prototype.B,eh.prototype.un=eh.prototype.v,eh.prototype.unByKey=eh.prototype.C,mj.prototype.getFirstCoordinate=mj.prototype.vb,mj.prototype.getLastCoordinate=mj.prototype.wb,mj.prototype.getLayout=mj.prototype.xb,mj.prototype.applyTransform=mj.prototype.ma,mj.prototype.translate=mj.prototype.Aa,mj.prototype.getClosestPoint=mj.prototype.f,mj.prototype.intersectsExtent=mj.prototype.ha,mj.prototype.changed=mj.prototype.l,mj.prototype.getRevision=mj.prototype.A,mj.prototype.on=mj.prototype.u,mj.prototype.once=mj.prototype.B,mj.prototype.un=mj.prototype.v,mj.prototype.unByKey=mj.prototype.C,oj.prototype.getClosestPoint=oj.prototype.f,oj.prototype.transform=oj.prototype.e,oj.prototype.changed=oj.prototype.l,oj.prototype.getRevision=oj.prototype.A,oj.prototype.on=oj.prototype.u,oj.prototype.once=oj.prototype.B,oj.prototype.un=oj.prototype.v,oj.prototype.unByKey=oj.prototype.C,yh.prototype.getExtent=yh.prototype.D,yh.prototype.getFirstCoordinate=yh.prototype.vb,yh.prototype.getLastCoordinate=yh.prototype.wb,yh.prototype.getLayout=yh.prototype.xb,yh.prototype.applyTransform=yh.prototype.ma,yh.prototype.translate=yh.prototype.Aa,yh.prototype.getClosestPoint=yh.prototype.f,yh.prototype.intersectsExtent=yh.prototype.ha,yh.prototype.transform=yh.prototype.e,yh.prototype.changed=yh.prototype.l,yh.prototype.getRevision=yh.prototype.A,yh.prototype.on=yh.prototype.u,yh.prototype.once=yh.prototype.B,yh.prototype.un=yh.prototype.v,yh.prototype.unByKey=yh.prototype.C,vj.prototype.getExtent=vj.prototype.D,vj.prototype.getFirstCoordinate=vj.prototype.vb,vj.prototype.getLastCoordinate=vj.prototype.wb,vj.prototype.getLayout=vj.prototype.xb,vj.prototype.applyTransform=vj.prototype.ma,vj.prototype.translate=vj.prototype.Aa,vj.prototype.getClosestPoint=vj.prototype.f,vj.prototype.transform=vj.prototype.e,vj.prototype.changed=vj.prototype.l,vj.prototype.getRevision=vj.prototype.A,vj.prototype.on=vj.prototype.u,vj.prototype.once=vj.prototype.B,vj.prototype.un=vj.prototype.v,vj.prototype.unByKey=vj.prototype.C,yj.prototype.getExtent=yj.prototype.D,yj.prototype.getFirstCoordinate=yj.prototype.vb,yj.prototype.getLastCoordinate=yj.prototype.wb,yj.prototype.getLayout=yj.prototype.xb,yj.prototype.applyTransform=yj.prototype.ma,yj.prototype.translate=yj.prototype.Aa,yj.prototype.getClosestPoint=yj.prototype.f,yj.prototype.transform=yj.prototype.e,yj.prototype.changed=yj.prototype.l,yj.prototype.getRevision=yj.prototype.A,yj.prototype.on=yj.prototype.u,yj.prototype.once=yj.prototype.B,yj.prototype.un=yj.prototype.v,yj.prototype.unByKey=yj.prototype.C,Cj.prototype.getExtent=Cj.prototype.D,Cj.prototype.getFirstCoordinate=Cj.prototype.vb,Cj.prototype.getLastCoordinate=Cj.prototype.wb,Cj.prototype.getLayout=Cj.prototype.xb,Cj.prototype.applyTransform=Cj.prototype.ma,Cj.prototype.translate=Cj.prototype.Aa,Cj.prototype.getClosestPoint=Cj.prototype.f,Cj.prototype.transform=Cj.prototype.e,Cj.prototype.changed=Cj.prototype.l,Cj.prototype.getRevision=Cj.prototype.A,Cj.prototype.on=Cj.prototype.u,Cj.prototype.once=Cj.prototype.B,Cj.prototype.un=Cj.prototype.v,Cj.prototype.unByKey=Cj.prototype.C,Dj.prototype.getExtent=Dj.prototype.D,Dj.prototype.getFirstCoordinate=Dj.prototype.vb,Dj.prototype.getLastCoordinate=Dj.prototype.wb,Dj.prototype.getLayout=Dj.prototype.xb,Dj.prototype.applyTransform=Dj.prototype.ma,Dj.prototype.translate=Dj.prototype.Aa,Dj.prototype.getClosestPoint=Dj.prototype.f,Dj.prototype.transform=Dj.prototype.e,Dj.prototype.changed=Dj.prototype.l,Dj.prototype.getRevision=Dj.prototype.A,Dj.prototype.on=Dj.prototype.u,Dj.prototype.once=Dj.prototype.B,Dj.prototype.un=Dj.prototype.v,Dj.prototype.unByKey=Dj.prototype.C,Ah.prototype.getFirstCoordinate=Ah.prototype.vb,Ah.prototype.getLastCoordinate=Ah.prototype.wb,Ah.prototype.getLayout=Ah.prototype.xb,Ah.prototype.applyTransform=Ah.prototype.ma,Ah.prototype.translate=Ah.prototype.Aa,Ah.prototype.getClosestPoint=Ah.prototype.f,Ah.prototype.transform=Ah.prototype.e,Ah.prototype.changed=Ah.prototype.l,Ah.prototype.getRevision=Ah.prototype.A,Ah.prototype.on=Ah.prototype.u,Ah.prototype.once=Ah.prototype.B,Ah.prototype.un=Ah.prototype.v,Ah.prototype.unByKey=Ah.prototype.C,Mh.prototype.getExtent=Mh.prototype.D,Mh.prototype.getFirstCoordinate=Mh.prototype.vb,Mh.prototype.getLastCoordinate=Mh.prototype.wb,Mh.prototype.getLayout=Mh.prototype.xb,Mh.prototype.applyTransform=Mh.prototype.ma,Mh.prototype.translate=Mh.prototype.Aa,Mh.prototype.getClosestPoint=Mh.prototype.f,Mh.prototype.transform=Mh.prototype.e,Mh.prototype.changed=Mh.prototype.l,Mh.prototype.getRevision=Mh.prototype.A,Mh.prototype.on=Mh.prototype.u,Mh.prototype.once=Mh.prototype.B,Mh.prototype.un=Mh.prototype.v,Mh.prototype.unByKey=Mh.prototype.C,Dm.prototype.readFeatures=Dm.prototype.ja,Bm.prototype.readFeatures=Bm.prototype.ja,Bm.prototype.readFeatures=Bm.prototype.ja,tl.prototype.bindTo=tl.prototype.O,tl.prototype.get=tl.prototype.get,tl.prototype.getKeys=tl.prototype.I,tl.prototype.getProperties=tl.prototype.L,tl.prototype.set=tl.prototype.set,tl.prototype.setProperties=tl.prototype.G,tl.prototype.unbind=tl.prototype.P,tl.prototype.unbindAll=tl.prototype.R,tl.prototype.changed=tl.prototype.l,tl.prototype.getRevision=tl.prototype.A,tl.prototype.on=tl.prototype.u,tl.prototype.once=tl.prototype.B,tl.prototype.un=tl.prototype.v,tl.prototype.unByKey=tl.prototype.C,ce.prototype.bindTo=ce.prototype.O,ce.prototype.get=ce.prototype.get,ce.prototype.getKeys=ce.prototype.I,ce.prototype.getProperties=ce.prototype.L,ce.prototype.set=ce.prototype.set,ce.prototype.setProperties=ce.prototype.G,ce.prototype.unbind=ce.prototype.P,ce.prototype.unbindAll=ce.prototype.R,ce.prototype.changed=ce.prototype.l,ce.prototype.getRevision=ce.prototype.A,ce.prototype.on=ce.prototype.u,ce.prototype.once=ce.prototype.B,ce.prototype.un=ce.prototype.v,ce.prototype.unByKey=ce.prototype.C,de.prototype.getMap=de.prototype.d,de.prototype.setMap=de.prototype.setMap,de.prototype.bindTo=de.prototype.O,de.prototype.get=de.prototype.get,de.prototype.getKeys=de.prototype.I,de.prototype.getProperties=de.prototype.L,de.prototype.set=de.prototype.set,de.prototype.setProperties=de.prototype.G,de.prototype.unbind=de.prototype.P,de.prototype.unbindAll=de.prototype.R,de.prototype.changed=de.prototype.l,de.prototype.getRevision=de.prototype.A,de.prototype.on=de.prototype.u,de.prototype.once=de.prototype.B,de.prototype.un=de.prototype.v,de.prototype.unByKey=de.prototype.C,ne.prototype.getMap=ne.prototype.d,ne.prototype.setMap=ne.prototype.setMap,ne.prototype.bindTo=ne.prototype.O,ne.prototype.get=ne.prototype.get,ne.prototype.getKeys=ne.prototype.I,ne.prototype.getProperties=ne.prototype.L,ne.prototype.set=ne.prototype.set,ne.prototype.setProperties=ne.prototype.G,ne.prototype.unbind=ne.prototype.P,ne.prototype.unbindAll=ne.prototype.R,ne.prototype.changed=ne.prototype.l,ne.prototype.getRevision=ne.prototype.A,ne.prototype.on=ne.prototype.u,ne.prototype.once=ne.prototype.B,ne.prototype.un=ne.prototype.v,ne.prototype.unByKey=ne.prototype.C,oe.prototype.getMap=oe.prototype.d,oe.prototype.bindTo=oe.prototype.O,oe.prototype.get=oe.prototype.get,oe.prototype.getKeys=oe.prototype.I,oe.prototype.getProperties=oe.prototype.L,oe.prototype.set=oe.prototype.set,oe.prototype.setProperties=oe.prototype.G,oe.prototype.unbind=oe.prototype.P,oe.prototype.unbindAll=oe.prototype.R,oe.prototype.changed=oe.prototype.l,oe.prototype.getRevision=oe.prototype.A,oe.prototype.on=oe.prototype.u,oe.prototype.once=oe.prototype.B,oe.prototype.un=oe.prototype.v,oe.prototype.unByKey=oe.prototype.C,Xk.prototype.getMap=Xk.prototype.d,Xk.prototype.bindTo=Xk.prototype.O,Xk.prototype.get=Xk.prototype.get,Xk.prototype.getKeys=Xk.prototype.I,Xk.prototype.getProperties=Xk.prototype.L,Xk.prototype.set=Xk.prototype.set,Xk.prototype.setProperties=Xk.prototype.G,Xk.prototype.unbind=Xk.prototype.P,Xk.prototype.unbindAll=Xk.prototype.R,Xk.prototype.changed=Xk.prototype.l,Xk.prototype.getRevision=Xk.prototype.A,Xk.prototype.on=Xk.prototype.u,Xk.prototype.once=Xk.prototype.B,Xk.prototype.un=Xk.prototype.v,Xk.prototype.unByKey=Xk.prototype.C,ge.prototype.getMap=ge.prototype.d,ge.prototype.setMap=ge.prototype.setMap,ge.prototype.bindTo=ge.prototype.O,ge.prototype.get=ge.prototype.get,ge.prototype.getKeys=ge.prototype.I,ge.prototype.getProperties=ge.prototype.L,ge.prototype.set=ge.prototype.set,ge.prototype.setProperties=ge.prototype.G,ge.prototype.unbind=ge.prototype.P,ge.prototype.unbindAll=ge.prototype.R,ge.prototype.changed=ge.prototype.l,ge.prototype.getRevision=ge.prototype.A,ge.prototype.on=ge.prototype.u,ge.prototype.once=ge.prototype.B,ge.prototype.un=ge.prototype.v,ge.prototype.unByKey=ge.prototype.C,bl.prototype.getMap=bl.prototype.d,bl.prototype.setMap=bl.prototype.setMap,bl.prototype.bindTo=bl.prototype.O,bl.prototype.get=bl.prototype.get,bl.prototype.getKeys=bl.prototype.I,bl.prototype.getProperties=bl.prototype.L,bl.prototype.set=bl.prototype.set,bl.prototype.setProperties=bl.prototype.G,bl.prototype.unbind=bl.prototype.P,bl.prototype.unbindAll=bl.prototype.R,bl.prototype.changed=bl.prototype.l,bl.prototype.getRevision=bl.prototype.A,bl.prototype.on=bl.prototype.u,bl.prototype.once=bl.prototype.B,bl.prototype.un=bl.prototype.v,bl.prototype.unByKey=bl.prototype.C,ie.prototype.getMap=ie.prototype.d,ie.prototype.setMap=ie.prototype.setMap,ie.prototype.bindTo=ie.prototype.O,ie.prototype.get=ie.prototype.get,ie.prototype.getKeys=ie.prototype.I,ie.prototype.getProperties=ie.prototype.L,ie.prototype.set=ie.prototype.set,ie.prototype.setProperties=ie.prototype.G,ie.prototype.unbind=ie.prototype.P,ie.prototype.unbindAll=ie.prototype.R,ie.prototype.changed=ie.prototype.l,ie.prototype.getRevision=ie.prototype.A,ie.prototype.on=ie.prototype.u,ie.prototype.once=ie.prototype.B,ie.prototype.un=ie.prototype.v,ie.prototype.unByKey=ie.prototype.C,nl.prototype.getMap=nl.prototype.d,nl.prototype.bindTo=nl.prototype.O,nl.prototype.get=nl.prototype.get,nl.prototype.getKeys=nl.prototype.I,nl.prototype.getProperties=nl.prototype.L,nl.prototype.set=nl.prototype.set,nl.prototype.setProperties=nl.prototype.G,nl.prototype.unbind=nl.prototype.P,nl.prototype.unbindAll=nl.prototype.R,nl.prototype.changed=nl.prototype.l,nl.prototype.getRevision=nl.prototype.A,nl.prototype.on=nl.prototype.u,nl.prototype.once=nl.prototype.B,nl.prototype.un=nl.prototype.v,nl.prototype.unByKey=nl.prototype.C,rl.prototype.getMap=rl.prototype.d,rl.prototype.setMap=rl.prototype.setMap,rl.prototype.bindTo=rl.prototype.O,rl.prototype.get=rl.prototype.get,rl.prototype.getKeys=rl.prototype.I,rl.prototype.getProperties=rl.prototype.L,rl.prototype.set=rl.prototype.set,rl.prototype.setProperties=rl.prototype.G,rl.prototype.unbind=rl.prototype.P,rl.prototype.unbindAll=rl.prototype.R,rl.prototype.changed=rl.prototype.l,rl.prototype.getRevision=rl.prototype.A,rl.prototype.on=rl.prototype.u,rl.prototype.once=rl.prototype.B,rl.prototype.un=rl.prototype.v,rl.prototype.unByKey=rl.prototype.C,Fr.ol})},{}],31:[function(require,module,exports){(function(global){var __browserify_shim_require__=require;(function browserifyShim(module,exports,require,define,browserify_shim__define__module__export__){var OpenLayers={VERSION_NUMBER:"Release 2.13.1",singleFile:!0,_getScriptLocation:function(){for(var a,b=/(^|(.*?\/))(OpenLayers[^\/]*?\.js)(\?|$)/,c=document.getElementsByTagName("script"),d="",e=0,f=c.length;f>e;e++)if((a=c[e].getAttribute("src"))&&(a=a.match(b))){d=a[1];break}return function(){return d}}(),ImgPath:""};OpenLayers.Class=function(){var a=arguments.length,b=arguments[0],c=arguments[a-1],d="function"==typeof c.initialize?c.initialize:function(){b.prototype.initialize.apply(this,arguments)};return a>1?(a=[d,b].concat(Array.prototype.slice.call(arguments).slice(1,a-1),c),OpenLayers.inherit.apply(null,a)):d.prototype=c,d},OpenLayers.inherit=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c;var d,e,c=2;for(d=arguments.length;d>c;c++)e=arguments[c],"function"==typeof e&&(e=e.prototype),OpenLayers.Util.extend(a.prototype,e)},OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.extend=function(a,b){if(a=a||{},b){for(var c in b){var d=b[c];void 0!==d&&(a[c]=d)}"function"==typeof window.Event&&b instanceof window.Event||!b.hasOwnProperty||!b.hasOwnProperty("toString")||(a.toString=b.toString)}return a},OpenLayers.String={startsWith:function(a,b){return 0==a.indexOf(b)},contains:function(a,b){return-1!=a.indexOf(b)},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(a){a=a.split("-");for(var b=a[0],c=1,d=a.length;d>c;c++)var e=a[c],b=b+(e.charAt(0).toUpperCase()+e.substring(1));return b},format:function(a,b,c){return b||(b=window),a.replace(OpenLayers.String.tokenRegEx,function(a,d){for(var e,f=d.split(/\.+/),g=0;g<f.length&&(0==g&&(e=b),void 0!==e);g++)e=e[f[g]];return"function"==typeof e&&(e=c?e.apply(null,c):e()),"undefined"==typeof e?"undefined":e})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(a){return OpenLayers.String.numberRegEx.test(a)},numericIf:function(a,b){var c=a;return!0===b&&null!=a&&a.replace&&(a=a.replace(/^\s*|\s*$/g,"")),OpenLayers.String.isNumeric(a)?parseFloat(a):c}},OpenLayers.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(a,b){var c=0;return b>0&&(c=parseFloat(a.toPrecision(b))),c},format:function(a,b,c,d){b="undefined"!=typeof b?b:0,c="undefined"!=typeof c?c:OpenLayers.Number.thousandsSeparator,d="undefined"!=typeof d?d:OpenLayers.Number.decimalSeparator,null!=b&&(a=parseFloat(a.toFixed(b)));var e=a.toString().split(".");if(1==e.length&&null==b&&(b=0),a=e[0],c)for(var f=/(-?[0-9]+)([0-9]{3})/;f.test(a);)a=a.replace(f,"$1"+c+"$2");return 0==b?b=a:(c=1<e.length?e[1]:"0",null!=b&&(c+=Array(b-c.length+1).join("0")),b=a+d+c),b},zeroPad:function(a,b,c){for(a=a.toString(c||10);a.length<b;)a="0"+a;return a}},OpenLayers.Function={bind:function(a,b){var c=Array.prototype.slice.apply(arguments,[2]);return function(){var d=c.concat(Array.prototype.slice.apply(arguments,[0]));return a.apply(b,d)}},bindAsEventListener:function(a,b){return function(c){return a.call(b,c||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},OpenLayers.Array={filter:function(a,b,c){var d=[];if(Array.prototype.filter)d=a.filter(b,c);else{var e=a.length;if("function"!=typeof b)throw new TypeError;for(var f=0;e>f;f++)if(f in a){var g=a[f];b.call(c,g,f,a)&&d.push(g)}}return d}},OpenLayers.Bounds=OpenLayers.Class({left:null,bottom:null,right:null,top:null,centerLonLat:null,initialize:function(a,b,c,d){OpenLayers.Util.isArray(a)&&(d=a[3],c=a[2],b=a[1],a=a[0]),null!=a&&(this.left=OpenLayers.Util.toFloat(a)),null!=b&&(this.bottom=OpenLayers.Util.toFloat(b)),null!=c&&(this.right=OpenLayers.Util.toFloat(c)),null!=d&&(this.top=OpenLayers.Util.toFloat(d))},clone:function(){return new OpenLayers.Bounds(this.left,this.bottom,this.right,this.top)},equals:function(a){var b=!1;return null!=a&&(b=this.left==a.left&&this.right==a.right&&this.top==a.top&&this.bottom==a.bottom),b},toString:function(){return[this.left,this.bottom,this.right,this.top].join()},toArray:function(a){return!0===a?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]},toBBOX:function(a,b){null==a&&(a=6);var c=Math.pow(10,a),d=Math.round(this.left*c)/c,e=Math.round(this.bottom*c)/c,f=Math.round(this.right*c)/c,c=Math.round(this.top*c)/c;
return!0===b?e+","+d+","+c+","+f:d+","+e+","+f+","+c},toGeometry:function(){return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left,this.bottom),new OpenLayers.Geometry.Point(this.right,this.bottom),new OpenLayers.Geometry.Point(this.right,this.top),new OpenLayers.Geometry.Point(this.left,this.top)])])},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},getSize:function(){return new OpenLayers.Size(this.getWidth(),this.getHeight())},getCenterPixel:function(){return new OpenLayers.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)},getCenterLonLat:function(){return this.centerLonLat||(this.centerLonLat=new OpenLayers.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat},scale:function(a,b){null==b&&(b=this.getCenterLonLat());var c,d;return"OpenLayers.LonLat"==b.CLASS_NAME?(c=b.lon,d=b.lat):(c=b.x,d=b.y),new OpenLayers.Bounds((this.left-c)*a+c,(this.bottom-d)*a+d,(this.right-c)*a+c,(this.top-d)*a+d)},add:function(a,b){if(null==a||null==b)throw new TypeError("Bounds.add cannot receive null values");return new OpenLayers.Bounds(this.left+a,this.bottom+b,this.right+a,this.top+b)},extend:function(a){if(a)switch(a.CLASS_NAME){case"OpenLayers.LonLat":this.extendXY(a.lon,a.lat);break;case"OpenLayers.Geometry.Point":this.extendXY(a.x,a.y);break;case"OpenLayers.Bounds":this.centerLonLat=null,(null==this.left||a.left<this.left)&&(this.left=a.left),(null==this.bottom||a.bottom<this.bottom)&&(this.bottom=a.bottom),(null==this.right||a.right>this.right)&&(this.right=a.right),(null==this.top||a.top>this.top)&&(this.top=a.top)}},extendXY:function(a,b){this.centerLonLat=null,(null==this.left||a<this.left)&&(this.left=a),(null==this.bottom||b<this.bottom)&&(this.bottom=b),(null==this.right||a>this.right)&&(this.right=a),(null==this.top||b>this.top)&&(this.top=b)},containsLonLat:function(a,b){"boolean"==typeof b&&(b={inclusive:b}),b=b||{};var c=this.contains(a.lon,a.lat,b.inclusive),d=b.worldBounds;return d&&!c&&(c=d.getWidth(),d=Math.round((a.lon-(d.left+d.right)/2)/c),c=this.containsLonLat({lon:a.lon-d*c,lat:a.lat},{inclusive:b.inclusive})),c},containsPixel:function(a,b){return this.contains(a.x,a.y,b)},contains:function(a,b,c){if(null==c&&(c=!0),null==a||null==b)return!1;a=OpenLayers.Util.toFloat(a),b=OpenLayers.Util.toFloat(b);var d=!1;return d=c?a>=this.left&&a<=this.right&&b>=this.bottom&&b<=this.top:a>this.left&&a<this.right&&b>this.bottom&&b<this.top},intersectsBounds:function(a,b){if("boolean"==typeof b&&(b={inclusive:b}),b=b||{},b.worldBounds){var c=this.wrapDateLine(b.worldBounds);a=a.wrapDateLine(b.worldBounds)}else c=this;null==b.inclusive&&(b.inclusive=!0);var d=!1,e=c.left==a.right||c.right==a.left||c.top==a.bottom||c.bottom==a.top;if(b.inclusive||!e)var d=a.top>=c.bottom&&a.top<=c.top||c.top>a.bottom&&c.top<a.top,e=a.left>=c.left&&a.left<=c.right||c.left>=a.left&&c.left<=a.right,f=a.right>=c.left&&a.right<=c.right||c.right>=a.left&&c.right<=a.right,d=(a.bottom>=c.bottom&&a.bottom<=c.top||c.bottom>=a.bottom&&c.bottom<=a.top||d)&&(e||f);if(b.worldBounds&&!d){var g=b.worldBounds,e=g.getWidth(),f=!g.containsBounds(c),g=!g.containsBounds(a);f&&!g?(a=a.add(-e,0),d=c.intersectsBounds(a,{inclusive:b.inclusive})):g&&!f&&(c=c.add(-e,0),d=a.intersectsBounds(c,{inclusive:b.inclusive}))}return d},containsBounds:function(a,b,c){null==b&&(b=!1),null==c&&(c=!0);var d=this.contains(a.left,a.bottom,c),e=this.contains(a.right,a.bottom,c),f=this.contains(a.left,a.top,c);return a=this.contains(a.right,a.top,c),b?d||e||f||a:d&&e&&f&&a},determineQuadrant:function(a){var b="",c=this.getCenterLonLat(),b=b+(a.lat<c.lat?"b":"t");return b+=a.lon<c.lon?"l":"r"},transform:function(a,b){this.centerLonLat=null;var c=OpenLayers.Projection.transform({x:this.left,y:this.bottom},a,b),d=OpenLayers.Projection.transform({x:this.right,y:this.bottom},a,b),e=OpenLayers.Projection.transform({x:this.left,y:this.top},a,b),f=OpenLayers.Projection.transform({x:this.right,y:this.top},a,b);return this.left=Math.min(c.x,e.x),this.bottom=Math.min(c.y,d.y),this.right=Math.max(d.x,f.x),this.top=Math.max(e.y,f.y),this},wrapDateLine:function(a,b){b=b||{};var c=b.leftTolerance||0,d=b.rightTolerance||0,e=this.clone();if(a){for(var f=a.getWidth();e.left<a.left&&e.right-d<=a.left;)e=e.add(f,0);for(;e.left+c>=a.right&&e.right>a.right;)e=e.add(-f,0);c=e.left+c,c<a.right&&c>a.left&&e.right-d>a.right&&(e=e.add(-f,0))}return e},CLASS_NAME:"OpenLayers.Bounds"}),OpenLayers.Bounds.fromString=function(a,b){var c=a.split(",");return OpenLayers.Bounds.fromArray(c,b)},OpenLayers.Bounds.fromArray=function(a,b){return!0===b?new OpenLayers.Bounds(a[1],a[0],a[3],a[2]):new OpenLayers.Bounds(a[0],a[1],a[2],a[3])},OpenLayers.Bounds.fromSize=function(a){return new OpenLayers.Bounds(0,a.h,a.w,0)},OpenLayers.Bounds.oppositeQuadrant=function(a){var b;return b=""+("t"==a.charAt(0)?"b":"t"),b+="l"==a.charAt(1)?"r":"l"},OpenLayers.Element={visible:function(a){return"none"!=OpenLayers.Util.getElement(a).style.display},toggle:function(){for(var a=0,b=arguments.length;b>a;a++){var c=OpenLayers.Util.getElement(arguments[a]),d=OpenLayers.Element.visible(c)?"none":"";c.style.display=d}},remove:function(a){a=OpenLayers.Util.getElement(a),a.parentNode.removeChild(a)},getHeight:function(a){return a=OpenLayers.Util.getElement(a),a.offsetHeight},hasClass:function(a,b){var c=a.className;return!!c&&RegExp("(^|\\s)"+b+"(\\s|$)").test(c)},addClass:function(a,b){return OpenLayers.Element.hasClass(a,b)||(a.className+=(a.className?" ":"")+b),a},removeClass:function(a,b){var c=a.className;return c&&(a.className=OpenLayers.String.trim(c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," "))),a},toggleClass:function(a,b){return OpenLayers.Element.hasClass(a,b)?OpenLayers.Element.removeClass(a,b):OpenLayers.Element.addClass(a,b),a},getStyle:function(a,b){a=OpenLayers.Util.getElement(a);var c=null;if(a&&a.style){c=a.style[OpenLayers.String.camelize(b)],c||(document.defaultView&&document.defaultView.getComputedStyle?c=(c=document.defaultView.getComputedStyle(a,null))?c.getPropertyValue(b):null:a.currentStyle&&(c=a.currentStyle[OpenLayers.String.camelize(b)]));var d=["left","top","right","bottom"];window.opera&&-1!=OpenLayers.Util.indexOf(d,b)&&"static"==OpenLayers.Element.getStyle(a,"position")&&(c="auto")}return"auto"==c?null:c}},OpenLayers.LonLat=OpenLayers.Class({lon:0,lat:0,initialize:function(a,b){OpenLayers.Util.isArray(a)&&(b=a[1],a=a[0]),this.lon=OpenLayers.Util.toFloat(a),this.lat=OpenLayers.Util.toFloat(b)},toString:function(){return"lon="+this.lon+",lat="+this.lat},toShortString:function(){return this.lon+", "+this.lat},clone:function(){return new OpenLayers.LonLat(this.lon,this.lat)},add:function(a,b){if(null==a||null==b)throw new TypeError("LonLat.add cannot receive null values");return new OpenLayers.LonLat(this.lon+OpenLayers.Util.toFloat(a),this.lat+OpenLayers.Util.toFloat(b))},equals:function(a){var b=!1;return null!=a&&(b=this.lon==a.lon&&this.lat==a.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(a.lon)&&isNaN(a.lat)),b},transform:function(a,b){var c=OpenLayers.Projection.transform({x:this.lon,y:this.lat},a,b);return this.lon=c.x,this.lat=c.y,this},wrapDateLine:function(a){var b=this.clone();if(a){for(;b.lon<a.left;)b.lon+=a.getWidth();for(;b.lon>a.right;)b.lon-=a.getWidth()}return b},CLASS_NAME:"OpenLayers.LonLat"}),OpenLayers.LonLat.fromString=function(a){return a=a.split(","),new OpenLayers.LonLat(a[0],a[1])},OpenLayers.LonLat.fromArray=function(a){var b=OpenLayers.Util.isArray(a);return new OpenLayers.LonLat(b&&a[0],b&&a[1])},OpenLayers.Pixel=OpenLayers.Class({x:0,y:0,initialize:function(a,b){this.x=parseFloat(a),this.y=parseFloat(b)},toString:function(){return"x="+this.x+",y="+this.y},clone:function(){return new OpenLayers.Pixel(this.x,this.y)},equals:function(a){var b=!1;return null!=a&&(b=this.x==a.x&&this.y==a.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(a.x)&&isNaN(a.y)),b},distanceTo:function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},add:function(a,b){if(null==a||null==b)throw new TypeError("Pixel.add cannot receive null values");return new OpenLayers.Pixel(this.x+a,this.y+b)},offset:function(a){var b=this.clone();return a&&(b=this.add(a.x,a.y)),b},CLASS_NAME:"OpenLayers.Pixel"}),OpenLayers.Size=OpenLayers.Class({w:0,h:0,initialize:function(a,b){this.w=parseFloat(a),this.h=parseFloat(b)},toString:function(){return"w="+this.w+",h="+this.h},clone:function(){return new OpenLayers.Size(this.w,this.h)},equals:function(a){var b=!1;return null!=a&&(b=this.w==a.w&&this.h==a.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(a.w)&&isNaN(a.h)),b},CLASS_NAME:"OpenLayers.Size"}),OpenLayers.Console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},userError:function(a){alert(a)},assert:function(){},dir:function(){},dirxml:function(){},trace:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},profile:function(){},profileEnd:function(){},count:function(){},CLASS_NAME:"OpenLayers.Console"},function(){for(var a=document.getElementsByTagName("script"),b=0,c=a.length;c>b;++b)if(-1!=a[b].src.indexOf("firebug.js")&&console){OpenLayers.Util.extend(OpenLayers.Console,console);break}}(),OpenLayers.Lang={code:null,defaultCode:"en",getCode:function(){return OpenLayers.Lang.code||OpenLayers.Lang.setCode(),OpenLayers.Lang.code},setCode:function(a){var b;if(a||(a="msie"==OpenLayers.BROWSER_NAME?navigator.userLanguage:navigator.language),a=a.split("-"),a[0]=a[0].toLowerCase(),"object"==typeof OpenLayers.Lang[a[0]]&&(b=a[0]),a[1]){var c=a[0]+"-"+a[1].toUpperCase();"object"==typeof OpenLayers.Lang[c]&&(b=c)}b||(OpenLayers.Console.warn("Failed to find OpenLayers.Lang."+a.join("-")+" dictionary, falling back to default language"),b=OpenLayers.Lang.defaultCode),OpenLayers.Lang.code=b},translate:function(a,b){var c=OpenLayers.Lang[OpenLayers.Lang.getCode()];return(c=c&&c[a])||(c=a),b&&(c=OpenLayers.String.format(c,b)),c}},OpenLayers.i18n=OpenLayers.Lang.translate,OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.getElement=function(){for(var a=[],b=0,c=arguments.length;c>b;b++){var d=arguments[b];if("string"==typeof d&&(d=document.getElementById(d)),1==arguments.length)return d;a.push(d)}return a},OpenLayers.Util.isElement=function(a){return!(!a||1!==a.nodeType)},OpenLayers.Util.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},OpenLayers.Util.removeItem=function(a,b){for(var c=a.length-1;c>=0;c--)a[c]==b&&a.splice(c,1);return a},OpenLayers.Util.indexOf=function(a,b){if("function"==typeof a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return c;return-1},OpenLayers.Util.dotless=/\./g,OpenLayers.Util.modifyDOMElement=function(a,b,c,d,e,f,g,h){b&&(a.id=b.replace(OpenLayers.Util.dotless,"_")),c&&(a.style.left=c.x+"px",a.style.top=c.y+"px"),d&&(a.style.width=d.w+"px",a.style.height=d.h+"px"),e&&(a.style.position=e),f&&(a.style.border=f),g&&(a.style.overflow=g),0<=parseFloat(h)&&1>parseFloat(h)?(a.style.filter="alpha(opacity="+100*h+")",a.style.opacity=h):1==parseFloat(h)&&(a.style.filter="",a.style.opacity="")},OpenLayers.Util.createDiv=function(a,b,c,d,e,f,g,h){var i=document.createElement("div");return d&&(i.style.backgroundImage="url("+d+")"),a||(a=OpenLayers.Util.createUniqueID("OpenLayersDiv")),e||(e="absolute"),OpenLayers.Util.modifyDOMElement(i,a,b,c,e,f,g,h),i},OpenLayers.Util.createImage=function(a,b,c,d,e,f,g,h){var i=document.createElement("img");return a||(a=OpenLayers.Util.createUniqueID("OpenLayersDiv")),e||(e="relative"),OpenLayers.Util.modifyDOMElement(i,a,b,c,e,f,null,g),h&&(i.style.display="none",b=function(){i.style.display="",OpenLayers.Event.stopObservingElement(i)},OpenLayers.Event.observe(i,"load",b),OpenLayers.Event.observe(i,"error",b)),i.style.alt=a,i.galleryImg="no",d&&(i.src=d),i},OpenLayers.IMAGE_RELOAD_ATTEMPTS=0,OpenLayers.Util.alphaHackNeeded=null,OpenLayers.Util.alphaHack=function(){if(null==OpenLayers.Util.alphaHackNeeded){var a=navigator.appVersion.split("MSIE"),a=parseFloat(a[1]),b=!1;try{b=!!document.body.filters}catch(c){}OpenLayers.Util.alphaHackNeeded=b&&a>=5.5&&7>a}return OpenLayers.Util.alphaHackNeeded},OpenLayers.Util.modifyAlphaImageDiv=function(a,b,c,d,e,f,g,h,i){OpenLayers.Util.modifyDOMElement(a,b,c,d,f,null,null,i),b=a.childNodes[0],e&&(b.src=e),OpenLayers.Util.modifyDOMElement(b,a.id+"_innerImage",null,d,"relative",g),OpenLayers.Util.alphaHack()&&("none"!=a.style.display&&(a.style.display="inline-block"),null==h&&(h="scale"),a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b.src+"', sizingMethod='"+h+"')",0<=parseFloat(a.style.opacity)&&1>parseFloat(a.style.opacity)&&(a.style.filter+=" alpha(opacity="+100*a.style.opacity+")"),b.style.filter="alpha(opacity=0)")},OpenLayers.Util.createAlphaImageDiv=function(a,b,c,d,e,f,g,h,i){var j=OpenLayers.Util.createDiv();return i=OpenLayers.Util.createImage(null,null,null,null,null,null,null,i),i.className="olAlphaImg",j.appendChild(i),OpenLayers.Util.modifyAlphaImageDiv(j,a,b,c,d,e,f,g,h),j},OpenLayers.Util.upperCaseObject=function(a){var b,c={};for(b in a)c[b.toUpperCase()]=a[b];return c},OpenLayers.Util.applyDefaults=function(a,b){a=a||{};var c,d="function"==typeof window.Event&&b instanceof window.Event;for(c in b)(void 0===a[c]||!d&&b.hasOwnProperty&&b.hasOwnProperty(c)&&!a.hasOwnProperty(c))&&(a[c]=b[c]);return!d&&b&&b.hasOwnProperty&&b.hasOwnProperty("toString")&&!a.hasOwnProperty("toString")&&(a.toString=b.toString),a},OpenLayers.Util.getParameterString=function(a){var b,c=[];for(b in a){var d=a[b];if(null!=d&&"function"!=typeof d){if("object"==typeof d&&d.constructor==Array){for(var e,f=[],g=0,h=d.length;h>g;g++)e=d[g],f.push(encodeURIComponent(null===e||void 0===e?"":e));d=f.join(",")}else d=encodeURIComponent(d);c.push(encodeURIComponent(b)+"="+d)}}return c.join("&")},OpenLayers.Util.urlAppend=function(a,b){var c=a;if(b)var d=(a+" ").split(/[?&]/),c=c+(" "===d.pop()?b:d.length?"&"+b:"?"+b);return c},OpenLayers.Util.getImagesLocation=function(){return OpenLayers.ImgPath||OpenLayers._getScriptLocation()+"img/"},OpenLayers.Util.getImageLocation=function(a){return OpenLayers.Util.getImagesLocation()+a},OpenLayers.Util.Try=function(){for(var a=null,b=0,c=arguments.length;c>b;b++){var d=arguments[b];try{a=d();break}catch(e){}}return a},OpenLayers.Util.getXmlNodeValue=function(a){var b=null;return OpenLayers.Util.Try(function(){b=a.text,b||(b=a.textContent),b||(b=a.firstChild.nodeValue)},function(){b=a.textContent}),b},OpenLayers.Util.mouseLeft=function(a,b){for(var c=a.relatedTarget?a.relatedTarget:a.toElement;c!=b&&null!=c;)c=c.parentNode;return c!=b},OpenLayers.Util.DEFAULT_PRECISION=14,OpenLayers.Util.toFloat=function(a,b){return null==b&&(b=OpenLayers.Util.DEFAULT_PRECISION),"number"!=typeof a&&(a=parseFloat(a)),0===b?a:parseFloat(a.toPrecision(b))},OpenLayers.Util.rad=function(a){return a*Math.PI/180},OpenLayers.Util.deg=function(a){return 180*a/Math.PI},OpenLayers.Util.VincentyConstants={a:6378137,b:6356752.3142,f:1/298.257223563},OpenLayers.Util.distVincenty=function(a,b){for(var c=OpenLayers.Util.VincentyConstants,d=c.a,e=c.b,c=c.f,f=OpenLayers.Util.rad(b.lon-a.lon),g=Math.atan((1-c)*Math.tan(OpenLayers.Util.rad(a.lat))),h=Math.atan((1-c)*Math.tan(OpenLayers.Util.rad(b.lat))),i=Math.sin(g),g=Math.cos(g),j=Math.sin(h),h=Math.cos(h),k=f,l=2*Math.PI,m=20;1e-12<Math.abs(k-l)&&0<--m;){var n=Math.sin(k),o=Math.cos(k),p=Math.sqrt(h*n*h*n+(g*j-i*h*o)*(g*j-i*h*o));if(0==p)return 0;var o=i*j+g*h*o,q=Math.atan2(p,o),r=Math.asin(g*h*n/p),s=Math.cos(r)*Math.cos(r),n=o-2*i*j/s,t=c/16*s*(4+c*(4-3*s)),l=k,k=f+(1-t)*c*Math.sin(r)*(q+t*p*(n+t*o*(-1+2*n*n)))}return 0==m?NaN:(d=s*(d*d-e*e)/(e*e),c=d/1024*(256+d*(-128+d*(74-47*d))),(e*(1+d/16384*(4096+d*(-768+d*(320-175*d))))*(q-c*p*(n+c/4*(o*(-1+2*n*n)-c/6*n*(-3+4*p*p)*(-3+4*n*n))))).toFixed(3)/1e3)},OpenLayers.Util.destinationVincenty=function(a,b,c){var d=OpenLayers.Util,e=d.VincentyConstants,f=e.a,g=e.b,h=e.f,e=a.lon;a=a.lat;var i=d.rad(b);b=Math.sin(i),i=Math.cos(i),a=(1-h)*Math.tan(d.rad(a));var j=1/Math.sqrt(1+a*a),k=a*j,l=Math.atan2(a,i);a=j*b;for(var m=1-a*a,f=m*(f*f-g*g)/(g*g),n=1+f/16384*(4096+f*(-768+f*(320-175*f))),o=f/1024*(256+f*(-128+f*(74-47*f))),f=c/(g*n),p=2*Math.PI;1e-12<Math.abs(f-p);)var q=Math.cos(2*l+f),r=Math.sin(f),s=Math.cos(f),t=o*r*(q+o/4*(s*(-1+2*q*q)-o/6*q*(-3+4*r*r)*(-3+4*q*q))),p=f,f=c/(g*n)+t;return c=k*r-j*s*i,g=Math.atan2(k*s+j*r*i,(1-h)*Math.sqrt(a*a+c*c)),b=Math.atan2(r*b,j*s-k*r*i),i=h/16*m*(4+h*(4-3*m)),q=b-(1-i)*h*a*(f+i*r*(q+i*s*(-1+2*q*q))),Math.atan2(a,-c),new OpenLayers.LonLat(e+d.deg(q),d.deg(g))},OpenLayers.Util.getParameters=function(a,b){b=b||{},a=null===a||void 0===a?window.location.href:a;var c="";if(OpenLayers.String.contains(a,"?"))var d=a.indexOf("?")+1,c=OpenLayers.String.contains(a,"#")?a.indexOf("#"):a.length,c=a.substring(d,c);for(var d={},c=c.split(/[&;]/),e=0,f=c.length;f>e;++e){var g=c[e].split("=");if(g[0]){var h=g[0];try{h=decodeURIComponent(h)}catch(i){h=unescape(h)}g=(g[1]||"").replace(/\+/g," ");try{g=decodeURIComponent(g)}catch(j){g=unescape(g)}!1!==b.splitArgs&&(g=g.split(",")),1==g.length&&(g=g[0]),d[h]=g}}return d},OpenLayers.Util.lastSeqID=0,OpenLayers.Util.createUniqueID=function(a){return a=null==a?"id_":a.replace(OpenLayers.Util.dotless,"_"),OpenLayers.Util.lastSeqID+=1,a+OpenLayers.Util.lastSeqID},OpenLayers.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.37,km:39370,dd:4374754,yd:36},OpenLayers.INCHES_PER_UNIT["in"]=OpenLayers.INCHES_PER_UNIT.inches,OpenLayers.INCHES_PER_UNIT.degrees=OpenLayers.INCHES_PER_UNIT.dd,OpenLayers.INCHES_PER_UNIT.nmi=1852*OpenLayers.INCHES_PER_UNIT.m,OpenLayers.METERS_PER_INCH=.0254000508001016,OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{Inch:OpenLayers.INCHES_PER_UNIT.inches,Meter:1/OpenLayers.METERS_PER_INCH,Foot:.3048006096012192/OpenLayers.METERS_PER_INCH,IFoot:.3048/OpenLayers.METERS_PER_INCH,ClarkeFoot:.3047972651151/OpenLayers.METERS_PER_INCH,SearsFoot:.30479947153867626/OpenLayers.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/OpenLayers.METERS_PER_INCH,IInch:.0254/OpenLayers.METERS_PER_INCH,MicroInch:254e-7/OpenLayers.METERS_PER_INCH,Mil:2.54e-8/OpenLayers.METERS_PER_INCH,Centimeter:.01/OpenLayers.METERS_PER_INCH,Kilometer:1e3/OpenLayers.METERS_PER_INCH,Yard:.9144018288036576/OpenLayers.METERS_PER_INCH,SearsYard:.914398414616029/OpenLayers.METERS_PER_INCH,IndianYard:.9143985307444408/OpenLayers.METERS_PER_INCH,IndianYd37:.91439523/OpenLayers.METERS_PER_INCH,IndianYd62:.9143988/OpenLayers.METERS_PER_INCH,IndianYd75:.9143985/OpenLayers.METERS_PER_INCH,IndianFoot:.30479951/OpenLayers.METERS_PER_INCH,IndianFt37:.30479841/OpenLayers.METERS_PER_INCH,IndianFt62:.3047996/OpenLayers.METERS_PER_INCH,IndianFt75:.3047995/OpenLayers.METERS_PER_INCH,Mile:1609.3472186944373/OpenLayers.METERS_PER_INCH,IYard:.9144/OpenLayers.METERS_PER_INCH,IMile:1609.344/OpenLayers.METERS_PER_INCH,NautM:1852/OpenLayers.METERS_PER_INCH,"Lat-66":110943.31648893273/OpenLayers.METERS_PER_INCH,"Lat-83":110946.25736872235/OpenLayers.METERS_PER_INCH,Decimeter:.1/OpenLayers.METERS_PER_INCH,Millimeter:.001/OpenLayers.METERS_PER_INCH,Dekameter:10/OpenLayers.METERS_PER_INCH,Decameter:10/OpenLayers.METERS_PER_INCH,Hectometer:100/OpenLayers.METERS_PER_INCH,GermanMeter:1.0000135965/OpenLayers.METERS_PER_INCH,CaGrid:.999738/OpenLayers.METERS_PER_INCH,ClarkeChain:20.1166194976/OpenLayers.METERS_PER_INCH,GunterChain:20.11684023368047/OpenLayers.METERS_PER_INCH,BenoitChain:20.116782494375872/OpenLayers.METERS_PER_INCH,SearsChain:20.11676512155/OpenLayers.METERS_PER_INCH,ClarkeLink:.201166194976/OpenLayers.METERS_PER_INCH,GunterLink:.2011684023368047/OpenLayers.METERS_PER_INCH,BenoitLink:.20116782494375873/OpenLayers.METERS_PER_INCH,SearsLink:.2011676512155/OpenLayers.METERS_PER_INCH,Rod:5.02921005842012/OpenLayers.METERS_PER_INCH,IntnlChain:20.1168/OpenLayers.METERS_PER_INCH,IntnlLink:.201168/OpenLayers.METERS_PER_INCH,Perch:5.02921005842012/OpenLayers.METERS_PER_INCH,Pole:5.02921005842012/OpenLayers.METERS_PER_INCH,Furlong:201.1684023368046/OpenLayers.METERS_PER_INCH,Rood:3.778266898/OpenLayers.METERS_PER_INCH,CapeFoot:.3047972615/OpenLayers.METERS_PER_INCH,Brealey:375/OpenLayers.METERS_PER_INCH,ModAmFt:.304812252984506/OpenLayers.METERS_PER_INCH,Fathom:1.8288/OpenLayers.METERS_PER_INCH,"NautM-UK":1853.184/OpenLayers.METERS_PER_INCH,"50kilometers":5e4/OpenLayers.METERS_PER_INCH,"150kilometers":15e4/OpenLayers.METERS_PER_INCH}),OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{mm:OpenLayers.INCHES_PER_UNIT.Meter/1e3,cm:OpenLayers.INCHES_PER_UNIT.Meter/100,dm:100*OpenLayers.INCHES_PER_UNIT.Meter,km:1e3*OpenLayers.INCHES_PER_UNIT.Meter,kmi:OpenLayers.INCHES_PER_UNIT.nmi,fath:OpenLayers.INCHES_PER_UNIT.Fathom,ch:OpenLayers.INCHES_PER_UNIT.IntnlChain,link:OpenLayers.INCHES_PER_UNIT.IntnlLink,"us-in":OpenLayers.INCHES_PER_UNIT.inches,"us-ft":OpenLayers.INCHES_PER_UNIT.Foot,"us-yd":OpenLayers.INCHES_PER_UNIT.Yard,"us-ch":OpenLayers.INCHES_PER_UNIT.GunterChain,"us-mi":OpenLayers.INCHES_PER_UNIT.Mile,"ind-yd":OpenLayers.INCHES_PER_UNIT.IndianYd37,"ind-ft":OpenLayers.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/OpenLayers.METERS_PER_INCH}),OpenLayers.DOTS_PER_INCH=72,OpenLayers.Util.normalizeScale=function(a){return a>1?1/a:a},OpenLayers.Util.getResolutionFromScale=function(a,b){var c;return a&&(null==b&&(b="degrees"),c=1/(OpenLayers.Util.normalizeScale(a)*OpenLayers.INCHES_PER_UNIT[b]*OpenLayers.DOTS_PER_INCH)),c},OpenLayers.Util.getScaleFromResolution=function(a,b){return null==b&&(b="degrees"),a*OpenLayers.INCHES_PER_UNIT[b]*OpenLayers.DOTS_PER_INCH},OpenLayers.Util.pagePosition=function(a){var b=[0,0],c=OpenLayers.Util.getViewportElement();if(!a||a==window||a==c)return b;var d=OpenLayers.IS_GECKO&&document.getBoxObjectFor&&"absolute"==OpenLayers.Element.getStyle(a,"position")&&(""==a.style.top||""==a.style.left),e=null;if(a.getBoundingClientRect)a=a.getBoundingClientRect(),e=window.pageYOffset||c.scrollTop,b[0]=a.left+(window.pageXOffset||c.scrollLeft),b[1]=a.top+e;else if(document.getBoxObjectFor&&!d)a=document.getBoxObjectFor(a),c=document.getBoxObjectFor(c),b[0]=a.screenX-c.screenX,b[1]=a.screenY-c.screenY;else{if(b[0]=a.offsetLeft,b[1]=a.offsetTop,e=a.offsetParent,e!=a)for(;e;)b[0]+=e.offsetLeft,b[1]+=e.offsetTop,e=e.offsetParent;for(c=OpenLayers.BROWSER_NAME,("opera"==c||"safari"==c&&"absolute"==OpenLayers.Element.getStyle(a,"position"))&&(b[1]-=document.body.offsetTop),e=a.offsetParent;e&&e!=document.body;)b[0]-=e.scrollLeft,("opera"!=c||"TR"!=e.tagName)&&(b[1]-=e.scrollTop),e=e.offsetParent}return b},OpenLayers.Util.getViewportElement=function(){var a=arguments.callee.viewportElement;return void 0==a&&(a="msie"==OpenLayers.BROWSER_NAME&&"CSS1Compat"!=document.compatMode?document.body:document.documentElement,arguments.callee.viewportElement=a),a},OpenLayers.Util.isEquivalentUrl=function(a,b,c){c=c||{},OpenLayers.Util.applyDefaults(c,{ignoreCase:!0,ignorePort80:!0,ignoreHash:!0,splitArgs:!1}),a=OpenLayers.Util.createUrlObject(a,c),b=OpenLayers.Util.createUrlObject(b,c);for(var d in a)if("args"!==d&&a[d]!=b[d])return!1;for(d in a.args){if(a.args[d]!=b.args[d])return!1;delete b.args[d]}for(d in b.args)return!1;return!0},OpenLayers.Util.createUrlObject=function(a,b){if(b=b||{},!/^\w+:\/\//.test(a)){var c=window.location,d=c.port?":"+c.port:"",d=c.protocol+"//"+c.host.split(":").shift()+d;0===a.indexOf("/")?a=d+a:(c=c.pathname.split("/"),c.pop(),a=d+c.join("/")+"/"+a)}b.ignoreCase&&(a=a.toLowerCase()),c=document.createElement("a"),c.href=a,d={},d.host=c.host.split(":").shift(),d.protocol=c.protocol,d.port=b.ignorePort80?"80"==c.port||"0"==c.port?"":c.port:""==c.port||"0"==c.port?"80":c.port,d.hash=b.ignoreHash||"#"===c.hash?"":c.hash;var e=c.search;return e||(e=a.indexOf("?"),e=-1!=e?a.substr(e):""),d.args=OpenLayers.Util.getParameters(e,{splitArgs:b.splitArgs}),d.pathname="/"==c.pathname.charAt(0)?c.pathname:"/"+c.pathname,d},OpenLayers.Util.removeTail=function(a){var b=null,b=a.indexOf("?"),c=a.indexOf("#");return b=-1==b?-1!=c?a.substr(0,c):a:-1!=c?a.substr(0,Math.min(b,c)):a.substr(0,b)},OpenLayers.IS_GECKO=function(){var a=navigator.userAgent.toLowerCase();return-1==a.indexOf("webkit")&&-1!=a.indexOf("gecko")}(),OpenLayers.CANVAS_SUPPORTED=function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}(),OpenLayers.BROWSER_NAME=function(){var a="",b=navigator.userAgent.toLowerCase();return-1!=b.indexOf("opera")?a="opera":-1!=b.indexOf("msie")?a="msie":-1!=b.indexOf("safari")?a="safari":-1!=b.indexOf("mozilla")&&(a=-1!=b.indexOf("firefox")?"firefox":"mozilla"),a}(),OpenLayers.Util.getBrowserName=function(){return OpenLayers.BROWSER_NAME},OpenLayers.Util.getRenderedDimensions=function(a,b,c){var d,e,f=document.createElement("div");f.style.visibility="hidden";for(var g=c&&c.containerElement?c.containerElement:document.body,h=!1,i=null,j=g;j&&"body"!=j.tagName.toLowerCase();){var k=OpenLayers.Element.getStyle(j,"position");if("absolute"==k){h=!0;break}if(k&&"static"!=k)break;j=j.parentNode}if(!h||0!==g.clientHeight&&0!==g.clientWidth||(i=document.createElement("div"),i.style.visibility="hidden",i.style.position="absolute",i.style.overflow="visible",i.style.width=document.body.clientWidth+"px",i.style.height=document.body.clientHeight+"px",i.appendChild(f)),f.style.position="absolute",b&&(b.w?(d=b.w,f.style.width=d+"px"):b.h&&(e=b.h,f.style.height=e+"px")),c&&c.displayClass&&(f.className=c.displayClass),b=document.createElement("div"),b.innerHTML=a,b.style.overflow="visible",b.childNodes)for(a=0,c=b.childNodes.length;c>a;a++)b.childNodes[a].style&&(b.childNodes[a].style.overflow="visible");return f.appendChild(b),g.appendChild(i?i:f),d||(d=parseInt(b.scrollWidth),f.style.width=d+"px"),e||(e=parseInt(b.scrollHeight)),f.removeChild(b),i?(i.removeChild(f),g.removeChild(i)):g.removeChild(f),new OpenLayers.Size(d,e)},OpenLayers.Util.getScrollbarWidth=function(){var a=OpenLayers.Util._scrollbarWidth;if(null==a){var b=null,c=null,b=a=0,b=document.createElement("div");b.style.position="absolute",b.style.top="-1000px",b.style.left="-1000px",b.style.width="100px",b.style.height="50px",b.style.overflow="hidden",c=document.createElement("div"),c.style.width="100%",c.style.height="200px",b.appendChild(c),document.body.appendChild(b),a=c.offsetWidth,b.style.overflow="scroll",b=c.offsetWidth,document.body.removeChild(document.body.lastChild),OpenLayers.Util._scrollbarWidth=a-b,a=OpenLayers.Util._scrollbarWidth}return a},OpenLayers.Util.getFormattedLonLat=function(a,b,c){c||(c="dms"),a=(a+540)%360-180;var d=Math.abs(a),e=Math.floor(d),f=d=(d-e)/(1/60),d=Math.floor(d),f=Math.round(10*((f-d)/(1/60))),f=f/10;return f>=60&&(f-=60,d+=1,d>=60&&(d-=60,e+=1)),10>e&&(e="0"+e),e+="°",0<=c.indexOf("dm")&&(10>d&&(d="0"+d),e+=d+"'",0<=c.indexOf("dms")&&(10>f&&(f="0"+f),e+=f+'"')),e="lon"==b?e+OpenLayers.i18n(0>a?"W":"E"):e+OpenLayers.i18n(0>a?"S":"N")},OpenLayers.Format=OpenLayers.Class({options:null,externalProjection:null,internalProjection:null,data:null,keepData:!1,initialize:function(a){OpenLayers.Util.extend(this,a),this.options=a},destroy:function(){},read:function(a){throw Error("Read not implemented.")},write:function(a){throw Error("Write not implemented.")},CLASS_NAME:"OpenLayers.Format"}),OpenLayers.Format.CSWGetRecords=function(a){a=OpenLayers.Util.applyDefaults(a,OpenLayers.Format.CSWGetRecords.DEFAULTS);var b=OpenLayers.Format.CSWGetRecords["v"+a.version.replace(/\./g,"_")];if(!b)throw"Unsupported CSWGetRecords version: "+a.version;return new b(a)},OpenLayers.Format.CSWGetRecords.DEFAULTS={version:"2.0.2"},OpenLayers.Control=OpenLayers.Class({id:null,map:null,div:null,type:null,allowSelection:!1,displayClass:"",title:"",autoActivate:!1,active:null,handlerOptions:null,handler:null,eventListeners:null,events:null,initialize:function(a){this.displayClass=this.CLASS_NAME.replace("OpenLayers.","ol").replace(/\./g,""),OpenLayers.Util.extend(this,a),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"))},destroy:function(){if(this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=null),this.eventListeners=null,this.handler&&(this.handler.destroy(),this.handler=null),this.handlers){for(var a in this.handlers)this.handlers.hasOwnProperty(a)&&"function"==typeof this.handlers[a].destroy&&this.handlers[a].destroy();this.handlers=null}this.map&&(this.map.removeControl(this),this.map=null),this.div=null},setMap:function(a){this.map=a,this.handler&&this.handler.setMap(a)},draw:function(a){return null==this.div&&(this.div=OpenLayers.Util.createDiv(this.id),this.div.className=this.displayClass,this.allowSelection||(this.div.className+=" olControlNoSelect",this.div.setAttribute("unselectable","on",0),this.div.onselectstart=OpenLayers.Function.False),""!=this.title&&(this.div.title=this.title)),null!=a&&(this.position=a.clone()),this.moveTo(this.position),this.div},moveTo:function(a){null!=a&&null!=this.div&&(this.div.style.left=a.x+"px",this.div.style.top=a.y+"px")},activate:function(){return this.active?!1:(this.handler&&this.handler.activate(),this.active=!0,this.map&&OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("activate"),!0)},deactivate:function(){return this.active?(this.handler&&this.handler.deactivate(),this.active=!1,this.map&&OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("deactivate"),!0):!1},CLASS_NAME:"OpenLayers.Control"}),OpenLayers.Control.TYPE_BUTTON=1,OpenLayers.Control.TYPE_TOGGLE=2,OpenLayers.Control.TYPE_TOOL=3,OpenLayers.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(a){return a.target||a.srcElement},isSingleTouch:function(a){return a.touches&&1==a.touches.length},isMultiTouch:function(a){return a.touches&&1<a.touches.length},isLeftClick:function(a){return a.which&&1==a.which||a.button&&1==a.button},isRightClick:function(a){return a.which&&3==a.which||a.button&&2==a.button},stop:function(a,b){b||OpenLayers.Event.preventDefault(a),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},findElement:function(a,b){for(var c=OpenLayers.Event.element(a);c.parentNode&&(!c.tagName||c.tagName.toUpperCase()!=b.toUpperCase());)c=c.parentNode;return c},observe:function(a,b,c,d){if(a=OpenLayers.Util.getElement(a),d=d||!1,"keypress"==b&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||a.attachEvent)&&(b="keydown"),this.observers||(this.observers={}),!a._eventCacheID){var e="eventCacheID_";a.id&&(e=a.id+"_"+e),a._eventCacheID=OpenLayers.Util.createUniqueID(e)}e=a._eventCacheID,this.observers[e]||(this.observers[e]=[]),this.observers[e].push({element:a,name:b,observer:c,useCapture:d}),a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},stopObservingElement:function(a){a=OpenLayers.Util.getElement(a)._eventCacheID,this._removeElementObservers(OpenLayers.Event.observers[a])},_removeElementObservers:function(a){if(a)for(var b=a.length-1;b>=0;b--){var c=a[b];OpenLayers.Event.stopObserving.apply(this,[c.element,c.name,c.observer,c.useCapture])}},stopObserving:function(a,b,c,d){d=d||!1,a=OpenLayers.Util.getElement(a);var e=a._eventCacheID;"keypress"==b&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||a.detachEvent)&&(b="keydown");var f=!1,g=OpenLayers.Event.observers[e];if(g)for(var h=0;!f&&h<g.length;){var i=g[h];if(i.name==b&&i.observer==c&&i.useCapture==d){g.splice(h,1),0==g.length&&delete OpenLayers.Event.observers[e],f=!0;break}h++}return f&&(a.removeEventListener?a.removeEventListener(b,c,d):a&&a.detachEvent&&a.detachEvent("on"+b,c)),f},unloadCache:function(){
if(OpenLayers.Event&&OpenLayers.Event.observers){for(var a in OpenLayers.Event.observers)OpenLayers.Event._removeElementObservers.apply(this,[OpenLayers.Event.observers[a]]);OpenLayers.Event.observers=!1}},CLASS_NAME:"OpenLayers.Event"},OpenLayers.Event.observe(window,"unload",OpenLayers.Event.unloadCache,!1),OpenLayers.Events=OpenLayers.Class({BROWSER_EVENTS:"mouseover mouseout mousedown mouseup mousemove click dblclick rightclick dblrightclick resize focus blur touchstart touchmove touchend keydown".split(" "),listeners:null,object:null,element:null,eventHandler:null,fallThrough:null,includeXY:!1,extensions:null,extensionCount:null,clearMouseListener:null,initialize:function(a,b,c,d,e){OpenLayers.Util.extend(this,e),this.object=a,this.fallThrough=d,this.listeners={},this.extensions={},this.extensionCount={},this._msTouches=[],null!=b&&this.attachToElement(b)},destroy:function(){for(var a in this.extensions)"boolean"!=typeof this.extensions[a]&&this.extensions[a].destroy();this.extensions=null,this.element&&(OpenLayers.Event.stopObservingElement(this.element),this.element.hasScrollEvent&&OpenLayers.Event.stopObserving(window,"scroll",this.clearMouseListener)),this.eventHandler=this.fallThrough=this.object=this.listeners=this.element=null},addEventType:function(a){},attachToElement:function(a){this.element?OpenLayers.Event.stopObservingElement(this.element):(this.eventHandler=OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=OpenLayers.Function.bind(this.clearMouseCache,this)),this.element=a;for(var b,c=!!window.navigator.msMaxTouchPoints,d=0,e=this.BROWSER_EVENTS.length;e>d;d++)b=this.BROWSER_EVENTS[d],OpenLayers.Event.observe(a,b,this.eventHandler),c&&0===b.indexOf("touch")&&this.addMsTouchListener(a,b,this.eventHandler);OpenLayers.Event.observe(a,"dragstart",OpenLayers.Event.stop)},on:function(a){for(var b in a)"scope"!=b&&a.hasOwnProperty(b)&&this.register(b,a.scope,a[b])},register:function(a,b,c,d){if(a in OpenLayers.Events&&!this.extensions[a]&&(this.extensions[a]=new OpenLayers.Events[a](this)),null!=c){null==b&&(b=this.object);var e=this.listeners[a];e||(e=[],this.listeners[a]=e,this.extensionCount[a]=0),b={obj:b,func:c},d?(e.splice(this.extensionCount[a],0,b),"object"==typeof d&&d.extension&&this.extensionCount[a]++):e.push(b)}},registerPriority:function(a,b,c){this.register(a,b,c,!0)},un:function(a){for(var b in a)"scope"!=b&&a.hasOwnProperty(b)&&this.unregister(b,a.scope,a[b])},unregister:function(a,b,c){if(null==b&&(b=this.object),a=this.listeners[a],null!=a)for(var d=0,e=a.length;e>d;d++)if(a[d].obj==b&&a[d].func==c){a.splice(d,1);break}},remove:function(a){null!=this.listeners[a]&&(this.listeners[a]=[])},triggerEvent:function(a,b){var c=this.listeners[a];if(c&&0!=c.length){null==b&&(b={}),b.object=this.object,b.element=this.element,b.type||(b.type=a);for(var d,c=c.slice(),e=0,f=c.length;f>e&&(d=c[e],d=d.func.apply(d.obj,[b]),void 0==d||0!=d);e++);return this.fallThrough||OpenLayers.Event.stop(b,!0),d}},handleBrowserEvent:function(a){var b=a.type,c=this.listeners[b];if(c&&0!=c.length){if((c=a.touches)&&c[0]){for(var d,e=0,f=0,g=c.length,h=0;g>h;++h)d=this.getTouchClientXY(c[h]),e+=d.clientX,f+=d.clientY;a.clientX=e/g,a.clientY=f/g}this.includeXY&&(a.xy=this.getMousePosition(a)),this.triggerEvent(b,a)}},getTouchClientXY:function(a){var b=window.olMockWin||window,c=b.pageXOffset,b=b.pageYOffset,d=a.clientX,e=a.clientY;return 0===a.pageY&&Math.floor(e)>Math.floor(a.pageY)||0===a.pageX&&Math.floor(d)>Math.floor(a.pageX)?(d-=c,e-=b):(e<a.pageY-b||d<a.pageX-c)&&(d=a.pageX-c,e=a.pageY-b),a.olClientX=d,a.olClientY=e,{clientX:d,clientY:e}},clearMouseCache:function(){this.element.scrolls=null,this.element.lefttop=null,this.element.offsets=null},getMousePosition:function(a){if(this.includeXY?this.element.hasScrollEvent||(OpenLayers.Event.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var b=OpenLayers.Util.getViewportElement();this.element.scrolls=[window.pageXOffset||b.scrollLeft,window.pageYOffset||b.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=OpenLayers.Util.pagePosition(this.element)),new OpenLayers.Pixel(a.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],a.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])},addMsTouchListener:function(a,b,c){function d(a){c(OpenLayers.Util.applyDefaults({stopPropagation:function(){for(var a=e.length-1;a>=0;--a)e[a].stopPropagation()},preventDefault:function(){for(var a=e.length-1;a>=0;--a)e[a].preventDefault()},type:b},a))}var e=this._msTouches;switch(b){case"touchstart":return this.addMsTouchListenerStart(a,b,d);case"touchend":return this.addMsTouchListenerEnd(a,b,d);case"touchmove":return this.addMsTouchListenerMove(a,b,d);default:throw"Unknown touch event type"}},addMsTouchListenerStart:function(a,b,c){var d=this._msTouches;OpenLayers.Event.observe(a,"MSPointerDown",function(a){for(var b=!1,e=0,f=d.length;f>e;++e)if(d[e].pointerId==a.pointerId){b=!0;break}b||d.push(a),a.touches=d.slice(),c(a)}),OpenLayers.Event.observe(a,"MSPointerUp",function(a){for(var b=0,c=d.length;c>b;++b)if(d[b].pointerId==a.pointerId){d.splice(b,1);break}})},addMsTouchListenerMove:function(a,b,c){var d=this._msTouches;OpenLayers.Event.observe(a,"MSPointerMove",function(a){if(!(a.pointerType==a.MSPOINTER_TYPE_MOUSE&&0==a.buttons||1==d.length&&d[0].pageX==a.pageX&&d[0].pageY==a.pageY)){for(var b=0,e=d.length;e>b;++b)if(d[b].pointerId==a.pointerId){d[b]=a;break}a.touches=d.slice(),c(a)}})},addMsTouchListenerEnd:function(a,b,c){var d=this._msTouches;OpenLayers.Event.observe(a,"MSPointerUp",function(a){for(var b=0,e=d.length;e>b;++b)if(d[b].pointerId==a.pointerId){d.splice(b,1);break}a.touches=d.slice(),c(a)})},CLASS_NAME:"OpenLayers.Events"}),OpenLayers.Events.buttonclick=OpenLayers.Class({target:null,events:"mousedown mouseup click dblclick touchstart touchmove touchend keydown".split(" "),startRegEx:/^mousedown|touchstart$/,cancelRegEx:/^touchmove$/,completeRegEx:/^mouseup|touchend$/,initialize:function(a){for(this.target=a,a=this.events.length-1;a>=0;--a)this.target.register(this.events[a],this,this.buttonClick,{extension:!0})},destroy:function(){for(var a=this.events.length-1;a>=0;--a)this.target.unregister(this.events[a],this,this.buttonClick);delete this.target},getPressedButton:function(a){var b,c=3;do{if(OpenLayers.Element.hasClass(a,"olButton")){b=a;break}a=a.parentNode}while(0<--c&&a);return b},ignore:function(a){var b=3,c=!1;do{if("a"===a.nodeName.toLowerCase()){c=!0;break}a=a.parentNode}while(0<--b&&a);return c},buttonClick:function(a){var b=!0,c=OpenLayers.Event.element(a);if(c&&(OpenLayers.Event.isLeftClick(a)||!~a.type.indexOf("mouse")))if(c=this.getPressedButton(c)){if("keydown"===a.type)switch(a.keyCode){case OpenLayers.Event.KEY_RETURN:case OpenLayers.Event.KEY_SPACE:this.target.triggerEvent("buttonclick",{buttonElement:c}),OpenLayers.Event.stop(a),b=!1}else if(this.startEvt){if(this.completeRegEx.test(a.type)){var b=OpenLayers.Util.pagePosition(c),d=OpenLayers.Util.getViewportElement(),e=window.pageYOffset||d.scrollTop;b[0]-=window.pageXOffset||d.scrollLeft,b[1]-=e,this.target.triggerEvent("buttonclick",{buttonElement:c,buttonXY:{x:this.startEvt.clientX-b[0],y:this.startEvt.clientY-b[1]}})}this.cancelRegEx.test(a.type)&&delete this.startEvt,OpenLayers.Event.stop(a),b=!1}this.startRegEx.test(a.type)&&(this.startEvt=a,OpenLayers.Event.stop(a),b=!1)}else b=!this.ignore(OpenLayers.Event.element(a)),delete this.startEvt;return b}}),OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.vendorPrefix=function(){function a(a){return a?a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}).replace(/^ms-/,"-ms-"):null}function b(a,b){if(void 0===g[b]){var c,e=0,f=d.length,h="undefined"!=typeof a.cssText;for(g[b]=null;f>e;e++)if((c=d[e])?(h||(c=c.toLowerCase()),c=c+b.charAt(0).toUpperCase()+b.slice(1)):c=b,void 0!==a[c]){g[b]=c;break}}return g[b]}function c(a){return b(e,a)}var d=["","O","ms","Moz","Webkit"],e=document.createElement("div").style,f={},g={};return{css:function(b){if(void 0===f[b]){var d=b.replace(/(-[\s\S])/g,function(a){return a.charAt(1).toUpperCase()}),d=c(d);f[b]=a(d)}return f[b]},js:b,style:c,cssCache:f,jsCache:g}}(),OpenLayers.Animation=function(a){var b=OpenLayers.Util.vendorPrefix.js(a,"requestAnimationFrame"),c=!!b,d=function(){var c=a[b]||function(b,c){a.setTimeout(b,16)};return function(b,d){c.apply(a,[b,d])}}(),e=0,f={};return{isNative:c,requestFrame:d,start:function(a,b,c){b=b>0?b:Number.POSITIVE_INFINITY;var g=++e,h=+new Date;return f[g]=function(){f[g]&&+new Date-h<=b?(a(),f[g]&&d(f[g],c)):delete f[g]},d(f[g],c),g},stop:function(a){delete f[a]}}}(window),OpenLayers.Tween=OpenLayers.Class({easing:null,begin:null,finish:null,duration:null,callbacks:null,time:null,minFrameRate:null,startTime:null,animationId:null,playing:!1,initialize:function(a){this.easing=a?a:OpenLayers.Easing.Expo.easeOut},start:function(a,b,c,d){this.playing=!0,this.begin=a,this.finish=b,this.duration=c,this.callbacks=d.callbacks,this.minFrameRate=d.minFrameRate||30,this.time=0,this.startTime=(new Date).getTime(),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.callbacks&&this.callbacks.start&&this.callbacks.start.call(this,this.begin),this.animationId=OpenLayers.Animation.start(OpenLayers.Function.bind(this.play,this))},stop:function(){this.playing&&(this.callbacks&&this.callbacks.done&&this.callbacks.done.call(this,this.finish),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.playing=!1)},play:function(){var a,b={};for(a in this.begin){var c=this.begin[a],d=this.finish[a];if(null==c||null==d||isNaN(c)||isNaN(d))throw new TypeError("invalid value for Tween");b[a]=this.easing.apply(this,[this.time,c,d-c,this.duration])}this.time++,this.callbacks&&this.callbacks.eachStep&&((new Date).getTime()-this.startTime)/this.time<=1e3/this.minFrameRate&&this.callbacks.eachStep.call(this,b),this.time>this.duration&&this.stop()},CLASS_NAME:"OpenLayers.Tween"}),OpenLayers.Easing={CLASS_NAME:"OpenLayers.Easing"},OpenLayers.Easing.Linear={easeIn:function(a,b,c,d){return c*a/d+b},easeOut:function(a,b,c,d){return c*a/d+b},easeInOut:function(a,b,c,d){return c*a/d+b},CLASS_NAME:"OpenLayers.Easing.Linear"},OpenLayers.Easing.Expo={easeIn:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},easeOut:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOut:function(a,b,c,d){return 0==a?b:a==d?b+c:1>(a/=d/2)?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},CLASS_NAME:"OpenLayers.Easing.Expo"},OpenLayers.Easing.Quad={easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOut:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},CLASS_NAME:"OpenLayers.Easing.Quad"},OpenLayers.Projection=OpenLayers.Class({proj:null,projCode:null,titleRegEx:/\+title=[^\+]*/,initialize:function(a,b){OpenLayers.Util.extend(this,b),this.projCode=a,"object"==typeof Proj4js&&(this.proj=new Proj4js.Proj(a))},getCode:function(){return this.proj?this.proj.srsCode:this.projCode},getUnits:function(){return this.proj?this.proj.units:null},toString:function(){return this.getCode()},equals:function(a){var b=!1;return a&&(a instanceof OpenLayers.Projection||(a=new OpenLayers.Projection(a)),"object"==typeof Proj4js&&this.proj.defData&&a.proj.defData?b=this.proj.defData.replace(this.titleRegEx,"")==a.proj.defData.replace(this.titleRegEx,""):a.getCode&&(b=this.getCode(),a=a.getCode(),b=b==a||!!OpenLayers.Projection.transforms[b]&&OpenLayers.Projection.transforms[b][a]===OpenLayers.Projection.nullTransform)),b},destroy:function(){delete this.proj,delete this.projCode},CLASS_NAME:"OpenLayers.Projection"}),OpenLayers.Projection.transforms={},OpenLayers.Projection.defaults={"EPSG:4326":{units:"degrees",maxExtent:[-180,-90,180,90],yx:!0},"CRS:84":{units:"degrees",maxExtent:[-180,-90,180,90]},"EPSG:900913":{units:"m",maxExtent:[-20037508.34,-20037508.34,20037508.34,20037508.34]}},OpenLayers.Projection.addTransform=function(a,b,c){if(c===OpenLayers.Projection.nullTransform){var d=OpenLayers.Projection.defaults[a];d&&!OpenLayers.Projection.defaults[b]&&(OpenLayers.Projection.defaults[b]=d)}OpenLayers.Projection.transforms[a]||(OpenLayers.Projection.transforms[a]={}),OpenLayers.Projection.transforms[a][b]=c},OpenLayers.Projection.transform=function(a,b,c){if(b&&c)if(b instanceof OpenLayers.Projection||(b=new OpenLayers.Projection(b)),c instanceof OpenLayers.Projection||(c=new OpenLayers.Projection(c)),b.proj&&c.proj)a=Proj4js.transform(b.proj,c.proj,a);else{b=b.getCode(),c=c.getCode();var d=OpenLayers.Projection.transforms;d[b]&&d[b][c]&&d[b][c](a)}return a},OpenLayers.Projection.nullTransform=function(a){return a},function(){function a(a){return a.x=180*a.x/e,a.y=180/Math.PI*(2*Math.atan(Math.exp(a.y/e*Math.PI))-Math.PI/2),a}function b(a){a.x=a.x*e/180;var b=Math.log(Math.tan((90+a.y)*Math.PI/360))/Math.PI*e;return a.y=Math.max(-20037508.34,Math.min(b,20037508.34)),a}function c(c,d){var e,f,g,h,i,j=OpenLayers.Projection.addTransform,k=OpenLayers.Projection.nullTransform;for(e=0,f=d.length;f>e;++e)for(g=d[e],j(c,g,b),j(g,c,a),i=e+1;f>i;++i)h=d[i],j(g,h,k),j(h,g,k)}var d,e=20037508.34,f=["EPSG:900913","EPSG:3857","EPSG:102113","EPSG:102100"],g=["CRS:84","urn:ogc:def:crs:EPSG:6.6:4326","EPSG:4326"];for(d=f.length-1;d>=0;--d)c(f[d],g);for(d=g.length-1;d>=0;--d)c(g[d],f)}(),OpenLayers.Map=OpenLayers.Class({Z_INDEX_BASE:{BaseLayer:100,Overlay:325,Feature:725,Popup:750,Control:1e3},id:null,fractionalZoom:!1,events:null,allOverlays:!1,div:null,dragging:!1,size:null,viewPortDiv:null,layerContainerOrigin:null,layerContainerDiv:null,layers:null,controls:null,popups:null,baseLayer:null,center:null,resolution:null,zoom:0,panRatio:1.5,options:null,tileSize:null,projection:"EPSG:4326",units:null,resolutions:null,maxResolution:null,minResolution:null,maxScale:null,minScale:null,maxExtent:null,minExtent:null,restrictedExtent:null,numZoomLevels:16,theme:null,displayProjection:null,fallThrough:!1,autoUpdateSize:!0,eventListeners:null,panTween:null,panMethod:OpenLayers.Easing.Expo.easeOut,panDuration:50,zoomTween:null,zoomMethod:OpenLayers.Easing.Quad.easeOut,zoomDuration:20,paddingForPopups:null,layerContainerOriginPx:null,minPx:null,maxPx:null,initialize:function(a,b){1===arguments.length&&"object"==typeof a&&(a=(b=a)&&b.div),this.tileSize=new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,OpenLayers.Map.TILE_HEIGHT),this.paddingForPopups=new OpenLayers.Bounds(15,15,15,15),this.theme=OpenLayers._getScriptLocation()+"theme/default/style.css",this.options=OpenLayers.Util.extend({},b),OpenLayers.Util.extend(this,b),OpenLayers.Util.applyDefaults(this,OpenLayers.Projection.defaults[this.projection instanceof OpenLayers.Projection?this.projection.projCode:this.projection]),!this.maxExtent||this.maxExtent instanceof OpenLayers.Bounds||(this.maxExtent=new OpenLayers.Bounds(this.maxExtent)),!this.minExtent||this.minExtent instanceof OpenLayers.Bounds||(this.minExtent=new OpenLayers.Bounds(this.minExtent)),!this.restrictedExtent||this.restrictedExtent instanceof OpenLayers.Bounds||(this.restrictedExtent=new OpenLayers.Bounds(this.restrictedExtent)),!this.center||this.center instanceof OpenLayers.LonLat||(this.center=new OpenLayers.LonLat(this.center)),this.layers=[],this.id=OpenLayers.Util.createUniqueID("OpenLayers.Map_"),this.div=OpenLayers.Util.getElement(a),this.div||(this.div=document.createElement("div"),this.div.style.height="1px",this.div.style.width="1px"),OpenLayers.Element.addClass(this.div,"olMap");var c=this.id+"_OpenLayers_ViewPort";if(this.viewPortDiv=OpenLayers.Util.createDiv(c,null,null,null,"relative",null,"hidden"),this.viewPortDiv.style.width="100%",this.viewPortDiv.style.height="100%",this.viewPortDiv.className="olMapViewport",this.div.appendChild(this.viewPortDiv),this.events=new OpenLayers.Events(this,this.viewPortDiv,null,this.fallThrough,{includeXY:!0}),OpenLayers.TileManager&&null!==this.tileManager&&(this.tileManager instanceof OpenLayers.TileManager||(this.tileManager=new OpenLayers.TileManager(this.tileManager)),this.tileManager.addMap(this)),c=this.id+"_OpenLayers_Container",this.layerContainerDiv=OpenLayers.Util.createDiv(c),this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE.Popup-1,this.layerContainerOriginPx={x:0,y:0},this.applyTransform(),this.viewPortDiv.appendChild(this.layerContainerDiv),this.updateSize(),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),!0===this.autoUpdateSize&&(this.updateSizeDestroy=OpenLayers.Function.bind(this.updateSize,this),OpenLayers.Event.observe(window,"resize",this.updateSizeDestroy)),this.theme){for(var c=!0,d=document.getElementsByTagName("link"),e=0,f=d.length;f>e;++e)if(OpenLayers.Util.isEquivalentUrl(d.item(e).href,this.theme)){c=!1;break}c&&(c=document.createElement("link"),c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",this.theme),document.getElementsByTagName("head")[0].appendChild(c))}for(null==this.controls&&(this.controls=[],null!=OpenLayers.Control&&(OpenLayers.Control.Navigation?this.controls.push(new OpenLayers.Control.Navigation):OpenLayers.Control.TouchNavigation&&this.controls.push(new OpenLayers.Control.TouchNavigation),OpenLayers.Control.Zoom?this.controls.push(new OpenLayers.Control.Zoom):OpenLayers.Control.PanZoom&&this.controls.push(new OpenLayers.Control.PanZoom),OpenLayers.Control.ArgParser&&this.controls.push(new OpenLayers.Control.ArgParser),OpenLayers.Control.Attribution&&this.controls.push(new OpenLayers.Control.Attribution))),e=0,f=this.controls.length;f>e;e++)this.addControlToMap(this.controls[e]);this.popups=[],this.unloadDestroy=OpenLayers.Function.bind(this.destroy,this),OpenLayers.Event.observe(window,"unload",this.unloadDestroy),b&&b.layers&&(delete this.center,delete this.zoom,this.addLayers(b.layers),b.center&&!this.getCenter()&&this.setCenter(b.center,b.zoom)),this.panMethod&&(this.panTween=new OpenLayers.Tween(this.panMethod)),this.zoomMethod&&this.applyTransform.transform&&(this.zoomTween=new OpenLayers.Tween(this.zoomMethod))},getViewport:function(){return this.viewPortDiv},render:function(a){this.div=OpenLayers.Util.getElement(a),OpenLayers.Element.addClass(this.div,"olMap"),this.viewPortDiv.parentNode.removeChild(this.viewPortDiv),this.div.appendChild(this.viewPortDiv),this.updateSize()},unloadDestroy:null,updateSizeDestroy:null,destroy:function(){if(!this.unloadDestroy)return!1;if(this.panTween&&(this.panTween.stop(),this.panTween=null),this.zoomTween&&(this.zoomTween.stop(),this.zoomTween=null),OpenLayers.Event.stopObserving(window,"unload",this.unloadDestroy),this.unloadDestroy=null,this.updateSizeDestroy&&OpenLayers.Event.stopObserving(window,"resize",this.updateSizeDestroy),this.paddingForPopups=null,null!=this.controls){for(var a=this.controls.length-1;a>=0;--a)this.controls[a].destroy();this.controls=null}if(null!=this.layers){for(a=this.layers.length-1;a>=0;--a)this.layers[a].destroy(!1);this.layers=null}this.viewPortDiv&&this.viewPortDiv.parentNode&&this.viewPortDiv.parentNode.removeChild(this.viewPortDiv),this.viewPortDiv=null,this.tileManager&&(this.tileManager.removeMap(this),this.tileManager=null),this.eventListeners&&(this.events.un(this.eventListeners),this.eventListeners=null),this.events.destroy(),this.options=this.events=null},setOptions:function(a){var b=this.minPx&&a.restrictedExtent!=this.restrictedExtent;OpenLayers.Util.extend(this,a),b&&this.moveTo(this.getCachedCenter(),this.zoom,{forceZoomChange:!0})},getTileSize:function(){return this.tileSize},getBy:function(a,b,c){var d="function"==typeof c.test;return OpenLayers.Array.filter(this[a],function(a){return a[b]==c||d&&c.test(a[b])})},getLayersBy:function(a,b){return this.getBy("layers",a,b)},getLayersByName:function(a){return this.getLayersBy("name",a)},getLayersByClass:function(a){return this.getLayersBy("CLASS_NAME",a)},getControlsBy:function(a,b){return this.getBy("controls",a,b)},getControlsByClass:function(a){return this.getControlsBy("CLASS_NAME",a)},getLayer:function(a){for(var b=null,c=0,d=this.layers.length;d>c;c++){var e=this.layers[c];if(e.id==a){b=e;break}}return b},setLayerZIndex:function(a,b){a.setZIndex(this.Z_INDEX_BASE[a.isBaseLayer?"BaseLayer":"Overlay"]+5*b)},resetLayersZIndex:function(){for(var a=0,b=this.layers.length;b>a;a++)this.setLayerZIndex(this.layers[a],a)},addLayer:function(a){for(var b=0,c=this.layers.length;c>b;b++)if(this.layers[b]==a)return!1;return!1===this.events.triggerEvent("preaddlayer",{layer:a})?!1:(this.allOverlays&&(a.isBaseLayer=!1),a.div.className="olLayerDiv",a.div.style.overflow="",this.setLayerZIndex(a,this.layers.length),a.isFixed?this.viewPortDiv.appendChild(a.div):this.layerContainerDiv.appendChild(a.div),this.layers.push(a),a.setMap(this),a.isBaseLayer||this.allOverlays&&!this.baseLayer?null==this.baseLayer?this.setBaseLayer(a):a.setVisibility(!1):a.redraw(),this.events.triggerEvent("addlayer",{layer:a}),a.events.triggerEvent("added",{map:this,layer:a}),a.afterAdd(),!0)},addLayers:function(a){for(var b=0,c=a.length;c>b;b++)this.addLayer(a[b])},removeLayer:function(a,b){if(!1!==this.events.triggerEvent("preremovelayer",{layer:a})){if(null==b&&(b=!0),a.isFixed?this.viewPortDiv.removeChild(a.div):this.layerContainerDiv.removeChild(a.div),OpenLayers.Util.removeItem(this.layers,a),a.removeMap(this),a.map=null,this.baseLayer==a&&(this.baseLayer=null,b))for(var c=0,d=this.layers.length;d>c;c++){var e=this.layers[c];if(e.isBaseLayer||this.allOverlays){this.setBaseLayer(e);break}}this.resetLayersZIndex(),this.events.triggerEvent("removelayer",{layer:a}),a.events.triggerEvent("removed",{map:this,layer:a})}},getNumLayers:function(){return this.layers.length},getLayerIndex:function(a){return OpenLayers.Util.indexOf(this.layers,a)},setLayerIndex:function(a,b){var c=this.getLayerIndex(a);if(0>b?b=0:b>this.layers.length&&(b=this.layers.length),c!=b){this.layers.splice(c,1),this.layers.splice(b,0,a);for(var c=0,d=this.layers.length;d>c;c++)this.setLayerZIndex(this.layers[c],c);this.events.triggerEvent("changelayer",{layer:a,property:"order"}),this.allOverlays&&(0===b?this.setBaseLayer(a):this.baseLayer!==this.layers[0]&&this.setBaseLayer(this.layers[0]))}},raiseLayer:function(a,b){var c=this.getLayerIndex(a)+b;this.setLayerIndex(a,c)},setBaseLayer:function(a){if(a!=this.baseLayer&&-1!=OpenLayers.Util.indexOf(this.layers,a)){var b=this.getCachedCenter(),c=OpenLayers.Util.getResolutionFromScale(this.getScale(),a.units);null==this.baseLayer||this.allOverlays||this.baseLayer.setVisibility(!1),this.baseLayer=a,(!this.allOverlays||this.baseLayer.visibility)&&(this.baseLayer.setVisibility(!0),!1===this.baseLayer.inRange&&this.baseLayer.redraw()),null!=b&&(a=this.getZoomForResolution(c||this.resolution,!0),this.setCenter(b,a,!1,!0)),this.events.triggerEvent("changebaselayer",{layer:this.baseLayer})}},addControl:function(a,b){this.controls.push(a),this.addControlToMap(a,b)},addControls:function(a,b){for(var c=1===arguments.length?[]:b,d=0,e=a.length;e>d;d++)this.addControl(a[d],c[d]?c[d]:null)},addControlToMap:function(a,b){a.outsideViewport=null!=a.div,this.displayProjection&&!a.displayProjection&&(a.displayProjection=this.displayProjection),a.setMap(this);var c=a.draw(b);c&&!a.outsideViewport&&(c.style.zIndex=this.Z_INDEX_BASE.Control+this.controls.length,this.viewPortDiv.appendChild(c)),a.autoActivate&&a.activate()},getControl:function(a){for(var b=null,c=0,d=this.controls.length;d>c;c++){var e=this.controls[c];if(e.id==a){b=e;break}}return b},removeControl:function(a){a&&a==this.getControl(a.id)&&(a.div&&a.div.parentNode==this.viewPortDiv&&this.viewPortDiv.removeChild(a.div),OpenLayers.Util.removeItem(this.controls,a))},addPopup:function(a,b){if(b)for(var c=this.popups.length-1;c>=0;--c)this.removePopup(this.popups[c]);a.map=this,this.popups.push(a),(c=a.draw())&&(c.style.zIndex=this.Z_INDEX_BASE.Popup+this.popups.length,this.layerContainerDiv.appendChild(c))},removePopup:function(a){if(OpenLayers.Util.removeItem(this.popups,a),a.div)try{this.layerContainerDiv.removeChild(a.div)}catch(b){}a.map=null},getSize:function(){var a=null;return null!=this.size&&(a=this.size.clone()),a},updateSize:function(){var a=this.getCurrentSize();if(a&&!isNaN(a.h)&&!isNaN(a.w)){this.events.clearMouseCache();var b=this.getSize();if(null==b&&(this.size=b=a),!a.equals(b)){for(this.size=a,a=0,b=this.layers.length;b>a;a++)this.layers[a].onMapResize();a=this.getCachedCenter(),null!=this.baseLayer&&null!=a&&(b=this.getZoom(),this.zoom=null,this.setCenter(a,b))}}this.events.triggerEvent("updatesize")},getCurrentSize:function(){var a=new OpenLayers.Size(this.div.clientWidth,this.div.clientHeight);return(0==a.w&&0==a.h||isNaN(a.w)&&isNaN(a.h))&&(a.w=this.div.offsetWidth,a.h=this.div.offsetHeight),(0==a.w&&0==a.h||isNaN(a.w)&&isNaN(a.h))&&(a.w=parseInt(this.div.style.width),a.h=parseInt(this.div.style.height)),a},calculateBounds:function(a,b){var c=null;if(null==a&&(a=this.getCachedCenter()),null==b&&(b=this.getResolution()),null!=a&&null!=b)var c=this.size.w*b/2,d=this.size.h*b/2,c=new OpenLayers.Bounds(a.lon-c,a.lat-d,a.lon+c,a.lat+d);return c},getCenter:function(){var a=null,b=this.getCachedCenter();return b&&(a=b.clone()),a},getCachedCenter:function(){return!this.center&&this.size&&(this.center=this.getLonLatFromViewPortPx({x:this.size.w/2,y:this.size.h/2})),this.center},getZoom:function(){return this.zoom},pan:function(a,b,c){if(c=OpenLayers.Util.applyDefaults(c,{animate:!0,dragging:!1}),c.dragging)0==a&&0==b||this.moveByPx(a,b);else{var d=this.getViewPortPxFromLonLat(this.getCachedCenter());a=d.add(a,b),(this.dragging||!a.equals(d))&&(d=this.getLonLatFromViewPortPx(a),c.animate?this.panTo(d):(this.moveTo(d),this.dragging&&(this.dragging=!1,this.events.triggerEvent("moveend"))))}},panTo:function(a){if(this.panTween&&this.getExtent().scale(this.panRatio).containsLonLat(a)){var b=this.getCachedCenter();if(!a.equals(b)){var b=this.getPixelFromLonLat(b),c=this.getPixelFromLonLat(a),d=0,e=0;this.panTween.start({x:0,y:0},{x:c.x-b.x,y:c.y-b.y},this.panDuration,{callbacks:{eachStep:OpenLayers.Function.bind(function(a){this.moveByPx(a.x-d,a.y-e),d=Math.round(a.x),e=Math.round(a.y)},this),done:OpenLayers.Function.bind(function(b){this.moveTo(a),this.dragging=!1,this.events.triggerEvent("moveend")},this)}})}}else this.setCenter(a)},setCenter:function(a,b,c,d){this.panTween&&this.panTween.stop(),this.zoomTween&&this.zoomTween.stop(),this.moveTo(a,b,{dragging:c,forceZoomChange:d})},moveByPx:function(a,b){var c=this.size.w/2,d=this.size.h/2,e=c+a,f=d+b,g=this.baseLayer.wrapDateLine,h=0,i=0;if(this.restrictedExtent&&(h=c,i=d,g=!1),a=g||e<=this.maxPx.x-h&&e>=this.minPx.x+h?Math.round(a):0,b=f<=this.maxPx.y-i&&f>=this.minPx.y+i?Math.round(b):0,a||b){for(this.dragging||(this.dragging=!0,this.events.triggerEvent("movestart")),this.center=null,a&&(this.layerContainerOriginPx.x-=a,this.minPx.x-=a,this.maxPx.x-=a),b&&(this.layerContainerOriginPx.y-=b,this.minPx.y-=b,this.maxPx.y-=b),this.applyTransform(),d=0,e=this.layers.length;e>d;++d)c=this.layers[d],c.visibility&&(c===this.baseLayer||c.inRange)&&(c.moveByPx(a,b),c.events.triggerEvent("move"));this.events.triggerEvent("move")}},adjustZoom:function(a){if(this.baseLayer&&this.baseLayer.wrapDateLine){var b=this.baseLayer.resolutions,c=this.getMaxExtent().getWidth()/this.size.w;if(this.getResolutionForZoom(a)>c)if(this.fractionalZoom)a=this.getZoomForResolution(c);else for(var d=0|a,e=b.length;e>d;++d)if(b[d]<=c){a=d;break}}return a},getMinZoom:function(){return this.adjustZoom(0)},moveTo:function(a,b,c){null==a||a instanceof OpenLayers.LonLat||(a=new OpenLayers.LonLat(a)),c||(c={}),null!=b&&(b=parseFloat(b),this.fractionalZoom||(b=Math.round(b)));var d=b;b=this.adjustZoom(b),b!==d&&(a=this.getCenter());var d=c.dragging||this.dragging,e=c.forceZoomChange;if(this.getCachedCenter()||this.isValidLonLat(a)||(a=this.maxExtent.getCenterLonLat(),this.center=a.clone()),null!=this.restrictedExtent){null==a&&(a=this.center),null==b&&(b=this.getZoom());var f=this.getResolutionForZoom(b),f=this.calculateBounds(a,f);if(!this.restrictedExtent.containsBounds(f)){var g=this.restrictedExtent.getCenterLonLat();f.getWidth()>this.restrictedExtent.getWidth()?a=new OpenLayers.LonLat(g.lon,a.lat):f.left<this.restrictedExtent.left?a=a.add(this.restrictedExtent.left-f.left,0):f.right>this.restrictedExtent.right&&(a=a.add(this.restrictedExtent.right-f.right,0)),f.getHeight()>this.restrictedExtent.getHeight()?a=new OpenLayers.LonLat(a.lon,g.lat):f.bottom<this.restrictedExtent.bottom?a=a.add(0,this.restrictedExtent.bottom-f.bottom):f.top>this.restrictedExtent.top&&(a=a.add(0,this.restrictedExtent.top-f.top))}}if(e=e||this.isValidZoomLevel(b)&&b!=this.getZoom(),f=this.isValidLonLat(a)&&!a.equals(this.center),e||f||d){if(d||this.events.triggerEvent("movestart",{zoomChanged:e}),f&&(!e&&this.center&&this.centerLayerContainer(a),this.center=a.clone()),a=e?this.getResolutionForZoom(b):this.getResolution(),e||null==this.layerContainerOrigin){this.layerContainerOrigin=this.getCachedCenter(),this.layerContainerOriginPx.x=0,this.layerContainerOriginPx.y=0,this.applyTransform();var f=this.getMaxExtent({restricted:!0}),h=f.getCenterLonLat(),g=this.center.lon-h.lon,h=h.lat-this.center.lat,i=Math.round(f.getWidth()/a),j=Math.round(f.getHeight()/a);this.minPx={x:(this.size.w-i)/2-g/a,y:(this.size.h-j)/2-h/a},this.maxPx={x:this.minPx.x+Math.round(f.getWidth()/a),y:this.minPx.y+Math.round(f.getHeight()/a)}}for(e&&(this.zoom=b,this.resolution=a),a=this.getExtent(),this.baseLayer.visibility&&(this.baseLayer.moveTo(a,e,c.dragging),c.dragging||this.baseLayer.events.triggerEvent("moveend",{zoomChanged:e})),a=this.baseLayer.getExtent(),b=this.layers.length-1;b>=0;--b)f=this.layers[b],f===this.baseLayer||f.isBaseLayer||(g=f.calculateInRange(),f.inRange!=g&&((f.inRange=g)||f.display(!1),this.events.triggerEvent("changelayer",{layer:f,property:"visibility"})),g&&f.visibility&&(f.moveTo(a,e,c.dragging),c.dragging||f.events.triggerEvent("moveend",{zoomChanged:e})));if(this.events.triggerEvent("move"),d||this.events.triggerEvent("moveend"),e){for(b=0,c=this.popups.length;c>b;b++)this.popups[b].updatePosition();this.events.triggerEvent("zoomend")}}},centerLayerContainer:function(a){var b=this.getViewPortPxFromLonLat(this.layerContainerOrigin),c=this.getViewPortPxFromLonLat(a);if(null!=b&&null!=c){var d=this.layerContainerOriginPx.x;a=this.layerContainerOriginPx.y;var e=Math.round(b.x-c.x),b=Math.round(b.y-c.y);this.applyTransform(this.layerContainerOriginPx.x=e,this.layerContainerOriginPx.y=b),d-=e,a-=b,this.minPx.x-=d,this.maxPx.x-=d,this.minPx.y-=a,this.maxPx.y-=a}},isValidZoomLevel:function(a){return null!=a&&a>=0&&a<this.getNumZoomLevels()},isValidLonLat:function(a){var b=!1;return null!=a&&(b=this.getMaxExtent(),b=b.containsLonLat(a,{worldBounds:this.baseLayer.wrapDateLine&&b})),b},getProjection:function(){var a=this.getProjectionObject();return a?a.getCode():null},getProjectionObject:function(){var a=null;return null!=this.baseLayer&&(a=this.baseLayer.projection),a},getMaxResolution:function(){var a=null;return null!=this.baseLayer&&(a=this.baseLayer.maxResolution),a},getMaxExtent:function(a){var b=null;return a&&a.restricted&&this.restrictedExtent?b=this.restrictedExtent:null!=this.baseLayer&&(b=this.baseLayer.maxExtent),b},getNumZoomLevels:function(){var a=null;return null!=this.baseLayer&&(a=this.baseLayer.numZoomLevels),a},getExtent:function(){var a=null;return null!=this.baseLayer&&(a=this.baseLayer.getExtent()),a},getResolution:function(){var a=null;return null!=this.baseLayer?a=this.baseLayer.getResolution():!0===this.allOverlays&&0<this.layers.length&&(a=this.layers[0].getResolution()),a},getUnits:function(){var a=null;return null!=this.baseLayer&&(a=this.baseLayer.units),
a},getScale:function(){var a=null;return null!=this.baseLayer&&(a=this.getResolution(),a=OpenLayers.Util.getScaleFromResolution(a,this.baseLayer.units)),a},getZoomForExtent:function(a,b){var c=null;return null!=this.baseLayer&&(c=this.baseLayer.getZoomForExtent(a,b)),c},getResolutionForZoom:function(a){var b=null;return this.baseLayer&&(b=this.baseLayer.getResolutionForZoom(a)),b},getZoomForResolution:function(a,b){var c=null;return null!=this.baseLayer&&(c=this.baseLayer.getZoomForResolution(a,b)),c},zoomTo:function(a,b){var c=this;if(c.isValidZoomLevel(a))if(c.baseLayer.wrapDateLine&&(a=c.adjustZoom(a)),c.zoomTween){var d=c.getResolution(),e=c.getResolutionForZoom(a),f={scale:1},d={scale:d/e};c.zoomTween.playing&&c.zoomTween.duration<3*c.zoomDuration?c.zoomTween.finish={scale:c.zoomTween.finish.scale*d.scale}:(b||(e=c.getSize(),b={x:e.w/2,y:e.h/2}),c.zoomTween.start(f,d,c.zoomDuration,{minFrameRate:50,callbacks:{eachStep:function(a){var d=c.layerContainerOriginPx;a=a.scale,c.applyTransform(d.x+((a-1)*(d.x-b.x)|0),d.y+((a-1)*(d.y-b.y)|0),a)},done:function(a){c.applyTransform(),a=c.getResolution()/a.scale;var d=c.getZoomForResolution(a,!0);c.moveTo(c.getZoomTargetCenter(b,a),d,!0)}}}))}else f=b?c.getZoomTargetCenter(b,c.getResolutionForZoom(a)):null,c.setCenter(f,a)},zoomIn:function(){this.zoomTo(this.getZoom()+1)},zoomOut:function(){this.zoomTo(this.getZoom()-1)},zoomToExtent:function(a,b){a instanceof OpenLayers.Bounds||(a=new OpenLayers.Bounds(a));var c=a.getCenterLonLat();if(this.baseLayer.wrapDateLine){for(c=this.getMaxExtent(),a=a.clone();a.right<a.left;)a.right+=c.getWidth();c=a.getCenterLonLat().wrapDateLine(c)}this.setCenter(c,this.getZoomForExtent(a,b))},zoomToMaxExtent:function(a){a=this.getMaxExtent({restricted:a?a.restricted:!0}),this.zoomToExtent(a)},zoomToScale:function(a,b){var c=OpenLayers.Util.getResolutionFromScale(a,this.baseLayer.units),d=this.size.w*c/2,c=this.size.h*c/2,e=this.getCachedCenter(),d=new OpenLayers.Bounds(e.lon-d,e.lat-c,e.lon+d,e.lat+c);this.zoomToExtent(d,b)},getLonLatFromViewPortPx:function(a){var b=null;return null!=this.baseLayer&&(b=this.baseLayer.getLonLatFromViewPortPx(a)),b},getViewPortPxFromLonLat:function(a){var b=null;return null!=this.baseLayer&&(b=this.baseLayer.getViewPortPxFromLonLat(a)),b},getZoomTargetCenter:function(a,b){var c=null,d=this.getSize(),e=d.w/2-a.x,d=a.y-d.h/2,f=this.getLonLatFromPixel(a);return f&&(c=new OpenLayers.LonLat(f.lon+e*b,f.lat+d*b)),c},getLonLatFromPixel:function(a){return this.getLonLatFromViewPortPx(a)},getPixelFromLonLat:function(a){return a=this.getViewPortPxFromLonLat(a),a.x=Math.round(a.x),a.y=Math.round(a.y),a},getGeodesicPixelSize:function(a){var b=a?this.getLonLatFromPixel(a):this.getCachedCenter()||new OpenLayers.LonLat(0,0),c=this.getResolution();a=b.add(-c/2,0);var d=b.add(c/2,0),e=b.add(0,-c/2),b=b.add(0,c/2),c=new OpenLayers.Projection("EPSG:4326"),f=this.getProjectionObject()||c;return f.equals(c)||(a.transform(f,c),d.transform(f,c),e.transform(f,c),b.transform(f,c)),new OpenLayers.Size(OpenLayers.Util.distVincenty(a,d),OpenLayers.Util.distVincenty(e,b))},getViewPortPxFromLayerPx:function(a){var b=null;return null!=a&&(b=a.add(this.layerContainerOriginPx.x,this.layerContainerOriginPx.y)),b},getLayerPxFromViewPortPx:function(a){var b=null;return null!=a&&(b=a.add(-this.layerContainerOriginPx.x,-this.layerContainerOriginPx.y),isNaN(b.x)||isNaN(b.y))&&(b=null),b},getLonLatFromLayerPx:function(a){return a=this.getViewPortPxFromLayerPx(a),this.getLonLatFromViewPortPx(a)},getLayerPxFromLonLat:function(a){return a=this.getPixelFromLonLat(a),this.getLayerPxFromViewPortPx(a)},applyTransform:function(a,b,c){c=c||1;var d=this.layerContainerOriginPx,e=1!==c;a=a||d.x,b=b||d.y;var f=this.layerContainerDiv.style,g=this.applyTransform.transform,h=this.applyTransform.template;if(void 0===g&&(g=OpenLayers.Util.vendorPrefix.style("transform"),this.applyTransform.transform=g)){var i=OpenLayers.Element.getStyle(this.viewPortDiv,OpenLayers.Util.vendorPrefix.css("transform"));i&&"none"===i||(h=["translate3d(",",0) ","scale3d(",",1)"],f[g]=[h[0],"0,0",h[1]].join("")),h&&~f[g].indexOf(h[0])||(h=["translate(",") ","scale(",")"]),this.applyTransform.template=h}null===g||"translate3d("!==h[0]&&!0!==e?(f.left=a+"px",f.top=b+"px",null!==g&&(f[g]="")):(!0===e&&"translate("===h[0]&&(a-=d.x,b-=d.y,f.left=d.x+"px",f.top=d.y+"px"),f[g]=[h[0],a,"px,",b,"px",h[1],h[2],c,",",c,h[3]].join(""))},CLASS_NAME:"OpenLayers.Map"}),OpenLayers.Map.TILE_WIDTH=256,OpenLayers.Map.TILE_HEIGHT=256,OpenLayers.Handler=OpenLayers.Class({id:null,control:null,map:null,keyMask:null,active:!1,evt:null,touch:!1,initialize:function(a,b,c){OpenLayers.Util.extend(this,c),this.control=a,this.callbacks=b,(a=this.map||a.map)&&this.setMap(a),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},setMap:function(a){this.map=a},checkModifiers:function(a){return null==this.keyMask?!0:((a.shiftKey?OpenLayers.Handler.MOD_SHIFT:0)|(a.ctrlKey?OpenLayers.Handler.MOD_CTRL:0)|(a.altKey?OpenLayers.Handler.MOD_ALT:0)|(a.metaKey?OpenLayers.Handler.MOD_META:0))==this.keyMask},activate:function(){if(this.active)return!1;for(var a=OpenLayers.Events.prototype.BROWSER_EVENTS,b=0,c=a.length;c>b;b++)this[a[b]]&&this.register(a[b],this[a[b]]);return this.active=!0},deactivate:function(){if(!this.active)return!1;for(var a=OpenLayers.Events.prototype.BROWSER_EVENTS,b=0,c=a.length;c>b;b++)this[a[b]]&&this.unregister(a[b],this[a[b]]);return this.active=this.touch=!1,!0},startTouch:function(){if(!this.touch){this.touch=!0;for(var a="mousedown mouseup mousemove click dblclick mouseout".split(" "),b=0,c=a.length;c>b;b++)this[a[b]]&&this.unregister(a[b],this[a[b]])}},callback:function(a,b){a&&this.callbacks[a]&&this.callbacks[a].apply(this.control,b)},register:function(a,b){this.map.events.registerPriority(a,this,b),this.map.events.registerPriority(a,this,this.setEvent)},unregister:function(a,b){this.map.events.unregister(a,this,b),this.map.events.unregister(a,this,this.setEvent)},setEvent:function(a){return this.evt=a,!0},destroy:function(){this.deactivate(),this.control=this.map=null},CLASS_NAME:"OpenLayers.Handler"}),OpenLayers.Handler.MOD_NONE=0,OpenLayers.Handler.MOD_SHIFT=1,OpenLayers.Handler.MOD_CTRL=2,OpenLayers.Handler.MOD_ALT=4,OpenLayers.Handler.MOD_META=8,OpenLayers.Handler.Click=OpenLayers.Class(OpenLayers.Handler,{delay:300,single:!0,"double":!1,pixelTolerance:0,dblclickTolerance:13,stopSingle:!1,stopDouble:!1,timerId:null,down:null,last:null,first:null,rightclickTimerId:null,touchstart:function(a){return this.startTouch(),this.down=this.getEventInfo(a),this.last=this.getEventInfo(a),!0},touchmove:function(a){return this.last=this.getEventInfo(a),!0},touchend:function(a){return this.down&&(a.xy=this.last.xy,a.lastTouches=this.last.touches,this.handleSingle(a),this.down=null),!0},mousedown:function(a){return this.down=this.getEventInfo(a),this.last=this.getEventInfo(a),!0},mouseup:function(a){var b=!0;return this.checkModifiers(a)&&this.control.handleRightClicks&&OpenLayers.Event.isRightClick(a)&&(b=this.rightclick(a)),b},rightclick:function(a){if(this.passesTolerance(a)){if(null!=this.rightclickTimerId)return this.clearTimer(),this.callback("dblrightclick",[a]),!this.stopDouble;a=this["double"]?OpenLayers.Util.extend({},a):this.callback("rightclick",[a]),a=OpenLayers.Function.bind(this.delayedRightCall,this,a),this.rightclickTimerId=window.setTimeout(a,this.delay)}return!this.stopSingle},delayedRightCall:function(a){this.rightclickTimerId=null,a&&this.callback("rightclick",[a])},click:function(a){return this.last||(this.last=this.getEventInfo(a)),this.handleSingle(a),!this.stopSingle},dblclick:function(a){return this.handleDouble(a),!this.stopDouble},handleDouble:function(a){this.passesDblclickTolerance(a)&&(this["double"]&&this.callback("dblclick",[a]),this.clearTimer())},handleSingle:function(a){this.passesTolerance(a)&&(null!=this.timerId?(this.last.touches&&1===this.last.touches.length&&(this["double"]&&OpenLayers.Event.preventDefault(a),this.handleDouble(a)),this.last.touches&&2===this.last.touches.length||this.clearTimer()):(this.first=this.getEventInfo(a),a=this.single?OpenLayers.Util.extend({},a):null,this.queuePotentialClick(a)))},queuePotentialClick:function(a){this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,a),this.delay)},passesTolerance:function(a){var b=!0;if(null!=this.pixelTolerance&&this.down&&this.down.xy&&(b=this.pixelTolerance>=this.down.xy.distanceTo(a.xy))&&this.touch&&this.down.touches.length===this.last.touches.length){a=0;for(var c=this.down.touches.length;c>a;++a)if(this.getTouchDistance(this.down.touches[a],this.last.touches[a])>this.pixelTolerance){b=!1;break}}return b},getTouchDistance:function(a,b){return Math.sqrt(Math.pow(a.clientX-b.clientX,2)+Math.pow(a.clientY-b.clientY,2))},passesDblclickTolerance:function(a){return a=!0,this.down&&this.first&&(a=this.down.xy.distanceTo(this.first.xy)<=this.dblclickTolerance),a},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),null!=this.rightclickTimerId&&(window.clearTimeout(this.rightclickTimerId),this.rightclickTimerId=null)},delayedCall:function(a){this.timerId=null,a&&this.callback("click",[a])},getEventInfo:function(a){var b;if(a.touches){var c=a.touches.length;b=Array(c);for(var d,e=0;c>e;e++)d=a.touches[e],b[e]={clientX:d.olClientX,clientY:d.olClientY}}return{xy:a.xy,touches:b}},deactivate:function(){var a=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),this.last=this.first=this.down=null,a=!0),a},CLASS_NAME:"OpenLayers.Handler.Click"}),OpenLayers.Handler.Drag=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!0,dragging:!1,last:null,start:null,lastMoveEvt:null,oldOnselectstart:null,interval:0,timeoutId:null,documentDrag:!1,documentEvents:null,initialize:function(a,b,c){if(OpenLayers.Handler.prototype.initialize.apply(this,arguments),!0===this.documentDrag){var d=this;this._docMove=function(a){d.mousemove({xy:{x:a.clientX,y:a.clientY},element:document})},this._docUp=function(a){d.mouseup({xy:{x:a.clientX,y:a.clientY}})}}},dragstart:function(a){var b=!0;return this.dragging=!1,this.checkModifiers(a)&&(OpenLayers.Event.isLeftClick(a)||OpenLayers.Event.isSingleTouch(a))?(this.started=!0,this.last=this.start=a.xy,OpenLayers.Element.addClass(this.map.viewPortDiv,"olDragDown"),this.down(a),this.callback("down",[a.xy]),OpenLayers.Event.preventDefault(a),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart?document.onselectstart:OpenLayers.Function.True),document.onselectstart=OpenLayers.Function.False,b=!this.stopDown):(this.started=!1,this.last=this.start=null),b},dragmove:function(a){return this.lastMoveEvt=a,!this.started||this.timeoutId||a.xy.x==this.last.x&&a.xy.y==this.last.y||(!0===this.documentDrag&&this.documentEvents&&(a.element===document?(this.adjustXY(a),this.setEvent(a)):this.removeDocumentEvents()),0<this.interval&&(this.timeoutId=setTimeout(OpenLayers.Function.bind(this.removeTimeout,this),this.interval)),this.dragging=!0,this.move(a),this.callback("move",[a.xy]),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart,document.onselectstart=OpenLayers.Function.False),this.last=a.xy),!0},dragend:function(a){if(this.started){!0===this.documentDrag&&this.documentEvents&&(this.adjustXY(a),this.removeDocumentEvents());var b=this.start!=this.last;this.dragging=this.started=!1,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.up(a),this.callback("up",[a.xy]),b&&this.callback("done",[a.xy]),document.onselectstart=this.oldOnselectstart}return!0},down:function(a){},move:function(a){},up:function(a){},out:function(a){},mousedown:function(a){return this.dragstart(a)},touchstart:function(a){return this.startTouch(),this.dragstart(a)},mousemove:function(a){return this.dragmove(a)},touchmove:function(a){return this.dragmove(a)},removeTimeout:function(){this.timeoutId=null,this.dragging&&this.mousemove(this.lastMoveEvt)},mouseup:function(a){return this.dragend(a)},touchend:function(a){return a.xy=this.last,this.dragend(a)},mouseout:function(a){if(this.started&&OpenLayers.Util.mouseLeft(a,this.map.viewPortDiv))if(!0===this.documentDrag)this.addDocumentEvents();else{var b=this.start!=this.last;this.dragging=this.started=!1,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.out(a),this.callback("out",[]),b&&this.callback("done",[a.xy]),document.onselectstart&&(document.onselectstart=this.oldOnselectstart)}return!0},click:function(a){return this.start==this.last},activate:function(){var a=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.dragging=!1,a=!0),a},deactivate:function(){var a=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.dragging=this.started=!1,this.last=this.start=null,a=!0,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown")),a},adjustXY:function(a){var b=OpenLayers.Util.pagePosition(this.map.viewPortDiv);a.xy.x-=b[0],a.xy.y-=b[1]},addDocumentEvents:function(){OpenLayers.Element.addClass(document.body,"olDragDown"),this.documentEvents=!0,OpenLayers.Event.observe(document,"mousemove",this._docMove),OpenLayers.Event.observe(document,"mouseup",this._docUp)},removeDocumentEvents:function(){OpenLayers.Element.removeClass(document.body,"olDragDown"),this.documentEvents=!1,OpenLayers.Event.stopObserving(document,"mousemove",this._docMove),OpenLayers.Event.stopObserving(document,"mouseup",this._docUp)},CLASS_NAME:"OpenLayers.Handler.Drag"}),OpenLayers.Control.OverviewMap=OpenLayers.Class(OpenLayers.Control,{element:null,ovmap:null,size:{w:180,h:90},layers:null,minRectSize:15,minRectDisplayClass:"RectReplacement",minRatio:8,maxRatio:32,mapOptions:null,autoPan:!1,handlers:null,resolutionFactor:1,maximized:!1,maximizeTitle:"",minimizeTitle:"",initialize:function(a){this.layers=[],this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,[a])},destroy:function(){this.mapDiv&&(this.handlers.click&&this.handlers.click.destroy(),this.handlers.drag&&this.handlers.drag.destroy(),this.ovmap&&this.ovmap.viewPortDiv.removeChild(this.extentRectangle),this.extentRectangle=null,this.rectEvents&&(this.rectEvents.destroy(),this.rectEvents=null),this.ovmap&&(this.ovmap.destroy(),this.ovmap=null),this.element.removeChild(this.mapDiv),this.mapDiv=null,this.div.removeChild(this.element),this.element=null,this.maximizeDiv&&(this.div.removeChild(this.maximizeDiv),this.maximizeDiv=null),this.minimizeDiv&&(this.div.removeChild(this.minimizeDiv),this.minimizeDiv=null),this.map.events.un({buttonclick:this.onButtonClick,moveend:this.update,changebaselayer:this.baseLayerDraw,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments))},draw:function(){if(OpenLayers.Control.prototype.draw.apply(this,arguments),0===this.layers.length){if(!this.map.baseLayer)return this.map.events.register("changebaselayer",this,this.baseLayerDraw),this.div;this.layers=[this.map.baseLayer.clone()]}if(this.element=document.createElement("div"),this.element.className=this.displayClass+"Element",this.element.style.display="none",this.mapDiv=document.createElement("div"),this.mapDiv.style.width=this.size.w+"px",this.mapDiv.style.height=this.size.h+"px",this.mapDiv.style.position="relative",this.mapDiv.style.overflow="hidden",this.mapDiv.id=OpenLayers.Util.createUniqueID("overviewMap"),this.extentRectangle=document.createElement("div"),this.extentRectangle.style.position="absolute",this.extentRectangle.style.zIndex=1e3,this.extentRectangle.className=this.displayClass+"ExtentRectangle",this.element.appendChild(this.mapDiv),this.div.appendChild(this.element),this.outsideViewport)this.element.style.display="";else{this.div.className+=" "+this.displayClass+"Container";var a=OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv(this.displayClass+"MaximizeButton",null,null,a,"absolute"),this.maximizeDiv.style.display="none",this.maximizeDiv.className=this.displayClass+"MaximizeButton olButton",this.maximizeTitle&&(this.maximizeDiv.title=this.maximizeTitle),this.div.appendChild(this.maximizeDiv),a=OpenLayers.Util.getImageLocation("layer-switcher-minimize.png"),this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_minimizeDiv",null,null,a,"absolute"),this.minimizeDiv.style.display="none",this.minimizeDiv.className=this.displayClass+"MinimizeButton olButton",this.minimizeTitle&&(this.minimizeDiv.title=this.minimizeTitle),this.div.appendChild(this.minimizeDiv),this.minimizeControl()}return this.map.getExtent()&&this.update(),this.map.events.on({buttonclick:this.onButtonClick,moveend:this.update,scope:this}),this.maximized&&this.maximizeControl(),this.div},baseLayerDraw:function(){this.draw(),this.map.events.unregister("changebaselayer",this,this.baseLayerDraw)},rectDrag:function(a){var b=this.handlers.drag.last.x-a.x,c=this.handlers.drag.last.y-a.y;if(0!=b||0!=c){var d=this.rectPxBounds.top,e=this.rectPxBounds.left;a=Math.abs(this.rectPxBounds.getHeight());var f=this.rectPxBounds.getWidth(),c=Math.max(0,d-c),c=Math.min(c,this.ovmap.size.h-this.hComp-a),b=Math.max(0,e-b),b=Math.min(b,this.ovmap.size.w-this.wComp-f);this.setRectPxBounds(new OpenLayers.Bounds(b,c+a,b+f,c))}},mapDivClick:function(a){var b=this.rectPxBounds.getCenterPixel(),c=a.xy.x-b.x,d=a.xy.y-b.y,e=this.rectPxBounds.top,f=this.rectPxBounds.left;a=Math.abs(this.rectPxBounds.getHeight()),b=this.rectPxBounds.getWidth(),d=Math.max(0,e+d),d=Math.min(d,this.ovmap.size.h-a),c=Math.max(0,f+c),c=Math.min(c,this.ovmap.size.w-b),this.setRectPxBounds(new OpenLayers.Bounds(c,d+a,c+b,d)),this.updateMapToRect()},onButtonClick:function(a){a.buttonElement===this.minimizeDiv?this.minimizeControl():a.buttonElement===this.maximizeDiv&&this.maximizeControl()},maximizeControl:function(a){this.element.style.display="",this.showToggle(!1),null!=a&&OpenLayers.Event.stop(a)},minimizeControl:function(a){this.element.style.display="none",this.showToggle(!0),null!=a&&OpenLayers.Event.stop(a)},showToggle:function(a){this.maximizeDiv&&(this.maximizeDiv.style.display=a?"":"none"),this.minimizeDiv&&(this.minimizeDiv.style.display=a?"none":"")},update:function(){null==this.ovmap&&this.createMap(),!this.autoPan&&this.isSuitableOverview()||this.updateOverview(),this.updateRectToMap()},isSuitableOverview:function(){var a=this.map.getExtent(),b=this.map.getMaxExtent(),a=new OpenLayers.Bounds(Math.max(a.left,b.left),Math.max(a.bottom,b.bottom),Math.min(a.right,b.right),Math.min(a.top,b.top));return this.ovmap.getProjection()!=this.map.getProjection()&&(a=a.transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject())),b=this.ovmap.getResolution()/this.map.getResolution(),b>this.minRatio&&b<=this.maxRatio&&this.ovmap.getExtent().containsBounds(a)},updateOverview:function(){var a=this.map.getResolution(),b=this.ovmap.getResolution(),c=b/a;c>this.maxRatio?b=this.minRatio*a:c<=this.minRatio&&(b=this.maxRatio*a),this.ovmap.getProjection()!=this.map.getProjection()?(a=this.map.center.clone(),a.transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject())):a=this.map.center,this.ovmap.setCenter(a,this.ovmap.getZoomForResolution(b*this.resolutionFactor)),this.updateRectToMap()},createMap:function(){var a=OpenLayers.Util.extend({controls:[],maxResolution:"auto",fallThrough:!1},this.mapOptions);if(this.ovmap=new OpenLayers.Map(this.mapDiv,a),this.ovmap.viewPortDiv.appendChild(this.extentRectangle),OpenLayers.Event.stopObserving(window,"unload",this.ovmap.unloadDestroy),this.ovmap.addLayers(this.layers),this.ovmap.zoomToMaxExtent(),this.wComp=(this.wComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-left-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-right-width")))?this.wComp:2,this.hComp=(this.hComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-top-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-bottom-width")))?this.hComp:2,this.handlers.drag=new OpenLayers.Handler.Drag(this,{move:this.rectDrag,done:this.updateMapToRect},{map:this.ovmap}),this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.mapDivClick},{single:!0,"double":!1,stopSingle:!0,stopDouble:!0,pixelTolerance:1,map:this.ovmap}),this.handlers.click.activate(),this.rectEvents=new OpenLayers.Events(this,this.extentRectangle,null,!0),this.rectEvents.register("mouseover",this,function(a){this.handlers.drag.active||this.map.dragging||this.handlers.drag.activate()}),this.rectEvents.register("mouseout",this,function(a){this.handlers.drag.dragging||this.handlers.drag.deactivate()}),this.ovmap.getProjection()!=this.map.getProjection()){var a=this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units,b=this.ovmap.getProjectionObject().getUnits()||this.ovmap.units||this.ovmap.baseLayer.units;this.resolutionFactor=a&&b?OpenLayers.INCHES_PER_UNIT[a]/OpenLayers.INCHES_PER_UNIT[b]:1}},updateRectToMap:function(){var a;a=this.ovmap.getProjection()!=this.map.getProjection()?this.map.getExtent().transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject()):this.map.getExtent(),(a=this.getRectBoundsFromMapBounds(a))&&this.setRectPxBounds(a)},updateMapToRect:function(){var a=this.getMapBoundsFromRectBounds(this.rectPxBounds);this.ovmap.getProjection()!=this.map.getProjection()&&(a=a.transform(this.ovmap.getProjectionObject(),this.map.getProjectionObject())),this.map.panTo(a.getCenterLonLat())},setRectPxBounds:function(a){var b=Math.max(a.top,0),c=Math.max(a.left,0),d=Math.min(a.top+Math.abs(a.getHeight()),this.ovmap.size.h-this.hComp);a=Math.min(a.left+a.getWidth(),this.ovmap.size.w-this.wComp);var e=Math.max(a-c,0),f=Math.max(d-b,0);e<this.minRectSize||f<this.minRectSize?(this.extentRectangle.className=this.displayClass+this.minRectDisplayClass,e=c+e/2-this.minRectSize/2,this.extentRectangle.style.top=Math.round(b+f/2-this.minRectSize/2)+"px",this.extentRectangle.style.left=Math.round(e)+"px",this.extentRectangle.style.height=this.minRectSize+"px",this.extentRectangle.style.width=this.minRectSize+"px"):(this.extentRectangle.className=this.displayClass+"ExtentRectangle",this.extentRectangle.style.top=Math.round(b)+"px",this.extentRectangle.style.left=Math.round(c)+"px",this.extentRectangle.style.height=Math.round(f)+"px",this.extentRectangle.style.width=Math.round(e)+"px"),this.rectPxBounds=new OpenLayers.Bounds(Math.round(c),Math.round(d),Math.round(a),Math.round(b))},getRectBoundsFromMapBounds:function(a){var b=this.getOverviewPxFromLonLat({lon:a.left,lat:a.bottom});a=this.getOverviewPxFromLonLat({lon:a.right,lat:a.top});var c=null;return b&&a&&(c=new OpenLayers.Bounds(b.x,b.y,a.x,a.y)),c},getMapBoundsFromRectBounds:function(a){var b=this.getLonLatFromOverviewPx({x:a.left,y:a.bottom});return a=this.getLonLatFromOverviewPx({x:a.right,y:a.top}),new OpenLayers.Bounds(b.lon,b.lat,a.lon,a.lat)},getLonLatFromOverviewPx:function(a){var b=this.ovmap.size,c=this.ovmap.getResolution(),d=this.ovmap.getExtent().getCenterLonLat();return{lon:d.lon+(a.x-b.w/2)*c,lat:d.lat-(a.y-b.h/2)*c}},getOverviewPxFromLonLat:function(a){var b=this.ovmap.getResolution(),c=this.ovmap.getExtent();return c?{x:Math.round(1/b*(a.lon-c.left)),y:Math.round(1/b*(c.top-a.lat))}:void 0},CLASS_NAME:"OpenLayers.Control.OverviewMap"}),OpenLayers.Layer=OpenLayers.Class({id:null,name:null,div:null,opacity:1,alwaysInRange:null,RESOLUTION_PROPERTIES:"scales resolutions maxScale minScale maxResolution minResolution numZoomLevels maxZoomLevel".split(" "),events:null,map:null,isBaseLayer:!1,alpha:!1,displayInLayerSwitcher:!0,visibility:!0,attribution:null,inRange:!1,imageSize:null,options:null,eventListeners:null,gutter:0,projection:null,units:null,scales:null,resolutions:null,maxExtent:null,minExtent:null,maxResolution:null,minResolution:null,numZoomLevels:null,minScale:null,maxScale:null,displayOutsideMaxExtent:!1,wrapDateLine:!1,metadata:null,initialize:function(a,b){this.metadata={},b=OpenLayers.Util.extend({},b),null!=this.alwaysInRange&&(b.alwaysInRange=this.alwaysInRange),this.addOptions(b),this.name=a,null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"),this.div=OpenLayers.Util.createDiv(this.id),this.div.style.width="100%",this.div.style.height="100%",this.div.dir="ltr",this.events=new OpenLayers.Events(this,this.div),this.eventListeners instanceof Object)&&this.events.on(this.eventListeners)},destroy:function(a){null==a&&(a=!0),null!=this.map&&this.map.removeLayer(this,a),this.options=this.div=this.name=this.map=this.projection=null,this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy()),this.events=this.eventListeners=null},clone:function(a){return null==a&&(a=new OpenLayers.Layer(this.name,this.getOptions())),OpenLayers.Util.applyDefaults(a,this),a.map=null,a},getOptions:function(){var a,b={};for(a in this.options)b[a]=this[a];return b},setName:function(a){a!=this.name&&(this.name=a,null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"name"}))},addOptions:function(a,b){if(null==this.options&&(this.options={}),a&&("string"==typeof a.projection&&(a.projection=new OpenLayers.Projection(a.projection)),a.projection&&OpenLayers.Util.applyDefaults(a,OpenLayers.Projection.defaults[a.projection.getCode()]),!a.maxExtent||a.maxExtent instanceof OpenLayers.Bounds||(a.maxExtent=new OpenLayers.Bounds(a.maxExtent)),!a.minExtent||a.minExtent instanceof OpenLayers.Bounds||(a.minExtent=new OpenLayers.Bounds(a.minExtent))),OpenLayers.Util.extend(this.options,a),OpenLayers.Util.extend(this,a),this.projection&&this.projection.getUnits()&&(this.units=this.projection.getUnits()),this.map){var c,d=this.map.getResolution(),e=this.RESOLUTION_PROPERTIES.concat(["projection","units","minExtent","maxExtent"]);for(c in a)if(a.hasOwnProperty(c)&&0<=OpenLayers.Util.indexOf(e,c)){this.initResolutions(),b&&this.map.baseLayer===this&&(this.map.setCenter(this.map.getCenter(),this.map.getZoomForResolution(d),!1,!0),this.map.events.triggerEvent("changebaselayer",{layer:this}));break}}},onMapResize:function(){},redraw:function(){var a=!1;if(this.map){this.inRange=this.calculateInRange();var b=this.getExtent();b&&this.inRange&&this.visibility&&(this.moveTo(b,!0,!1),this.events.triggerEvent("moveend",{zoomChanged:!0}),a=!0)}return a},moveTo:function(a,b,c){a=this.visibility,this.isBaseLayer||(a=a&&this.inRange),this.display(a)},moveByPx:function(a,b){},setMap:function(a){null==this.map&&(this.map=a,this.maxExtent=this.maxExtent||this.map.maxExtent,this.minExtent=this.minExtent||this.map.minExtent,this.projection=this.projection||this.map.projection,"string"==typeof this.projection&&(this.projection=new OpenLayers.Projection(this.projection)),this.units=this.projection.getUnits()||this.units||this.map.units,this.initResolutions(),this.isBaseLayer||(this.inRange=this.calculateInRange(),this.div.style.display=this.visibility&&this.inRange?"":"none"),this.setTileSize())},afterAdd:function(){},removeMap:function(a){},getImageSize:function(a){return this.imageSize||this.tileSize},setTileSize:function(a){this.tileSize=a=a?a:this.tileSize?this.tileSize:this.map.getTileSize(),this.gutter&&(this.imageSize=new OpenLayers.Size(a.w+2*this.gutter,a.h+2*this.gutter))},getVisibility:function(){return this.visibility},setVisibility:function(a){a!=this.visibility&&(this.visibility=a,this.display(a),this.redraw(),null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"visibility"}),this.events.triggerEvent("visibilitychanged"))},display:function(a){a!=("none"!=this.div.style.display)&&(this.div.style.display=a&&this.calculateInRange()?"block":"none")},calculateInRange:function(){var a=!1;return this.alwaysInRange?a=!0:this.map&&(a=this.map.getResolution(),a=a>=this.minResolution&&a<=this.maxResolution),a},setIsBaseLayer:function(a){a!=this.isBaseLayer&&(this.isBaseLayer=a,null!=this.map&&this.map.events.triggerEvent("changebaselayer",{layer:this}))},initResolutions:function(){var a,b,c,d={},e=!0;for(a=0,b=this.RESOLUTION_PROPERTIES.length;b>a;a++)c=this.RESOLUTION_PROPERTIES[a],d[c]=this.options[c],e&&this.options[c]&&(e=!1);if(null==this.options.alwaysInRange&&(this.alwaysInRange=e),null==d.resolutions&&(d.resolutions=this.resolutionsFromScales(d.scales)),null==d.resolutions&&(d.resolutions=this.calculateResolutions(d)),null==d.resolutions){for(a=0,b=this.RESOLUTION_PROPERTIES.length;b>a;a++)c=this.RESOLUTION_PROPERTIES[a],d[c]=null!=this.options[c]?this.options[c]:this.map[c];null==d.resolutions&&(d.resolutions=this.resolutionsFromScales(d.scales)),null==d.resolutions&&(d.resolutions=this.calculateResolutions(d))}var f;this.options.maxResolution&&"auto"!==this.options.maxResolution&&(f=this.options.maxResolution),this.options.minScale&&(f=OpenLayers.Util.getResolutionFromScale(this.options.minScale,this.units));var g;if(this.options.minResolution&&"auto"!==this.options.minResolution&&(g=this.options.minResolution),this.options.maxScale&&(g=OpenLayers.Util.getResolutionFromScale(this.options.maxScale,this.units)),d.resolutions&&(d.resolutions.sort(function(a,b){return b-a}),f||(f=d.resolutions[0]),g||(g=d.resolutions[d.resolutions.length-1])),this.resolutions=d.resolutions){for(b=this.resolutions.length,this.scales=Array(b),a=0;b>a;a++)this.scales[a]=OpenLayers.Util.getScaleFromResolution(this.resolutions[a],this.units);this.numZoomLevels=b}(this.minResolution=g)&&(this.maxScale=OpenLayers.Util.getScaleFromResolution(g,this.units)),(this.maxResolution=f)&&(this.minScale=OpenLayers.Util.getScaleFromResolution(f,this.units))},resolutionsFromScales:function(a){if(null!=a){var b,c,d;for(d=a.length,b=Array(d),c=0;d>c;c++)b[c]=OpenLayers.Util.getResolutionFromScale(a[c],this.units);return b}},calculateResolutions:function(a){var b,c,d=a.maxResolution;if(null!=a.minScale?d=OpenLayers.Util.getResolutionFromScale(a.minScale,this.units):"auto"==d&&null!=this.maxExtent&&(b=this.map.getSize(),c=this.maxExtent.getWidth()/b.w,b=this.maxExtent.getHeight()/b.h,d=Math.max(c,b)),c=a.minResolution,null!=a.maxScale?c=OpenLayers.Util.getResolutionFromScale(a.maxScale,this.units):"auto"==a.minResolution&&null!=this.minExtent&&(b=this.map.getSize(),c=this.minExtent.getWidth()/b.w,b=this.minExtent.getHeight()/b.h,c=Math.max(c,b)),"number"!=typeof d&&"number"!=typeof c&&null!=this.maxExtent&&(d=this.map.getTileSize(),d=Math.max(this.maxExtent.getWidth()/d.w,this.maxExtent.getHeight()/d.h)),b=a.maxZoomLevel,a=a.numZoomLevels,"number"==typeof c&&"number"==typeof d&&void 0===a?a=Math.floor(Math.log(d/c)/Math.log(2))+1:void 0===a&&null!=b&&(a=b+1),!("number"!=typeof a||0>=a||"number"!=typeof d&&"number"!=typeof c)){b=Array(a);var e=2;"number"==typeof c&&"number"==typeof d&&(e=Math.pow(d/c,1/(a-1)));var f;if("number"==typeof d)for(f=0;a>f;f++)b[f]=d/Math.pow(e,f);else for(f=0;a>f;f++)b[a-1-f]=c*Math.pow(e,f);return b}},getResolution:function(){var a=this.map.getZoom();return this.getResolutionForZoom(a)},getExtent:function(){return this.map.calculateBounds()},getZoomForExtent:function(a,b){var c=this.map.getSize(),c=Math.max(a.getWidth()/c.w,a.getHeight()/c.h);return this.getZoomForResolution(c,b)},getDataExtent:function(){},getResolutionForZoom:function(a){if(a=Math.max(0,Math.min(a,this.resolutions.length-1)),this.map.fractionalZoom){var b=Math.floor(a),c=Math.ceil(a);a=this.resolutions[b]-(a-b)*(this.resolutions[b]-this.resolutions[c])}else a=this.resolutions[Math.round(a)];return a},getZoomForResolution:function(a,b){var c,d;if(this.map.fractionalZoom){var e,f=0,g=this.resolutions[f],h=this.resolutions[this.resolutions.length-1];for(c=0,d=this.resolutions.length;d>c;++c)if(e=this.resolutions[c],e>=a&&(g=e,f=c),a>=e){h=e;break}c=g-h,c=c>0?f+(g-a)/c:f}else{for(g=Number.POSITIVE_INFINITY,c=0,d=this.resolutions.length;d>c;c++)if(b){if(f=Math.abs(this.resolutions[c]-a),f>g)break;g=f}else if(this.resolutions[c]<a)break;c=Math.max(0,c-1)}return c},getLonLatFromViewPortPx:function(a){
var b=null,c=this.map;if(null!=a&&c.minPx){var b=c.getResolution(),d=c.getMaxExtent({restricted:!0}),b=new OpenLayers.LonLat((a.x-c.minPx.x)*b+d.left,(c.minPx.y-a.y)*b+d.top);this.wrapDateLine&&(b=b.wrapDateLine(this.maxExtent))}return b},getViewPortPxFromLonLat:function(a,b){var c=null;return null!=a&&(b=b||this.map.getResolution(),c=this.map.calculateBounds(null,b),c=new OpenLayers.Pixel(1/b*(a.lon-c.left),1/b*(c.top-a.lat))),c},setOpacity:function(a){if(a!=this.opacity){this.opacity=a;for(var b=this.div.childNodes,c=0,d=b.length;d>c;++c){var e=b[c].firstChild||b[c],f=b[c].lastChild;f&&"iframe"===f.nodeName.toLowerCase()&&(e=f.parentNode),OpenLayers.Util.modifyDOMElement(e,null,null,null,null,null,null,a)}null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"})}},getZIndex:function(){return this.div.style.zIndex},setZIndex:function(a){this.div.style.zIndex=a},adjustBounds:function(a){if(this.gutter){var b=this.gutter*this.map.getResolution();a=new OpenLayers.Bounds(a.left-b,a.bottom-b,a.right+b,a.top+b)}return this.wrapDateLine&&(b={rightTolerance:this.getResolution(),leftTolerance:this.getResolution()},a=a.wrapDateLine(this.maxExtent,b)),a},CLASS_NAME:"OpenLayers.Layer"}),OpenLayers.Layer.SphericalMercator={getExtent:function(){var a=null;return a=this.sphericalMercator?this.map.calculateBounds():OpenLayers.Layer.FixedZoomLevels.prototype.getExtent.apply(this)},getLonLatFromViewPortPx:function(a){return OpenLayers.Layer.prototype.getLonLatFromViewPortPx.apply(this,arguments)},getViewPortPxFromLonLat:function(a){return OpenLayers.Layer.prototype.getViewPortPxFromLonLat.apply(this,arguments)},initMercatorParameters:function(){this.RESOLUTIONS=[];for(var a=0;a<=this.MAX_ZOOM_LEVEL;++a)this.RESOLUTIONS[a]=156543.03390625/Math.pow(2,a);this.units="m",this.projection=this.projection||"EPSG:900913"},forwardMercator:function(){var a=new OpenLayers.Projection("EPSG:4326"),b=new OpenLayers.Projection("EPSG:900913");return function(c,d){var e=OpenLayers.Projection.transform({x:c,y:d},a,b);return new OpenLayers.LonLat(e.x,e.y)}}(),inverseMercator:function(){var a=new OpenLayers.Projection("EPSG:4326"),b=new OpenLayers.Projection("EPSG:900913");return function(c,d){var e=OpenLayers.Projection.transform({x:c,y:d},b,a);return new OpenLayers.LonLat(e.x,e.y)}}()},OpenLayers.Layer.EventPane=OpenLayers.Class(OpenLayers.Layer,{smoothDragPan:!0,isBaseLayer:!0,isFixed:!0,pane:null,mapObject:null,initialize:function(a,b){OpenLayers.Layer.prototype.initialize.apply(this,arguments),null==this.pane&&(this.pane=OpenLayers.Util.createDiv(this.div.id+"_EventPane"))},destroy:function(){this.pane=this.mapObject=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setMap:function(a){OpenLayers.Layer.prototype.setMap.apply(this,arguments),this.pane.style.zIndex=parseInt(this.div.style.zIndex)+1,this.pane.style.display=this.div.style.display,this.pane.style.width="100%",this.pane.style.height="100%","msie"==OpenLayers.BROWSER_NAME&&(this.pane.style.background="url("+OpenLayers.Util.getImageLocation("blank.gif")+")"),this.isFixed?this.map.viewPortDiv.appendChild(this.pane):this.map.layerContainerDiv.appendChild(this.pane),this.loadMapObject(),null==this.mapObject&&this.loadWarningMessage()},removeMap:function(a){this.pane&&this.pane.parentNode&&this.pane.parentNode.removeChild(this.pane),OpenLayers.Layer.prototype.removeMap.apply(this,arguments)},loadWarningMessage:function(){this.div.style.backgroundColor="darkblue";var a=this.map.getSize(),b=Math.min(a.w,300),c=Math.min(a.h,200),b=new OpenLayers.Size(b,c),a=new OpenLayers.Pixel(a.w/2,a.h/2).add(-b.w/2,-b.h/2),a=OpenLayers.Util.createDiv(this.name+"_warning",a,b,null,null,null,"auto");a.style.padding="7px",a.style.backgroundColor="yellow",a.innerHTML=this.getWarningHTML(),this.div.appendChild(a)},getWarningHTML:function(){return""},display:function(a){OpenLayers.Layer.prototype.display.apply(this,arguments),this.pane.style.display=this.div.style.display},setZIndex:function(a){OpenLayers.Layer.prototype.setZIndex.apply(this,arguments),this.pane.style.zIndex=parseInt(this.div.style.zIndex)+1},moveByPx:function(a,b){OpenLayers.Layer.prototype.moveByPx.apply(this,arguments),this.dragPanMapObject?this.dragPanMapObject(a,-b):this.moveTo(this.map.getCachedCenter())},moveTo:function(a,b,c){if(OpenLayers.Layer.prototype.moveTo.apply(this,arguments),null!=this.mapObject){var d=this.map.getCenter(),e=this.map.getZoom();if(null!=d){var f=this.getMapObjectCenter(),f=this.getOLLonLatFromMapObjectLonLat(f),g=this.getMapObjectZoom(),g=this.getOLZoomFromMapObjectZoom(g);d.equals(f)&&e==g||(!b&&f&&this.dragPanMapObject&&this.smoothDragPan?(e=this.map.getViewPortPxFromLonLat(f),d=this.map.getViewPortPxFromLonLat(d),this.dragPanMapObject(d.x-e.x,e.y-d.y)):(d=this.getMapObjectLonLatFromOLLonLat(d),e=this.getMapObjectZoomFromOLZoom(e),this.setMapObjectCenter(d,e,c)))}}},getLonLatFromViewPortPx:function(a){var b=null;return null!=this.mapObject&&null!=this.getMapObjectCenter()&&(a=this.getMapObjectPixelFromOLPixel(a),a=this.getMapObjectLonLatFromMapObjectPixel(a),b=this.getOLLonLatFromMapObjectLonLat(a)),b},getViewPortPxFromLonLat:function(a){var b=null;return null!=this.mapObject&&null!=this.getMapObjectCenter()&&(a=this.getMapObjectLonLatFromOLLonLat(a),a=this.getMapObjectPixelFromMapObjectLonLat(a),b=this.getOLPixelFromMapObjectPixel(a)),b},getOLLonLatFromMapObjectLonLat:function(a){var b=null;return null!=a&&(b=this.getLongitudeFromMapObjectLonLat(a),a=this.getLatitudeFromMapObjectLonLat(a),b=new OpenLayers.LonLat(b,a)),b},getMapObjectLonLatFromOLLonLat:function(a){var b=null;return null!=a&&(b=this.getMapObjectLonLatFromLonLat(a.lon,a.lat)),b},getOLPixelFromMapObjectPixel:function(a){var b=null;return null!=a&&(b=this.getXFromMapObjectPixel(a),a=this.getYFromMapObjectPixel(a),b=new OpenLayers.Pixel(b,a)),b},getMapObjectPixelFromOLPixel:function(a){var b=null;return null!=a&&(b=this.getMapObjectPixelFromXY(a.x,a.y)),b},CLASS_NAME:"OpenLayers.Layer.EventPane"}),OpenLayers.Layer.FixedZoomLevels=OpenLayers.Class({initialize:function(){},initResolutions:function(){for(var a=["minZoomLevel","maxZoomLevel","numZoomLevels"],b=0,c=a.length;c>b;b++){var d=a[b];this[d]=null!=this.options[d]?this.options[d]:this.map[d]}if((null==this.minZoomLevel||this.minZoomLevel<this.MIN_ZOOM_LEVEL)&&(this.minZoomLevel=this.MIN_ZOOM_LEVEL),a=this.MAX_ZOOM_LEVEL-this.minZoomLevel+1,b=null==this.options.numZoomLevels&&null!=this.options.maxZoomLevel||null==this.numZoomLevels&&null!=this.maxZoomLevel?this.maxZoomLevel-this.minZoomLevel+1:this.numZoomLevels,this.numZoomLevels=null!=b?Math.min(b,a):a,this.maxZoomLevel=this.minZoomLevel+this.numZoomLevels-1,null!=this.RESOLUTIONS){for(a=0,this.resolutions=[],b=this.minZoomLevel;b<=this.maxZoomLevel;b++)this.resolutions[a++]=this.RESOLUTIONS[b];this.maxResolution=this.resolutions[0],this.minResolution=this.resolutions[this.resolutions.length-1]}},getResolution:function(){if(null!=this.resolutions)return OpenLayers.Layer.prototype.getResolution.apply(this,arguments);var a=null,b=this.map.getSize(),c=this.getExtent();return null!=b&&null!=c&&(a=Math.max(c.getWidth()/b.w,c.getHeight()/b.h)),a},getExtent:function(){var a=this.map.getSize(),b=this.getLonLatFromViewPortPx({x:0,y:0}),a=this.getLonLatFromViewPortPx({x:a.w,y:a.h});return null!=b&&null!=a?new OpenLayers.Bounds(b.lon,a.lat,a.lon,b.lat):null},getZoomForResolution:function(a){if(null!=this.resolutions)return OpenLayers.Layer.prototype.getZoomForResolution.apply(this,arguments);var b=OpenLayers.Layer.prototype.getExtent.apply(this,[]);return this.getZoomForExtent(b)},getOLZoomFromMapObjectZoom:function(a){var b=null;return null!=a&&(b=a-this.minZoomLevel,this.map.baseLayer!==this&&(b=this.map.baseLayer.getZoomForResolution(this.getResolutionForZoom(b)))),b},getMapObjectZoomFromOLZoom:function(a){var b=null;return null!=a&&(b=a+this.minZoomLevel,this.map.baseLayer!==this&&(b=this.getZoomForResolution(this.map.baseLayer.getResolutionForZoom(b)))),b},CLASS_NAME:"OpenLayers.Layer.FixedZoomLevels"}),OpenLayers.Layer.Google=OpenLayers.Class(OpenLayers.Layer.EventPane,OpenLayers.Layer.FixedZoomLevels,{MIN_ZOOM_LEVEL:0,MAX_ZOOM_LEVEL:21,RESOLUTIONS:[1.40625,.703125,.3515625,.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.00034332275390625,.000171661376953125,858306884765625e-19,4291534423828125e-20,2145767211914062e-20,1072883605957031e-20,536441802978515e-20,268220901489257e-20,1341104507446289e-21,6.705522537231445e-7],type:null,wrapDateLine:!0,sphericalMercator:!1,version:null,initialize:function(a,b){b=b||{},b.version||(b.version="function"==typeof GMap2?"2":"3");var c=OpenLayers.Layer.Google["v"+b.version.replace(/\./g,"_")];if(!c)throw"Unsupported Google Maps API version: "+b.version;OpenLayers.Util.applyDefaults(b,c),OpenLayers.Util.applyDefaults(b,c.DEFAULTS),b.maxExtent&&(b.maxExtent=b.maxExtent.clone()),OpenLayers.Layer.EventPane.prototype.initialize.apply(this,[a,b]),OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this,[a,b]),this.sphericalMercator&&(OpenLayers.Util.extend(this,OpenLayers.Layer.SphericalMercator),this.initMercatorParameters())},clone:function(){return new OpenLayers.Layer.Google(this.name,this.getOptions())},setVisibility:function(a){var b=null==this.opacity?1:this.opacity;OpenLayers.Layer.EventPane.prototype.setVisibility.apply(this,arguments),this.setOpacity(b)},display:function(a){this._dragging||this.setGMapVisibility(a),OpenLayers.Layer.EventPane.prototype.display.apply(this,arguments)},moveTo:function(a,b,c){this._dragging=c,OpenLayers.Layer.EventPane.prototype.moveTo.apply(this,arguments),delete this._dragging},setOpacity:function(a){if(a!==this.opacity&&(null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"}),this.opacity=a),this.getVisibility()){var b=this.getMapContainer();OpenLayers.Util.modifyDOMElement(b,null,null,null,null,null,null,a)}},destroy:function(){if(this.map){this.setGMapVisibility(!1);var a=OpenLayers.Layer.Google.cache[this.map.id];a&&1>=a.count&&this.removeGMapElements()}OpenLayers.Layer.EventPane.prototype.destroy.apply(this,arguments)},removeGMapElements:function(){var a=OpenLayers.Layer.Google.cache[this.map.id];if(a){var b=this.mapObject&&this.getMapContainer();b&&b.parentNode&&b.parentNode.removeChild(b),(b=a.termsOfUse)&&b.parentNode&&b.parentNode.removeChild(b),(a=a.poweredBy)&&a.parentNode&&a.parentNode.removeChild(a),this.mapObject&&window.google&&google.maps&&google.maps.event&&google.maps.event.clearListeners&&google.maps.event.clearListeners(this.mapObject,"tilesloaded")}},removeMap:function(a){this.visibility&&this.mapObject&&this.setGMapVisibility(!1);var b=OpenLayers.Layer.Google.cache[a.id];b&&(1>=b.count?(this.removeGMapElements(),delete OpenLayers.Layer.Google.cache[a.id]):--b.count),delete this.termsOfUse,delete this.poweredBy,delete this.mapObject,delete this.dragObject,OpenLayers.Layer.EventPane.prototype.removeMap.apply(this,arguments)},getOLBoundsFromMapObjectBounds:function(a){var b=null;return null!=a&&(b=a.getSouthWest(),a=a.getNorthEast(),this.sphericalMercator?(b=this.forwardMercator(b.lng(),b.lat()),a=this.forwardMercator(a.lng(),a.lat())):(b=new OpenLayers.LonLat(b.lng(),b.lat()),a=new OpenLayers.LonLat(a.lng(),a.lat())),b=new OpenLayers.Bounds(b.lon,b.lat,a.lon,a.lat)),b},getWarningHTML:function(){return OpenLayers.i18n("googleWarning")},getMapObjectCenter:function(){return this.mapObject.getCenter()},getMapObjectZoom:function(){return this.mapObject.getZoom()},getLongitudeFromMapObjectLonLat:function(a){return this.sphericalMercator?this.forwardMercator(a.lng(),a.lat()).lon:a.lng()},getLatitudeFromMapObjectLonLat:function(a){return this.sphericalMercator?this.forwardMercator(a.lng(),a.lat()).lat:a.lat()},getXFromMapObjectPixel:function(a){return a.x},getYFromMapObjectPixel:function(a){return a.y},CLASS_NAME:"OpenLayers.Layer.Google"}),OpenLayers.Layer.Google.cache={},OpenLayers.Layer.Google.v2={termsOfUse:null,poweredBy:null,dragObject:null,loadMapObject:function(){this.type||(this.type=G_NORMAL_MAP);var a,b,c,d=OpenLayers.Layer.Google.cache[this.map.id];if(d)a=d.mapObject,b=d.termsOfUse,c=d.poweredBy,++d.count;else{var d=this.map.viewPortDiv,e=document.createElement("div");e.id=this.map.id+"_GMap2Container",e.style.position="absolute",e.style.width="100%",e.style.height="100%",d.appendChild(e);try{a=new GMap2(e),b=e.lastChild,d.appendChild(b),b.style.zIndex="1100",b.style.right="",b.style.bottom="",b.className="olLayerGoogleCopyright",c=e.lastChild,d.appendChild(c),c.style.zIndex="1100",c.style.right="",c.style.bottom="",c.className="olLayerGooglePoweredBy gmnoprint"}catch(f){throw f}OpenLayers.Layer.Google.cache[this.map.id]={mapObject:a,termsOfUse:b,poweredBy:c,count:1}}this.mapObject=a,this.termsOfUse=b,this.poweredBy=c,-1===OpenLayers.Util.indexOf(this.mapObject.getMapTypes(),this.type)&&this.mapObject.addMapType(this.type),"function"==typeof a.getDragObject?this.dragObject=a.getDragObject():this.dragPanMapObject=null,!1===this.isBaseLayer&&this.setGMapVisibility("none"!==this.div.style.display)},onMapResize:function(){if(this.visibility&&this.mapObject.isLoaded())this.mapObject.checkResize();else{if(!this._resized)var a=this,b=GEvent.addListener(this.mapObject,"load",function(){GEvent.removeListener(b),delete a._resized,a.mapObject.checkResize(),a.moveTo(a.map.getCenter(),a.map.getZoom())});this._resized=!0}},setGMapVisibility:function(a){var b=OpenLayers.Layer.Google.cache[this.map.id];if(b){var c=this.mapObject.getContainer();!0===a?(this.mapObject.setMapType(this.type),c.style.display="",this.termsOfUse.style.left="",this.termsOfUse.style.display="",this.poweredBy.style.display="",b.displayed=this.id):(b.displayed===this.id&&delete b.displayed,b.displayed||(c.style.display="none",this.termsOfUse.style.display="none",this.termsOfUse.style.left="-9999px",this.poweredBy.style.display="none"))}},getMapContainer:function(){return this.mapObject.getContainer()},getMapObjectBoundsFromOLBounds:function(a){var b=null;return null!=a&&(b=this.sphericalMercator?this.inverseMercator(a.bottom,a.left):new OpenLayers.LonLat(a.bottom,a.left),a=this.sphericalMercator?this.inverseMercator(a.top,a.right):new OpenLayers.LonLat(a.top,a.right),b=new GLatLngBounds(new GLatLng(b.lat,b.lon),new GLatLng(a.lat,a.lon))),b},setMapObjectCenter:function(a,b){this.mapObject.setCenter(a,b)},dragPanMapObject:function(a,b){this.dragObject.moveBy(new GSize(-a,b))},getMapObjectLonLatFromMapObjectPixel:function(a){return this.mapObject.fromContainerPixelToLatLng(a)},getMapObjectPixelFromMapObjectLonLat:function(a){return this.mapObject.fromLatLngToContainerPixel(a)},getMapObjectZoomFromMapObjectBounds:function(a){return this.mapObject.getBoundsZoomLevel(a)},getMapObjectLonLatFromLonLat:function(a,b){var c;return this.sphericalMercator?(c=this.inverseMercator(a,b),c=new GLatLng(c.lat,c.lon)):c=new GLatLng(b,a),c},getMapObjectPixelFromXY:function(a,b){return new GPoint(a,b)}},OpenLayers.Format.XML=OpenLayers.Class(OpenLayers.Format,{namespaces:null,namespaceAlias:null,defaultPrefix:null,readers:{},writers:{},xmldom:null,initialize:function(a){window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM")),OpenLayers.Format.prototype.initialize.apply(this,[a]),this.namespaces=OpenLayers.Util.extend({},this.namespaces),this.namespaceAlias={};for(var b in this.namespaces)this.namespaceAlias[this.namespaces[b]]=b},destroy:function(){this.xmldom=null,OpenLayers.Format.prototype.destroy.apply(this,arguments)},setNamespace:function(a,b){this.namespaces[a]=b,this.namespaceAlias[b]=a},read:function(a){var b=a.indexOf("<");return b>0&&(a=a.substring(b)),b=OpenLayers.Util.Try(OpenLayers.Function.bind(function(){var b;return b=window.ActiveXObject&&!this.xmldom?new ActiveXObject("Microsoft.XMLDOM"):this.xmldom,b.loadXML(a),b},this),function(){return(new DOMParser).parseFromString(a,"text/xml")},function(){var b=new XMLHttpRequest;return b.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(a),!1),b.overrideMimeType&&b.overrideMimeType("text/xml"),b.send(null),b.responseXML}),this.keepData&&(this.data=b),b},write:function(a){if(this.xmldom)a=a.xml;else{var b=new XMLSerializer;if(1==a.nodeType){var c=document.implementation.createDocument("","",null);c.importNode&&(a=c.importNode(a,!0)),c.appendChild(a),a=b.serializeToString(c)}else a=b.serializeToString(a)}return a},createElementNS:function(a,b){return this.xmldom?"string"==typeof a?this.xmldom.createNode(1,b,a):this.xmldom.createNode(1,b,""):document.createElementNS(a,b)},createDocumentFragment:function(){return this.xmldom?this.xmldom.createDocumentFragment():document.createDocumentFragment()},createTextNode:function(a){return"string"!=typeof a&&(a=String(a)),this.xmldom?this.xmldom.createTextNode(a):document.createTextNode(a)},getElementsByTagNameNS:function(a,b,c){var d=[];if(a.getElementsByTagNameNS)d=a.getElementsByTagNameNS(b,c);else{a=a.getElementsByTagName("*");for(var e,f,g=0,h=a.length;h>g;++g)e=a[g],f=e.prefix?e.prefix+":"+c:c,("*"==c||f==e.nodeName)&&("*"!=b&&b!=e.namespaceURI||d.push(e))}return d},getAttributeNodeNS:function(a,b,c){var d=null;if(a.getAttributeNodeNS)d=a.getAttributeNodeNS(b,c);else{a=a.attributes;for(var e,f,g=0,h=a.length;h>g;++g)if(e=a[g],e.namespaceURI==b&&(f=e.prefix?e.prefix+":"+c:c,f==e.nodeName)){d=e;break}}return d},getAttributeNS:function(a,b,c){var d="";return a.getAttributeNS?d=a.getAttributeNS(b,c)||"":(a=this.getAttributeNodeNS(a,b,c))&&(d=a.nodeValue),d},getChildValue:function(a,b){var c=b||"";if(a)for(var d=a.firstChild;d;d=d.nextSibling)switch(d.nodeType){case 3:case 4:c+=d.nodeValue}return c},isSimpleContent:function(a){var b=!0;for(a=a.firstChild;a;a=a.nextSibling)if(1===a.nodeType){b=!1;break}return b},contentType:function(a){var b=!1,c=!1,d=OpenLayers.Format.XML.CONTENT_TYPE.EMPTY;for(a=a.firstChild;a;a=a.nextSibling){switch(a.nodeType){case 1:c=!0;break;case 8:break;default:b=!0}if(c&&b)break}if(c&&b)d=OpenLayers.Format.XML.CONTENT_TYPE.MIXED;else{if(c)return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;if(b)return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE}return d},hasAttributeNS:function(a,b,c){var d=!1;return d=a.hasAttributeNS?a.hasAttributeNS(b,c):!!this.getAttributeNodeNS(a,b,c)},setAttributeNS:function(a,b,c,d){if(a.setAttributeNS)a.setAttributeNS(b,c,d);else{if(!this.xmldom)throw"setAttributeNS not implemented";b?(b=a.ownerDocument.createNode(2,c,b),b.nodeValue=d,a.setAttributeNode(b)):a.setAttribute(c,d)}},createElementNSPlus:function(a,b){b=b||{};var c=b.uri||this.namespaces[b.prefix];c||(c=a.indexOf(":"),c=this.namespaces[a.substring(0,c)]),c||(c=this.namespaces[this.defaultPrefix]),c=this.createElementNS(c,a),b.attributes&&this.setAttributes(c,b.attributes);var d=b.value;return null!=d&&c.appendChild(this.createTextNode(d)),c},setAttributes:function(a,b){var c,d,e;for(e in b)null!=b[e]&&b[e].toString&&(c=b[e].toString(),d=this.namespaces[e.substring(0,e.indexOf(":"))]||null,this.setAttributeNS(a,d,e,c))},readNode:function(a,b){b||(b={});var c=this.readers[a.namespaceURI?this.namespaceAlias[a.namespaceURI]:this.defaultPrefix];if(c){var d=a.localName||a.nodeName.split(":").pop();(c=c[d]||c["*"])&&c.apply(this,[a,b])}return b},readChildNodes:function(a,b){b||(b={});for(var c,d=a.childNodes,e=0,f=d.length;f>e;++e)c=d[e],1==c.nodeType&&this.readNode(c,b);return b},writeNode:function(a,b,c){var d,e=a.indexOf(":");return e>0?(d=a.substring(0,e),a=a.substring(e+1)):d=c?this.namespaceAlias[c.namespaceURI]:this.defaultPrefix,b=this.writers[d][a].apply(this,[b]),c&&c.appendChild(b),b},getChildEl:function(a,b,c){return a&&this.getThisOrNextEl(a.firstChild,b,c)},getNextEl:function(a,b,c){return a&&this.getThisOrNextEl(a.nextSibling,b,c)},getThisOrNextEl:function(a,b,c){a:for(;a;a=a.nextSibling)switch(a.nodeType){case 1:if(!(b&&b!==(a.localName||a.nodeName.split(":").pop())||c&&c!==a.namespaceURI))break a;a=null;break a;case 3:if(/^\s*$/.test(a.nodeValue))break;case 4:case 6:case 12:case 10:case 11:a=null;break a}return a||null},lookupNamespaceURI:function(a,b){var c=null;if(a)if(a.lookupNamespaceURI)c=a.lookupNamespaceURI(b);else a:switch(a.nodeType){case 1:if(null!==a.namespaceURI&&a.prefix===b){c=a.namespaceURI;break a}if(c=a.attributes.length)for(var d,e=0;c>e;++e){if(d=a.attributes[e],"xmlns"===d.prefix&&d.name==="xmlns:"+b){c=d.value||null;break a}if("xmlns"===d.name&&null===b){c=d.value||null;break a}}c=this.lookupNamespaceURI(a.parentNode,b);break a;case 2:c=this.lookupNamespaceURI(a.ownerElement,b);break a;case 9:c=this.lookupNamespaceURI(a.documentElement,b);break a;case 6:case 12:case 10:case 11:break a;default:c=this.lookupNamespaceURI(a.parentNode,b)}return c},getXMLDoc:function(){return OpenLayers.Format.XML.document||this.xmldom||(document.implementation&&document.implementation.createDocument?OpenLayers.Format.XML.document=document.implementation.createDocument("","",null):!this.xmldom&&window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM"))),OpenLayers.Format.XML.document||this.xmldom},CLASS_NAME:"OpenLayers.Format.XML"}),OpenLayers.Format.XML.CONTENT_TYPE={EMPTY:0,SIMPLE:1,COMPLEX:2,MIXED:3},OpenLayers.Format.XML.lookupNamespaceURI=OpenLayers.Function.bind(OpenLayers.Format.XML.prototype.lookupNamespaceURI,OpenLayers.Format.XML.prototype),OpenLayers.Format.XML.document=null,OpenLayers.Format.WFST=function(a){a=OpenLayers.Util.applyDefaults(a,OpenLayers.Format.WFST.DEFAULTS);var b=OpenLayers.Format.WFST["v"+a.version.replace(/\./g,"_")];if(!b)throw"Unsupported WFST version: "+a.version;return new b(a)},OpenLayers.Format.WFST.DEFAULTS={version:"1.0.0"},OpenLayers.Feature=OpenLayers.Class({layer:null,id:null,lonlat:null,data:null,marker:null,popupClass:null,popup:null,initialize:function(a,b,c){this.layer=a,this.lonlat=b,this.data=null!=c?c:{},this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){null!=this.layer&&null!=this.layer.map&&null!=this.popup&&this.layer.map.removePopup(this.popup),null!=this.layer&&null!=this.marker&&this.layer.removeMarker(this.marker),this.data=this.lonlat=this.id=this.layer=null,null!=this.marker&&(this.destroyMarker(this.marker),this.marker=null),null!=this.popup&&(this.destroyPopup(this.popup),this.popup=null)},onScreen:function(){var a=!1;return null!=this.layer&&null!=this.layer.map&&(a=this.layer.map.getExtent().containsLonLat(this.lonlat)),a},createMarker:function(){return null!=this.lonlat&&(this.marker=new OpenLayers.Marker(this.lonlat,this.data.icon)),this.marker},destroyMarker:function(){this.marker.destroy()},createPopup:function(a){return null!=this.lonlat&&(this.popup||(this.popup=new(this.popupClass?this.popupClass:OpenLayers.Popup.Anchored)(this.id+"_popup",this.lonlat,this.data.popupSize,this.data.popupContentHTML,this.marker?this.marker.icon:null,a)),null!=this.data.overflow&&(this.popup.contentDiv.style.overflow=this.data.overflow),this.popup.feature=this),this.popup},destroyPopup:function(){this.popup&&(this.popup.feature=null,this.popup.destroy(),this.popup=null)},CLASS_NAME:"OpenLayers.Feature"}),OpenLayers.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},OpenLayers.Feature.Vector=OpenLayers.Class(OpenLayers.Feature,{fid:null,geometry:null,attributes:null,bounds:null,state:null,style:null,url:null,renderIntent:"default",modified:null,initialize:function(a,b,c){OpenLayers.Feature.prototype.initialize.apply(this,[null,null,b]),this.lonlat=null,this.geometry=a?a:null,this.state=null,this.attributes={},b&&(this.attributes=OpenLayers.Util.extend(this.attributes,b)),this.style=c?c:null},destroy:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.modified=this.geometry=null,OpenLayers.Feature.prototype.destroy.apply(this,arguments)},clone:function(){return new OpenLayers.Feature.Vector(this.geometry?this.geometry.clone():null,this.attributes,this.style)},onScreen:function(a){var b=!1;return this.layer&&this.layer.map&&(b=this.layer.map.getExtent(),a?(a=this.geometry.getBounds(),b=b.intersectsBounds(a)):b=b.toGeometry().intersects(this.geometry)),b},getVisibility:function(){return!(this.style&&"none"==this.style.display||!this.layer||this.layer&&this.layer.styleMap&&"none"==this.layer.styleMap.createSymbolizer(this,this.renderIntent).display||this.layer&&!this.layer.getVisibility())},createMarker:function(){return null},destroyMarker:function(){},createPopup:function(){return null},atPoint:function(a,b,c){var d=!1;return this.geometry&&(d=this.geometry.atPoint(a,b,c)),d},destroyPopup:function(){},move:function(a){if(this.layer&&this.geometry.move){a="OpenLayers.LonLat"==a.CLASS_NAME?this.layer.getViewPortPxFromLonLat(a):a;var b=this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat()),c=this.layer.map.getResolution();return this.geometry.move(c*(a.x-b.x),c*(b.y-a.y)),this.layer.drawFeature(this),b}},toState:function(a){if(a==OpenLayers.State.UPDATE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.DELETE:this.state=a}else if(a==OpenLayers.State.INSERT)switch(this.state){case OpenLayers.State.UNKNOWN:break;default:this.state=a}else if(a==OpenLayers.State.DELETE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.UPDATE:this.state=a}else a==OpenLayers.State.UNKNOWN&&(this.state=a)},CLASS_NAME:"OpenLayers.Feature.Vector"}),OpenLayers.Feature.Vector.style={"default":{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},"delete":{display:"none"}},OpenLayers.Style=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:!1,rules:null,context:null,defaultStyle:null,defaultsPerSymbolizer:!1,propertyStyles:null,initialize:function(a,b){OpenLayers.Util.extend(this,b),this.rules=[],b&&b.rules&&this.addRules(b.rules),this.setDefaultStyle(a||OpenLayers.Feature.Vector.style["default"]),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var a=0,b=this.rules.length;b>a;a++)this.rules[a].destroy(),this.rules[a]=null;this.defaultStyle=this.rules=null},createSymbolizer:function(a){for(var b,c=this.defaultsPerSymbolizer?{}:this.createLiterals(OpenLayers.Util.extend({},this.defaultStyle),a),d=this.rules,e=[],f=!1,g=0,h=d.length;h>g;g++)b=d[g],b.evaluate(a)&&(b instanceof OpenLayers.Rule&&b.elseFilter?e.push(b):(f=!0,this.applySymbolizer(b,c,a)));if(0==f&&0<e.length)for(f=!0,g=0,h=e.length;h>g;g++)this.applySymbolizer(e[g],c,a);return 0<d.length&&0==f&&(c.display="none"),null!=c.label&&"string"!=typeof c.label&&(c.label=String(c.label)),c},applySymbolizer:function(a,b,c){var d=c.geometry?this.getSymbolizerPrefix(c.geometry):OpenLayers.Style.SYMBOLIZER_PREFIXES[0];return a=a.symbolizer[d]||a.symbolizer,!0===this.defaultsPerSymbolizer&&(d=this.defaultStyle,OpenLayers.Util.applyDefaults(a,{pointRadius:d.pointRadius}),!0!==a.stroke&&!0!==a.graphic||OpenLayers.Util.applyDefaults(a,{strokeWidth:d.strokeWidth,strokeColor:d.strokeColor,strokeOpacity:d.strokeOpacity,strokeDashstyle:d.strokeDashstyle,strokeLinecap:d.strokeLinecap}),!0!==a.fill&&!0!==a.graphic||OpenLayers.Util.applyDefaults(a,{fillColor:d.fillColor,fillOpacity:d.fillOpacity}),!0===a.graphic&&OpenLayers.Util.applyDefaults(a,{pointRadius:this.defaultStyle.pointRadius,externalGraphic:this.defaultStyle.externalGraphic,graphicName:this.defaultStyle.graphicName,graphicOpacity:this.defaultStyle.graphicOpacity,graphicWidth:this.defaultStyle.graphicWidth,graphicHeight:this.defaultStyle.graphicHeight,graphicXOffset:this.defaultStyle.graphicXOffset,graphicYOffset:this.defaultStyle.graphicYOffset})),this.createLiterals(OpenLayers.Util.extend(b,a),c)},createLiterals:function(a,b){var c=OpenLayers.Util.extend({},b.attributes||b.data);OpenLayers.Util.extend(c,this.context);for(var d in this.propertyStyles)a[d]=OpenLayers.Style.createLiteral(a[d],c,b,d);return a},findPropertyStyles:function(){var a={};this.addPropertyStyles(a,this.defaultStyle);for(var b,c,d=this.rules,e=0,f=d.length;f>e;e++){b=d[e].symbolizer;for(var g in b){if(c=b[g],"object"!=typeof c){this.addPropertyStyles(a,b);break}this.addPropertyStyles(a,c)}}return a},addPropertyStyles:function(a,b){var c,d;for(d in b)c=b[d],"string"==typeof c&&c.match(/\$\{\w+\}/)&&(a[d]=!0);return a},addRules:function(a){Array.prototype.push.apply(this.rules,a),this.propertyStyles=this.findPropertyStyles()},setDefaultStyle:function(a){this.defaultStyle=a,this.propertyStyles=this.findPropertyStyles()},getSymbolizerPrefix:function(a){for(var b=OpenLayers.Style.SYMBOLIZER_PREFIXES,c=0,d=b.length;d>c;c++)if(-1!=a.CLASS_NAME.indexOf(b[c]))return b[c]},clone:function(){var a=OpenLayers.Util.extend({},this);if(this.rules){a.rules=[];for(var b=0,c=this.rules.length;c>b;++b)a.rules.push(this.rules[b].clone())}return a.context=this.context&&OpenLayers.Util.extend({},this.context),b=OpenLayers.Util.extend({},this.defaultStyle),new OpenLayers.Style(b,a)},CLASS_NAME:"OpenLayers.Style"}),OpenLayers.Style.createLiteral=function(a,b,c,d){return"string"==typeof a&&-1!=a.indexOf("${")&&(a=OpenLayers.String.format(a,b,[c,d]),a=isNaN(a)||!a?a:parseFloat(a)),a},OpenLayers.Style.SYMBOLIZER_PREFIXES=["Point","Line","Polygon","Text","Raster"],OpenLayers.Filter=OpenLayers.Class({initialize:function(a){OpenLayers.Util.extend(this,a)},destroy:function(){},evaluate:function(a){return!0},clone:function(){return null},toString:function(){return OpenLayers.Format&&OpenLayers.Format.CQL?OpenLayers.Format.CQL.prototype.write(this):Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Filter"}),OpenLayers.Filter.Spatial=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,distance:null,distanceUnits:null,evaluate:function(a){var b=!1;switch(this.type){case OpenLayers.Filter.Spatial.BBOX:case OpenLayers.Filter.Spatial.INTERSECTS:if(a.geometry){var c=this.value;"OpenLayers.Bounds"==this.value.CLASS_NAME&&(c=this.value.toGeometry()),a.geometry.intersects(c)&&(b=!0)}break;default:throw Error("evaluate is not implemented for this filter type.")}return b},clone:function(){var a=OpenLayers.Util.applyDefaults({value:this.value&&this.value.clone&&this.value.clone()},this);return new OpenLayers.Filter.Spatial(a)},CLASS_NAME:"OpenLayers.Filter.Spatial"}),OpenLayers.Filter.Spatial.BBOX="BBOX",OpenLayers.Filter.Spatial.INTERSECTS="INTERSECTS",OpenLayers.Filter.Spatial.DWITHIN="DWITHIN",OpenLayers.Filter.Spatial.WITHIN="WITHIN",OpenLayers.Filter.Spatial.CONTAINS="CONTAINS",OpenLayers.Filter.FeatureId=OpenLayers.Class(OpenLayers.Filter,{fids:null,type:"FID",initialize:function(a){this.fids=[],OpenLayers.Filter.prototype.initialize.apply(this,[a])},evaluate:function(a){for(var b=0,c=this.fids.length;c>b;b++)if((a.fid||a.id)==this.fids[b])return!0;return!1},clone:function(){
var a=new OpenLayers.Filter.FeatureId;return OpenLayers.Util.extend(a,this),a.fids=this.fids.slice(),a},CLASS_NAME:"OpenLayers.Filter.FeatureId"}),OpenLayers.Format.WFST.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",wfs:"http://www.opengis.net/wfs",gml:"http://www.opengis.net/gml",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows"},defaultPrefix:"wfs",version:null,schemaLocations:null,srsName:null,extractAttributes:!0,xy:!0,stateName:null,initialize:function(a){this.stateName={},this.stateName[OpenLayers.State.INSERT]="wfs:Insert",this.stateName[OpenLayers.State.UPDATE]="wfs:Update",this.stateName[OpenLayers.State.DELETE]="wfs:Delete",OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},getSrsName:function(a,b){var c=b&&b.srsName;return c||(c=a&&a.layer?a.layer.projection.getCode():this.srsName),c},read:function(a,b){b=b||{},OpenLayers.Util.applyDefaults(b,{output:"features"}),"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var c={};return a&&this.readNode(a,c,!0),c.features&&"features"===b.output&&(c=c.features),c},readers:{wfs:{FeatureCollection:function(a,b){b.features=[],this.readChildNodes(a,b)}}},write:function(a,b){var c=this.writeNode("wfs:Transaction",{features:a,options:b}),d=this.schemaLocationAttr();return d&&this.setAttributeNS(c,this.namespaces.xsi,"xsi:schemaLocation",d),OpenLayers.Format.XML.prototype.write.apply(this,[c])},writers:{wfs:{GetFeature:function(a){var b=this.createElementNSPlus("wfs:GetFeature",{attributes:{service:"WFS",version:this.version,handle:a&&a.handle,outputFormat:a&&a.outputFormat,maxFeatures:a&&a.maxFeatures,"xsi:schemaLocation":this.schemaLocationAttr(a)}});if("string"==typeof this.featureType)this.writeNode("Query",a,b);else for(var c=0,d=this.featureType.length;d>c;c++)a.featureType=this.featureType[c],this.writeNode("Query",a,b);return b},Transaction:function(a){a=a||{};var b,c=a.options||{},d=this.createElementNSPlus("wfs:Transaction",{attributes:{service:"WFS",version:this.version,handle:c.handle}}),e=a.features;if(e){!0===c.multi&&OpenLayers.Util.extend(this.geometryTypes,{"OpenLayers.Geometry.Point":"MultiPoint","OpenLayers.Geometry.LineString":!0===this.multiCurve?"MultiCurve":"MultiLineString","OpenLayers.Geometry.Polygon":!0===this.multiSurface?"MultiSurface":"MultiPolygon"});var f,g;for(a=0,b=e.length;b>a;++a)g=e[a],(f=this.stateName[g.state])&&this.writeNode(f,{feature:g,options:c},d);!0===c.multi&&this.setGeometryTypes()}if(c.nativeElements)for(a=0,b=c.nativeElements.length;b>a;++a)this.writeNode("wfs:Native",c.nativeElements[a],d);return d},Native:function(a){return this.createElementNSPlus("wfs:Native",{attributes:{vendorId:a.vendorId,safeToIgnore:a.safeToIgnore},value:a.value})},Insert:function(a){var b=a.feature;return a=a.options,a=this.createElementNSPlus("wfs:Insert",{attributes:{handle:a&&a.handle}}),this.srsName=this.getSrsName(b),this.writeNode("feature:_typeName",b,a),a},Update:function(a){var b=a.feature;a=a.options,a=this.createElementNSPlus("wfs:Update",{attributes:{handle:a&&a.handle,typeName:(this.featureNS?this.featurePrefix+":":"")+this.featureType}}),this.featureNS&&a.setAttribute("xmlns:"+this.featurePrefix,this.featureNS);var c=b.modified;null===this.geometryName||c&&void 0===c.geometry||(this.srsName=this.getSrsName(b),this.writeNode("Property",{name:this.geometryName,value:b.geometry},a));for(var d in b.attributes)void 0===b.attributes[d]||c&&c.attributes&&(!c.attributes||void 0===c.attributes[d])||this.writeNode("Property",{name:d,value:b.attributes[d]},a);return this.writeNode("ogc:Filter",new OpenLayers.Filter.FeatureId({fids:[b.fid]}),a),a},Property:function(a){var b=this.createElementNSPlus("wfs:Property");return this.writeNode("Name",a.name,b),null!==a.value&&this.writeNode("Value",a.value,b),b},Name:function(a){return this.createElementNSPlus("wfs:Name",{value:a})},Value:function(a){var b;return a instanceof OpenLayers.Geometry?(b=this.createElementNSPlus("wfs:Value"),a=this.writeNode("feature:_geometry",a).firstChild,b.appendChild(a)):b=this.createElementNSPlus("wfs:Value",{value:a}),b},Delete:function(a){var b=a.feature;return a=a.options,a=this.createElementNSPlus("wfs:Delete",{attributes:{handle:a&&a.handle,typeName:(this.featureNS?this.featurePrefix+":":"")+this.featureType}}),this.featureNS&&a.setAttribute("xmlns:"+this.featurePrefix,this.featureNS),this.writeNode("ogc:Filter",new OpenLayers.Filter.FeatureId({fids:[b.fid]}),a),a}}},schemaLocationAttr:function(a){a=OpenLayers.Util.extend({featurePrefix:this.featurePrefix,schema:this.schema},a);var b=OpenLayers.Util.extend({},this.schemaLocations);a.schema&&(b[a.featurePrefix]=a.schema),a=[];var c,d;for(d in b)(c=this.namespaces[d])&&a.push(c+" "+b[d]);return a.join(" ")||void 0},setFilterProperty:function(a){if(a.filters)for(var b=0,c=a.filters.length;c>b;++b)OpenLayers.Format.WFST.v1.prototype.setFilterProperty.call(this,a.filters[b]);else a instanceof OpenLayers.Filter.Spatial&&!a.property&&(a.property=this.geometryName)},CLASS_NAME:"OpenLayers.Format.WFST.v1"}),OpenLayers.Format.OGCExceptionReport=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},defaultPrefix:"ogc",read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b={exceptionReport:null};return a.documentElement&&(this.readChildNodes(a,b),null===b.exceptionReport&&(b=(new OpenLayers.Format.OWSCommon).read(a))),b},readers:{ogc:{ServiceExceptionReport:function(a,b){b.exceptionReport={exceptions:[]},this.readChildNodes(a,b.exceptionReport)},ServiceException:function(a,b){var c={code:a.getAttribute("code"),locator:a.getAttribute("locator"),text:this.getChildValue(a)};b.exceptions.push(c)}}},CLASS_NAME:"OpenLayers.Format.OGCExceptionReport"}),OpenLayers.Format.XML.VersionedOGC=OpenLayers.Class(OpenLayers.Format.XML,{defaultVersion:null,version:null,profile:null,allowFallback:!1,name:null,stringifyOutput:!1,parser:null,initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]),a=this.CLASS_NAME,this.name=a.substring(a.lastIndexOf(".")+1)},getVersion:function(a,b){var c;return a?(c=this.version,c||(c=a.getAttribute("version"),c||(c=this.defaultVersion))):c=b&&b.version||this.version||this.defaultVersion,c},getParser:function(a){a=a||this.defaultVersion;var b=this.profile?"_"+this.profile:"";if(!this.parser||this.parser.VERSION!=a){var c=OpenLayers.Format[this.name]["v"+a.replace(/\./g,"_")+b];if(!c&&(""!==b&&this.allowFallback&&(b="",c=OpenLayers.Format[this.name]["v"+a.replace(/\./g,"_")]),!c))throw"Can't find a "+this.name+" parser for version "+a+b;this.parser=new c(this.options)}return this.parser},write:function(a,b){var c=this.getVersion(null,b);return this.parser=this.getParser(c),c=this.parser.write(a,b),!1===this.stringifyOutput?c:OpenLayers.Format.XML.prototype.write.apply(this,[c])},read:function(a,b){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var c=this.getVersion(a.documentElement);this.parser=this.getParser(c);var d=this.parser.read(a,b),e=this.parser.errorProperty||null;return null!==e&&void 0===d[e]&&(e=new OpenLayers.Format.OGCExceptionReport,d.error=e.read(a)),d.version=c,d},CLASS_NAME:"OpenLayers.Format.XML.VersionedOGC"}),OpenLayers.Filter.Logical=OpenLayers.Class(OpenLayers.Filter,{filters:null,type:null,initialize:function(a){this.filters=[],OpenLayers.Filter.prototype.initialize.apply(this,[a])},destroy:function(){this.filters=null,OpenLayers.Filter.prototype.destroy.apply(this)},evaluate:function(a){var b,c;switch(this.type){case OpenLayers.Filter.Logical.AND:for(b=0,c=this.filters.length;c>b;b++)if(0==this.filters[b].evaluate(a))return!1;return!0;case OpenLayers.Filter.Logical.OR:for(b=0,c=this.filters.length;c>b;b++)if(1==this.filters[b].evaluate(a))return!0;return!1;case OpenLayers.Filter.Logical.NOT:return!this.filters[0].evaluate(a)}},clone:function(){for(var a=[],b=0,c=this.filters.length;c>b;++b)a.push(this.filters[b].clone());return new OpenLayers.Filter.Logical({type:this.type,filters:a})},CLASS_NAME:"OpenLayers.Filter.Logical"}),OpenLayers.Filter.Logical.AND="&&",OpenLayers.Filter.Logical.OR="||",OpenLayers.Filter.Logical.NOT="!",OpenLayers.Filter.Comparison=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,matchCase:!0,lowerBoundary:null,upperBoundary:null,initialize:function(a){OpenLayers.Filter.prototype.initialize.apply(this,[a]),this.type===OpenLayers.Filter.Comparison.LIKE&&void 0===a.matchCase&&(this.matchCase=null)},evaluate:function(a){a instanceof OpenLayers.Feature.Vector&&(a=a.attributes);var b=!1;switch(a=a[this.property],this.type){case OpenLayers.Filter.Comparison.EQUAL_TO:b=this.value,b=this.matchCase||"string"!=typeof a||"string"!=typeof b?a==b:a.toUpperCase()==b.toUpperCase();break;case OpenLayers.Filter.Comparison.NOT_EQUAL_TO:b=this.value,b=this.matchCase||"string"!=typeof a||"string"!=typeof b?a!=b:a.toUpperCase()!=b.toUpperCase();break;case OpenLayers.Filter.Comparison.LESS_THAN:b=a<this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN:b=a>this.value;break;case OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO:b=a<=this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO:b=a>=this.value;break;case OpenLayers.Filter.Comparison.BETWEEN:b=a>=this.lowerBoundary&&a<=this.upperBoundary;break;case OpenLayers.Filter.Comparison.LIKE:b=RegExp(this.value,"gi").test(a);break;case OpenLayers.Filter.Comparison.IS_NULL:b=null===a}return b},value2regex:function(a,b,c){if("."==a)throw Error("'.' is an unsupported wildCard character for OpenLayers.Filter.Comparison");return a=a?a:"*",b=b?b:".",this.value=this.value.replace(RegExp("\\"+(c?c:"!")+"(.|$)","g"),"\\$1"),this.value=this.value.replace(RegExp("\\"+b,"g"),"."),this.value=this.value.replace(RegExp("\\"+a,"g"),".*"),this.value=this.value.replace(RegExp("\\\\.\\*","g"),"\\"+a),this.value=this.value.replace(RegExp("\\\\\\.","g"),"\\"+b)},regex2value:function(){var a=this.value,a=a.replace(/!/g,"!!"),a=a.replace(/(\\)?\\\./g,function(a,b){return b?a:"!."}),a=a.replace(/(\\)?\\\*/g,function(a,b){return b?a:"!*"}),a=a.replace(/\\\\/g,"\\");return a=a.replace(/\.\*/g,"*")},clone:function(){return OpenLayers.Util.extend(new OpenLayers.Filter.Comparison,this)},CLASS_NAME:"OpenLayers.Filter.Comparison"}),OpenLayers.Filter.Comparison.EQUAL_TO="==",OpenLayers.Filter.Comparison.NOT_EQUAL_TO="!=",OpenLayers.Filter.Comparison.LESS_THAN="<",OpenLayers.Filter.Comparison.GREATER_THAN=">",OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO="<=",OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO=">=",OpenLayers.Filter.Comparison.BETWEEN="..",OpenLayers.Filter.Comparison.LIKE="~",OpenLayers.Filter.Comparison.IS_NULL="NULL",OpenLayers.Format.Filter=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.Filter"}),OpenLayers.Filter.Function=OpenLayers.Class(OpenLayers.Filter,{name:null,params:null,CLASS_NAME:"OpenLayers.Filter.Function"}),OpenLayers.Date={dateRegEx:/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/,toISOString:function(){return"toISOString"in Date.prototype?function(a){return a.toISOString()}:function(a){return isNaN(a.getTime())?"Invalid Date":a.getUTCFullYear()+"-"+OpenLayers.Number.zeroPad(a.getUTCMonth()+1,2)+"-"+OpenLayers.Number.zeroPad(a.getUTCDate(),2)+"T"+OpenLayers.Number.zeroPad(a.getUTCHours(),2)+":"+OpenLayers.Number.zeroPad(a.getUTCMinutes(),2)+":"+OpenLayers.Number.zeroPad(a.getUTCSeconds(),2)+"."+OpenLayers.Number.zeroPad(a.getUTCMilliseconds(),3)+"Z"}}(),parse:function(a){var b;if((a=a.match(this.dateRegEx))&&(a[1]||a[7])){b=parseInt(a[1],10)||0;var c=parseInt(a[2],10)-1||0,d=parseInt(a[3],10)||1;if(b=new Date(Date.UTC(b,c,d)),c=a[7]){var d=parseInt(a[4],10),e=parseInt(a[5],10),f=parseFloat(a[6]),g=0|f,f=Math.round(1e3*(f-g));b.setUTCHours(d,e,g,f),"Z"!==c&&(c=parseInt(c,10),a=parseInt(a[8],10)||0,a=-1e3*(3600*c+60*a),b=new Date(b.getTime()+a))}}else b=new Date("invalid");return b}},OpenLayers.Format.Filter.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"ogc",schemaLocation:null,initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){var b={};return this.readers.ogc.Filter.apply(this,[a,b]),b.filter},readers:{ogc:{_expression:function(a){for(var b="",c=a.firstChild;c;c=c.nextSibling)switch(c.nodeType){case 1:a=this.readNode(c),a.property?b+="${"+a.property+"}":void 0!==a.value&&(b+=a.value);break;case 3:case 4:b+=c.nodeValue}return b},Filter:function(a,b){var c={fids:[],filters:[]};this.readChildNodes(a,c),0<c.fids.length?b.filter=new OpenLayers.Filter.FeatureId({fids:c.fids}):0<c.filters.length&&(b.filter=c.filters[0])},FeatureId:function(a,b){var c=a.getAttribute("fid");c&&b.fids.push(c)},And:function(a,b){var c=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND});this.readChildNodes(a,c),b.filters.push(c)},Or:function(a,b){var c=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.OR});this.readChildNodes(a,c),b.filters.push(c)},Not:function(a,b){var c=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.NOT});this.readChildNodes(a,c),b.filters.push(c)},PropertyIsLessThan:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN});this.readChildNodes(a,c),b.filters.push(c)},PropertyIsGreaterThan:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN});this.readChildNodes(a,c),b.filters.push(c)},PropertyIsLessThanOrEqualTo:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO});this.readChildNodes(a,c),b.filters.push(c)},PropertyIsGreaterThanOrEqualTo:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO});this.readChildNodes(a,c),b.filters.push(c)},PropertyIsBetween:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN});this.readChildNodes(a,c),b.filters.push(c)},Literal:function(a,b){b.value=OpenLayers.String.numericIf(this.getChildValue(a),!0)},PropertyName:function(a,b){b.property=this.getChildValue(a)},LowerBoundary:function(a,b){b.lowerBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,a),!0)},UpperBoundary:function(a,b){b.upperBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,a),!0)},Intersects:function(a,b){this.readSpatial(a,b,OpenLayers.Filter.Spatial.INTERSECTS)},Within:function(a,b){this.readSpatial(a,b,OpenLayers.Filter.Spatial.WITHIN)},Contains:function(a,b){this.readSpatial(a,b,OpenLayers.Filter.Spatial.CONTAINS)},DWithin:function(a,b){this.readSpatial(a,b,OpenLayers.Filter.Spatial.DWITHIN)},Distance:function(a,b){b.distance=parseInt(this.getChildValue(a)),b.distanceUnits=a.getAttribute("units")},Function:function(a,b){},PropertyIsNull:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.IS_NULL});this.readChildNodes(a,c),b.filters.push(c)}}},readSpatial:function(a,b,c){c=new OpenLayers.Filter.Spatial({type:c}),this.readChildNodes(a,c),c.value=c.components[0],delete c.components,b.filters.push(c)},encodeLiteral:function(a){return a instanceof Date&&(a=OpenLayers.Date.toISOString(a)),a},writeOgcExpression:function(a,b){return a instanceof OpenLayers.Filter.Function?this.writeNode("Function",a,b):this.writeNode("Literal",a,b),b},write:function(a){return this.writers.ogc.Filter.apply(this,[a])},writers:{ogc:{Filter:function(a){var b=this.createElementNSPlus("ogc:Filter");return this.writeNode(this.getFilterType(a),a,b),b},_featureIds:function(a){for(var b=this.createDocumentFragment(),c=0,d=a.fids.length;d>c;++c)this.writeNode("ogc:FeatureId",a.fids[c],b);return b},FeatureId:function(a){return this.createElementNSPlus("ogc:FeatureId",{attributes:{fid:a}})},And:function(a){for(var b,c=this.createElementNSPlus("ogc:And"),d=0,e=a.filters.length;e>d;++d)b=a.filters[d],this.writeNode(this.getFilterType(b),b,c);return c},Or:function(a){for(var b,c=this.createElementNSPlus("ogc:Or"),d=0,e=a.filters.length;e>d;++d)b=a.filters[d],this.writeNode(this.getFilterType(b),b,c);return c},Not:function(a){var b=this.createElementNSPlus("ogc:Not");return a=a.filters[0],this.writeNode(this.getFilterType(a),a,b),b},PropertyIsLessThan:function(a){var b=this.createElementNSPlus("ogc:PropertyIsLessThan");return this.writeNode("PropertyName",a,b),this.writeOgcExpression(a.value,b),b},PropertyIsGreaterThan:function(a){var b=this.createElementNSPlus("ogc:PropertyIsGreaterThan");return this.writeNode("PropertyName",a,b),this.writeOgcExpression(a.value,b),b},PropertyIsLessThanOrEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsLessThanOrEqualTo");return this.writeNode("PropertyName",a,b),this.writeOgcExpression(a.value,b),b},PropertyIsGreaterThanOrEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsGreaterThanOrEqualTo");return this.writeNode("PropertyName",a,b),this.writeOgcExpression(a.value,b),b},PropertyIsBetween:function(a){var b=this.createElementNSPlus("ogc:PropertyIsBetween");return this.writeNode("PropertyName",a,b),this.writeNode("LowerBoundary",a,b),this.writeNode("UpperBoundary",a,b),b},PropertyName:function(a){return this.createElementNSPlus("ogc:PropertyName",{value:a.property})},Literal:function(a){return this.createElementNSPlus("ogc:Literal",{value:(this.encodeLiteral||OpenLayers.Format.Filter.v1.prototype.encodeLiteral)(a)})},LowerBoundary:function(a){var b=this.createElementNSPlus("ogc:LowerBoundary");return this.writeOgcExpression(a.lowerBoundary,b),b},UpperBoundary:function(a){var b=this.createElementNSPlus("ogc:UpperBoundary");return this.writeNode("Literal",a.upperBoundary,b),b},INTERSECTS:function(a){return this.writeSpatial(a,"Intersects")},WITHIN:function(a){return this.writeSpatial(a,"Within")},CONTAINS:function(a){return this.writeSpatial(a,"Contains")},DWITHIN:function(a){var b=this.writeSpatial(a,"DWithin");return this.writeNode("Distance",a,b),b},Distance:function(a){return this.createElementNSPlus("ogc:Distance",{attributes:{units:a.distanceUnits},value:a.distance})},Function:function(a){var b=this.createElementNSPlus("ogc:Function",{attributes:{name:a.name}});a=a.params;for(var c=0,d=a.length;d>c;c++)this.writeOgcExpression(a[c],b);return b},PropertyIsNull:function(a){var b=this.createElementNSPlus("ogc:PropertyIsNull");return this.writeNode("PropertyName",a,b),b}}},getFilterType:function(a){var b=this.filterMap[a.type];if(!b)throw"Filter writing not supported for rule type: "+a.type;return b},filterMap:{"&&":"And","||":"Or","!":"Not","==":"PropertyIsEqualTo","!=":"PropertyIsNotEqualTo","<":"PropertyIsLessThan",">":"PropertyIsGreaterThan","<=":"PropertyIsLessThanOrEqualTo",">=":"PropertyIsGreaterThanOrEqualTo","..":"PropertyIsBetween","~":"PropertyIsLike",NULL:"PropertyIsNull",BBOX:"BBOX",DWITHIN:"DWITHIN",WITHIN:"WITHIN",CONTAINS:"CONTAINS",INTERSECTS:"INTERSECTS",FID:"_featureIds"},CLASS_NAME:"OpenLayers.Format.Filter.v1"}),OpenLayers.Geometry=OpenLayers.Class({id:null,parent:null,bounds:null,initialize:function(){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){this.bounds=this.id=null},clone:function(){return new OpenLayers.Geometry},setBounds:function(a){a&&(this.bounds=a.clone())},clearBounds:function(){this.bounds=null,this.parent&&this.parent.clearBounds()},extendBounds:function(a){this.getBounds()?this.bounds.extend(a):this.setBounds(a)},getBounds:function(){return null==this.bounds&&this.calculateBounds(),this.bounds},calculateBounds:function(){},distanceTo:function(a,b){},getVertices:function(a){},atPoint:function(a,b,c){var d=!1;return null!=this.getBounds()&&null!=a&&(b=null!=b?b:0,c=null!=c?c:0,d=new OpenLayers.Bounds(this.bounds.left-b,this.bounds.bottom-c,this.bounds.right+b,this.bounds.top+c).containsLonLat(a)),d},getLength:function(){return 0},getArea:function(){return 0},getCentroid:function(){return null},toString:function(){return OpenLayers.Format&&OpenLayers.Format.WKT?OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this)):Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Geometry"}),OpenLayers.Geometry.fromWKT=function(a){var b;if(OpenLayers.Format&&OpenLayers.Format.WKT){var c=OpenLayers.Geometry.fromWKT.format;if(c||(c=new OpenLayers.Format.WKT,OpenLayers.Geometry.fromWKT.format=c),a=c.read(a),a instanceof OpenLayers.Feature.Vector)b=a.geometry;else if(OpenLayers.Util.isArray(a)){b=a.length;for(var c=Array(b),d=0;b>d;++d)c[d]=a[d].geometry;b=new OpenLayers.Geometry.Collection(c)}}return b},OpenLayers.Geometry.segmentsIntersect=function(a,b,c){var d=c&&c.point;c=c&&c.tolerance;var e=!1,f=a.x1-b.x1,g=a.y1-b.y1,h=a.x2-a.x1,i=a.y2-a.y1,j=b.y2-b.y1,k=b.x2-b.x1,l=j*h-k*i,j=k*g-j*f,g=h*g-i*f;if(0==l?0==j&&0==g&&(e=!0):(f=j/l,l=g/l,f>=0&&1>=f&&l>=0&&1>=l&&(d?(h=a.x1+f*h,l=a.y1+f*i,e=new OpenLayers.Geometry.Point(h,l)):e=!0)),c)if(e){if(d)a:for(a=[a,b],b=0;2>b;++b)for(f=a[b],i=1;3>i;++i)if(h=f["x"+i],l=f["y"+i],d=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(l-e.y,2)),c>d){e.x=h,e.y=l;break a}}else a:for(a=[a,b],b=0;2>b;++b)for(h=a[b],l=a[(b+1)%2],i=1;3>i;++i)if(f={x:h["x"+i],y:h["y"+i]},g=OpenLayers.Geometry.distanceToSegment(f,l),g.distance<c){e=d?new OpenLayers.Geometry.Point(f.x,f.y):!0;break a}return e},OpenLayers.Geometry.distanceToSegment=function(a,b){var c=OpenLayers.Geometry.distanceSquaredToSegment(a,b);return c.distance=Math.sqrt(c.distance),c},OpenLayers.Geometry.distanceSquaredToSegment=function(a,b){var c=a.x,d=a.y,e=b.x1,f=b.y1,g=b.x2,h=b.y2,i=g-e,j=h-f,k=(i*(c-e)+j*(d-f))/(Math.pow(i,2)+Math.pow(j,2));return 0>=k||(k>=1?(e=g,f=h):(e+=k*i,f+=k*j)),{distance:Math.pow(e-c,2)+Math.pow(f-d,2),x:e,y:f,along:k}},OpenLayers.Geometry.Point=OpenLayers.Class(OpenLayers.Geometry,{x:null,y:null,initialize:function(a,b){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.x=parseFloat(a),this.y=parseFloat(b)},clone:function(a){return null==a&&(a=new OpenLayers.Geometry.Point(this.x,this.y)),OpenLayers.Util.applyDefaults(a,this),a},calculateBounds:function(){this.bounds=new OpenLayers.Bounds(this.x,this.y,this.x,this.y)},distanceTo:function(a,b){var c,d,e,f,g,h=!(b&&!1===b.edge)&&b&&b.details;return a instanceof OpenLayers.Geometry.Point?(d=this.x,e=this.y,f=a.x,g=a.y,c=Math.sqrt(Math.pow(d-f,2)+Math.pow(e-g,2)),c=h?{x0:d,y0:e,x1:f,y1:g,distance:c}:c):(c=a.distanceTo(this,b),h&&(c={x0:c.x1,y0:c.y1,x1:c.x0,y1:c.y0,distance:c.distance})),c},equals:function(a){var b=!1;return null!=a&&(b=this.x==a.x&&this.y==a.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(a.x)&&isNaN(a.y)),b},toShortString:function(){return this.x+", "+this.y},move:function(a,b){this.x+=a,this.y+=b,this.clearBounds()},rotate:function(a,b){a*=Math.PI/180;var c=this.distanceTo(b),d=a+Math.atan2(this.y-b.y,this.x-b.x);this.x=b.x+c*Math.cos(d),this.y=b.y+c*Math.sin(d),this.clearBounds()},getCentroid:function(){return new OpenLayers.Geometry.Point(this.x,this.y)},resize:function(a,b,c){return this.x=b.x+a*(void 0==c?1:c)*(this.x-b.x),this.y=b.y+a*(this.y-b.y),this.clearBounds(),this},intersects:function(a){var b=!1;return b="OpenLayers.Geometry.Point"==a.CLASS_NAME?this.equals(a):a.intersects(this)},transform:function(a,b){return a&&b&&(OpenLayers.Projection.transform(this,a,b),this.bounds=null),this},getVertices:function(a){return[this]},CLASS_NAME:"OpenLayers.Geometry.Point"}),OpenLayers.Geometry.Collection=OpenLayers.Class(OpenLayers.Geometry,{components:null,componentTypes:null,initialize:function(a){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.components=[],null!=a&&this.addComponents(a)},destroy:function(){this.components.length=0,this.components=null,OpenLayers.Geometry.prototype.destroy.apply(this,arguments)},clone:function(){for(var a=eval("new "+this.CLASS_NAME+"()"),b=0,c=this.components.length;c>b;b++)a.addComponent(this.components[b].clone());return OpenLayers.Util.applyDefaults(a,this),a},getComponentsString:function(){for(var a=[],b=0,c=this.components.length;c>b;b++)a.push(this.components[b].toShortString());return a.join(",")},calculateBounds:function(){this.bounds=null;var a=new OpenLayers.Bounds,b=this.components;if(b)for(var c=0,d=b.length;d>c;c++)a.extend(b[c].getBounds());null!=a.left&&null!=a.bottom&&null!=a.right&&null!=a.top&&this.setBounds(a)},addComponents:function(a){OpenLayers.Util.isArray(a)||(a=[a]);for(var b=0,c=a.length;c>b;b++)this.addComponent(a[b])},addComponent:function(a,b){var c=!1;if(a&&(null==this.componentTypes||-1<OpenLayers.Util.indexOf(this.componentTypes,a.CLASS_NAME))){if(null!=b&&b<this.components.length){var c=this.components.slice(0,b),d=this.components.slice(b,this.components.length);c.push(a),this.components=c.concat(d)}else this.components.push(a);a.parent=this,this.clearBounds(),c=!0}return c},removeComponents:function(a){var b=!1;OpenLayers.Util.isArray(a)||(a=[a]);for(var c=a.length-1;c>=0;--c)b=this.removeComponent(a[c])||b;return b},removeComponent:function(a){return OpenLayers.Util.removeItem(this.components,a),this.clearBounds(),!0},getLength:function(){for(var a=0,b=0,c=this.components.length;c>b;b++)a+=this.components[b].getLength();return a},getArea:function(){for(var a=0,b=0,c=this.components.length;c>b;b++)a+=this.components[b].getArea();return a},getGeodesicArea:function(a){for(var b=0,c=0,d=this.components.length;d>c;c++)b+=this.components[c].getGeodesicArea(a);return b},getCentroid:function(a){if(!a)return this.components.length&&this.components[0].getCentroid();if(a=this.components.length,!a)return!1;for(var b,c=[],d=[],e=0,f=Number.MAX_VALUE,g=0;a>g;++g){b=this.components[g];var h=b.getArea();b=b.getCentroid(!0),isNaN(h)||isNaN(b.x)||isNaN(b.y)||(c.push(h),e+=h,f=f>h&&h>0?h:f,d.push(b))}if(a=c.length,0===e){for(g=0;a>g;++g)c[g]=1;e=c.length}else{for(g=0;a>g;++g)c[g]/=f;e/=f}for(var i=f=0,g=0;a>g;++g)b=d[g],h=c[g],f+=b.x*h,i+=b.y*h;return new OpenLayers.Geometry.Point(f/e,i/e)},getGeodesicLength:function(a){for(var b=0,c=0,d=this.components.length;d>c;c++)b+=this.components[c].getGeodesicLength(a);return b},move:function(a,b){for(var c=0,d=this.components.length;d>c;c++)this.components[c].move(a,b)},rotate:function(a,b){for(var c=0,d=this.components.length;d>c;++c)this.components[c].rotate(a,b)},resize:function(a,b,c){for(var d=0;d<this.components.length;++d)this.components[d].resize(a,b,c);return this},distanceTo:function(a,b){for(var c,d,e,f=!(b&&!1===b.edge)&&b&&b.details,g=Number.POSITIVE_INFINITY,h=0,i=this.components.length;i>h&&(c=this.components[h].distanceTo(a,b),e=f?c.distance:c,!(g>e&&(g=e,d=c,0==g)));++h);return d},equals:function(a){var b=!0;if(a&&a.CLASS_NAME&&this.CLASS_NAME==a.CLASS_NAME)if(OpenLayers.Util.isArray(a.components)&&a.components.length==this.components.length){for(var c=0,d=this.components.length;d>c;++c)if(!this.components[c].equals(a.components[c])){b=!1;break}}else b=!1;else b=!1;return b},transform:function(a,b){if(a&&b){for(var c=0,d=this.components.length;d>c;c++)this.components[c].transform(a,b);this.bounds=null}return this},intersects:function(a){for(var b=!1,c=0,d=this.components.length;d>c&&!(b=a.intersects(this.components[c]));++c);return b},getVertices:function(a){for(var b=[],c=0,d=this.components.length;d>c;++c)Array.prototype.push.apply(b,this.components[c].getVertices(a));return b},CLASS_NAME:"OpenLayers.Geometry.Collection"}),OpenLayers.Geometry.MultiPoint=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Point"],addPoint:function(a,b){this.addComponent(a,b)},removePoint:function(a){this.removeComponent(a)},CLASS_NAME:"OpenLayers.Geometry.MultiPoint"}),OpenLayers.Geometry.Curve=OpenLayers.Class(OpenLayers.Geometry.MultiPoint,{componentTypes:["OpenLayers.Geometry.Point"],getLength:function(){var a=0;if(this.components&&1<this.components.length)for(var b=1,c=this.components.length;c>b;b++)a+=this.components[b-1].distanceTo(this.components[b]);return a},getGeodesicLength:function(a){var b=this;if(a){var c=new OpenLayers.Projection("EPSG:4326");c.equals(a)||(b=this.clone().transform(a,c))}if(a=0,b.components&&1<b.components.length)for(var d,e=1,f=b.components.length;f>e;e++)c=b.components[e-1],d=b.components[e],a+=OpenLayers.Util.distVincenty({lon:c.x,lat:c.y},{lon:d.x,lat:d.y});return 1e3*a},CLASS_NAME:"OpenLayers.Geometry.Curve"}),OpenLayers.Geometry.LineString=OpenLayers.Class(OpenLayers.Geometry.Curve,{removeComponent:function(a){var b=this.components&&2<this.components.length;return b&&OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments),b},intersects:function(a){var b=!1,c=a.CLASS_NAME;if("OpenLayers.Geometry.LineString"==c||"OpenLayers.Geometry.LinearRing"==c||"OpenLayers.Geometry.Point"==c){var d=this.getSortedSegments();a="OpenLayers.Geometry.Point"==c?[{x1:a.x,y1:a.y,x2:a.x,y2:a.y}]:a.getSortedSegments();var e,f,g,h,i,j,k,l=0,m=d.length;a:for(;m>l;++l){c=d[l],e=c.x1,f=c.x2,g=c.y1,h=c.y2;for(var n=0,o=a.length;o>n&&(i=a[n],!(i.x1>f));++n)if(!(i.x2<e||(j=i.y1,k=i.y2,Math.min(j,k)>Math.max(g,h)||Math.max(j,k)<Math.min(g,h)||!OpenLayers.Geometry.segmentsIntersect(c,i)))){b=!0;break a}}}else b=a.intersects(this);return b},getSortedSegments:function(){for(var a,b,c=this.components.length-1,d=Array(c),e=0;c>e;++e)a=this.components[e],b=this.components[e+1],d[e]=a.x<b.x?{x1:a.x,y1:a.y,x2:b.x,y2:b.y}:{x1:b.x,y1:b.y,x2:a.x,y2:a.y};return d.sort(function(a,b){return a.x1-b.x1})},splitWithSegment:function(a,b){for(var c,d,e,f=!(b&&!1===b.edge),g=b&&b.tolerance,h=[],i=this.getVertices(),j=[],k=[],l=!1,m={point:!0,tolerance:g},n=null,o=0,p=i.length-2;p>=o;++o)g=i[o],j.push(g.clone()),c=i[o+1],d={x1:g.x,y1:g.y,x2:c.x,y2:c.y},d=OpenLayers.Geometry.segmentsIntersect(a,d,m),d instanceof OpenLayers.Geometry.Point&&((e=d.x===a.x1&&d.y===a.y1||d.x===a.x2&&d.y===a.y2||d.equals(g)||d.equals(c)?!0:!1)||f)&&(d.equals(k[k.length-1])||k.push(d.clone()),0===o&&d.equals(g)||d.equals(c)||(l=!0,d.equals(g)||j.push(d),h.push(new OpenLayers.Geometry.LineString(j)),j=[d.clone()]));if(l&&(j.push(c.clone()),h.push(new OpenLayers.Geometry.LineString(j))),0<k.length)var q=a.x1<a.x2?1:-1,r=a.y1<a.y2?1:-1,n={lines:h,points:k.sort(function(a,b){return q*a.x-q*b.x||r*a.y-r*b.y})};return n},split:function(a,b){var c,d,e,f,g=null,h=b&&b.mutual;if(a instanceof OpenLayers.Geometry.LineString){var i,j,k,l,m,n=this.getVertices(),o=[];e=[];for(var p=0,q=n.length-2;q>=p;++p){i=n[p],j=n[p+1],k={x1:i.x,y1:i.y,x2:j.x,y2:j.y},f=f||[a],h&&o.push(i.clone());for(var r=0;r<f.length;++r)if((l=f[r].splitWithSegment(k,b))&&(m=l.lines,0<m.length&&(m.unshift(r,1),Array.prototype.splice.apply(f,m),r+=m.length-2),h))for(var s=0,t=l.points.length;t>s;++s)m=l.points[s],m.equals(i)||(o.push(m),e.push(new OpenLayers.Geometry.LineString(o)),o=m.equals(j)?[]:[m.clone()])}h&&0<e.length&&0<o.length&&(o.push(j.clone()),e.push(new OpenLayers.Geometry.LineString(o)))}else g=a.splitWith(this,b);return f&&1<f.length?d=!0:f=[],e&&1<e.length?c=!0:e=[],(d||c)&&(g=h?[e,f]:f),g},splitWith:function(a,b){return a.split(this,b)},getVertices:function(a){return!0===a?[this.components[0],this.components[this.components.length-1]]:!1===a?this.components.slice(1,this.components.length-1):this.components.slice()},distanceTo:function(a,b){var c,d=!(b&&!1===b.edge)&&b&&b.details,e={},f=Number.POSITIVE_INFINITY;if(a instanceof OpenLayers.Geometry.Point){for(var g,h=this.getSortedSegments(),i=a.x,j=a.y,k=0,l=h.length;l>k;++k)if(g=h[k],c=OpenLayers.Geometry.distanceToSegment(a,g),c.distance<f){if(f=c.distance,e=c,0===f)break}else if(g.x2>i&&(j>g.y1&&j<g.y2||j<g.y1&&j>g.y2))break;
e=d?{distance:e.distance,x0:e.x,y0:e.y,x1:i,y1:j}:e.distance}else if(a instanceof OpenLayers.Geometry.LineString){var m,n,h=this.getSortedSegments(),i=a.getSortedSegments(),o=i.length,p={point:!0},k=0,l=h.length;a:for(;l>k;++k){j=h[k],g=j.x1,n=j.y1;for(var q=0;o>q;++q){if(c=i[q],m=OpenLayers.Geometry.segmentsIntersect(j,c,p)){f=0,e={distance:0,x0:m.x,y0:m.y,x1:m.x,y1:m.y};break a}c=OpenLayers.Geometry.distanceToSegment({x:g,y:n},c),c.distance<f&&(f=c.distance,e={distance:f,x0:g,y0:n,x1:c.x,y1:c.y})}}d||(e=e.distance),0!==f&&j&&(c=a.distanceTo(new OpenLayers.Geometry.Point(j.x2,j.y2),b),k=d?c.distance:c,f>k&&(e=d?{distance:f,x0:c.x1,y0:c.y1,x1:c.x0,y1:c.y0}:k))}else e=a.distanceTo(this,b),d&&(e={distance:e.distance,x0:e.x1,y0:e.y1,x1:e.x0,y1:e.y0});return e},simplify:function(a){if(this&&null!==this){var b=this.getVertices();if(3>b.length)return this;var c=function(a,b,d,f){for(var g,h=0,i=0,j=b;d>j;j++){g=a[b];var k=a[d],l=a[j],l=Math.abs(.5*(g.x*k.y+k.x*l.y+l.x*g.y-k.x*g.y-l.x*k.y-g.x*l.y));g=Math.sqrt(Math.pow(g.x-k.x,2)+Math.pow(g.y-k.y,2)),g=2*(l/g),g>h&&(h=g,i=j)}h>f&&i!=b&&(e.push(i),c(a,b,i,f),c(a,i,d,f))},d=b.length-1,e=[];for(e.push(0),e.push(d);b[0].equals(b[d]);)d--,e.push(d);for(c(b,0,d,a),a=[],e.sort(function(a,b){return a-b}),d=0;d<e.length;d++)a.push(b[e[d]]);return new OpenLayers.Geometry.LineString(a)}return this},CLASS_NAME:"OpenLayers.Geometry.LineString"}),OpenLayers.Geometry.MultiLineString=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LineString"],split:function(a,b){for(var c,d,e,f,g=null,h=b&&b.mutual,i=[],j=[a],k=0,l=this.components.length;l>k;++k){d=this.components[k],e=!1;for(var m=0;m<j.length;++m)if(c=d.split(j[m],b)){if(h){e=c[0];for(var n=0,o=e.length;o>n;++n)0===n&&i.length?i[i.length-1].addComponent(e[n]):i.push(new OpenLayers.Geometry.MultiLineString([e[n]]));e=!0,c=c[1]}if(c.length){c.unshift(m,1),Array.prototype.splice.apply(j,c);break}}e||(i.length?i[i.length-1].addComponent(d.clone()):i=[new OpenLayers.Geometry.MultiLineString(d.clone())])}return i&&1<i.length?e=!0:i=[],j&&1<j.length?f=!0:j=[],(e||f)&&(g=h?[i,j]:j),g},splitWith:function(a,b){var c,d,e,f,g,h,i=null,j=b&&b.mutual;if(a instanceof OpenLayers.Geometry.LineString){h=[],g=[a];for(var k=0,l=this.components.length;l>k;++k){e=!1,d=this.components[k];for(var m=0;m<g.length;++m)if(c=g[m].split(d,b)){j&&(e=c[0],e.length&&(e.unshift(m,1),Array.prototype.splice.apply(g,e),m+=e.length-2),c=c[1],0===c.length&&(c=[d.clone()])),e=0;for(var n=c.length;n>e;++e)0===e&&h.length?h[h.length-1].addComponent(c[e]):h.push(new OpenLayers.Geometry.MultiLineString([c[e]]));e=!0}e||(h.length?h[h.length-1].addComponent(d.clone()):h=[new OpenLayers.Geometry.MultiLineString([d.clone()])])}}else i=a.split(this);return g&&1<g.length?f=!0:g=[],h&&1<h.length?e=!0:h=[],(f||e)&&(i=j?[g,h]:h),i},CLASS_NAME:"OpenLayers.Geometry.MultiLineString"}),OpenLayers.Geometry.LinearRing=OpenLayers.Class(OpenLayers.Geometry.LineString,{componentTypes:["OpenLayers.Geometry.Point"],addComponent:function(a,b){var c=!1,d=this.components.pop();return null==b&&a.equals(d)||(c=OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,arguments)),OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]]),c},removeComponent:function(a){var b=this.components&&3<this.components.length;return b&&(this.components.pop(),OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments),OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]])),b},move:function(a,b){for(var c=0,d=this.components.length;d-1>c;c++)this.components[c].move(a,b)},rotate:function(a,b){for(var c=0,d=this.components.length;d-1>c;++c)this.components[c].rotate(a,b)},resize:function(a,b,c){for(var d=0,e=this.components.length;e-1>d;++d)this.components[d].resize(a,b,c);return this},transform:function(a,b){if(a&&b){for(var c=0,d=this.components.length;d-1>c;c++)this.components[c].transform(a,b);this.bounds=null}return this},getCentroid:function(){if(this.components){var a=this.components.length;if(a>0&&2>=a)return this.components[0].clone();if(a>2){var b=0,c=0,d=this.components[0].x,e=this.components[0].y,f=-1*this.getArea();if(0!=f){for(var g=0;a-1>g;g++)var h=this.components[g],i=this.components[g+1],b=b+(h.x+i.x-2*d)*((h.x-d)*(i.y-e)-(i.x-d)*(h.y-e)),c=c+(h.y+i.y-2*e)*((h.x-d)*(i.y-e)-(i.x-d)*(h.y-e));b=d+b/(6*f),a=e+c/(6*f)}else{for(g=0;a-1>g;g++)b+=this.components[g].x,c+=this.components[g].y;b/=a-1,a=c/(a-1)}return new OpenLayers.Geometry.Point(b,a)}return null}},getArea:function(){var a=0;if(this.components&&2<this.components.length){for(var b=a=0,c=this.components.length;c-1>b;b++)var d=this.components[b],e=this.components[b+1],a=a+(d.x+e.x)*(e.y-d.y);a=-a/2}return a},getGeodesicArea:function(a){var b=this;if(a){var c=new OpenLayers.Projection("EPSG:4326");c.equals(a)||(b=this.clone().transform(a,c))}if(a=0,c=b.components&&b.components.length,c>2){for(var d,e,f=0;c-1>f;f++)d=b.components[f],e=b.components[f+1],a+=OpenLayers.Util.rad(e.x-d.x)*(2+Math.sin(OpenLayers.Util.rad(d.y))+Math.sin(OpenLayers.Util.rad(e.y)));a=40680631590769*a/2}return a},containsPoint:function(a){var b=OpenLayers.Number.limitSigDigs,c=b(a.x,14);a=b(a.y,14);for(var d,e,f,g,h,i=this.components.length-1,j=0,k=0;i>k;++k)if(d=this.components[k],f=b(d.x,14),d=b(d.y,14),e=this.components[k+1],g=b(e.x,14),e=b(e.y,14),d==e){if(a==d&&(g>=f&&c>=f&&g>=c||f>=g&&f>=c&&c>=g)){j=-1;break}}else{if(h=b((a-e)*((g-f)/(e-d))+g,14),h==c&&(e>d&&a>=d&&e>=a||d>e&&d>=a&&a>=e)){j=-1;break}c>=h||f!=g&&(h<Math.min(f,g)||h>Math.max(f,g))||(e>d&&a>=d&&e>a||d>e&&d>a&&a>=e)&&++j}return-1==j?1:!!(1&j)},intersects:function(a){var b=!1;if("OpenLayers.Geometry.Point"==a.CLASS_NAME)b=this.containsPoint(a);else if("OpenLayers.Geometry.LineString"==a.CLASS_NAME)b=a.intersects(this);else if("OpenLayers.Geometry.LinearRing"==a.CLASS_NAME)b=OpenLayers.Geometry.LineString.prototype.intersects.apply(this,[a]);else for(var c=0,d=a.components.length;d>c&&!(b=a.components[c].intersects(this));++c);return b},getVertices:function(a){return!0===a?[]:this.components.slice(0,this.components.length-1)},CLASS_NAME:"OpenLayers.Geometry.LinearRing"}),OpenLayers.Geometry.Polygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LinearRing"],getArea:function(){var a=0;if(this.components&&0<this.components.length)for(var a=a+Math.abs(this.components[0].getArea()),b=1,c=this.components.length;c>b;b++)a-=Math.abs(this.components[b].getArea());return a},getGeodesicArea:function(a){var b=0;if(this.components&&0<this.components.length)for(var b=b+Math.abs(this.components[0].getGeodesicArea(a)),c=1,d=this.components.length;d>c;c++)b-=Math.abs(this.components[c].getGeodesicArea(a));return b},containsPoint:function(a){var b=this.components.length,c=!1;if(b>0&&(c=this.components[0].containsPoint(a),1!==c&&c&&b>1))for(var d,e=1;b>e;++e)if(d=this.components[e].containsPoint(a)){c=1===d?1:!1;break}return c},intersects:function(a){var b,c,d=!1;if("OpenLayers.Geometry.Point"==a.CLASS_NAME)d=this.containsPoint(a);else if("OpenLayers.Geometry.LineString"==a.CLASS_NAME||"OpenLayers.Geometry.LinearRing"==a.CLASS_NAME){for(b=0,c=this.components.length;c>b&&!(d=a.intersects(this.components[b]));++b);if(!d)for(b=0,c=a.components.length;c>b&&!(d=this.containsPoint(a.components[b]));++b);}else for(b=0,c=a.components.length;c>b&&!(d=this.intersects(a.components[b]));++b);if(!d&&"OpenLayers.Geometry.Polygon"==a.CLASS_NAME){var e=this.components[0];for(b=0,c=e.components.length;c>b&&!(d=a.containsPoint(e.components[b]));++b);}return d},distanceTo:function(a,b){return b&&!1===b.edge&&this.intersects(a)?0:OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this,[a,b])},CLASS_NAME:"OpenLayers.Geometry.Polygon"}),OpenLayers.Geometry.Polygon.createRegularPolygon=function(a,b,c,d){var e=Math.PI*(1/c-.5);d&&(e+=d/180*Math.PI);for(var f,g=[],h=0;c>h;++h)f=e+2*h*Math.PI/c,d=a.x+b*Math.cos(f),f=a.y+b*Math.sin(f),g.push(new OpenLayers.Geometry.Point(d,f));return a=new OpenLayers.Geometry.LinearRing(g),new OpenLayers.Geometry.Polygon([a])},OpenLayers.Geometry.MultiPolygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Polygon"],CLASS_NAME:"OpenLayers.Geometry.MultiPolygon"}),OpenLayers.Format.GML=OpenLayers.Class(OpenLayers.Format.XML,{featureNS:"http://mapserver.gis.umn.edu/mapserver",featurePrefix:"feature",featureName:"featureMember",layerName:"features",geometryName:"geometry",collectionName:"FeatureCollection",gmlns:"http://www.opengis.net/gml",extractAttributes:!0,xy:!0,initialize:function(a){this.regExes={trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a=this.getElementsByTagNameNS(a.documentElement,this.gmlns,this.featureName);for(var b=[],c=0;c<a.length;c++){var d=this.parseFeature(a[c]);d&&b.push(d)}return b},parseFeature:function(a){for(var b,c,d,e="MultiPolygon Polygon MultiLineString LineString MultiPoint Point Envelope".split(" "),f=0;f<e.length;++f)if(b=e[f],c=this.getElementsByTagNameNS(a,this.gmlns,b),0<c.length){if(!(d=this.parseGeometry[b.toLowerCase()]))throw new TypeError("Unsupported geometry type: "+b);d=d.apply(this,[c[0]]),this.internalProjection&&this.externalProjection&&d.transform(this.externalProjection,this.internalProjection);break}var g;for(b=this.getElementsByTagNameNS(a,this.gmlns,"Box"),f=0;f<b.length;++f)e=b[f],c=this.parseGeometry.box.apply(this,[e]),e=e.parentNode,"boundedBy"===(e.localName||e.nodeName.split(":").pop())?g=c:d=c.toGeometry();var h;this.extractAttributes&&(h=this.parseAttributes(a)),h=new OpenLayers.Feature.Vector(d,h),h.bounds=g,h.gml={featureType:a.firstChild.nodeName.split(":")[1],featureNS:a.firstChild.namespaceURI,featureNSPrefix:a.firstChild.prefix},a=a.firstChild;for(var i;a&&(1!=a.nodeType||!(i=a.getAttribute("fid")||a.getAttribute("id")));)a=a.nextSibling;return h.fid=i,h},parseGeometry:{point:function(a){var b,c;return c=[],b=this.getElementsByTagNameNS(a,this.gmlns,"pos"),0<b.length&&(c=b[0].firstChild.nodeValue,c=c.replace(this.regExes.trimSpace,""),c=c.split(this.regExes.splitSpace)),0==c.length&&(b=this.getElementsByTagNameNS(a,this.gmlns,"coordinates"),0<b.length&&(c=b[0].firstChild.nodeValue,c=c.replace(this.regExes.removeSpace,""),c=c.split(","))),0==c.length&&(b=this.getElementsByTagNameNS(a,this.gmlns,"coord"),0<b.length&&(a=this.getElementsByTagNameNS(b[0],this.gmlns,"X"),b=this.getElementsByTagNameNS(b[0],this.gmlns,"Y"),0<a.length&&0<b.length&&(c=[a[0].firstChild.nodeValue,b[0].firstChild.nodeValue]))),2==c.length&&(c[2]=null),this.xy?new OpenLayers.Geometry.Point(c[0],c[1],c[2]):new OpenLayers.Geometry.Point(c[1],c[0],c[2])},multipoint:function(a){a=this.getElementsByTagNameNS(a,this.gmlns,"Point");var b=[];if(0<a.length)for(var c,d=0;d<a.length;++d)(c=this.parseGeometry.point.apply(this,[a[d]]))&&b.push(c);return new OpenLayers.Geometry.MultiPoint(b)},linestring:function(a,b){var c,d;d=[];var e=[];if(c=this.getElementsByTagNameNS(a,this.gmlns,"posList"),0<c.length){d=this.getChildValue(c[0]),d=d.replace(this.regExes.trimSpace,""),d=d.split(this.regExes.splitSpace);var f,g,h,i=parseInt(c[0].getAttribute("dimension"));for(c=0;c<d.length/i;++c)f=c*i,g=d[f],h=d[f+1],f=2==i?null:d[f+2],e.push(this.xy?new OpenLayers.Geometry.Point(g,h,f):new OpenLayers.Geometry.Point(h,g,f))}if(0==d.length&&(c=this.getElementsByTagNameNS(a,this.gmlns,"coordinates"),0<c.length))for(d=this.getChildValue(c[0]),d=d.replace(this.regExes.trimSpace,""),d=d.replace(this.regExes.trimComma,","),i=d.split(this.regExes.splitSpace),c=0;c<i.length;++c)d=i[c].split(","),2==d.length&&(d[2]=null),e.push(this.xy?new OpenLayers.Geometry.Point(d[0],d[1],d[2]):new OpenLayers.Geometry.Point(d[1],d[0],d[2]));return d=null,0!=e.length&&(d=b?new OpenLayers.Geometry.LinearRing(e):new OpenLayers.Geometry.LineString(e)),d},multilinestring:function(a){a=this.getElementsByTagNameNS(a,this.gmlns,"LineString");var b=[];if(0<a.length)for(var c,d=0;d<a.length;++d)(c=this.parseGeometry.linestring.apply(this,[a[d]]))&&b.push(c);return new OpenLayers.Geometry.MultiLineString(b)},polygon:function(a){a=this.getElementsByTagNameNS(a,this.gmlns,"LinearRing");var b=[];if(0<a.length)for(var c,d=0;d<a.length;++d)(c=this.parseGeometry.linestring.apply(this,[a[d],!0]))&&b.push(c);return new OpenLayers.Geometry.Polygon(b)},multipolygon:function(a){a=this.getElementsByTagNameNS(a,this.gmlns,"Polygon");var b=[];if(0<a.length)for(var c,d=0;d<a.length;++d)(c=this.parseGeometry.polygon.apply(this,[a[d]]))&&b.push(c);return new OpenLayers.Geometry.MultiPolygon(b)},envelope:function(a){var b,c,d=[],e=this.getElementsByTagNameNS(a,this.gmlns,"lowerCorner");if(0<e.length){b=[],0<e.length&&(b=e[0].firstChild.nodeValue,b=b.replace(this.regExes.trimSpace,""),b=b.split(this.regExes.splitSpace)),2==b.length&&(b[2]=null);var f=this.xy?new OpenLayers.Geometry.Point(b[0],b[1],b[2]):new OpenLayers.Geometry.Point(b[1],b[0],b[2])}if(a=this.getElementsByTagNameNS(a,this.gmlns,"upperCorner"),0<a.length){b=[],0<a.length&&(b=a[0].firstChild.nodeValue,b=b.replace(this.regExes.trimSpace,""),b=b.split(this.regExes.splitSpace)),2==b.length&&(b[2]=null);var g=this.xy?new OpenLayers.Geometry.Point(b[0],b[1],b[2]):new OpenLayers.Geometry.Point(b[1],b[0],b[2])}return f&&g&&(d.push(new OpenLayers.Geometry.Point(f.x,f.y)),d.push(new OpenLayers.Geometry.Point(g.x,f.y)),d.push(new OpenLayers.Geometry.Point(g.x,g.y)),d.push(new OpenLayers.Geometry.Point(f.x,g.y)),d.push(new OpenLayers.Geometry.Point(f.x,f.y)),d=new OpenLayers.Geometry.LinearRing(d),c=new OpenLayers.Geometry.Polygon([d])),c},box:function(a){var b=this.getElementsByTagNameNS(a,this.gmlns,"coordinates"),c=a=null;return 0<b.length&&(b=b[0].firstChild.nodeValue,b=b.split(" "),2==b.length&&(a=b[0].split(","),c=b[1].split(","))),null!==a&&null!==c?new OpenLayers.Bounds(parseFloat(a[0]),parseFloat(a[1]),parseFloat(c[0]),parseFloat(c[1])):void 0}},parseAttributes:function(a){var b={};a=a.firstChild;for(var c,d,e;a;){if(1==a.nodeType){for(a=a.childNodes,c=0;c<a.length;++c)d=a[c],1==d.nodeType&&(e=d.childNodes,1==e.length?(e=e[0],(3==e.nodeType||4==e.nodeType)&&(d=d.prefix?d.nodeName.split(":")[1]:d.nodeName,e=e.nodeValue.replace(this.regExes.trimSpace,""),b[d]=e)):b[d.nodeName.split(":").pop()]=null);break}a=a.nextSibling}return b},write:function(a){OpenLayers.Util.isArray(a)||(a=[a]);for(var b=this.createElementNS("http://www.opengis.net/wfs","wfs:"+this.collectionName),c=0;c<a.length;c++)b.appendChild(this.createFeatureXML(a[c]));return OpenLayers.Format.XML.prototype.write.apply(this,[b])},createFeatureXML:function(a){var b=this.buildGeometryNode(a.geometry),c=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.geometryName);c.appendChild(b);var b=this.createElementNS(this.gmlns,"gml:"+this.featureName),d=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.layerName);d.setAttribute("fid",a.fid||a.id),d.appendChild(c);for(var e in a.attributes){var c=this.createTextNode(a.attributes[e]),f=e.substring(e.lastIndexOf(":")+1),f=this.createElementNS(this.featureNS,this.featurePrefix+":"+f);f.appendChild(c),d.appendChild(f)}return b.appendChild(d),b},buildGeometryNode:function(a){this.externalProjection&&this.internalProjection&&(a=a.clone(),a.transform(this.internalProjection,this.externalProjection));var b=a.CLASS_NAME,b=b.substring(b.lastIndexOf(".")+1);return this.buildGeometry[b.toLowerCase()].apply(this,[a])},buildGeometry:{point:function(a){var b=this.createElementNS(this.gmlns,"gml:Point");return b.appendChild(this.buildCoordinatesNode(a)),b},multipoint:function(a){var b=this.createElementNS(this.gmlns,"gml:MultiPoint");a=a.components;for(var c,d,e=0;e<a.length;e++)c=this.createElementNS(this.gmlns,"gml:pointMember"),d=this.buildGeometry.point.apply(this,[a[e]]),c.appendChild(d),b.appendChild(c);return b},linestring:function(a){var b=this.createElementNS(this.gmlns,"gml:LineString");return b.appendChild(this.buildCoordinatesNode(a)),b},multilinestring:function(a){var b=this.createElementNS(this.gmlns,"gml:MultiLineString");a=a.components;for(var c,d,e=0;e<a.length;++e)c=this.createElementNS(this.gmlns,"gml:lineStringMember"),d=this.buildGeometry.linestring.apply(this,[a[e]]),c.appendChild(d),b.appendChild(c);return b},linearring:function(a){var b=this.createElementNS(this.gmlns,"gml:LinearRing");return b.appendChild(this.buildCoordinatesNode(a)),b},polygon:function(a){var b=this.createElementNS(this.gmlns,"gml:Polygon");a=a.components;for(var c,d,e=0;e<a.length;++e)c=0==e?"outerBoundaryIs":"innerBoundaryIs",c=this.createElementNS(this.gmlns,"gml:"+c),d=this.buildGeometry.linearring.apply(this,[a[e]]),c.appendChild(d),b.appendChild(c);return b},multipolygon:function(a){var b=this.createElementNS(this.gmlns,"gml:MultiPolygon");a=a.components;for(var c,d,e=0;e<a.length;++e)c=this.createElementNS(this.gmlns,"gml:polygonMember"),d=this.buildGeometry.polygon.apply(this,[a[e]]),c.appendChild(d),b.appendChild(c);return b},bounds:function(a){var b=this.createElementNS(this.gmlns,"gml:Box");return b.appendChild(this.buildCoordinatesNode(a)),b}},buildCoordinatesNode:function(a){var b=this.createElementNS(this.gmlns,"gml:coordinates");b.setAttribute("decimal","."),b.setAttribute("cs",","),b.setAttribute("ts"," ");var c=[];if(a instanceof OpenLayers.Bounds)c.push(a.left+","+a.bottom),c.push(a.right+","+a.top);else{a=a.components?a.components:[a];for(var d=0;d<a.length;d++)c.push(a[d].x+","+a[d].y)}return c=this.createTextNode(c.join(" ")),b.appendChild(c),b},CLASS_NAME:"OpenLayers.Format.GML"}),OpenLayers.Format.GML||(OpenLayers.Format.GML={}),OpenLayers.Format.GML.Base=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",wfs:"http://www.opengis.net/wfs"},defaultPrefix:"gml",schemaLocation:null,featureType:null,featureNS:null,geometryName:"geometry",extractAttributes:!0,srsName:null,xy:!0,geometryTypes:null,singleFeatureType:null,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,featureMember:/^(.*:)?featureMembers?$/},initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]),this.setGeometryTypes(),a&&a.featureNS&&this.setNamespace("feature",a.featureNS),this.singleFeatureType=!a||"string"==typeof a.featureType},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b=[];if(this.readNode(a,{features:b},!0),0==b.length){var c=this.getElementsByTagNameNS(a,this.namespaces.gml,"featureMember");if(c.length){a=0;for(var d=c.length;d>a;++a)this.readNode(c[a],{features:b},!0)}else c=this.getElementsByTagNameNS(a,this.namespaces.gml,"featureMembers"),c.length&&this.readNode(c[0],{features:b},!0)}return b},readNode:function(a,b,c){return!0===c&&!0===this.autoConfig&&(this.featureType=null,delete this.namespaceAlias[this.featureNS],delete this.namespaces.feature,this.featureNS=null),this.featureNS||a.prefix in this.namespaces||a.parentNode.namespaceURI!=this.namespaces.gml||!this.regExes.featureMember.test(a.parentNode.nodeName)||(this.featureType=a.nodeName.split(":").pop(),this.setNamespace("feature",a.namespaceURI),this.featureNS=a.namespaceURI,this.autoConfig=!0),OpenLayers.Format.XML.prototype.readNode.apply(this,[a,b])},readers:{gml:{_inherit:function(a,b,c){},featureMember:function(a,b){this.readChildNodes(a,b)},featureMembers:function(a,b){this.readChildNodes(a,b)},name:function(a,b){b.name=this.getChildValue(a)},boundedBy:function(a,b){var c={};this.readChildNodes(a,c),c.components&&0<c.components.length&&(b.bounds=c.components[0])},Point:function(a,b){var c={points:[]};this.readChildNodes(a,c),b.components||(b.components=[]),b.components.push(c.points[0])},coordinates:function(a,b){for(var c,d=this.getChildValue(a).replace(this.regExes.trimSpace,""),d=d.replace(this.regExes.trimComma,","),d=d.split(this.regExes.splitSpace),e=d.length,f=Array(e),g=0;e>g;++g)c=d[g].split(","),f[g]=this.xy?new OpenLayers.Geometry.Point(c[0],c[1],c[2]):new OpenLayers.Geometry.Point(c[1],c[0],c[2]);b.points=f},coord:function(a,b){var c={};this.readChildNodes(a,c),b.points||(b.points=[]),b.points.push(new OpenLayers.Geometry.Point(c.x,c.y,c.z))},X:function(a,b){b.x=this.getChildValue(a)},Y:function(a,b){b.y=this.getChildValue(a)},Z:function(a,b){b.z=this.getChildValue(a)},MultiPoint:function(a,b){var c={components:[]};this.readers.gml._inherit.apply(this,[a,c,b]),this.readChildNodes(a,c),b.components=[new OpenLayers.Geometry.MultiPoint(c.components)]},pointMember:function(a,b){this.readChildNodes(a,b)},LineString:function(a,b){var c={};this.readers.gml._inherit.apply(this,[a,c,b]),this.readChildNodes(a,c),b.components||(b.components=[]),b.components.push(new OpenLayers.Geometry.LineString(c.points))},MultiLineString:function(a,b){var c={components:[]};this.readers.gml._inherit.apply(this,[a,c,b]),this.readChildNodes(a,c),b.components=[new OpenLayers.Geometry.MultiLineString(c.components)]},lineStringMember:function(a,b){this.readChildNodes(a,b)},Polygon:function(a,b){var c={outer:null,inner:[]};this.readers.gml._inherit.apply(this,[a,c,b]),this.readChildNodes(a,c),c.inner.unshift(c.outer),b.components||(b.components=[]),b.components.push(new OpenLayers.Geometry.Polygon(c.inner))},LinearRing:function(a,b){var c={};this.readers.gml._inherit.apply(this,[a,c]),this.readChildNodes(a,c),b.components=[new OpenLayers.Geometry.LinearRing(c.points)]},MultiPolygon:function(a,b){var c={components:[]};this.readers.gml._inherit.apply(this,[a,c,b]),this.readChildNodes(a,c),b.components=[new OpenLayers.Geometry.MultiPolygon(c.components)]},polygonMember:function(a,b){this.readChildNodes(a,b)},GeometryCollection:function(a,b){var c={components:[]};this.readers.gml._inherit.apply(this,[a,c,b]),this.readChildNodes(a,c),b.components=[new OpenLayers.Geometry.Collection(c.components)]},geometryMember:function(a,b){this.readChildNodes(a,b)}},feature:{"*":function(a,b){var c,d=a.localName||a.nodeName.split(":").pop();b.features?this.singleFeatureType||-1===OpenLayers.Util.indexOf(this.featureType,d)?d===this.featureType&&(c="_typeName"):c="_typeName":0==a.childNodes.length||1==a.childNodes.length&&3==a.firstChild.nodeType?this.extractAttributes&&(c="_attribute"):c="_geometry",c&&this.readers.feature[c].apply(this,[a,b])},_typeName:function(a,b){var c={components:[],attributes:{}};this.readChildNodes(a,c),c.name&&(c.attributes.name=c.name);var d=new OpenLayers.Feature.Vector(c.components[0],c.attributes);this.singleFeatureType||(d.type=a.nodeName.split(":").pop(),d.namespace=a.namespaceURI);var e=a.getAttribute("fid")||this.getAttributeNS(a,this.namespaces.gml,"id");e&&(d.fid=e),this.internalProjection&&this.externalProjection&&d.geometry&&d.geometry.transform(this.externalProjection,this.internalProjection),c.bounds&&(d.bounds=c.bounds),b.features.push(d)},_geometry:function(a,b){this.geometryName||(this.geometryName=a.nodeName.split(":").pop()),this.readChildNodes(a,b)},_attribute:function(a,b){var c=a.localName||a.nodeName.split(":").pop(),d=this.getChildValue(a);b.attributes[c]=d}},wfs:{FeatureCollection:function(a,b){this.readChildNodes(a,b)}}},write:function(a){var b;return b=OpenLayers.Util.isArray(a)?"featureMembers":"featureMember",a=this.writeNode("gml:"+b,a),this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{gml:{featureMember:function(a){var b=this.createElementNSPlus("gml:featureMember");return this.writeNode("feature:_typeName",a,b),b},MultiPoint:function(a){var b=this.createElementNSPlus("gml:MultiPoint");a=a.components||[a];for(var c=0,d=a.length;d>c;++c)this.writeNode("pointMember",a[c],b);return b},pointMember:function(a){var b=this.createElementNSPlus("gml:pointMember");return this.writeNode("Point",a,b),b},MultiLineString:function(a){var b=this.createElementNSPlus("gml:MultiLineString");a=a.components||[a];for(var c=0,d=a.length;d>c;++c)this.writeNode("lineStringMember",a[c],b);return b},lineStringMember:function(a){var b=this.createElementNSPlus("gml:lineStringMember");return this.writeNode("LineString",a,b),b},MultiPolygon:function(a){var b=this.createElementNSPlus("gml:MultiPolygon");a=a.components||[a];for(var c=0,d=a.length;d>c;++c)this.writeNode("polygonMember",a[c],b);return b},polygonMember:function(a){var b=this.createElementNSPlus("gml:polygonMember");return this.writeNode("Polygon",a,b),b},GeometryCollection:function(a){for(var b=this.createElementNSPlus("gml:GeometryCollection"),c=0,d=a.components.length;d>c;++c)this.writeNode("geometryMember",a.components[c],b);return b},geometryMember:function(a){var b=this.createElementNSPlus("gml:geometryMember");return a=this.writeNode("feature:_geometry",a),b.appendChild(a.firstChild),b}},feature:{_typeName:function(a){var b=this.createElementNSPlus("feature:"+this.featureType,{attributes:{fid:a.fid}});a.geometry&&this.writeNode("feature:_geometry",a.geometry,b);for(var c in a.attributes){var d=a.attributes[c];null!=d&&this.writeNode("feature:_attribute",{name:c,value:d},b)}return b},_geometry:function(a){this.externalProjection&&this.internalProjection&&(a=a.clone().transform(this.internalProjection,this.externalProjection));var b=this.createElementNSPlus("feature:"+this.geometryName);return a=this.writeNode("gml:"+this.geometryTypes[a.CLASS_NAME],a,b),this.srsName&&a.setAttribute("srsName",this.srsName),b},_attribute:function(a){return this.createElementNSPlus("feature:"+a.name,{value:a.value})}},wfs:{FeatureCollection:function(a){for(var b=this.createElementNSPlus("wfs:FeatureCollection"),c=0,d=a.length;d>c;++c)this.writeNode("gml:featureMember",a[c],b);return b}}},setGeometryTypes:function(){this.geometryTypes={"OpenLayers.Geometry.Point":"Point","OpenLayers.Geometry.MultiPoint":"MultiPoint","OpenLayers.Geometry.LineString":"LineString","OpenLayers.Geometry.MultiLineString":"MultiLineString","OpenLayers.Geometry.Polygon":"Polygon","OpenLayers.Geometry.MultiPolygon":"MultiPolygon","OpenLayers.Geometry.Collection":"GeometryCollection"}},CLASS_NAME:"OpenLayers.Format.GML.Base"}),OpenLayers.Format.GML.v3=OpenLayers.Class(OpenLayers.Format.GML.Base,{schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",curve:!1,multiCurve:!0,surface:!1,multiSurface:!0,initialize:function(a){OpenLayers.Format.GML.Base.prototype.initialize.apply(this,[a])},readers:{gml:OpenLayers.Util.applyDefaults({_inherit:function(a,b,c){(a=parseInt(a.getAttribute("srsDimension"),10)||c&&c.srsDimension)&&(b.srsDimension=a)},featureMembers:function(a,b){this.readChildNodes(a,b)},Curve:function(a,b){var c={points:[]};this.readers.gml._inherit.apply(this,[a,c,b]),this.readChildNodes(a,c),b.components||(b.components=[]),b.components.push(new OpenLayers.Geometry.LineString(c.points))},segments:function(a,b){this.readChildNodes(a,b)},LineStringSegment:function(a,b){var c={};this.readChildNodes(a,c),c.points&&Array.prototype.push.apply(b.points,c.points)},pos:function(a,b){var c=this.getChildValue(a).replace(this.regExes.trimSpace,"").split(this.regExes.splitSpace),c=this.xy?new OpenLayers.Geometry.Point(c[0],c[1],c[2]):new OpenLayers.Geometry.Point(c[1],c[0],c[2]);b.points=[c]},posList:function(a,b){for(var c,d,e,f=this.getChildValue(a).replace(this.regExes.trimSpace,"").split(this.regExes.splitSpace),g=b.srsDimension||parseInt(a.getAttribute("srsDimension")||a.getAttribute("dimension"),10)||2,h=Array(f.length/g),i=0,j=f.length;j>i;i+=g)c=f[i],d=f[i+1],e=2==g?void 0:f[i+2],h[i/g]=this.xy?new OpenLayers.Geometry.Point(c,d,e):new OpenLayers.Geometry.Point(d,c,e);b.points=h},Surface:function(a,b){this.readChildNodes(a,b)},patches:function(a,b){this.readChildNodes(a,b)},PolygonPatch:function(a,b){this.readers.gml.Polygon.apply(this,[a,b])},exterior:function(a,b){var c={};this.readChildNodes(a,c),b.outer=c.components[0]},interior:function(a,b){var c={};this.readChildNodes(a,c),b.inner.push(c.components[0])},MultiCurve:function(a,b){var c={components:[]};this.readers.gml._inherit.apply(this,[a,c,b]),this.readChildNodes(a,c),0<c.components.length&&(b.components=[new OpenLayers.Geometry.MultiLineString(c.components)])},curveMember:function(a,b){this.readChildNodes(a,b)},MultiSurface:function(a,b){var c={components:[]};this.readers.gml._inherit.apply(this,[a,c,b]),this.readChildNodes(a,c),0<c.components.length&&(b.components=[new OpenLayers.Geometry.MultiPolygon(c.components)])},surfaceMember:function(a,b){this.readChildNodes(a,b)},surfaceMembers:function(a,b){this.readChildNodes(a,b)},pointMembers:function(a,b){this.readChildNodes(a,b)},lineStringMembers:function(a,b){this.readChildNodes(a,b)},polygonMembers:function(a,b){this.readChildNodes(a,b)},geometryMembers:function(a,b){this.readChildNodes(a,b)},Envelope:function(a,b){var c={points:Array(2)};this.readChildNodes(a,c),b.components||(b.components=[]);var d=c.points[0],c=c.points[1];b.components.push(new OpenLayers.Bounds(d.x,d.y,c.x,c.y))},lowerCorner:function(a,b){var c={};this.readers.gml.pos.apply(this,[a,c]),b.points[0]=c.points[0]},upperCorner:function(a,b){var c={};this.readers.gml.pos.apply(this,[a,c]),b.points[1]=c.points[0]}},OpenLayers.Format.GML.Base.prototype.readers.gml),feature:OpenLayers.Format.GML.Base.prototype.readers.feature,wfs:OpenLayers.Format.GML.Base.prototype.readers.wfs},write:function(a){var b;return b=OpenLayers.Util.isArray(a)?"featureMembers":"featureMember",a=this.writeNode("gml:"+b,a),this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{gml:OpenLayers.Util.applyDefaults({featureMembers:function(a){for(var b=this.createElementNSPlus("gml:featureMembers"),c=0,d=a.length;d>c;++c)this.writeNode("feature:_typeName",a[c],b);return b},Point:function(a){var b=this.createElementNSPlus("gml:Point");return this.writeNode("pos",a,b),b},pos:function(a){return this.createElementNSPlus("gml:pos",{value:this.xy?a.x+" "+a.y:a.y+" "+a.x})},LineString:function(a){var b=this.createElementNSPlus("gml:LineString");return this.writeNode("posList",a.components,b),b},Curve:function(a){var b=this.createElementNSPlus("gml:Curve");return this.writeNode("segments",a,b),b},segments:function(a){var b=this.createElementNSPlus("gml:segments");return this.writeNode("LineStringSegment",a,b),b},LineStringSegment:function(a){var b=this.createElementNSPlus("gml:LineStringSegment");return this.writeNode("posList",a.components,b),b},posList:function(a){for(var b,c=a.length,d=Array(c),e=0;c>e;++e)b=a[e],d[e]=this.xy?b.x+" "+b.y:b.y+" "+b.x;return this.createElementNSPlus("gml:posList",{value:d.join(" ")})},Surface:function(a){var b=this.createElementNSPlus("gml:Surface");return this.writeNode("patches",a,b),b},patches:function(a){var b=this.createElementNSPlus("gml:patches");return this.writeNode("PolygonPatch",a,b),b},PolygonPatch:function(a){var b=this.createElementNSPlus("gml:PolygonPatch",{attributes:{interpolation:"planar"}});this.writeNode("exterior",a.components[0],b);for(var c=1,d=a.components.length;d>c;++c)this.writeNode("interior",a.components[c],b);return b},Polygon:function(a){var b=this.createElementNSPlus("gml:Polygon");this.writeNode("exterior",a.components[0],b);for(var c=1,d=a.components.length;d>c;++c)this.writeNode("interior",a.components[c],b);return b},exterior:function(a){var b=this.createElementNSPlus("gml:exterior");return this.writeNode("LinearRing",a,b),b},interior:function(a){var b=this.createElementNSPlus("gml:interior");return this.writeNode("LinearRing",a,b),b},LinearRing:function(a){var b=this.createElementNSPlus("gml:LinearRing");return this.writeNode("posList",a.components,b),b},MultiCurve:function(a){
var b=this.createElementNSPlus("gml:MultiCurve");a=a.components||[a];for(var c=0,d=a.length;d>c;++c)this.writeNode("curveMember",a[c],b);return b},curveMember:function(a){var b=this.createElementNSPlus("gml:curveMember");return this.curve?this.writeNode("Curve",a,b):this.writeNode("LineString",a,b),b},MultiSurface:function(a){var b=this.createElementNSPlus("gml:MultiSurface");a=a.components||[a];for(var c=0,d=a.length;d>c;++c)this.writeNode("surfaceMember",a[c],b);return b},surfaceMember:function(a){var b=this.createElementNSPlus("gml:surfaceMember");return this.surface?this.writeNode("Surface",a,b):this.writeNode("Polygon",a,b),b},Envelope:function(a){var b=this.createElementNSPlus("gml:Envelope");return this.writeNode("lowerCorner",a,b),this.writeNode("upperCorner",a,b),this.srsName&&b.setAttribute("srsName",this.srsName),b},lowerCorner:function(a){return this.createElementNSPlus("gml:lowerCorner",{value:this.xy?a.left+" "+a.bottom:a.bottom+" "+a.left})},upperCorner:function(a){return this.createElementNSPlus("gml:upperCorner",{value:this.xy?a.right+" "+a.top:a.top+" "+a.right})}},OpenLayers.Format.GML.Base.prototype.writers.gml),feature:OpenLayers.Format.GML.Base.prototype.writers.feature,wfs:OpenLayers.Format.GML.Base.prototype.writers.wfs},setGeometryTypes:function(){this.geometryTypes={"OpenLayers.Geometry.Point":"Point","OpenLayers.Geometry.MultiPoint":"MultiPoint","OpenLayers.Geometry.LineString":!0===this.curve?"Curve":"LineString","OpenLayers.Geometry.MultiLineString":!1===this.multiCurve?"MultiLineString":"MultiCurve","OpenLayers.Geometry.Polygon":!0===this.surface?"Surface":"Polygon","OpenLayers.Geometry.MultiPolygon":!1===this.multiSurface?"MultiPolygon":"MultiSurface","OpenLayers.Geometry.Collection":"GeometryCollection"}},CLASS_NAME:"OpenLayers.Format.GML.v3"}),OpenLayers.Format.Filter.v1_1_0=OpenLayers.Class(OpenLayers.Format.GML.v3,OpenLayers.Format.Filter.v1,{VERSION:"1.1.0",schemaLocation:"http://www.opengis.net/ogc/filter/1.1.0/filter.xsd",initialize:function(a){OpenLayers.Format.GML.v3.prototype.initialize.apply(this,[a])},readers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(a,b){var c=a.getAttribute("matchCase"),c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,matchCase:!("false"===c||"0"===c)});this.readChildNodes(a,c),b.filters.push(c)},PropertyIsNotEqualTo:function(a,b){var c=a.getAttribute("matchCase"),c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.NOT_EQUAL_TO,matchCase:!("false"===c||"0"===c)});this.readChildNodes(a,c),b.filters.push(c)},PropertyIsLike:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LIKE});this.readChildNodes(a,c);var d=a.getAttribute("wildCard"),e=a.getAttribute("singleChar"),f=a.getAttribute("escapeChar");c.value2regex(d,e,f),b.filters.push(c)}},OpenLayers.Format.Filter.v1.prototype.readers.ogc),gml:OpenLayers.Format.GML.v3.prototype.readers.gml,feature:OpenLayers.Format.GML.v3.prototype.readers.feature},writers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsEqualTo",{attributes:{matchCase:a.matchCase}});return this.writeNode("PropertyName",a,b),this.writeOgcExpression(a.value,b),b},PropertyIsNotEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsNotEqualTo",{attributes:{matchCase:a.matchCase}});return this.writeNode("PropertyName",a,b),this.writeOgcExpression(a.value,b),b},PropertyIsLike:function(a){var b=this.createElementNSPlus("ogc:PropertyIsLike",{attributes:{matchCase:a.matchCase,wildCard:"*",singleChar:".",escapeChar:"!"}});return this.writeNode("PropertyName",a,b),this.writeNode("Literal",a.regex2value(),b),b},BBOX:function(a){var b=this.createElementNSPlus("ogc:BBOX");a.property&&this.writeNode("PropertyName",a,b);var c=this.writeNode("gml:Envelope",a.value);return a.projection&&c.setAttribute("srsName",a.projection),b.appendChild(c),b},SortBy:function(a){for(var b=this.createElementNSPlus("ogc:SortBy"),c=0,d=a.length;d>c;c++)this.writeNode("ogc:SortProperty",a[c],b);return b},SortProperty:function(a){var b=this.createElementNSPlus("ogc:SortProperty");return this.writeNode("ogc:PropertyName",a,b),this.writeNode("ogc:SortOrder","DESC"==a.order?"DESC":"ASC",b),b},SortOrder:function(a){return this.createElementNSPlus("ogc:SortOrder",{value:a})}},OpenLayers.Format.Filter.v1.prototype.writers.ogc),gml:OpenLayers.Format.GML.v3.prototype.writers.gml,feature:OpenLayers.Format.GML.v3.prototype.writers.feature},writeSpatial:function(a,b){var c=this.createElementNSPlus("ogc:"+b);if(this.writeNode("PropertyName",a,c),a.value instanceof OpenLayers.Filter.Function)this.writeNode("Function",a.value,c);else{var d;d=a.value instanceof OpenLayers.Geometry?this.writeNode("feature:_geometry",a.value).firstChild:this.writeNode("gml:Envelope",a.value),a.projection&&d.setAttribute("srsName",a.projection),c.appendChild(d)}return c},CLASS_NAME:"OpenLayers.Format.Filter.v1_1_0"}),OpenLayers.Format.OWSCommon=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",getVersion:function(a,b){var c=this.version;if(!c){var d=a.getAttribute("xmlns:ows");d&&"1.1"===d.substring(d.lastIndexOf("/")+1)&&(c="1.1.0"),c||(c=this.defaultVersion)}return c},CLASS_NAME:"OpenLayers.Format.OWSCommon"}),OpenLayers.Format.OWSCommon.v1=OpenLayers.Class(OpenLayers.Format.XML,{regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(a,b){OpenLayers.Util.applyDefaults(b,this.options);var c={};return this.readChildNodes(a,c),c},readers:{ows:{Exception:function(a,b){var c={code:a.getAttribute("exceptionCode"),locator:a.getAttribute("locator"),texts:[]};b.exceptions.push(c),this.readChildNodes(a,c)},ExceptionText:function(a,b){var c=this.getChildValue(a);b.texts.push(c)},ServiceIdentification:function(a,b){b.serviceIdentification={},this.readChildNodes(a,b.serviceIdentification)},Title:function(a,b){b.title=this.getChildValue(a)},Abstract:function(a,b){b["abstract"]=this.getChildValue(a)},Keywords:function(a,b){b.keywords={},this.readChildNodes(a,b.keywords)},Keyword:function(a,b){b[this.getChildValue(a)]=!0},ServiceType:function(a,b){b.serviceType={codeSpace:a.getAttribute("codeSpace"),value:this.getChildValue(a)}},ServiceTypeVersion:function(a,b){b.serviceTypeVersion=this.getChildValue(a)},Fees:function(a,b){b.fees=this.getChildValue(a)},AccessConstraints:function(a,b){b.accessConstraints=this.getChildValue(a)},ServiceProvider:function(a,b){b.serviceProvider={},this.readChildNodes(a,b.serviceProvider)},ProviderName:function(a,b){b.providerName=this.getChildValue(a)},ProviderSite:function(a,b){b.providerSite=this.getAttributeNS(a,this.namespaces.xlink,"href")},ServiceContact:function(a,b){b.serviceContact={},this.readChildNodes(a,b.serviceContact)},IndividualName:function(a,b){b.individualName=this.getChildValue(a)},PositionName:function(a,b){b.positionName=this.getChildValue(a)},ContactInfo:function(a,b){b.contactInfo={},this.readChildNodes(a,b.contactInfo)},Phone:function(a,b){b.phone={},this.readChildNodes(a,b.phone)},Voice:function(a,b){b.voice=this.getChildValue(a)},Address:function(a,b){b.address={},this.readChildNodes(a,b.address)},DeliveryPoint:function(a,b){b.deliveryPoint=this.getChildValue(a)},City:function(a,b){b.city=this.getChildValue(a)},AdministrativeArea:function(a,b){b.administrativeArea=this.getChildValue(a)},PostalCode:function(a,b){b.postalCode=this.getChildValue(a)},Country:function(a,b){b.country=this.getChildValue(a)},ElectronicMailAddress:function(a,b){b.electronicMailAddress=this.getChildValue(a)},Role:function(a,b){b.role=this.getChildValue(a)},OperationsMetadata:function(a,b){b.operationsMetadata={},this.readChildNodes(a,b.operationsMetadata)},Operation:function(a,b){var c=a.getAttribute("name");b[c]={},this.readChildNodes(a,b[c])},DCP:function(a,b){b.dcp={},this.readChildNodes(a,b.dcp)},HTTP:function(a,b){b.http={},this.readChildNodes(a,b.http)},Get:function(a,b){b.get||(b.get=[]);var c={url:this.getAttributeNS(a,this.namespaces.xlink,"href")};this.readChildNodes(a,c),b.get.push(c)},Post:function(a,b){b.post||(b.post=[]);var c={url:this.getAttributeNS(a,this.namespaces.xlink,"href")};this.readChildNodes(a,c),b.post.push(c)},Parameter:function(a,b){b.parameters||(b.parameters={});var c=a.getAttribute("name");b.parameters[c]={},this.readChildNodes(a,b.parameters[c])},Constraint:function(a,b){b.constraints||(b.constraints={});var c=a.getAttribute("name");b.constraints[c]={},this.readChildNodes(a,b.constraints[c])},Value:function(a,b){b[this.getChildValue(a)]=!0},OutputFormat:function(a,b){b.formats.push({value:this.getChildValue(a)}),this.readChildNodes(a,b)},WGS84BoundingBox:function(a,b){var c={};c.crs=a.getAttribute("crs"),b.BoundingBox?b.BoundingBox.push(c):(b.projection=c.crs,c=b),this.readChildNodes(a,c)},BoundingBox:function(a,b){this.readers.ows.WGS84BoundingBox.apply(this,[a,b])},LowerCorner:function(a,b){var c=this.getChildValue(a).replace(this.regExes.trimSpace,""),c=c.replace(this.regExes.trimComma,","),c=c.split(this.regExes.splitSpace);b.left=c[0],b.bottom=c[1]},UpperCorner:function(a,b){var c=this.getChildValue(a).replace(this.regExes.trimSpace,""),c=c.replace(this.regExes.trimComma,","),c=c.split(this.regExes.splitSpace);b.right=c[0],b.top=c[1],b.bounds=new OpenLayers.Bounds(b.left,b.bottom,b.right,b.top),delete b.left,delete b.bottom,delete b.right,delete b.top},Language:function(a,b){b.language=this.getChildValue(a)}}},writers:{ows:{BoundingBox:function(a,b){var c=this.createElementNSPlus(b||"ows:BoundingBox",{attributes:{crs:a.projection}});return this.writeNode("ows:LowerCorner",a,c),this.writeNode("ows:UpperCorner",a,c),c},LowerCorner:function(a){return this.createElementNSPlus("ows:LowerCorner",{value:a.bounds.left+" "+a.bounds.bottom})},UpperCorner:function(a){return this.createElementNSPlus("ows:UpperCorner",{value:a.bounds.right+" "+a.bounds.top})},Identifier:function(a){return this.createElementNSPlus("ows:Identifier",{value:a})},Title:function(a){return this.createElementNSPlus("ows:Title",{value:a})},Abstract:function(a){return this.createElementNSPlus("ows:Abstract",{value:a})},OutputFormat:function(a){return this.createElementNSPlus("ows:OutputFormat",{value:a})}}},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1"}),OpenLayers.Format.OWSCommon.v1_0_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1,{namespaces:{ows:"http://www.opengis.net/ows",xlink:"http://www.w3.org/1999/xlink"},readers:{ows:OpenLayers.Util.applyDefaults({ExceptionReport:function(a,b){b.success=!1,b.exceptionReport={version:a.getAttribute("version"),language:a.getAttribute("language"),exceptions:[]},this.readChildNodes(a,b.exceptionReport)}},OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)},writers:{ows:OpenLayers.Format.OWSCommon.v1.prototype.writers.ows},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1_0_0"}),OpenLayers.Format.WFST.v1_1_0=OpenLayers.Class(OpenLayers.Format.Filter.v1_1_0,OpenLayers.Format.WFST.v1,{version:"1.1.0",schemaLocations:{wfs:"http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"},initialize:function(a){OpenLayers.Format.Filter.v1_1_0.prototype.initialize.apply(this,[a]),OpenLayers.Format.WFST.v1.prototype.initialize.apply(this,[a])},readNode:function(a,b,c){return OpenLayers.Format.GML.v3.prototype.readNode.apply(this,arguments)},readers:{wfs:OpenLayers.Util.applyDefaults({FeatureCollection:function(a,b){b.numberOfFeatures=parseInt(a.getAttribute("numberOfFeatures")),OpenLayers.Format.WFST.v1.prototype.readers.wfs.FeatureCollection.apply(this,arguments)},TransactionResponse:function(a,b){b.insertIds=[],b.success=!1,this.readChildNodes(a,b)},TransactionSummary:function(a,b){b.success=!0},InsertResults:function(a,b){this.readChildNodes(a,b)},Feature:function(a,b){var c={fids:[]};this.readChildNodes(a,c),b.insertIds.push(c.fids[0])}},OpenLayers.Format.WFST.v1.prototype.readers.wfs),gml:OpenLayers.Format.GML.v3.prototype.readers.gml,feature:OpenLayers.Format.GML.v3.prototype.readers.feature,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.readers.ogc,ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows},writers:{wfs:OpenLayers.Util.applyDefaults({GetFeature:function(a){var b=OpenLayers.Format.WFST.v1.prototype.writers.wfs.GetFeature.apply(this,arguments);return a&&this.setAttributes(b,{resultType:a.resultType,startIndex:a.startIndex,count:a.count}),b},Query:function(a){a=OpenLayers.Util.extend({featureNS:this.featureNS,featurePrefix:this.featurePrefix,featureType:this.featureType,srsName:this.srsName},a);var b=a.featurePrefix,c=this.createElementNSPlus("wfs:Query",{attributes:{typeName:(b?b+":":"")+a.featureType,srsName:a.srsName}});if(a.featureNS&&c.setAttribute("xmlns:"+b,a.featureNS),a.propertyNames)for(var b=0,d=a.propertyNames.length;d>b;b++)this.writeNode("wfs:PropertyName",{property:a.propertyNames[b]},c);return a.filter&&(OpenLayers.Format.WFST.v1_1_0.prototype.setFilterProperty.call(this,a.filter),this.writeNode("ogc:Filter",a.filter,c)),c},PropertyName:function(a){return this.createElementNSPlus("wfs:PropertyName",{value:a.property})}},OpenLayers.Format.WFST.v1.prototype.writers.wfs),gml:OpenLayers.Format.GML.v3.prototype.writers.gml,feature:OpenLayers.Format.GML.v3.prototype.writers.feature,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.WFST.v1_1_0"}),OpenLayers.Protocol=OpenLayers.Class({format:null,options:null,autoDestroy:!0,defaultFilter:null,initialize:function(a){a=a||{},OpenLayers.Util.extend(this,a),this.options=a},mergeWithDefaultFilter:function(a){return a&&this.defaultFilter?new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,filters:[this.defaultFilter,a]}):a||this.defaultFilter||void 0},destroy:function(){this.format=this.options=null},read:function(a){a=a||{},a.filter=this.mergeWithDefaultFilter(a.filter)},create:function(){},update:function(){},"delete":function(){},commit:function(){},abort:function(a){},createCallback:function(a,b,c){return OpenLayers.Function.bind(function(){a.apply(this,[b,c])},this)},CLASS_NAME:"OpenLayers.Protocol"}),OpenLayers.Protocol.Response=OpenLayers.Class({code:null,requestType:null,last:!0,features:null,data:null,reqFeatures:null,priv:null,error:null,initialize:function(a){OpenLayers.Util.extend(this,a)},success:function(){return 0<this.code},CLASS_NAME:"OpenLayers.Protocol.Response"}),OpenLayers.Protocol.Response.SUCCESS=1,OpenLayers.Protocol.Response.FAILURE=0,OpenLayers.Format.JSON=OpenLayers.Class(OpenLayers.Format,{indent:"    ",space:" ",newline:"\n",level:0,pretty:!1,nativeJSON:function(){return!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify)}(),read:function(a,b){var c;if(this.nativeJSON)c=JSON.parse(a,b);else try{if(/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))&&(c=eval("("+a+")"),"function"==typeof b)){var d=function(a,c){if(c&&"object"==typeof c)for(var e in c)c.hasOwnProperty(e)&&(c[e]=d(e,c[e]));return b(a,c)};c=d("",c)}}catch(e){}return this.keepData&&(this.data=c),c},write:function(a,b){this.pretty=!!b;var c=null,d=typeof a;if(this.serialize[d])try{c=!this.pretty&&this.nativeJSON?JSON.stringify(a):this.serialize[d].apply(this,[a])}catch(e){OpenLayers.Console.error("Trouble serializing: "+e)}return c},writeIndent:function(){var a=[];if(this.pretty)for(var b=0;b<this.level;++b)a.push(this.indent);return a.join("")},writeNewline:function(){return this.pretty?this.newline:""},writeSpace:function(){return this.pretty?this.space:""},serialize:{object:function(a){if(null==a)return"null";if(a.constructor==Date)return this.serialize.date.apply(this,[a]);if(a.constructor==Array)return this.serialize.array.apply(this,[a]);var b=["{"];this.level+=1;var c,d,e,f=!1;for(c in a)a.hasOwnProperty(c)&&(d=OpenLayers.Format.JSON.prototype.write.apply(this,[c,this.pretty]),e=OpenLayers.Format.JSON.prototype.write.apply(this,[a[c],this.pretty]),null!=d&&null!=e&&(f&&b.push(","),b.push(this.writeNewline(),this.writeIndent(),d,":",this.writeSpace(),e),f=!0));return this.level-=1,b.push(this.writeNewline(),this.writeIndent(),"}"),b.join("")},array:function(a){var b,c=["["];this.level+=1;for(var d=0,e=a.length;e>d;++d)b=OpenLayers.Format.JSON.prototype.write.apply(this,[a[d],this.pretty]),null!=b&&(d>0&&c.push(","),c.push(this.writeNewline(),this.writeIndent(),b));return this.level-=1,c.push(this.writeNewline(),this.writeIndent(),"]"),c.join("")},string:function(a){var b={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(a)?'"'+a.replace(/([\x00-\x1f\\"])/g,function(a,c){var d=b[c];return d?d:(d=c.charCodeAt(),"\\u00"+Math.floor(d/16).toString(16)+(d%16).toString(16))})+'"':'"'+a+'"'},number:function(a){return isFinite(a)?String(a):"null"},"boolean":function(a){return String(a)},date:function(a){function b(a){return 10>a?"0"+a:a}return'"'+a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())+"T"+b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())+'"'}},CLASS_NAME:"OpenLayers.Format.JSON"}),OpenLayers.Format.GeoJSON=OpenLayers.Class(OpenLayers.Format.JSON,{ignoreExtraDims:!1,read:function(a,b,c){b=b?b:"FeatureCollection";var d=null,e=null,e="string"==typeof a?OpenLayers.Format.JSON.prototype.read.apply(this,[a,c]):a;if(e){if("string"!=typeof e.type)OpenLayers.Console.error("Bad GeoJSON - no type: "+a);else if(this.isValidType(e,b))switch(b){case"Geometry":try{d=this.parseGeometry(e)}catch(f){OpenLayers.Console.error(f)}break;case"Feature":try{d=this.parseFeature(e),d.type="Feature"}catch(g){OpenLayers.Console.error(g)}break;case"FeatureCollection":switch(d=[],e.type){case"Feature":try{d.push(this.parseFeature(e))}catch(h){d=null,OpenLayers.Console.error(h)}break;case"FeatureCollection":for(a=0,b=e.features.length;b>a;++a)try{d.push(this.parseFeature(e.features[a]))}catch(i){d=null,OpenLayers.Console.error(i)}break;default:try{var j=this.parseGeometry(e);d.push(new OpenLayers.Feature.Vector(j))}catch(k){d=null,OpenLayers.Console.error(k)}}}}else OpenLayers.Console.error("Bad JSON: "+a);return d},isValidType:function(a,b){var c=!1;switch(b){case"Geometry":-1==OpenLayers.Util.indexOf("Point MultiPoint LineString MultiLineString Polygon MultiPolygon Box GeometryCollection".split(" "),a.type)?OpenLayers.Console.error("Unsupported geometry type: "+a.type):c=!0;break;case"FeatureCollection":c=!0;break;default:a.type==b?c=!0:OpenLayers.Console.error("Cannot convert types from "+a.type+" to "+b)}return c},parseFeature:function(a){var b,c,d;c=a.properties?a.properties:{},d=a.geometry&&a.geometry.bbox||a.bbox;try{b=this.parseGeometry(a.geometry)}catch(e){throw e}return b=new OpenLayers.Feature.Vector(b,c),d&&(b.bounds=OpenLayers.Bounds.fromArray(d)),a.id&&(b.fid=a.id),b},parseGeometry:function(a){if(null==a)return null;var b,c=!1;if("GeometryCollection"==a.type){if(!OpenLayers.Util.isArray(a.geometries))throw"GeometryCollection must have geometries array: "+a;b=a.geometries.length;for(var c=Array(b),d=0;b>d;++d)c[d]=this.parseGeometry.apply(this,[a.geometries[d]]);b=new OpenLayers.Geometry.Collection(c),c=!0}else{if(!OpenLayers.Util.isArray(a.coordinates))throw"Geometry must have coordinates array: "+a;if(!this.parseCoords[a.type.toLowerCase()])throw"Unsupported geometry type: "+a.type;try{b=this.parseCoords[a.type.toLowerCase()].apply(this,[a.coordinates])}catch(e){throw e}}return this.internalProjection&&this.externalProjection&&!c&&b.transform(this.externalProjection,this.internalProjection),b},parseCoords:{point:function(a){if(0==this.ignoreExtraDims&&2!=a.length)throw"Only 2D points are supported: "+a;return new OpenLayers.Geometry.Point(a[0],a[1])},multipoint:function(a){for(var b=[],c=null,d=0,e=a.length;e>d;++d){try{c=this.parseCoords.point.apply(this,[a[d]])}catch(f){throw f}b.push(c)}return new OpenLayers.Geometry.MultiPoint(b)},linestring:function(a){for(var b=[],c=null,d=0,e=a.length;e>d;++d){try{c=this.parseCoords.point.apply(this,[a[d]])}catch(f){throw f}b.push(c)}return new OpenLayers.Geometry.LineString(b)},multilinestring:function(a){for(var b=[],c=null,d=0,e=a.length;e>d;++d){try{c=this.parseCoords.linestring.apply(this,[a[d]])}catch(f){throw f}b.push(c)}return new OpenLayers.Geometry.MultiLineString(b)},polygon:function(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e){try{c=this.parseCoords.linestring.apply(this,[a[e]])}catch(g){throw g}b=new OpenLayers.Geometry.LinearRing(c.components),d.push(b)}return new OpenLayers.Geometry.Polygon(d)},multipolygon:function(a){for(var b=[],c=null,d=0,e=a.length;e>d;++d){try{c=this.parseCoords.polygon.apply(this,[a[d]])}catch(f){throw f}b.push(c)}return new OpenLayers.Geometry.MultiPolygon(b)},box:function(a){if(2!=a.length)throw"GeoJSON box coordinates must have 2 elements";return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(a[0][0],a[0][1]),new OpenLayers.Geometry.Point(a[1][0],a[0][1]),new OpenLayers.Geometry.Point(a[1][0],a[1][1]),new OpenLayers.Geometry.Point(a[0][0],a[1][1]),new OpenLayers.Geometry.Point(a[0][0],a[0][1])])])}},write:function(a,b){var c={type:null};if(OpenLayers.Util.isArray(a)){c.type="FeatureCollection";var d=a.length;c.features=Array(d);for(var e=0;d>e;++e){var f=a[e];if(!f instanceof OpenLayers.Feature.Vector)throw"FeatureCollection only supports collections of features: "+f;c.features[e]=this.extract.feature.apply(this,[f])}}else 0==a.CLASS_NAME.indexOf("OpenLayers.Geometry")?c=this.extract.geometry.apply(this,[a]):a instanceof OpenLayers.Feature.Vector&&(c=this.extract.feature.apply(this,[a]),a.layer&&a.layer.projection&&(c.crs=this.createCRSObject(a)));return OpenLayers.Format.JSON.prototype.write.apply(this,[c,b])},createCRSObject:function(a){a=a.layer.projection.toString();var b={};return a.match(/epsg:/i)&&(a=parseInt(a.substring(a.indexOf(":")+1)),b=4326==a?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+a}}),b},extract:{feature:function(a){var b=this.extract.geometry.apply(this,[a.geometry]),b={type:"Feature",properties:a.attributes,geometry:b};return null!=a.fid&&(b.id=a.fid),b},geometry:function(a){if(null==a)return null;this.internalProjection&&this.externalProjection&&(a=a.clone(),a.transform(this.internalProjection,this.externalProjection));var b=a.CLASS_NAME.split(".")[2];return a=this.extract[b.toLowerCase()].apply(this,[a]),"Collection"==b?{type:"GeometryCollection",geometries:a}:{type:b,coordinates:a}},point:function(a){return[a.x,a.y]},multipoint:function(a){for(var b=[],c=0,d=a.components.length;d>c;++c)b.push(this.extract.point.apply(this,[a.components[c]]));return b},linestring:function(a){for(var b=[],c=0,d=a.components.length;d>c;++c)b.push(this.extract.point.apply(this,[a.components[c]]));return b},multilinestring:function(a){for(var b=[],c=0,d=a.components.length;d>c;++c)b.push(this.extract.linestring.apply(this,[a.components[c]]));return b},polygon:function(a){for(var b=[],c=0,d=a.components.length;d>c;++c)b.push(this.extract.linestring.apply(this,[a.components[c]]));return b},multipolygon:function(a){for(var b=[],c=0,d=a.components.length;d>c;++c)b.push(this.extract.polygon.apply(this,[a.components[c]]));return b},collection:function(a){for(var b=a.components.length,c=Array(b),d=0;b>d;++d)c[d]=this.extract.geometry.apply(this,[a.components[d]]);return c}},CLASS_NAME:"OpenLayers.Format.GeoJSON"}),OpenLayers.Protocol.Script=OpenLayers.Class(OpenLayers.Protocol,{url:null,params:null,callback:null,callbackTemplate:"OpenLayers.Protocol.Script.registry.${id}",callbackKey:"callback",callbackPrefix:"",scope:null,format:null,pendingRequests:null,srsInBBOX:!1,initialize:function(a){if(a=a||{},this.params={},this.pendingRequests={},OpenLayers.Protocol.prototype.initialize.apply(this,arguments),this.format||(this.format=new OpenLayers.Format.GeoJSON),!this.filterToParams&&OpenLayers.Format.QueryStringFilter){var b=new OpenLayers.Format.QueryStringFilter({srsInBBOX:this.srsInBBOX});this.filterToParams=function(a,c){return b.write(a,c)}}},read:function(a){OpenLayers.Protocol.prototype.read.apply(this,arguments),a=OpenLayers.Util.applyDefaults(a,this.options),a.params=OpenLayers.Util.applyDefaults(a.params,this.options.params),a.filter&&this.filterToParams&&(a.params=this.filterToParams(a.filter,a.params));var b=new OpenLayers.Protocol.Response({requestType:"read"}),c=this.createRequest(a.url,a.params,OpenLayers.Function.bind(function(c){b.data=c,this.handleRead(b,a)},this));return b.priv=c,b},createRequest:function(a,b,c){c=OpenLayers.Protocol.Script.register(c);var d=OpenLayers.String.format(this.callbackTemplate,{id:c});return b=OpenLayers.Util.extend({},b),b[this.callbackKey]=this.callbackPrefix+d,a=OpenLayers.Util.urlAppend(a,OpenLayers.Util.getParameterString(b)),b=document.createElement("script"),b.type="text/javascript",b.src=a,b.id="OpenLayers_Protocol_Script_"+c,this.pendingRequests[b.id]=b,document.getElementsByTagName("head")[0].appendChild(b),b},destroyRequest:function(a){OpenLayers.Protocol.Script.unregister(a.id.split("_").pop()),delete this.pendingRequests[a.id],a.parentNode&&a.parentNode.removeChild(a)},handleRead:function(a,b){this.handleResponse(a,b)},handleResponse:function(a,b){b.callback&&(a.data?(a.features=this.parseFeatures(a.data),a.code=OpenLayers.Protocol.Response.SUCCESS):a.code=OpenLayers.Protocol.Response.FAILURE,this.destroyRequest(a.priv),b.callback.call(b.scope,a))},parseFeatures:function(a){return this.format.read(a)},abort:function(a){if(a)this.destroyRequest(a.priv);else for(var b in this.pendingRequests)this.destroyRequest(this.pendingRequests[b])},destroy:function(){this.abort(),delete this.params,delete this.format,OpenLayers.Protocol.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Protocol.Script"}),function(){var a=OpenLayers.Protocol.Script,b=0;a.registry={},a.register=function(c){var d="c"+ ++b;return a.registry[d]=function(){c.apply(this,arguments)},d},a.unregister=function(b){delete a.registry[b]}}(),OpenLayers.Format.EncodedPolyline=OpenLayers.Class(OpenLayers.Format,{geometryType:"linestring",initialize:function(a){OpenLayers.Format.prototype.initialize.apply(this,[a])},read:function(a){var b;if("linestring"==this.geometryType)b=OpenLayers.Geometry.LineString;else if("linearring"==this.geometryType)b=OpenLayers.Geometry.LinearRing;else if("multipoint"==this.geometryType)b=OpenLayers.Geometry.MultiPoint;else if("point"!=this.geometryType&&"polygon"!=this.geometryType)return null;a=this.decodeDeltas(a,2);for(var c=a.length,d=[],e=0;c>e+1;){var f=a[e++],g=a[e++];d.push(new OpenLayers.Geometry.Point(g,f))}return new OpenLayers.Feature.Vector("point"==this.geometryType?d[0]:"polygon"==this.geometryType?new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(d)]):new b(d))},decode:function(a,b,c){a=this.decodeDeltas(a,b,c||1e5),c=a.length;for(var d=[],e=0;c>e+(b-1);){for(var f=[],g=0;b>g;++g)f.push(a[e++]);d.push(f)}return d},write:function(a){a=(a.constructor==Array?a[0]:a).geometry;var b=a.CLASS_NAME.split(".")[2].toLowerCase();if("point"==b)a=Array(a);else if("linestring"==b||"linearring"==b||"multipoint"==b)a=a.components;else{if("polygon"!=b)return null;a=a.components[0].components}for(var b=[],c=a.length,d=0;c>d;++d){var e=a[d];b.push(e.y),b.push(e.x)}return this.encodeDeltas(b,2)},encode:function(a,b,c){c=c||1e5;for(var d=[],e=a.length,f=0;e>f;++f)for(var g=a[f],h=0;b>h;++h)d.push(g[h]);return this.encodeDeltas(d,b,c)},encodeDeltas:function(a,b,c){var d,e=Array(b);for(d=0;b>d;++d)e[d]=0;for(var f=a.length,g=0;f>g;)for(d=0;b>d;++d,++g){var h=a[g],i=h-e[d];e[d]=h,a[g]=i}return this.encodeFloats(a,c||1e5)},decodeDeltas:function(a,b,c){var d,e=Array(b);for(d=0;b>d;++d)e[d]=0;a=this.decodeFloats(a,c||1e5),c=a.length;for(var f=0;c>f;)for(d=0;b>d;++d,++f)e[d]+=a[f],a[f]=e[d];return a},encodeFloats:function(a,b){for(var c=b||1e5,d=a.length,e=0;d>e;++e)a[e]=Math.round(a[e]*c);return this.encodeSignedIntegers(a)},decodeFloats:function(a,b){for(var c=b||1e5,d=this.decodeSignedIntegers(a),e=d.length,f=0;e>f;++f)d[f]/=c;return d},encodeSignedIntegers:function(a){for(var b=a.length,c=0;b>c;++c){var d=a[c],e=d<<1;0>d&&(e=~e),a[c]=e}return this.encodeUnsignedIntegers(a)},decodeSignedIntegers:function(a){a=this.decodeUnsignedIntegers(a);for(var b=a.length,c=0;b>c;++c){var d=a[c];a[c]=1&d?~(d>>1):d>>1}return a},encodeUnsignedIntegers:function(a){for(var b="",c=a.length,d=0;c>d;++d)b+=this.encodeUnsignedInteger(a[d]);return b},decodeUnsignedIntegers:function(a){for(var b=[],c=0,d=0,e=a.length,f=0;e>f;++f){var g=a.charCodeAt(f)-63,c=c|(31&g)<<d;32>g?(b.push(c),d=c=0):d+=5}return b},encodeFloat:function(a,b){return a=Math.round(a*(b||1e5)),this.encodeSignedInteger(a)},decodeFloat:function(a,b){return this.decodeSignedInteger(a)/(b||1e5)},encodeSignedInteger:function(a){var b=a<<1;return 0>a&&(b=~b),this.encodeUnsignedInteger(b)},decodeSignedInteger:function(a){return a=this.decodeUnsignedInteger(a),1&a?~(a>>1):a>>1},encodeUnsignedInteger:function(a){for(var b,c="";a>=32;)b=(32|31&a)+63,c+=String.fromCharCode(b),a>>=5;return c+=String.fromCharCode(a+63)},decodeUnsignedInteger:function(a){for(var b=0,c=0,d=a.length,e=0;d>e;++e){var f=a.charCodeAt(e)-63,b=b|(31&f)<<c;if(32>f)break;c+=5}return b},CLASS_NAME:"OpenLayers.Format.EncodedPolyline"}),OpenLayers.Control.Panel=OpenLayers.Class(OpenLayers.Control,{controls:null,autoActivate:!0,defaultControl:null,saveState:!1,allowDepress:!1,activeState:null,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,[a]),this.controls=[],this.activeState={}},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onButtonClick),OpenLayers.Control.prototype.destroy.apply(this,arguments);for(var a,b=this.controls.length-1;b>=0;b--)a=this.controls[b],a.events&&a.events.un({activate:this.iconOn,deactivate:this.iconOff}),a.panel_div=null;this.activeState=null},activate:function(){if(OpenLayers.Control.prototype.activate.apply(this,arguments)){for(var a,b=0,c=this.controls.length;c>b;b++)a=this.controls[b],(a===this.defaultControl||this.saveState&&this.activeState[a.id])&&a.activate();return!0===this.saveState&&(this.defaultControl=null),this.redraw(),!0}return!1},deactivate:function(){if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){for(var a,b=0,c=this.controls.length;c>b;b++)a=this.controls[b],this.activeState[a.id]=a.deactivate();return this.redraw(),!0}return!1},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.outsideViewport?(this.events.attachToElement(this.div),this.events.register("buttonclick",this,this.onButtonClick)):this.map.events.register("buttonclick",this,this.onButtonClick),this.addControlsToMap(this.controls),this.div},redraw:function(){for(var a=this.div.childNodes.length-1;a>=0;a--)this.div.removeChild(this.div.childNodes[a]);if(this.div.innerHTML="",this.active)for(var a=0,b=this.controls.length;b>a;a++)this.div.appendChild(this.controls[a].panel_div)},activateControl:function(a){if(!this.active)return!1;if(a.type==OpenLayers.Control.TYPE_BUTTON)a.trigger();else if(a.type==OpenLayers.Control.TYPE_TOGGLE)a.active?a.deactivate():a.activate();else if(this.allowDepress&&a.active)a.deactivate();else{for(var b,c=0,d=this.controls.length;d>c;c++)b=this.controls[c],b==a||b.type!==OpenLayers.Control.TYPE_TOOL&&null!=b.type||b.deactivate();a.activate()}},addControls:function(a){OpenLayers.Util.isArray(a)||(a=[a]),this.controls=this.controls.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b],e=this.createControlMarkup(d);OpenLayers.Element.addClass(e,d.displayClass+"ItemInactive"),OpenLayers.Element.addClass(e,"olButton"),""==d.title||e.title||(e.title=d.title),d.panel_div=e}this.map&&(this.addControlsToMap(a),this.redraw())},createControlMarkup:function(a){return document.createElement("div")},addControlsToMap:function(a){for(var b,c=0,d=a.length;d>c;c++)b=a[c],!0===b.autoActivate?(b.autoActivate=!1,this.map.addControl(b),
b.autoActivate=!0):(this.map.addControl(b),b.deactivate()),b.events.on({activate:this.iconOn,deactivate:this.iconOff})},iconOn:function(){var a=this.panel_div;a.className=a.className.replace(RegExp("\\b("+this.displayClass+"Item)Inactive\\b"),"$1Active")},iconOff:function(){var a=this.panel_div;a.className=a.className.replace(RegExp("\\b("+this.displayClass+"Item)Active\\b"),"$1Inactive")},onButtonClick:function(a){var b=this.controls;a=a.buttonElement;for(var c=b.length-1;c>=0;--c)if(b[c].panel_div===a){this.activateControl(b[c]);break}},getControlsBy:function(a,b){var c="function"==typeof b.test;return OpenLayers.Array.filter(this.controls,function(d){return d[a]==b||c&&b.test(d[a])})},getControlsByName:function(a){return this.getControlsBy("name",a)},getControlsByClass:function(a){return this.getControlsBy("CLASS_NAME",a)},CLASS_NAME:"OpenLayers.Control.Panel"}),OpenLayers.Control.Button=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_BUTTON,trigger:function(){},CLASS_NAME:"OpenLayers.Control.Button"}),OpenLayers.Control.ZoomIn=OpenLayers.Class(OpenLayers.Control.Button,{trigger:function(){this.map&&this.map.zoomIn()},CLASS_NAME:"OpenLayers.Control.ZoomIn"}),OpenLayers.Control.ZoomOut=OpenLayers.Class(OpenLayers.Control.Button,{trigger:function(){this.map&&this.map.zoomOut()},CLASS_NAME:"OpenLayers.Control.ZoomOut"}),OpenLayers.Control.ZoomToMaxExtent=OpenLayers.Class(OpenLayers.Control.Button,{trigger:function(){this.map&&this.map.zoomToMaxExtent()},CLASS_NAME:"OpenLayers.Control.ZoomToMaxExtent"}),OpenLayers.Control.ZoomPanel=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(a){OpenLayers.Control.Panel.prototype.initialize.apply(this,[a]),this.addControls([new OpenLayers.Control.ZoomIn,new OpenLayers.Control.ZoomToMaxExtent,new OpenLayers.Control.ZoomOut])},CLASS_NAME:"OpenLayers.Control.ZoomPanel"}),OpenLayers.Layer.HTTPRequest=OpenLayers.Class(OpenLayers.Layer,{URL_HASH_FACTOR:(Math.sqrt(5)-1)/2,url:null,params:null,reproject:!1,initialize:function(a,b,c,d){OpenLayers.Layer.prototype.initialize.apply(this,[a,d]),this.url=b,this.params||(this.params=OpenLayers.Util.extend({},c))},destroy:function(){this.params=this.url=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(a){return null==a&&(a=new OpenLayers.Layer.HTTPRequest(this.name,this.url,this.params,this.getOptions())),a=OpenLayers.Layer.prototype.clone.apply(this,[a])},setUrl:function(a){this.url=a},mergeNewParams:function(a){return this.params=OpenLayers.Util.extend(this.params,a),a=this.redraw(),null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"params"}),a},redraw:function(a){return a?this.mergeNewParams({_olSalt:Math.random()}):OpenLayers.Layer.prototype.redraw.apply(this,[])},selectUrl:function(a,b){for(var c=1,d=0,e=a.length;e>d;d++)c*=a.charCodeAt(d)*this.URL_HASH_FACTOR,c-=Math.floor(c);return b[Math.floor(c*b.length)]},getFullRequestString:function(a,b){var c=b||this.url,d=OpenLayers.Util.extend({},this.params),d=OpenLayers.Util.extend(d,a),e=OpenLayers.Util.getParameterString(d);OpenLayers.Util.isArray(c)&&(c=this.selectUrl(e,c));var f,e=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(c));for(f in d)f.toUpperCase()in e&&delete d[f];return e=OpenLayers.Util.getParameterString(d),OpenLayers.Util.urlAppend(c,e)},CLASS_NAME:"OpenLayers.Layer.HTTPRequest"}),OpenLayers.Tile=OpenLayers.Class({events:null,eventListeners:null,id:null,layer:null,url:null,bounds:null,size:null,position:null,isLoading:!1,initialize:function(a,b,c,d,e,f){this.layer=a,this.position=b.clone(),this.setBounds(c),this.url=d,e&&(this.size=e.clone()),this.id=OpenLayers.Util.createUniqueID("Tile_"),OpenLayers.Util.extend(this,f),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)},unload:function(){this.isLoading&&(this.isLoading=!1,this.events.triggerEvent("unload"))},destroy:function(){this.position=this.size=this.bounds=this.layer=null,this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=this.eventListeners=null},draw:function(a){a||this.clear();var b=this.shouldDraw();return b&&!a&&!1===this.events.triggerEvent("beforedraw")&&(b=null),b},shouldDraw:function(){var a=!1,b=this.layer.maxExtent;if(b){var c=this.layer.map,c=c.baseLayer.wrapDateLine&&c.getMaxExtent();this.bounds.intersectsBounds(b,{inclusive:!1,worldBounds:c})&&(a=!0)}return a||this.layer.displayOutsideMaxExtent},setBounds:function(a){if(a=a.clone(),this.layer.map.baseLayer.wrapDateLine){var b=this.layer.map.getMaxExtent(),c=this.layer.map.getResolution();a=a.wrapDateLine(b,{leftTolerance:c,rightTolerance:c})}this.bounds=a},moveTo:function(a,b,c){null==c&&(c=!0),this.setBounds(a),this.position=b.clone(),c&&this.draw()},clear:function(a){},CLASS_NAME:"OpenLayers.Tile"}),OpenLayers.Tile.Image=OpenLayers.Class(OpenLayers.Tile,{url:null,imgDiv:null,frame:null,imageReloadAttempts:null,layerAlphaHack:null,asyncRequestId:null,maxGetUrlLength:null,canvasContext:null,crossOriginKeyword:null,initialize:function(a,b,c,d,e,f){OpenLayers.Tile.prototype.initialize.apply(this,arguments),this.url=d,this.layerAlphaHack=this.layer.alpha&&OpenLayers.Util.alphaHack(),(null!=this.maxGetUrlLength||this.layer.gutter||this.layerAlphaHack)&&(this.frame=document.createElement("div"),this.frame.style.position="absolute",this.frame.style.overflow="hidden"),null!=this.maxGetUrlLength&&OpenLayers.Util.extend(this,OpenLayers.Tile.Image.IFrame)},destroy:function(){this.imgDiv&&(this.clear(),this.frame=this.imgDiv=null),this.asyncRequestId=null,OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var a=OpenLayers.Tile.prototype.draw.apply(this,arguments);return a?(this.layer!=this.layer.map.baseLayer&&this.layer.reproject&&(this.bounds=this.getBoundsFromBaseLayer(this.position)),this.isLoading?this._loadEvent="reload":(this.isLoading=!0,this._loadEvent="loadstart"),this.renderTile(),this.positionTile()):!1===a&&this.unload(),a},renderTile:function(){if(this.layer.async){var a=this.asyncRequestId=(this.asyncRequestId||0)+1;this.layer.getURLasync(this.bounds,function(b){a==this.asyncRequestId&&(this.url=b,this.initImage())},this)}else this.url=this.layer.getURL(this.bounds),this.initImage()},positionTile:function(){var a=this.getTile().style,b=this.frame?this.size:this.layer.getImageSize(this.bounds),c=1;this.layer instanceof OpenLayers.Layer.Grid&&(c=this.layer.getServerResolution()/this.layer.map.getResolution()),a.left=this.position.x+"px",a.top=this.position.y+"px",a.width=Math.round(c*b.w)+"px",a.height=Math.round(c*b.h)+"px"},clear:function(){OpenLayers.Tile.prototype.clear.apply(this,arguments);var a=this.imgDiv;if(a){var b=this.getTile();b.parentNode===this.layer.div&&this.layer.div.removeChild(b),this.setImgSrc(),!0===this.layerAlphaHack&&(a.style.filter=""),OpenLayers.Element.removeClass(a,"olImageLoadError")}this.canvasContext=null},getImage:function(){if(!this.imgDiv){this.imgDiv=OpenLayers.Tile.Image.IMAGE.cloneNode(!1);var a=this.imgDiv.style;if(this.frame){var b=0,c=0;this.layer.gutter&&(b=100*(this.layer.gutter/this.layer.tileSize.w),c=100*(this.layer.gutter/this.layer.tileSize.h)),a.left=-b+"%",a.top=-c+"%",a.width=2*b+100+"%",a.height=2*c+100+"%"}a.visibility="hidden",a.opacity=0,1>this.layer.opacity&&(a.filter="alpha(opacity="+100*this.layer.opacity+")"),a.position="absolute",this.layerAlphaHack&&(a.paddingTop=a.height,a.height="0",a.width="100%"),this.frame&&this.frame.appendChild(this.imgDiv)}return this.imgDiv},setImage:function(a){this.imgDiv=a},initImage:function(){if(this.url||this.imgDiv){this.events.triggerEvent("beforeload"),this.layer.div.appendChild(this.getTile()),this.events.triggerEvent(this._loadEvent);var a=this.getImage(),b=a.getAttribute("src")||"";this.url&&OpenLayers.Util.isEquivalentUrl(b,this.url)?this._loadTimeout=window.setTimeout(OpenLayers.Function.bind(this.onImageLoad,this),0):(this.stopLoading(),this.crossOriginKeyword&&a.removeAttribute("crossorigin"),OpenLayers.Event.observe(a,"load",OpenLayers.Function.bind(this.onImageLoad,this)),OpenLayers.Event.observe(a,"error",OpenLayers.Function.bind(this.onImageError,this)),this.imageReloadAttempts=0,this.setImgSrc(this.url))}else this.isLoading=!1},setImgSrc:function(a){var b=this.imgDiv;a?(b.style.visibility="hidden",b.style.opacity=0,this.crossOriginKeyword&&("data:"!==a.substr(0,5)?b.setAttribute("crossorigin",this.crossOriginKeyword):b.removeAttribute("crossorigin")),b.src=a):(this.stopLoading(),this.imgDiv=null,b.parentNode&&b.parentNode.removeChild(b))},getTile:function(){return this.frame?this.frame:this.getImage()},createBackBuffer:function(){if(this.imgDiv&&!this.isLoading){var a;return this.frame?(a=this.frame.cloneNode(!1),a.appendChild(this.imgDiv)):a=this.imgDiv,this.imgDiv=null,a}},onImageLoad:function(){var a=this.imgDiv;this.stopLoading(),a.style.visibility="inherit",a.style.opacity=this.layer.opacity,this.isLoading=!1,this.canvasContext=null,this.events.triggerEvent("loadend"),!0===this.layerAlphaHack&&(a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a.src+"', sizingMethod='scale')")},onImageError:function(){var a=this.imgDiv;null!=a.src&&(this.imageReloadAttempts++,this.imageReloadAttempts<=OpenLayers.IMAGE_RELOAD_ATTEMPTS?this.setImgSrc(this.layer.getURL(this.bounds)):(OpenLayers.Element.addClass(a,"olImageLoadError"),this.events.triggerEvent("loaderror"),this.onImageLoad()))},stopLoading:function(){OpenLayers.Event.stopObservingElement(this.imgDiv),window.clearTimeout(this._loadTimeout),delete this._loadTimeout},getCanvasContext:function(){if(OpenLayers.CANVAS_SUPPORTED&&this.imgDiv&&!this.isLoading){if(!this.canvasContext){var a=document.createElement("canvas");a.width=this.size.w,a.height=this.size.h,this.canvasContext=a.getContext("2d"),this.canvasContext.drawImage(this.imgDiv,0,0)}return this.canvasContext}},CLASS_NAME:"OpenLayers.Tile.Image"}),OpenLayers.Tile.Image.IMAGE=function(){var a=new Image;return a.className="olTileImage",a.galleryImg="no",a}(),OpenLayers.Layer.Grid=OpenLayers.Class(OpenLayers.Layer.HTTPRequest,{tileSize:null,tileOriginCorner:"bl",tileOrigin:null,tileOptions:null,tileClass:OpenLayers.Tile.Image,grid:null,singleTile:!1,ratio:1.5,buffer:0,transitionEffect:"resize",numLoadingTiles:0,serverResolutions:null,loading:!1,backBuffer:null,gridResolution:null,backBufferResolution:null,backBufferLonLat:null,backBufferTimerId:null,removeBackBufferDelay:null,className:null,gridLayout:null,rowSign:null,transitionendEvents:["transitionend","webkitTransitionEnd","otransitionend","oTransitionEnd"],initialize:function(a,b,c,d){OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this,arguments),this.grid=[],this._removeBackBuffer=OpenLayers.Function.bind(this.removeBackBuffer,this),this.initProperties(),this.rowSign="t"===this.tileOriginCorner.substr(0,1)?1:-1},initProperties:function(){void 0===this.options.removeBackBufferDelay&&(this.removeBackBufferDelay=this.singleTile?0:2500),void 0===this.options.className&&(this.className=this.singleTile?"olLayerGridSingleTile":"olLayerGrid")},setMap:function(a){OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this,a),OpenLayers.Element.addClass(this.div,this.className)},removeMap:function(a){this.removeBackBuffer()},destroy:function(){this.removeBackBuffer(),this.clearGrid(),this.tileSize=this.grid=null,OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this,arguments)},clearGrid:function(){if(this.grid){for(var a=0,b=this.grid.length;b>a;a++)for(var c=this.grid[a],d=0,e=c.length;e>d;d++)this.destroyTile(c[d]);this.grid=[],this.gridLayout=this.gridResolution=null}},addOptions:function(a,b){var c=void 0!==a.singleTile&&a.singleTile!==this.singleTile;OpenLayers.Layer.HTTPRequest.prototype.addOptions.apply(this,arguments),this.map&&c&&(this.initProperties(),this.clearGrid(),this.tileSize=this.options.tileSize,this.setTileSize(),this.moveTo(null,!0))},clone:function(a){return null==a&&(a=new OpenLayers.Layer.Grid(this.name,this.url,this.params,this.getOptions())),a=OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this,[a]),null!=this.tileSize&&(a.tileSize=this.tileSize.clone()),a.grid=[],a.gridResolution=null,a.backBuffer=null,a.backBufferTimerId=null,a.loading=!1,a.numLoadingTiles=0,a},moveTo:function(a,b,c){if(OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this,arguments),a=a||this.map.getExtent(),null!=a){var d=!this.grid.length||b,e=this.getTilesBounds(),f=this.map.getResolution();this.getServerResolution(f),this.singleTile?(d||!c&&!e.containsBounds(a))&&(b&&"resize"!==this.transitionEffect&&this.removeBackBuffer(),b&&"resize"!==this.transitionEffect||this.applyBackBuffer(f),this.initSingleTile(a)):(d=d||!e.intersectsBounds(a,{worldBounds:this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent()}))?(!b||"resize"!==this.transitionEffect&&this.gridResolution!==f||this.applyBackBuffer(f),this.initGriddedTiles(a)):this.moveGriddedTiles()}},getTileData:function(a){var b=null,c=a.lon,d=a.lat,e=this.grid.length;if(this.map&&e){var f=this.map.getResolution();a=this.tileSize.w;var g=this.tileSize.h,h=this.grid[0][0].bounds,i=h.left,h=h.top;if(i>c&&this.map.baseLayer.wrapDateLine)var j=this.map.getMaxExtent().getWidth(),k=Math.ceil((i-c)/j),c=c+j*k;c=(c-i)/(f*a),d=(h-d)/(f*g),f=Math.floor(c),i=Math.floor(d),i>=0&&e>i&&(e=this.grid[i][f])&&(b={tile:e,i:Math.floor((c-f)*a),j:Math.floor((d-i)*g)})}return b},destroyTile:function(a){this.removeTileMonitoringHooks(a),a.destroy()},getServerResolution:function(a){var b=Number.POSITIVE_INFINITY;if(a=a||this.map.getResolution(),this.serverResolutions&&-1===OpenLayers.Util.indexOf(this.serverResolutions,a)){var c,d,e,f;for(c=this.serverResolutions.length-1;c>=0&&(e=this.serverResolutions[c],d=Math.abs(e-a),!(d>b));c--)b=d,f=e;a=f}return a},getServerZoom:function(){var a=this.getServerResolution();return this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,a):this.map.getZoomForResolution(a)+(this.zoomOffset||0)},applyBackBuffer:function(a){null!==this.backBufferTimerId&&this.removeBackBuffer();var b=this.backBuffer;if(!b){if(b=this.createBackBuffer(),!b)return;a===this.gridResolution?this.div.insertBefore(b,this.div.firstChild):this.map.baseLayer.div.parentNode.insertBefore(b,this.map.baseLayer.div),this.backBuffer=b;var c=this.grid[0][0].bounds;this.backBufferLonLat={lon:c.left,lat:c.top},this.backBufferResolution=this.gridResolution}for(var d,c=this.backBufferResolution/a,e=b.childNodes,f=e.length-1;f>=0;--f)d=e[f],d.style.top=(c*d._i*d._h|0)+"px",d.style.left=(c*d._j*d._w|0)+"px",d.style.width=Math.round(c*d._w)+"px",d.style.height=Math.round(c*d._h)+"px";a=this.getViewPortPxFromLonLat(this.backBufferLonLat,a),c=this.map.layerContainerOriginPx.y,b.style.left=Math.round(a.x-this.map.layerContainerOriginPx.x)+"px",b.style.top=Math.round(a.y-c)+"px"},createBackBuffer:function(){var a;if(0<this.grid.length){a=document.createElement("div"),a.id=this.div.id+"_bb",a.className="olBackBuffer",a.style.position="absolute";var b=this.map;a.style.zIndex="resize"===this.transitionEffect?this.getZIndex()-1:b.Z_INDEX_BASE.BaseLayer-(b.getNumLayers()-b.getLayerIndex(this));for(var b=0,c=this.grid.length;c>b;b++)for(var d=0,e=this.grid[b].length;e>d;d++){var f=this.grid[b][d],g=this.grid[b][d].createBackBuffer();g&&(g._i=b,g._j=d,g._w=f.size.w,g._h=f.size.h,g.id=f.id+"_bb",a.appendChild(g))}}return a},removeBackBuffer:function(){if(this._transitionElement){for(var a=this.transitionendEvents.length-1;a>=0;--a)OpenLayers.Event.stopObserving(this._transitionElement,this.transitionendEvents[a],this._removeBackBuffer);delete this._transitionElement}this.backBuffer&&(this.backBuffer.parentNode&&this.backBuffer.parentNode.removeChild(this.backBuffer),this.backBufferResolution=this.backBuffer=null,null!==this.backBufferTimerId&&(window.clearTimeout(this.backBufferTimerId),this.backBufferTimerId=null))},moveByPx:function(a,b){this.singleTile||this.moveGriddedTiles()},setTileSize:function(a){this.singleTile&&(a=this.map.getSize(),a.h=parseInt(a.h*this.ratio,10),a.w=parseInt(a.w*this.ratio,10)),OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this,[a])},getTilesBounds:function(){var a=null,b=this.grid.length;if(b)var a=this.grid[b-1][0].bounds,b=this.grid[0].length*a.getWidth(),c=this.grid.length*a.getHeight(),a=new OpenLayers.Bounds(a.left,a.bottom,a.left+b,a.bottom+c);return a},initSingleTile:function(a){this.events.triggerEvent("retile");var b=a.getCenterLonLat(),c=a.getWidth()*this.ratio;a=a.getHeight()*this.ratio,b=new OpenLayers.Bounds(b.lon-c/2,b.lat-a/2,b.lon+c/2,b.lat+a/2),c=this.map.getLayerPxFromLonLat({lon:b.left,lat:b.top}),this.grid.length||(this.grid[0]=[]),(a=this.grid[0][0])?a.moveTo(b,c):(a=this.addTile(b,c),this.addTileMonitoringHooks(a),a.draw(),this.grid[0][0]=a),this.removeExcessTiles(1,1),this.gridResolution=this.getServerResolution()},calculateGridLayout:function(a,b,c){var d=c*this.tileSize.w;c*=this.tileSize.h;var e=Math.floor((a.left-b.lon)/d)-this.buffer,f=this.rowSign;return a=Math[~f?"floor":"ceil"](f*(b.lat-a.top+c)/c)-this.buffer*f,{tilelon:d,tilelat:c,startcol:e,startrow:a}},getTileOrigin:function(){var a=this.tileOrigin;if(!a)var a=this.getMaxExtent(),b={tl:["left","top"],tr:["right","top"],bl:["left","bottom"],br:["right","bottom"]}[this.tileOriginCorner],a=new OpenLayers.LonLat(a[b[0]],a[b[1]]);return a},getTileBoundsForGridIndex:function(a,b){var c=this.getTileOrigin(),d=this.gridLayout,e=d.tilelon,f=d.tilelat,g=d.startcol,d=d.startrow,h=this.rowSign;return new OpenLayers.Bounds(c.lon+(g+b)*e,c.lat-(d+a*h)*f*h,c.lon+(g+b+1)*e,c.lat-(d+(a-1)*h)*f*h)},initGriddedTiles:function(a){this.events.triggerEvent("retile");var b=this.map.getSize(),c=this.getTileOrigin(),d=this.map.getResolution(),e=this.getServerResolution(),f=d/e,d=this.tileSize.w/f,f=this.tileSize.h/f,g=Math.ceil(b.h/f)+2*this.buffer+1,b=Math.ceil(b.w/d)+2*this.buffer+1;this.gridLayout=e=this.calculateGridLayout(a,c,e);var c=e.tilelon,h=e.tilelat,e=this.map.layerContainerOriginPx.x,i=this.map.layerContainerOriginPx.y,j=this.getTileBoundsForGridIndex(0,0),k=this.map.getViewPortPxFromLonLat(new OpenLayers.LonLat(j.left,j.top));k.x=Math.round(k.x)-e,k.y=Math.round(k.y)-i;var e=[],i=this.map.getCenter(),l=0;do{var m=this.grid[l];m||(m=[],this.grid.push(m));var n=0;do{var j=this.getTileBoundsForGridIndex(l,n),o=k.clone();o.x+=n*Math.round(d),o.y+=l*Math.round(f);var p=m[n];p?p.moveTo(j,o,!1):(p=this.addTile(j,o),this.addTileMonitoringHooks(p),m.push(p)),o=j.getCenterLonLat(),e.push({tile:p,distance:Math.pow(o.lon-i.lon,2)+Math.pow(o.lat-i.lat,2)}),n+=1}while(j.right<=a.right+c*this.buffer||b>n);l+=1}while(j.bottom>=a.bottom-h*this.buffer||g>l);for(this.removeExcessTiles(l,n),this.gridResolution=d=this.getServerResolution(),e.sort(function(a,b){return a.distance-b.distance}),a=0,d=e.length;d>a;++a)e[a].tile.draw()},getMaxExtent:function(){return this.maxExtent},addTile:function(a,b){var c=new this.tileClass(this,b,a,null,this.tileSize,this.tileOptions);return this.events.triggerEvent("addtile",{tile:c}),c},addTileMonitoringHooks:function(a){a.onLoadStart=function(){!1===this.loading&&(this.loading=!0,this.events.triggerEvent("loadstart")),this.events.triggerEvent("tileloadstart",{tile:a}),this.numLoadingTiles++,!this.singleTile&&this.backBuffer&&this.gridResolution===this.backBufferResolution&&OpenLayers.Element.addClass(a.getTile(),"olTileReplacing")},a.onLoadEnd=function(b){if(this.numLoadingTiles--,b="unload"===b.type,this.events.triggerEvent("tileloaded",{tile:a,aborted:b}),!this.singleTile&&!b&&this.backBuffer&&this.gridResolution===this.backBufferResolution){var c=a.getTile();if("none"===OpenLayers.Element.getStyle(c,"display")){var d=document.getElementById(a.id+"_bb");d&&d.parentNode.removeChild(d)}OpenLayers.Element.removeClass(c,"olTileReplacing")}if(0===this.numLoadingTiles){if(this.backBuffer)if(0===this.backBuffer.childNodes.length)this.removeBackBuffer();else{for(this._transitionElement=b?this.div.lastChild:a.imgDiv,b=this.transitionendEvents,c=b.length-1;c>=0;--c)OpenLayers.Event.observe(this._transitionElement,b[c],this._removeBackBuffer);this.backBufferTimerId=window.setTimeout(this._removeBackBuffer,this.removeBackBufferDelay)}this.loading=!1,this.events.triggerEvent("loadend")}},a.onLoadError=function(){this.events.triggerEvent("tileerror",{tile:a})},a.events.on({loadstart:a.onLoadStart,loadend:a.onLoadEnd,unload:a.onLoadEnd,loaderror:a.onLoadError,scope:this})},removeTileMonitoringHooks:function(a){a.unload(),a.events.un({loadstart:a.onLoadStart,loadend:a.onLoadEnd,unload:a.onLoadEnd,loaderror:a.onLoadError,scope:this})},moveGriddedTiles:function(){for(var a=this.buffer+1;;){var b=this.grid[0][0],c=b.position.x+this.map.layerContainerOriginPx.x,b=b.position.y+this.map.layerContainerOriginPx.y,d=this.getServerResolution()/this.map.getResolution(),d={w:Math.round(this.tileSize.w*d),h:Math.round(this.tileSize.h*d)};if(c>-d.w*(a-1))this.shiftColumn(!0,d);else if(c<-d.w*a)this.shiftColumn(!1,d);else if(b>-d.h*(a-1))this.shiftRow(!0,d);else{if(!(b<-d.h*a))break;this.shiftRow(!1,d)}}},shiftRow:function(a,b){var c=this.grid,d=a?0:c.length-1,e=a?-1:1;this.gridLayout.startrow+=e*this.rowSign;for(var f=c[d],g=c[a?"pop":"shift"](),h=0,i=g.length;i>h;h++){var j=g[h],k=f[h].position.clone();k.y+=b.h*e,j.moveTo(this.getTileBoundsForGridIndex(d,h),k)}c[a?"unshift":"push"](g)},shiftColumn:function(a,b){var c=this.grid,d=a?0:c[0].length-1,e=a?-1:1;this.gridLayout.startcol+=e;for(var f=0,g=c.length;g>f;f++){var h=c[f],i=h[d].position.clone(),j=h[a?"pop":"shift"]();i.x+=b.w*e,j.moveTo(this.getTileBoundsForGridIndex(f,d),i),h[a?"unshift":"push"](j)}},removeExcessTiles:function(a,b){for(var c,d;this.grid.length>a;){var e=this.grid.pop();for(c=0,d=e.length;d>c;c++){var f=e[c];this.destroyTile(f)}}for(c=0,d=this.grid.length;d>c;c++)for(;this.grid[c].length>b;)e=this.grid[c],f=e.pop(),this.destroyTile(f)},onMapResize:function(){this.singleTile&&(this.clearGrid(),this.setTileSize())},getTileBounds:function(a){var b=this.maxExtent,c=this.getResolution(),d=c*this.tileSize.w,c=c*this.tileSize.h,e=this.getLonLatFromViewPortPx(a);return a=b.left+d*Math.floor((e.lon-b.left)/d),b=b.bottom+c*Math.floor((e.lat-b.bottom)/c),new OpenLayers.Bounds(a,b,a+d,b+c)},CLASS_NAME:"OpenLayers.Layer.Grid"}),OpenLayers.Format.ArcXML=OpenLayers.Class(OpenLayers.Format.XML,{fontStyleKeys:"antialiasing blockout font fontcolor fontsize fontstyle glowing interval outline printmode shadow transparency".split(" "),request:null,response:null,initialize:function(a){if(this.request=new OpenLayers.Format.ArcXML.Request,this.response=new OpenLayers.Format.ArcXML.Response,a)if("feature"==a.requesttype){this.request.get_image=null;var b=this.request.get_feature.query;this.addCoordSys(b.featurecoordsys,a.featureCoordSys),this.addCoordSys(b.filtercoordsys,a.filterCoordSys),a.polygon?(b.isspatial=!0,b.spatialfilter.polygon=a.polygon):a.envelope&&(b.isspatial=!0,b.spatialfilter.envelope={minx:0,miny:0,maxx:0,maxy:0},this.parseEnvelope(b.spatialfilter.envelope,a.envelope))}else"image"==a.requesttype?(this.request.get_feature=null,b=this.request.get_image.properties,this.parseEnvelope(b.envelope,a.envelope),this.addLayers(b.layerlist,a.layers),this.addImageSize(b.imagesize,a.tileSize),this.addCoordSys(b.featurecoordsys,a.featureCoordSys),this.addCoordSys(b.filtercoordsys,a.filterCoordSys)):this.request=null;OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},parseEnvelope:function(a,b){b&&4==b.length&&(a.minx=b[0],a.miny=b[1],a.maxx=b[2],a.maxy=b[3])},addLayers:function(a,b){for(var c=0,d=b.length;d>c;c++)a.push(b[c])},addImageSize:function(a,b){null!==b&&(a.width=b.w,a.height=b.h,a.printwidth=b.w,a.printheight=b.h)},addCoordSys:function(a,b){"string"==typeof b?(a.id=parseInt(b),a.string=b):"object"==typeof b&&null!==b.proj&&(a.id=b.proj.srsProjNumber,a.string=b.proj.srsCode)},iserror:function(a){var b=null;return a?(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]),a=a.documentElement.getElementsByTagName("ERROR"),b=null!==a&&0<a.length):b=""!==this.response.error,b},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b=null;if(a&&a.documentElement&&(b="ARCXML"==a.documentElement.nodeName?a.documentElement:a.documentElement.getElementsByTagName("ARCXML")[0]),!b||"parsererror"===b.firstChild.nodeName){var c,d;try{c=a.firstChild.nodeValue,d=a.firstChild.childNodes[1].firstChild.nodeValue}catch(e){}throw{message:"Error parsing the ArcXML request",error:c,source:d}}return this.parseResponse(b)},write:function(a){a||(a=this.request);var b=this.createElementNS("","ARCXML");b.setAttribute("version","1.1");var c=this.createElementNS("","REQUEST");if(null!=a.get_image){var d=this.createElementNS("","GET_IMAGE");c.appendChild(d);var e=this.createElementNS("","PROPERTIES");if(d.appendChild(e),a=a.get_image.properties,null!=a.featurecoordsys&&(d=this.createElementNS("","FEATURECOORDSYS"),e.appendChild(d),0===a.featurecoordsys.id?d.setAttribute("string",a.featurecoordsys.string):d.setAttribute("id",a.featurecoordsys.id)),null!=a.filtercoordsys&&(d=this.createElementNS("","FILTERCOORDSYS"),e.appendChild(d),0===a.filtercoordsys.id?d.setAttribute("string",a.filtercoordsys.string):d.setAttribute("id",a.filtercoordsys.id)),null!=a.envelope&&(d=this.createElementNS("","ENVELOPE"),e.appendChild(d),d.setAttribute("minx",a.envelope.minx),d.setAttribute("miny",a.envelope.miny),d.setAttribute("maxx",a.envelope.maxx),d.setAttribute("maxy",a.envelope.maxy)),d=this.createElementNS("","IMAGESIZE"),e.appendChild(d),d.setAttribute("height",a.imagesize.height),d.setAttribute("width",a.imagesize.width),(a.imagesize.height!=a.imagesize.printheight||a.imagesize.width!=a.imagesize.printwidth)&&(d.setAttribute("printheight",a.imagesize.printheight),d.setArrtibute("printwidth",a.imagesize.printwidth)),null!=a.background&&(d=this.createElementNS("","BACKGROUND"),e.appendChild(d),d.setAttribute("color",a.background.color.r+","+a.background.color.g+","+a.background.color.b),null!==a.background.transcolor&&d.setAttribute("transcolor",a.background.transcolor.r+","+a.background.transcolor.g+","+a.background.transcolor.b)),null!=a.layerlist&&0<a.layerlist.length)for(d=this.createElementNS("","LAYERLIST"),e.appendChild(d),e=0;e<a.layerlist.length;e++){var f=this.createElementNS("","LAYERDEF");if(d.appendChild(f),f.setAttribute("id",a.layerlist[e].id),f.setAttribute("visible",a.layerlist[e].visible),"object"==typeof a.layerlist[e].query){var g=a.layerlist[e].query;if(0>g.where.length)continue;var h=null,h="boolean"==typeof g.spatialfilter&&g.spatialfilter?this.createElementNS("","SPATIALQUERY"):this.createElementNS("","QUERY");h.setAttribute("where",g.where),"number"==typeof g.accuracy&&0<g.accuracy&&h.setAttribute("accuracy",g.accuracy),"number"==typeof g.featurelimit&&2e3>g.featurelimit&&h.setAttribute("featurelimit",g.featurelimit),"string"==typeof g.subfields&&"#ALL#"!=g.subfields&&h.setAttribute("subfields",g.subfields),"string"==typeof g.joinexpression&&0<g.joinexpression.length&&h.setAttribute("joinexpression",g.joinexpression),"string"==typeof g.jointables&&0<g.jointables.length&&h.setAttribute("jointables",g.jointables),f.appendChild(h)}"object"==typeof a.layerlist[e].renderer&&this.addRenderer(f,a.layerlist[e].renderer)}}else null!=a.get_feature&&(d=this.createElementNS("","GET_FEATURES"),d.setAttribute("outputmode","newxml"),d.setAttribute("checkesc","true"),a.get_feature.geometry?d.setAttribute("geometry",a.get_feature.geometry):d.setAttribute("geometry","false"),a.get_feature.compact&&d.setAttribute("compact",a.get_feature.compact),"number"==a.get_feature.featurelimit&&d.setAttribute("featurelimit",a.get_feature.featurelimit),d.setAttribute("globalenvelope","true"),c.appendChild(d),null!=a.get_feature.layer&&0<a.get_feature.layer.length&&(e=this.createElementNS("","LAYER"),e.setAttribute("id",a.get_feature.layer),d.appendChild(e)),a=a.get_feature.query,null!=a&&(e=null,e=a.isspatial?this.createElementNS("","SPATIALQUERY"):this.createElementNS("","QUERY"),d.appendChild(e),"number"==typeof a.accuracy&&e.setAttribute("accuracy",a.accuracy),null!=a.featurecoordsys&&(d=this.createElementNS("","FEATURECOORDSYS"),0==a.featurecoordsys.id?d.setAttribute("string",a.featurecoordsys.string):d.setAttribute("id",a.featurecoordsys.id),e.appendChild(d)),null!=a.filtercoordsys&&(d=this.createElementNS("","FILTERCOORDSYS"),0===a.filtercoordsys.id?d.setAttribute("string",a.filtercoordsys.string):d.setAttribute("id",a.filtercoordsys.id),e.appendChild(d)),0<a.buffer&&(d=this.createElementNS("","BUFFER"),d.setAttribute("distance",a.buffer),e.appendChild(d)),a.isspatial&&(d=this.createElementNS("","SPATIALFILTER"),d.setAttribute("relation",a.spatialfilter.relation),e.appendChild(d),a.spatialfilter.envelope?(f=this.createElementNS("","ENVELOPE"),f.setAttribute("minx",a.spatialfilter.envelope.minx),f.setAttribute("miny",a.spatialfilter.envelope.miny),f.setAttribute("maxx",a.spatialfilter.envelope.maxx),f.setAttribute("maxy",a.spatialfilter.envelope.maxy),d.appendChild(f)):"object"==typeof a.spatialfilter.polygon&&d.appendChild(this.writePolygonGeometry(a.spatialfilter.polygon))),null!=a.where&&0<a.where.length&&e.setAttribute("where",a.where)));return b.appendChild(c),OpenLayers.Format.XML.prototype.write.apply(this,[b])},addGroupRenderer:function(a,b){var c=this.createElementNS("","GROUPRENDERER");a.appendChild(c);for(var d=0;d<b.length;d++)this.addRenderer(c,b[d])},addRenderer:function(a,b){if(OpenLayers.Util.isArray(b))this.addGroupRenderer(a,b);else{var c=this.createElementNS("",b.type.toUpperCase()+"RENDERER");a.appendChild(c),"VALUEMAPRENDERER"==c.tagName?this.addValueMapRenderer(c,b):"VALUEMAPLABELRENDERER"==c.tagName?this.addValueMapLabelRenderer(c,b):"SIMPLELABELRENDERER"==c.tagName?this.addSimpleLabelRenderer(c,b):"SCALEDEPENDENTRENDERER"==c.tagName&&this.addScaleDependentRenderer(c,b)}},addScaleDependentRenderer:function(a,b){"string"!=typeof b.lower&&"number"!=typeof b.lower||a.setAttribute("lower",b.lower),"string"!=typeof b.upper&&"number"!=typeof b.upper||a.setAttribute("upper",b.upper),this.addRenderer(a,b.renderer)},addValueMapLabelRenderer:function(a,b){if(a.setAttribute("lookupfield",b.lookupfield),a.setAttribute("labelfield",b.labelfield),"object"==typeof b.exacts)for(var c=0,d=b.exacts.length;d>c;c++){var e=b.exacts[c],f=this.createElementNS("","EXACT");if("string"==typeof e.value&&f.setAttribute("value",e.value),"string"==typeof e.label&&f.setAttribute("label",e.label),"string"==typeof e.method&&f.setAttribute("method",e.method),a.appendChild(f),"object"==typeof e.symbol){var g=null;if("text"==e.symbol.type&&(g=this.createElementNS("","TEXTSYMBOL")),null!=g){for(var h=this.fontStyleKeys,i=0,j=h.length;j>i;i++){var k=h[i];e.symbol[k]&&g.setAttribute(k,e.symbol[k])}f.appendChild(g)}}}},addValueMapRenderer:function(a,b){if(a.setAttribute("lookupfield",b.lookupfield),"object"==typeof b.ranges)for(var c=0,d=b.ranges.length;d>c;c++){var e=b.ranges[c],f=this.createElementNS("","RANGE");if(f.setAttribute("lower",e.lower),f.setAttribute("upper",e.upper),a.appendChild(f),"object"==typeof e.symbol){var g=null;"simplepolygon"==e.symbol.type&&(g=this.createElementNS("","SIMPLEPOLYGONSYMBOL")),null!=g&&("string"==typeof e.symbol.boundarycolor&&g.setAttribute("boundarycolor",e.symbol.boundarycolor),"string"==typeof e.symbol.fillcolor&&g.setAttribute("fillcolor",e.symbol.fillcolor),"number"==typeof e.symbol.filltransparency&&g.setAttribute("filltransparency",e.symbol.filltransparency),f.appendChild(g))}}else if("object"==typeof b.exacts)for(c=0,d=b.exacts.length;d>c;c++)e=b.exacts[c],f=this.createElementNS("","EXACT"),"string"==typeof e.value&&f.setAttribute("value",e.value),"string"==typeof e.label&&f.setAttribute("label",e.label),"string"==typeof e.method&&f.setAttribute("method",e.method),a.appendChild(f),"object"==typeof e.symbol&&(g=null,"simplemarker"==e.symbol.type&&(g=this.createElementNS("","SIMPLEMARKERSYMBOL")),
null!=g&&("string"==typeof e.symbol.antialiasing&&g.setAttribute("antialiasing",e.symbol.antialiasing),"string"==typeof e.symbol.color&&g.setAttribute("color",e.symbol.color),"string"==typeof e.symbol.outline&&g.setAttribute("outline",e.symbol.outline),"string"==typeof e.symbol.overlap&&g.setAttribute("overlap",e.symbol.overlap),"string"==typeof e.symbol.shadow&&g.setAttribute("shadow",e.symbol.shadow),"number"==typeof e.symbol.transparency&&g.setAttribute("transparency",e.symbol.transparency),"string"==typeof e.symbol.usecentroid&&g.setAttribute("usecentroid",e.symbol.usecentroid),"number"==typeof e.symbol.width&&g.setAttribute("width",e.symbol.width),f.appendChild(g)))},addSimpleLabelRenderer:function(a,b){a.setAttribute("field",b.field);for(var c="featureweight howmanylabels labelbufferratio labelpriorities labelweight linelabelposition rotationalangles".split(" "),d=0,e=c.length;e>d;d++){var f=c[d];b[f]&&a.setAttribute(f,b[f])}if("text"==b.symbol.type){var g=b.symbol,h=this.createElementNS("","TEXTSYMBOL");for(a.appendChild(h),c=this.fontStyleKeys,d=0,e=c.length;e>d;d++)f=c[d],g[f]&&h.setAttribute(f,b[f])}},writePolygonGeometry:function(a){if(!(a instanceof OpenLayers.Geometry.Polygon))throw{message:"Cannot write polygon geometry to ArcXML with an "+a.CLASS_NAME+" object.",geometry:a};for(var b=this.createElementNS("","POLYGON"),c=0,d=a.components.length;d>c;c++){for(var e=a.components[c],f=this.createElementNS("","RING"),g=0,h=e.components.length;h>g;g++){var i=e.components[g],j=this.createElementNS("","POINT");j.setAttribute("x",i.x),j.setAttribute("y",i.y),f.appendChild(j)}b.appendChild(f)}return b},parseResponse:function(a){"string"==typeof a&&(a=(new OpenLayers.Format.XML).read(a));var b=new OpenLayers.Format.ArcXML.Response,c=a.getElementsByTagName("ERROR");if(null!=c&&0<c.length)b.error=this.getChildValue(c,"Unknown error.");else{if(c=a.getElementsByTagName("RESPONSE"),null==c||0==c.length)return b.error="No RESPONSE tag found in ArcXML response.",b;var d=c[0].firstChild.nodeName;if("#text"==d&&(d=c[0].firstChild.nextSibling.nodeName),"IMAGE"==d)c=a.getElementsByTagName("ENVELOPE"),a=a.getElementsByTagName("OUTPUT"),null==c||0==c.length?b.error="No ENVELOPE tag found in ArcXML response.":null==a||0==a.length?b.error="No OUTPUT tag found in ArcXML response.":(c=this.parseAttributes(c[0]),d=this.parseAttributes(a[0]),b.image="string"==typeof d.type?{envelope:c,output:{type:d.type,data:this.getChildValue(a[0])}}:{envelope:c,output:d});else if("FEATURES"==d){if(a=c[0].getElementsByTagName("FEATURES"),c=a[0].getElementsByTagName("FEATURECOUNT"),b.features.featurecount=c[0].getAttribute("count"),0<b.features.featurecount)for(c=a[0].getElementsByTagName("ENVELOPE"),b.features.envelope=this.parseAttributes(c[0],"number"),a=a[0].getElementsByTagName("FEATURE"),c=0;c<a.length;c++){for(var d=new OpenLayers.Feature.Vector,e=a[c].getElementsByTagName("FIELD"),f=0;f<e.length;f++){var g=e[f].getAttribute("name"),h=e[f].getAttribute("value");d.attributes[g]=h}if(e=a[c].getElementsByTagName("POLYGON"),0<e.length){for(e=e[0].getElementsByTagName("RING"),f=[],g=0;g<e.length;g++){h=[],h.push(this.parsePointGeometry(e[g]));for(var i=e[g].getElementsByTagName("HOLE"),j=0;j<i.length;j++)h.push(this.parsePointGeometry(i[j]));f.push(new OpenLayers.Geometry.Polygon(h))}d.geometry=1==f.length?f[0]:new OpenLayers.Geometry.MultiPolygon(f)}b.features.feature.push(d)}}else b.error="Unidentified response type."}return b},parseAttributes:function(a,b){for(var c={},d=0;d<a.attributes.length;d++)c[a.attributes[d].nodeName]="number"==b?parseFloat(a.attributes[d].nodeValue):a.attributes[d].nodeValue;return c},parsePointGeometry:function(a){var b=[],c=a.getElementsByTagName("COORDS");if(0<c.length)for(a=this.getChildValue(c[0]),a=a.split(/;/),c=0;c<a.length;c++){var d=a[c].split(/ /);b.push(new OpenLayers.Geometry.Point(d[0],d[1]))}else if(a=a.getElementsByTagName("POINT"),0<a.length)for(c=0;c<a.length;c++)b.push(new OpenLayers.Geometry.Point(parseFloat(a[c].getAttribute("x")),parseFloat(a[c].getAttribute("y"))));return new OpenLayers.Geometry.LinearRing(b)},CLASS_NAME:"OpenLayers.Format.ArcXML"}),OpenLayers.Format.ArcXML.Request=OpenLayers.Class({initialize:function(a){return OpenLayers.Util.extend(this,{get_image:{properties:{background:null,draw:!0,envelope:{minx:0,miny:0,maxx:0,maxy:0},featurecoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},filtercoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},imagesize:{height:0,width:0,dpi:96,printheight:0,printwidth:0,scalesymbols:!1},layerlist:[],output:{baseurl:"",legendbaseurl:"",legendname:"",legendpath:"",legendurl:"",name:"",path:"",type:"jpg",url:""}}},get_feature:{layer:"",query:{isspatial:!1,featurecoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},filtercoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},buffer:0,where:"",spatialfilter:{relation:"envelope_intersection",envelope:null}}},environment:{separators:{cs:" ",ts:";"}},layer:[],workspaces:[]})},CLASS_NAME:"OpenLayers.Format.ArcXML.Request"}),OpenLayers.Format.ArcXML.Response=OpenLayers.Class({initialize:function(a){return OpenLayers.Util.extend(this,{image:{envelope:null,output:""},features:{featurecount:0,envelope:null,feature:[]},error:""})},CLASS_NAME:"OpenLayers.Format.ArcXML.Response"}),function(){function a(){this._object=f&&!i?new f:new window.ActiveXObject("Microsoft.XMLHTTP"),this._listeners=[]}function b(){return new a}function c(a){b.onreadystatechange&&b.onreadystatechange.apply(a),a.dispatchEvent({type:"readystatechange",bubbles:!1,cancelable:!1,timeStamp:new Date+0})}function d(a){try{a.responseText=a._object.responseText}catch(b){}try{var c,d=a._object,e=d.responseXML,f=d.responseText;h&&f&&e&&!e.documentElement&&d.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)&&(e=new window.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.validateOnParse=!1,e.loadXML(f)),c=e&&(h&&0!=e.parseError||!e.documentElement||e.documentElement&&"parsererror"==e.documentElement.tagName)?null:e,a.responseXML=c}catch(g){}try{a.status=a._object.status}catch(i){}try{a.statusText=a._object.statusText}catch(j){}}function e(a){a._object.onreadystatechange=new window.Function}var f=window.XMLHttpRequest,g=!!window.controllers,h=window.document.all&&!window.opera,i=h&&window.navigator.userAgent.match(/MSIE 7.0/);b.prototype=a.prototype,g&&f.wrapped&&(b.wrapped=f.wrapped),b.UNSENT=0,b.OPENED=1,b.HEADERS_RECEIVED=2,b.LOADING=3,b.DONE=4,b.prototype.readyState=b.UNSENT,b.prototype.responseText="",b.prototype.responseXML=null,b.prototype.status=0,b.prototype.statusText="",b.prototype.priority="NORMAL",b.prototype.onreadystatechange=null,b.onreadystatechange=null,b.onopen=null,b.onsend=null,b.onabort=null,b.prototype.open=function(a,f,i,j,k){delete this._headers,3>arguments.length&&(i=!0),this._async=i;var l,m=this,n=this.readyState;h&&i&&(l=function(){n!=b.DONE&&(e(m),m.abort())},window.attachEvent("onunload",l)),b.onopen&&b.onopen.apply(this,arguments),4<arguments.length?this._object.open(a,f,i,j,k):3<arguments.length?this._object.open(a,f,i,j):this._object.open(a,f,i),this.readyState=b.OPENED,c(this),this._object.onreadystatechange=function(){(!g||i)&&(m.readyState=m._object.readyState,d(m),m._aborted?m.readyState=b.UNSENT:(m.readyState==b.DONE&&(delete m._data,e(m),h&&i&&window.detachEvent("onunload",l)),n!=m.readyState&&c(m),n=m.readyState))}},b.prototype.send=function(a){b.onsend&&b.onsend.apply(this,arguments),arguments.length||(a=null),a&&a.nodeType&&(a=window.XMLSerializer?(new window.XMLSerializer).serializeToString(a):a.xml,this._headers["Content-Type"]||this._object.setRequestHeader("Content-Type","application/xml")),this._data=a;a:if(this._object.send(this._data),g&&!this._async)for(this.readyState=b.OPENED,d(this);this.readyState<b.DONE;)if(this.readyState++,c(this),this._aborted)break a},b.prototype.abort=function(){b.onabort&&b.onabort.apply(this,arguments),this.readyState>b.UNSENT&&(this._aborted=!0),this._object.abort(),e(this),this.readyState=b.UNSENT,delete this._data},b.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()},b.prototype.getResponseHeader=function(a){return this._object.getResponseHeader(a)},b.prototype.setRequestHeader=function(a,b){return this._headers||(this._headers={}),this._headers[a]=b,this._object.setRequestHeader(a,b)},b.prototype.addEventListener=function(a,b,c){for(var d,e=0;d=this._listeners[e];e++)if(d[0]==a&&d[1]==b&&d[2]==c)return;this._listeners.push([a,b,c])},b.prototype.removeEventListener=function(a,b,c){for(var d,e=0;(d=this._listeners[e])&&(d[0]!=a||d[1]!=b||d[2]!=c);e++);d&&this._listeners.splice(e,1)},b.prototype.dispatchEvent=function(a){a={type:a.type,target:this,currentTarget:this,eventPhase:2,bubbles:a.bubbles,cancelable:a.cancelable,timeStamp:a.timeStamp,stopPropagation:function(){},preventDefault:function(){},initEvent:function(){}},"readystatechange"==a.type&&this.onreadystatechange&&(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[a]);for(var b,c=0;b=this._listeners[c];c++)b[0]!=a.type||b[2]||(b[1].handleEvent||b[1]).apply(this,[a])},b.prototype.toString=function(){return"[object XMLHttpRequest]"},b.toString=function(){return"[XMLHttpRequest]"},window.Function.prototype.apply||(window.Function.prototype.apply=function(a,b){b||(b=[]),a.__func=this,a.__func(b[0],b[1],b[2],b[3],b[4]),delete a.__func}),OpenLayers.Request||(OpenLayers.Request={}),OpenLayers.Request.XMLHttpRequest=b}(),OpenLayers.ProxyHost="",OpenLayers.Request||(OpenLayers.Request={}),OpenLayers.Util.extend(OpenLayers.Request,{DEFAULT_CONFIG:{method:"GET",url:window.location.href,async:!0,user:void 0,password:void 0,params:null,proxy:OpenLayers.ProxyHost,headers:{},data:null,callback:function(){},success:null,failure:null,scope:null},URL_SPLIT_REGEX:/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,events:new OpenLayers.Events(this),makeSameOrigin:function(a,b){var c=0!==a.indexOf("http"),d=!c&&a.match(this.URL_SPLIT_REGEX);if(d){var e=window.location,c=d[1]==e.protocol&&d[3]==e.hostname,d=d[4],e=e.port;(80!=d&&""!=d||"80"!=e&&""!=e)&&(c=c&&d==e)}return c||b&&(a="function"==typeof b?b(a):b+encodeURIComponent(a)),a},issue:function(a){var b=OpenLayers.Util.extend(this.DEFAULT_CONFIG,{proxy:OpenLayers.ProxyHost});a=a||{},a.headers=a.headers||{},a=OpenLayers.Util.applyDefaults(a,b),a.headers=OpenLayers.Util.applyDefaults(a.headers,b.headers);var c,b=!1;for(c in a.headers)a.headers.hasOwnProperty(c)&&"x-requested-with"===c.toLowerCase()&&(b=!0);!1===b&&(a.headers["X-Requested-With"]="XMLHttpRequest");var d=new OpenLayers.Request.XMLHttpRequest,e=OpenLayers.Util.urlAppend(a.url,OpenLayers.Util.getParameterString(a.params||{})),e=OpenLayers.Request.makeSameOrigin(e,a.proxy);d.open(a.method,e,a.async,a.user,a.password);for(var f in a.headers)d.setRequestHeader(f,a.headers[f]);var g=this.events,h=this;return d.onreadystatechange=function(){d.readyState==OpenLayers.Request.XMLHttpRequest.DONE&&!1!==g.triggerEvent("complete",{request:d,config:a,requestUrl:e})&&h.runCallbacks({request:d,config:a,requestUrl:e})},!1===a.async?d.send(a.data):window.setTimeout(function(){0!==d.readyState&&d.send(a.data)},0),d},runCallbacks:function(a){var b,c=a.request,d=a.config,e=d.scope?OpenLayers.Function.bind(d.callback,d.scope):d.callback;d.success&&(b=d.scope?OpenLayers.Function.bind(d.success,d.scope):d.success);var f;d.failure&&(f=d.scope?OpenLayers.Function.bind(d.failure,d.scope):d.failure),"file:"==OpenLayers.Util.createUrlObject(d.url).protocol&&c.responseText&&(c.status=200),e(c),(!c.status||200<=c.status&&300>c.status)&&(this.events.triggerEvent("success",a),b&&b(c)),c.status&&(200>c.status||300<=c.status)&&(this.events.triggerEvent("failure",a),f&&f(c))},GET:function(a){return a=OpenLayers.Util.extend(a,{method:"GET"}),OpenLayers.Request.issue(a)},POST:function(a){return a=OpenLayers.Util.extend(a,{method:"POST"}),a.headers=a.headers?a.headers:{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(a.headers)||(a.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(a)},PUT:function(a){return a=OpenLayers.Util.extend(a,{method:"PUT"}),a.headers=a.headers?a.headers:{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(a.headers)||(a.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(a)},DELETE:function(a){return a=OpenLayers.Util.extend(a,{method:"DELETE"}),OpenLayers.Request.issue(a)},HEAD:function(a){return a=OpenLayers.Util.extend(a,{method:"HEAD"}),OpenLayers.Request.issue(a)},OPTIONS:function(a){return a=OpenLayers.Util.extend(a,{method:"OPTIONS"}),OpenLayers.Request.issue(a)}}),OpenLayers.Layer.ArcIMS=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{ClientVersion:"9.2",ServiceName:""},featureCoordSys:"4326",filterCoordSys:"4326",layers:null,async:!0,name:"ArcIMS",isBaseLayer:!0,DEFAULT_OPTIONS:{tileSize:new OpenLayers.Size(512,512),featureCoordSys:"4326",filterCoordSys:"4326",layers:null,isBaseLayer:!0,async:!0,name:"ArcIMS"},initialize:function(a,b,c){this.tileSize=new OpenLayers.Size(512,512),this.params=OpenLayers.Util.applyDefaults({ServiceName:c.serviceName},this.DEFAULT_PARAMS),this.options=OpenLayers.Util.applyDefaults(c,this.DEFAULT_OPTIONS),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a,b,this.params,c]),this.transparent&&(this.isBaseLayer||(this.isBaseLayer=!1),"image/jpeg"==this.format&&(this.format=OpenLayers.Util.alphaHack()?"image/gif":"image/png")),null===this.options.layers&&(this.options.layers=[])},getURL:function(a){var b="";return a=this.adjustBounds(a),a=new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options,{requesttype:"image",envelope:a.toArray(),tileSize:this.tileSize})),a=new OpenLayers.Request.POST({url:this.getFullRequestString(),data:a.write(),async:!1}),null!=a&&(b=a.responseXML,b&&b.documentElement||(b=a.responseText),b=(new OpenLayers.Format.ArcXML).read(b),b=this.getUrlOrImage(b.image.output)),b},getURLasync:function(a,b,c){a=this.adjustBounds(a),a=new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options,{requesttype:"image",envelope:a.toArray(),tileSize:this.tileSize})),OpenLayers.Request.POST({url:this.getFullRequestString(),async:!0,data:a.write(),callback:function(a){var d=a.responseXML;d&&d.documentElement||(d=a.responseText),a=(new OpenLayers.Format.ArcXML).read(d),b.call(c,this.getUrlOrImage(a.image.output))},scope:this})},getUrlOrImage:function(a){var b="";return a.url?b=a.url:a.data&&(b="data:image/"+a.type+";base64,"+a.data),b},setLayerQuery:function(a,b){for(var c=0;c<this.options.layers.length;c++)if(a==this.options.layers[c].id)return void(this.options.layers[c].query=b);this.options.layers.push({id:a,visible:!0,query:b})},getFeatureInfo:function(a,b,c){var d=c.buffer||1,e=c.callback||function(){},f=c.scope||window,g={};OpenLayers.Util.extend(g,this.options),g.requesttype="feature",a instanceof OpenLayers.LonLat?(g.polygon=null,g.envelope=[a.lon-d,a.lat-d,a.lon+d,a.lat+d]):a instanceof OpenLayers.Geometry.Polygon&&(g.envelope=null,g.polygon=a);var h=new OpenLayers.Format.ArcXML(g);OpenLayers.Util.extend(h.request.get_feature,c),h.request.get_feature.layer=b.id,"number"==typeof b.query.accuracy?h.request.get_feature.query.accuracy=b.query.accuracy:(a=this.map.getCenter(),c=this.map.getViewPortPxFromLonLat(a),c.x++,c=this.map.getLonLatFromPixel(c),h.request.get_feature.query.accuracy=c.lon-a.lon),h.request.get_feature.query.where=b.query.where,h.request.get_feature.query.spatialfilter.relation="area_intersection",OpenLayers.Request.POST({url:this.getFullRequestString({CustomService:"Query"}),data:h.write(),callback:function(a){a=h.parseResponse(a.responseText),h.iserror()?e.call(f,null):e.call(f,a.features)}})},clone:function(a){return null==a&&(a=new OpenLayers.Layer.ArcIMS(this.name,this.url,this.getOptions())),a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},CLASS_NAME:"OpenLayers.Layer.ArcIMS"}),OpenLayers.Control.PanZoom=OpenLayers.Class(OpenLayers.Control,{slideFactor:50,slideRatio:null,buttons:null,position:null,initialize:function(a){this.position=new OpenLayers.Pixel(OpenLayers.Control.PanZoom.X,OpenLayers.Control.PanZoom.Y),OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onButtonClick),this.removeButtons(),this.position=this.buttons=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(a){OpenLayers.Control.prototype.setMap.apply(this,arguments),this.map.events.register("buttonclick",this,this.onButtonClick)},draw:function(a){OpenLayers.Control.prototype.draw.apply(this,arguments),a=this.position,this.buttons=[];var b={w:18,h:18},c=new OpenLayers.Pixel(a.x+b.w/2,a.y);return this._addButton("panup","north-mini.png",c,b),a.y=c.y+b.h,this._addButton("panleft","west-mini.png",a,b),this._addButton("panright","east-mini.png",a.add(b.w,0),b),this._addButton("pandown","south-mini.png",c.add(0,2*b.h),b),this._addButton("zoomin","zoom-plus-mini.png",c.add(0,3*b.h+5),b),this._addButton("zoomworld","zoom-world-mini.png",c.add(0,4*b.h+5),b),this._addButton("zoomout","zoom-minus-mini.png",c.add(0,5*b.h+5),b),this.div},_addButton:function(a,b,c,d){return b=OpenLayers.Util.getImageLocation(b),c=OpenLayers.Util.createAlphaImageDiv(this.id+"_"+a,c,d,b,"absolute"),c.style.cursor="pointer",this.div.appendChild(c),c.action=a,c.className="olButton",this.buttons.push(c),c},_removeButton:function(a){this.div.removeChild(a),OpenLayers.Util.removeItem(this.buttons,a)},removeButtons:function(){for(var a=this.buttons.length-1;a>=0;--a)this._removeButton(this.buttons[a])},onButtonClick:function(a){switch(a.buttonElement.action){case"panup":this.map.pan(0,-this.getSlideFactor("h"));break;case"pandown":this.map.pan(0,this.getSlideFactor("h"));break;case"panleft":this.map.pan(-this.getSlideFactor("w"),0);break;case"panright":this.map.pan(this.getSlideFactor("w"),0);break;case"zoomin":this.map.zoomIn();break;case"zoomout":this.map.zoomOut();break;case"zoomworld":this.map.zoomToMaxExtent()}},getSlideFactor:function(a){return this.slideRatio?this.map.getSize()[a]*this.slideRatio:this.slideFactor},CLASS_NAME:"OpenLayers.Control.PanZoom"}),OpenLayers.Control.PanZoom.X=4,OpenLayers.Control.PanZoom.Y=4,OpenLayers.Control.PanZoomBar=OpenLayers.Class(OpenLayers.Control.PanZoom,{zoomStopWidth:18,zoomStopHeight:11,slider:null,sliderEvents:null,zoombarDiv:null,zoomWorldIcon:!1,panIcons:!0,forceFixedZoomLevel:!1,mouseDragStart:null,deltaY:null,zoomStart:null,destroy:function(){this._removeZoomBar(),this.map.events.un({changebaselayer:this.redraw,updatesize:this.redraw,scope:this}),OpenLayers.Control.PanZoom.prototype.destroy.apply(this,arguments),delete this.mouseDragStart,delete this.zoomStart},setMap:function(a){OpenLayers.Control.PanZoom.prototype.setMap.apply(this,arguments),this.map.events.on({changebaselayer:this.redraw,updatesize:this.redraw,scope:this})},redraw:function(){null!=this.div&&(this.removeButtons(),this._removeZoomBar()),this.draw()},draw:function(a){OpenLayers.Control.prototype.draw.apply(this,arguments),a=this.position.clone(),this.buttons=[];var b={w:18,h:18};if(this.panIcons){var c=new OpenLayers.Pixel(a.x+b.w/2,a.y),d=b.w;this.zoomWorldIcon&&(c=new OpenLayers.Pixel(a.x+b.w,a.y)),this._addButton("panup","north-mini.png",c,b),a.y=c.y+b.h,this._addButton("panleft","west-mini.png",a,b),this.zoomWorldIcon&&(this._addButton("zoomworld","zoom-world-mini.png",a.add(b.w,0),b),d*=2),this._addButton("panright","east-mini.png",a.add(d,0),b),this._addButton("pandown","south-mini.png",c.add(0,2*b.h),b),this._addButton("zoomin","zoom-plus-mini.png",c.add(0,3*b.h+5),b),c=this._addZoomBar(c.add(0,4*b.h+5)),this._addButton("zoomout","zoom-minus-mini.png",c,b)}else this._addButton("zoomin","zoom-plus-mini.png",a,b),c=this._addZoomBar(a.add(0,b.h)),this._addButton("zoomout","zoom-minus-mini.png",c,b),this.zoomWorldIcon&&(c=c.add(0,b.h+3),this._addButton("zoomworld","zoom-world-mini.png",c,b));return this.div},_addZoomBar:function(a){var b=OpenLayers.Util.getImageLocation("slider.png"),c=this.id+"_"+this.map.id,d=this.map.getMinZoom(),e=this.map.getNumZoomLevels()-1-this.map.getZoom(),e=OpenLayers.Util.createAlphaImageDiv(c,a.add(-1,e*this.zoomStopHeight),{w:20,h:9},b,"absolute");e.style.cursor="move",this.slider=e,this.sliderEvents=new OpenLayers.Events(this,e,null,!0,{includeXY:!0}),this.sliderEvents.on({touchstart:this.zoomBarDown,touchmove:this.zoomBarDrag,touchend:this.zoomBarUp,mousedown:this.zoomBarDown,mousemove:this.zoomBarDrag,mouseup:this.zoomBarUp});var f={w:this.zoomStopWidth,h:this.zoomStopHeight*(this.map.getNumZoomLevels()-d)},b=OpenLayers.Util.getImageLocation("zoombar.png"),c=null;return OpenLayers.Util.alphaHack()?(c=this.id+"_"+this.map.id,c=OpenLayers.Util.createAlphaImageDiv(c,a,{w:f.w,h:this.zoomStopHeight},b,"absolute",null,"crop"),c.style.height=f.h+"px"):c=OpenLayers.Util.createDiv("OpenLayers_Control_PanZoomBar_Zoombar"+this.map.id,a,f,b),c.style.cursor="pointer",c.className="olButton",this.zoombarDiv=c,this.div.appendChild(c),this.startTop=parseInt(c.style.top),this.div.appendChild(e),this.map.events.register("zoomend",this,this.moveZoomBar),a=a.add(0,this.zoomStopHeight*(this.map.getNumZoomLevels()-d))},_removeZoomBar:function(){this.sliderEvents.un({touchstart:this.zoomBarDown,touchmove:this.zoomBarDrag,touchend:this.zoomBarUp,mousedown:this.zoomBarDown,mousemove:this.zoomBarDrag,mouseup:this.zoomBarUp}),this.sliderEvents.destroy(),this.div.removeChild(this.zoombarDiv),this.zoombarDiv=null,this.div.removeChild(this.slider),this.slider=null,this.map.events.unregister("zoomend",this,this.moveZoomBar)},onButtonClick:function(a){if(OpenLayers.Control.PanZoom.prototype.onButtonClick.apply(this,arguments),a.buttonElement===this.zoombarDiv){var b=a.buttonXY.y/this.zoomStopHeight;(this.forceFixedZoomLevel||!this.map.fractionalZoom)&&(b=Math.floor(b)),b=this.map.getNumZoomLevels()-1-b,b=Math.min(Math.max(b,0),this.map.getNumZoomLevels()-1),this.map.zoomTo(b)}},passEventToSlider:function(a){this.sliderEvents.handleBrowserEvent(a)},zoomBarDown:function(a){(OpenLayers.Event.isLeftClick(a)||OpenLayers.Event.isSingleTouch(a))&&(this.map.events.on({touchmove:this.passEventToSlider,mousemove:this.passEventToSlider,mouseup:this.passEventToSlider,scope:this}),this.mouseDragStart=a.xy.clone(),this.zoomStart=a.xy.clone(),this.div.style.cursor="move",this.zoombarDiv.offsets=null,OpenLayers.Event.stop(a))},zoomBarDrag:function(a){if(null!=this.mouseDragStart){var b=this.mouseDragStart.y-a.xy.y,c=OpenLayers.Util.pagePosition(this.zoombarDiv);0<a.clientY-c[1]&&a.clientY-c[1]<parseInt(this.zoombarDiv.style.height)-2&&(b=parseInt(this.slider.style.top)-b,this.slider.style.top=b+"px",this.mouseDragStart=a.xy.clone()),this.deltaY=this.zoomStart.y-a.xy.y,OpenLayers.Event.stop(a)}},zoomBarUp:function(a){if((OpenLayers.Event.isLeftClick(a)||"touchend"===a.type)&&this.mouseDragStart){this.div.style.cursor="",this.map.events.un({touchmove:this.passEventToSlider,mouseup:this.passEventToSlider,mousemove:this.passEventToSlider,scope:this});var b=this.map.zoom;!this.forceFixedZoomLevel&&this.map.fractionalZoom?(b+=this.deltaY/this.zoomStopHeight,b=Math.min(Math.max(b,0),this.map.getNumZoomLevels()-1)):(b+=this.deltaY/this.zoomStopHeight,b=Math.max(Math.round(b),0)),this.map.zoomTo(b),this.zoomStart=this.mouseDragStart=null,this.deltaY=0,OpenLayers.Event.stop(a)}},moveZoomBar:function(){var a=(this.map.getNumZoomLevels()-1-this.map.getZoom())*this.zoomStopHeight+this.startTop+1;this.slider.style.top=a+"px"},CLASS_NAME:"OpenLayers.Control.PanZoomBar"}),OpenLayers.Format.WFSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.0",CLASS_NAME:"OpenLayers.Format.WFSCapabilities"}),OpenLayers.Format.WFSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{wfs:"http://www.opengis.net/wfs",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",ows:"http://www.opengis.net/ows"},errorProperty:"featureTypeList",defaultPrefix:"wfs",read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b={};return this.readNode(a,b),b},readers:{wfs:{WFS_Capabilities:function(a,b){this.readChildNodes(a,b)},FeatureTypeList:function(a,b){b.featureTypeList={featureTypes:[]},this.readChildNodes(a,b.featureTypeList)},FeatureType:function(a,b){var c={};this.readChildNodes(a,c),b.featureTypes.push(c)},Name:function(a,b){var c=this.getChildValue(a);c&&(c=c.split(":"),b.name=c.pop(),0<c.length&&(b.featureNS=this.lookupNamespaceURI(a,c[0])))},Title:function(a,b){var c=this.getChildValue(a);c&&(b.title=c)},Abstract:function(a,b){var c=this.getChildValue(a);c&&(b["abstract"]=c)}}},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1"}),OpenLayers.Format.WFSCapabilities.v1_1_0=OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1,{regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},readers:{wfs:OpenLayers.Util.applyDefaults({DefaultSRS:function(a,b){var c=this.getChildValue(a);c&&(b.srs=c)}},OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs),ows:OpenLayers.Format.OWSCommon.v1.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1_1_0"}),OpenLayers.Layer.Image=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!0,url:null,extent:null,size:null,tile:null,aspectRatio:null,initialize:function(a,b,c,d,e){this.url=b,this.maxExtent=this.extent=c,this.size=d,OpenLayers.Layer.prototype.initialize.apply(this,[a,e]),this.aspectRatio=this.extent.getHeight()/this.size.h/(this.extent.getWidth()/this.size.w)},destroy:function(){this.tile&&(this.removeTileMonitoringHooks(this.tile),this.tile.destroy(),this.tile=null),OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(a){return null==a&&(a=new OpenLayers.Layer.Image(this.name,this.url,this.extent,this.size,this.getOptions())),a=OpenLayers.Layer.prototype.clone.apply(this,[a])},setMap:function(a){null==this.options.maxResolution&&(this.options.maxResolution=this.aspectRatio*this.extent.getWidth()/this.size.w),OpenLayers.Layer.prototype.setMap.apply(this,arguments)},moveTo:function(a,b,c){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var d=null==this.tile;if(b||d){this.setTileSize();var e=this.map.getLayerPxFromLonLat({lon:this.extent.left,lat:this.extent.top});d?(this.tile=new OpenLayers.Tile.Image(this,e,this.extent,null,this.tileSize),this.addTileMonitoringHooks(this.tile)):(this.tile.size=this.tileSize.clone(),this.tile.position=e.clone()),this.tile.draw()}},setTileSize:function(){var a=this.extent.getWidth()/this.map.getResolution(),b=this.extent.getHeight()/this.map.getResolution();this.tileSize=new OpenLayers.Size(a,b)},addTileMonitoringHooks:function(a){a.onLoadStart=function(){this.events.triggerEvent("loadstart")},a.events.register("loadstart",this,a.onLoadStart),a.onLoadEnd=function(){this.events.triggerEvent("loadend")},a.events.register("loadend",this,a.onLoadEnd),a.events.register("unload",this,a.onLoadEnd)},removeTileMonitoringHooks:function(a){a.unload(),a.events.un({loadstart:a.onLoadStart,loadend:a.onLoadEnd,unload:a.onLoadEnd,scope:this})},setUrl:function(a){this.url=a,this.tile.draw()},getURL:function(a){return this.url},CLASS_NAME:"OpenLayers.Layer.Image"}),OpenLayers.Strategy=OpenLayers.Class({layer:null,options:null,active:null,autoActivate:!0,autoDestroy:!0,initialize:function(a){OpenLayers.Util.extend(this,a),this.options=a,this.active=!1},destroy:function(){this.deactivate(),this.options=this.layer=null},setLayer:function(a){this.layer=a},activate:function(){return this.active?!1:this.active=!0},deactivate:function(){return this.active?(this.active=!1,!0):!1},CLASS_NAME:"OpenLayers.Strategy"}),OpenLayers.Strategy.Save=OpenLayers.Class(OpenLayers.Strategy,{events:null,auto:!1,timer:null,initialize:function(a){OpenLayers.Strategy.prototype.initialize.apply(this,[a]),this.events=new OpenLayers.Events(this)},activate:function(){var a=OpenLayers.Strategy.prototype.activate.call(this);return a&&this.auto&&("number"==typeof this.auto?this.timer=window.setInterval(OpenLayers.Function.bind(this.save,this),1e3*this.auto):this.layer.events.on({featureadded:this.triggerSave,afterfeaturemodified:this.triggerSave,scope:this})),a},deactivate:function(){var a=OpenLayers.Strategy.prototype.deactivate.call(this);return a&&this.auto&&("number"==typeof this.auto?window.clearInterval(this.timer):this.layer.events.un({featureadded:this.triggerSave,afterfeaturemodified:this.triggerSave,scope:this})),a},triggerSave:function(a){var b=a.feature;b.state!==OpenLayers.State.INSERT&&b.state!==OpenLayers.State.UPDATE&&b.state!==OpenLayers.State.DELETE||this.save([a.feature])},save:function(a){a||(a=this.layer.features),this.events.triggerEvent("start",{features:a});var b=this.layer.projection,c=this.layer.map.getProjectionObject();if(!c.equals(b)){for(var d,e,f=a.length,g=Array(f),h=0;f>h;++h)d=a[h],e=d.clone(),e.fid=d.fid,e.state=d.state,d.url&&(e.url=d.url),e._original=d,e.geometry.transform(c,b),g[h]=e;a=g}this.layer.protocol.commit(a,{callback:this.onCommit,scope:this})},onCommit:function(a){var b={response:a};if(a.success()){for(var c,d=a.reqFeatures,e=[],f=a.insertIds||[],g=0,h=0,i=d.length;i>h;++h)c=d[h],c=c._original||c,(a=c.state)&&(a==OpenLayers.State.DELETE?e.push(c):a==OpenLayers.State.INSERT&&(c.fid=f[g],++g),c.state=null);0<e.length&&this.layer.destroyFeatures(e),this.events.triggerEvent("success",b)}else this.events.triggerEvent("fail",b)},CLASS_NAME:"OpenLayers.Strategy.Save"}),OpenLayers.Events.featureclick=OpenLayers.Class({cache:null,map:null,provides:["featureclick","nofeatureclick","featureover","featureout"],initialize:function(a){if(this.target=a,a.object instanceof OpenLayers.Map)this.setMap(a.object);else{if(!(a.object instanceof OpenLayers.Layer.Vector))throw"Listeners for '"+this.provides.join("', '")+"' events can only be registered for OpenLayers.Layer.Vector or OpenLayers.Map instances";a.object.map?this.setMap(a.object.map):a.object.events.register("added",this,function(b){this.setMap(a.object.map)})}for(var b=this.provides.length-1;b>=0;--b)a.extensions[this.provides[b]]=!0},setMap:function(a){this.map=a,this.cache={},a.events.register("mousedown",this,this.start,{extension:!0}),a.events.register("mouseup",this,this.onClick,{extension:!0}),a.events.register("touchstart",this,this.start,{extension:!0}),a.events.register("touchmove",this,this.cancel,{extension:!0}),a.events.register("touchend",this,this.onClick,{extension:!0}),a.events.register("mousemove",this,this.onMousemove,{extension:!0})},start:function(a){this.startEvt=a},cancel:function(a){delete this.startEvt},onClick:function(a){if(this.startEvt&&("touchend"===a.type||OpenLayers.Event.isLeftClick(a))){a=this.getFeatures(this.startEvt),delete this.startEvt;for(var b,c,d={},e=0,f=a.length;f>e&&(b=a[e],c=b.layer,d[c.id]=!0,b=this.triggerEvent("featureclick",{feature:b}),!1!==b);++e);for(e=0,f=this.map.layers.length;f>e;++e)c=this.map.layers[e],c instanceof OpenLayers.Layer.Vector&&!d[c.id]&&this.triggerEvent("nofeatureclick",{layer:c})}},onMousemove:function(a){delete this.startEvt;var b=this.getFeatures(a),c={};a=[];for(var d,e=0,f=b.length;f>e;++e)d=b[e],c[d.id]=d,this.cache[d.id]||a.push(d);var g,b=[];for(g in this.cache)d=this.cache[g],d.layer&&d.layer.map?c[d.id]||b.push(d):delete this.cache[g];for(e=0,f=a.length;f>e&&(d=a[e],this.cache[d.id]=d,g=this.triggerEvent("featureover",{feature:d}),!1!==g);++e);for(e=0,f=b.length;f>e&&(d=b[e],delete this.cache[d.id],g=this.triggerEvent("featureout",{feature:d}),!1!==g);++e);},triggerEvent:function(a,b){var c=b.feature?b.feature.layer:b.layer,d=this.target.object;return d instanceof OpenLayers.Map||d===c?this.target.triggerEvent(a,b):void 0},getFeatures:function(a){var b,c,d,e,f=a.clientX,g=a.clientY,h=[],i=[],j=[];for(e=this.map.layers.length-1;e>=0;--e)if(b=this.map.layers[e],"none"!==b.div.style.display)if(b.renderer instanceof OpenLayers.Renderer.Elements){
if(b instanceof OpenLayers.Layer.Vector)for(c=document.elementFromPoint(f,g);c&&c._featureId;)(d=b.getFeatureById(c._featureId))?(h.push(d),c.style.display="none",i.push(c),c=document.elementFromPoint(f,g)):c=!1;j.push(b),b.div.style.display="none"}else b.renderer instanceof OpenLayers.Renderer.Canvas&&(d=b.renderer.getFeatureIdFromEvent(a))&&(h.push(d),j.push(b));for(e=0,a=i.length;a>e;++e)i[e].style.display="";for(e=j.length-1;e>=0;--e)j[e].div.style.display="block";return h},destroy:function(){for(var a=this.provides.length-1;a>=0;--a)delete this.target.extensions[this.provides[a]];this.map.events.un({mousemove:this.onMousemove,mousedown:this.start,mouseup:this.onClick,touchstart:this.start,touchmove:this.cancel,touchend:this.onClick,scope:this}),delete this.cache,delete this.map,delete this.target}}),OpenLayers.Events.nofeatureclick=OpenLayers.Events.featureclick,OpenLayers.Events.featureover=OpenLayers.Events.featureclick,OpenLayers.Events.featureout=OpenLayers.Events.featureclick,OpenLayers.Format.GPX=OpenLayers.Class(OpenLayers.Format.XML,{defaultDesc:"No description available",extractWaypoints:!0,extractTracks:!0,extractRoutes:!0,extractAttributes:!0,namespaces:{gpx:"http://www.topografix.com/GPX/1/1",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",creator:"OpenLayers",initialize:function(a){this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b=[];if(this.extractTracks)for(var c=a.getElementsByTagName("trk"),d=0,e=c.length;e>d;d++){var f={};this.extractAttributes&&(f=this.parseAttributes(c[d]));for(var g=this.getElementsByTagNameNS(c[d],c[d].namespaceURI,"trkseg"),h=0,i=g.length;i>h;h++){var j=this.extractSegment(g[h],"trkpt");b.push(new OpenLayers.Feature.Vector(j,f))}}if(this.extractRoutes)for(e=a.getElementsByTagName("rte"),c=0,d=e.length;d>c;c++)f={},this.extractAttributes&&(f=this.parseAttributes(e[c])),g=this.extractSegment(e[c],"rtept"),b.push(new OpenLayers.Feature.Vector(g,f));if(this.extractWaypoints)for(a=a.getElementsByTagName("wpt"),c=0,e=a.length;e>c;c++)f={},this.extractAttributes&&(f=this.parseAttributes(a[c])),d=new OpenLayers.Geometry.Point(a[c].getAttribute("lon"),a[c].getAttribute("lat")),b.push(new OpenLayers.Feature.Vector(d,f));if(this.internalProjection&&this.externalProjection)for(f=0,a=b.length;a>f;f++)b[f].geometry.transform(this.externalProjection,this.internalProjection);return b},extractSegment:function(a,b){for(var c=this.getElementsByTagNameNS(a,a.namespaceURI,b),d=[],e=0,f=c.length;f>e;e++)d.push(new OpenLayers.Geometry.Point(c[e].getAttribute("lon"),c[e].getAttribute("lat")));return new OpenLayers.Geometry.LineString(d)},parseAttributes:function(a){var b={};a=a.firstChild;for(var c,d;a;)1==a.nodeType&&a.firstChild&&(c=a.firstChild,3==c.nodeType||4==c.nodeType)&&(d=a.prefix?a.nodeName.split(":")[1]:a.nodeName,"trkseg"!=d&&"rtept"!=d&&(b[d]=c.nodeValue)),a=a.nextSibling;return b},write:function(a,b){a=OpenLayers.Util.isArray(a)?a:[a];var c=this.createElementNS(this.namespaces.gpx,"gpx");c.setAttribute("version","1.1"),c.setAttribute("creator",this.creator),this.setAttributes(c,{"xsi:schemaLocation":this.schemaLocation}),b&&"object"==typeof b&&c.appendChild(this.buildMetadataNode(b));for(var d=0,e=a.length;e>d;d++)c.appendChild(this.buildFeatureNode(a[d]));return OpenLayers.Format.XML.prototype.write.apply(this,[c])},buildMetadataNode:function(a){for(var b=["name","desc","author"],c=this.createElementNS(this.namespaces.gpx,"metadata"),d=0;d<b.length;d++){var e=b[d];if(a[e]){var f=this.createElementNS(this.namespaces.gpx,e);f.appendChild(this.createTextNode(a[e])),c.appendChild(f)}}return c},buildFeatureNode:function(a){var b=a.geometry,b=b.clone();if(this.internalProjection&&this.externalProjection&&b.transform(this.internalProjection,this.externalProjection),"OpenLayers.Geometry.Point"==b.CLASS_NAME){var c=this.buildWptNode(b);return this.appendAttributesNode(c,a),c}c=this.createElementNS(this.namespaces.gpx,"trk"),this.appendAttributesNode(c,a),a=this.buildTrkSegNode(b),a=OpenLayers.Util.isArray(a)?a:[a];for(var b=0,d=a.length;d>b;b++)c.appendChild(a[b]);return c},buildTrkSegNode:function(a){var b,c,d,e;if("OpenLayers.Geometry.LineString"==a.CLASS_NAME||"OpenLayers.Geometry.LinearRing"==a.CLASS_NAME){for(b=this.createElementNS(this.namespaces.gpx,"trkseg"),c=0,d=a.components.length;d>c;c++)e=a.components[c],b.appendChild(this.buildTrkPtNode(e));return b}for(b=[],c=0,d=a.components.length;d>c;c++)b.push(this.buildTrkSegNode(a.components[c]));return b},buildTrkPtNode:function(a){var b=this.createElementNS(this.namespaces.gpx,"trkpt");return b.setAttribute("lon",a.x),b.setAttribute("lat",a.y),b},buildWptNode:function(a){var b=this.createElementNS(this.namespaces.gpx,"wpt");return b.setAttribute("lon",a.x),b.setAttribute("lat",a.y),b},appendAttributesNode:function(a,b){var c=this.createElementNS(this.namespaces.gpx,"name");c.appendChild(this.createTextNode(b.attributes.name||b.id)),a.appendChild(c),c=this.createElementNS(this.namespaces.gpx,"desc"),c.appendChild(this.createTextNode(b.attributes.description||this.defaultDesc)),a.appendChild(c)},CLASS_NAME:"OpenLayers.Format.GPX"}),OpenLayers.Format.WMSDescribeLayer=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.1",CLASS_NAME:"OpenLayers.Format.WMSDescribeLayer"}),OpenLayers.Format.WMSDescribeLayer.v1_1_1=OpenLayers.Class(OpenLayers.Format.WMSDescribeLayer,{initialize:function(a){OpenLayers.Format.WMSDescribeLayer.prototype.initialize.apply(this,[a])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));for(var b,c,d=a.documentElement.childNodes,e={layerDescriptions:[]},f=0;f<d.length;++f)if(b=d[f],c=b.nodeName,"LayerDescription"==c){c=b.getAttribute("name");var g="",h="",i="";b.getAttribute("owsType")?(g=b.getAttribute("owsType"),h=b.getAttribute("owsURL")):""!=b.getAttribute("wfs")?(g="WFS",h=b.getAttribute("wfs")):""!=b.getAttribute("wcs")&&(g="WCS",h=b.getAttribute("wcs")),b=b.getElementsByTagName("Query"),0<b.length&&((i=b[0].getAttribute("typeName"))||(i=b[0].getAttribute("typename"))),b={layerName:c,owsType:g,owsURL:h,typeName:i},e.layerDescriptions.push(b),e.length=e.layerDescriptions.length,e[e.length-1]=b}else if("ServiceException"==c)return{error:(new OpenLayers.Format.OGCExceptionReport).read(a)};return e},CLASS_NAME:"OpenLayers.Format.WMSDescribeLayer.v1_1_1"}),OpenLayers.Format.WMSDescribeLayer.v1_1_0=OpenLayers.Format.WMSDescribeLayer.v1_1_1,OpenLayers.Layer.XYZ=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,sphericalMercator:!1,zoomOffset:0,serverResolutions:null,initialize:function(a,b,c){(c&&c.sphericalMercator||this.sphericalMercator)&&(c=OpenLayers.Util.extend({projection:"EPSG:900913",numZoomLevels:19},c)),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a||this.name,b||this.url,{},c])},clone:function(a){return null==a&&(a=new OpenLayers.Layer.XYZ(this.name,this.url,this.getOptions())),a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){a=this.getXYZ(a);var b=this.url;return OpenLayers.Util.isArray(b)&&(b=this.selectUrl(""+a.x+a.y+a.z,b)),OpenLayers.String.format(b,a)},getXYZ:function(a){var b=this.getServerResolution(),c=Math.round((a.left-this.maxExtent.left)/(b*this.tileSize.w));if(a=Math.round((this.maxExtent.top-a.top)/(b*this.tileSize.h)),b=this.getServerZoom(),this.wrapDateLine)var d=Math.pow(2,b),c=(c%d+d)%d;return{x:c,y:a,z:b}},setMap:function(a){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.maxExtent.left,this.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.XYZ"}),OpenLayers.Layer.OSM=OpenLayers.Class(OpenLayers.Layer.XYZ,{name:"OpenStreetMap",url:["http://a.tile.openstreetmap.org/${z}/${x}/${y}.png","http://b.tile.openstreetmap.org/${z}/${x}/${y}.png","http://c.tile.openstreetmap.org/${z}/${x}/${y}.png"],attribution:"&copy; <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors",sphericalMercator:!0,wrapDateLine:!0,tileOptions:null,initialize:function(a,b,c){OpenLayers.Layer.XYZ.prototype.initialize.apply(this,arguments),this.tileOptions=OpenLayers.Util.extend({crossOriginKeyword:"anonymous"},this.options&&this.options.tileOptions)},clone:function(a){return null==a&&(a=new OpenLayers.Layer.OSM(this.name,this.url,this.getOptions())),a=OpenLayers.Layer.XYZ.prototype.clone.apply(this,[a])},CLASS_NAME:"OpenLayers.Layer.OSM"}),OpenLayers.Renderer=OpenLayers.Class({container:null,root:null,extent:null,locked:!1,size:null,resolution:null,map:null,featureDx:0,initialize:function(a,b){this.container=OpenLayers.Util.getElement(a),OpenLayers.Util.extend(this,b)},destroy:function(){this.map=this.resolution=this.size=this.extent=this.container=null},supported:function(){return!1},setExtent:function(a,b){if(this.extent=a.clone(),this.map.baseLayer&&this.map.baseLayer.wrapDateLine){var c=a.getWidth()/this.map.getExtent().getWidth();a=a.scale(1/c),this.extent=a.wrapDateLine(this.map.getMaxExtent()).scale(c)}return b&&(this.resolution=null),!0},setSize:function(a){this.size=a.clone(),this.resolution=null},getResolution:function(){return this.resolution=this.resolution||this.map.getResolution()},drawFeature:function(a,b){if(null==b&&(b=a.style),a.geometry){var c=a.geometry.getBounds();if(c){var d;if(this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(d=this.map.getMaxExtent()),c.intersectsBounds(this.extent,{worldBounds:d})?this.calculateFeatureDx(c,d):b={display:"none"},c=this.drawGeometry(a.geometry,b,a.id),"none"!=b.display&&b.label&&!1!==c){if(d=a.geometry.getCentroid(),b.labelXOffset||b.labelYOffset){var e=isNaN(b.labelXOffset)?0:b.labelXOffset,f=isNaN(b.labelYOffset)?0:b.labelYOffset,g=this.getResolution();d.move(e*g,f*g)}this.drawText(a.id,b,d)}else this.removeText(a.id);return c}}},calculateFeatureDx:function(a,b){if(this.featureDx=0,b){var c=b.getWidth();this.featureDx=Math.round(((a.left+a.right)/2-(this.extent.left+this.extent.right)/2)/c)*c}},drawGeometry:function(a,b,c){},drawText:function(a,b,c){},removeText:function(a){},clear:function(){},getFeatureIdFromEvent:function(a){},eraseFeatures:function(a){OpenLayers.Util.isArray(a)||(a=[a]);for(var b=0,c=a.length;c>b;++b){var d=a[b];this.eraseGeometry(d.geometry,d.id),this.removeText(d.id)}},eraseGeometry:function(a,b){},moveRoot:function(a){},getRenderLayerId:function(){return this.container.id},applyDefaultSymbolizer:function(a){var b=OpenLayers.Util.extend({},OpenLayers.Renderer.defaultSymbolizer);return!1===a.stroke&&(delete b.strokeWidth,delete b.strokeColor),!1===a.fill&&delete b.fillColor,OpenLayers.Util.extend(b,a),b},CLASS_NAME:"OpenLayers.Renderer"}),OpenLayers.Renderer.defaultSymbolizer={fillColor:"#000000",strokeColor:"#000000",strokeWidth:2,fillOpacity:1,strokeOpacity:1,pointRadius:0,labelAlign:"cm"},OpenLayers.Renderer.symbol={star:[350,75,379,161,469,161,397,215,423,301,350,250,277,301,303,215,231,161,321,161,350,75],cross:[4,0,6,0,6,4,10,4,10,6,6,6,6,10,4,10,4,6,0,6,0,4,4,4,4,0],x:[0,0,25,0,50,35,75,0,100,0,65,50,100,100,75,100,50,65,25,100,0,100,35,50,0,0],square:[0,0,0,1,1,1,1,0,0,0],triangle:[0,10,10,10,5,0,0,10]},OpenLayers.Renderer.Canvas=OpenLayers.Class(OpenLayers.Renderer,{hitDetection:!0,hitOverflow:0,canvas:null,features:null,pendingRedraw:!1,cachedSymbolBounds:{},initialize:function(a,b){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.root=document.createElement("canvas"),this.container.appendChild(this.root),this.canvas=this.root.getContext("2d"),this.features={},this.hitDetection&&(this.hitCanvas=document.createElement("canvas"),this.hitContext=this.hitCanvas.getContext("2d"))},setExtent:function(){return OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),!1},eraseGeometry:function(a,b){this.eraseFeatures(this.features[b][0])},supported:function(){return OpenLayers.CANVAS_SUPPORTED},setSize:function(a){this.size=a.clone();var b=this.root;b.style.width=a.w+"px",b.style.height=a.h+"px",b.width=a.w,b.height=a.h,this.resolution=null,this.hitDetection&&(b=this.hitCanvas,b.style.width=a.w+"px",b.style.height=a.h+"px",b.width=a.w,b.height=a.h)},drawFeature:function(a,b){var c;if(a.geometry){b=this.applyDefaultSymbolizer(b||a.style),c=a.geometry.getBounds();var d;this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(d=this.map.getMaxExtent()),d=c&&c.intersectsBounds(this.extent,{worldBounds:d}),(c="none"!==b.display&&!!c&&d)?this.features[a.id]=[a,b]:delete this.features[a.id],this.pendingRedraw=!0}return this.pendingRedraw&&!this.locked&&(this.redraw(),this.pendingRedraw=!1),c},drawGeometry:function(a,b,c){var d=a.CLASS_NAME;if("OpenLayers.Geometry.Collection"==d||"OpenLayers.Geometry.MultiPoint"==d||"OpenLayers.Geometry.MultiLineString"==d||"OpenLayers.Geometry.MultiPolygon"==d)for(d=0;d<a.components.length;d++)this.drawGeometry(a.components[d],b,c);else switch(a.CLASS_NAME){case"OpenLayers.Geometry.Point":this.drawPoint(a,b,c);break;case"OpenLayers.Geometry.LineString":this.drawLineString(a,b,c);break;case"OpenLayers.Geometry.LinearRing":this.drawLinearRing(a,b,c);break;case"OpenLayers.Geometry.Polygon":this.drawPolygon(a,b,c)}},drawExternalGraphic:function(a,b,c){var d=new Image,e=b.title||b.graphicTitle;e&&(d.title=e);var f=b.graphicWidth||b.graphicHeight,g=b.graphicHeight||b.graphicWidth,f=f?f:2*b.pointRadius,g=g?g:2*b.pointRadius,h=void 0!=b.graphicXOffset?b.graphicXOffset:-(.5*f),i=void 0!=b.graphicYOffset?b.graphicYOffset:-(.5*g),j=b.graphicOpacity||b.fillOpacity;d.onload=OpenLayers.Function.bind(function(){if(this.features[c]){var b=this.getLocalXY(a),e=b[0],b=b[1];if(!isNaN(e)&&!isNaN(b)){var e=e+h|0,b=b+i|0,k=this.canvas;k.globalAlpha=j;var l=OpenLayers.Renderer.Canvas.drawImageScaleFactor||(OpenLayers.Renderer.Canvas.drawImageScaleFactor=/android 2.1/.test(navigator.userAgent.toLowerCase())?320/window.screen.width:1);k.drawImage(d,e*l,b*l,f*l,g*l),this.hitDetection&&(this.setHitContextStyle("fill",c),this.hitContext.fillRect(e,b,f,g))}}},this),d.src=b.externalGraphic},drawNamedSymbol:function(a,b,c){var d,e,f,g;f=Math.PI/180;var h=OpenLayers.Renderer.symbol[b.graphicName];if(!h)throw Error(b.graphicName+" is not a valid symbol name");if(!(!h.length||2>h.length||(a=this.getLocalXY(a),e=a[0],g=a[1],isNaN(e)||isNaN(g)))){if(this.canvas.lineCap="round",this.canvas.lineJoin="round",this.hitDetection&&(this.hitContext.lineCap="round",this.hitContext.lineJoin="round"),b.graphicName in this.cachedSymbolBounds)d=this.cachedSymbolBounds[b.graphicName];else{for(d=new OpenLayers.Bounds,a=0;a<h.length;a+=2)d.extend(new OpenLayers.LonLat(h[a],h[a+1]));this.cachedSymbolBounds[b.graphicName]=d}if(this.canvas.save(),this.hitDetection&&this.hitContext.save(),this.canvas.translate(e,g),this.hitDetection&&this.hitContext.translate(e,g),a=f*b.rotation,isNaN(a)||(this.canvas.rotate(a),this.hitDetection&&this.hitContext.rotate(a)),f=2*b.pointRadius/Math.max(d.getWidth(),d.getHeight()),this.canvas.scale(f,f),this.hitDetection&&this.hitContext.scale(f,f),a=d.getCenterLonLat().lon,d=d.getCenterLonLat().lat,this.canvas.translate(-a,-d),this.hitDetection&&this.hitContext.translate(-a,-d),g=b.strokeWidth,b.strokeWidth=g/f,!1!==b.fill){for(this.setCanvasStyle("fill",b),this.canvas.beginPath(),a=0;a<h.length;a+=2)d=h[a],e=h[a+1],0==a&&this.canvas.moveTo(d,e),this.canvas.lineTo(d,e);if(this.canvas.closePath(),this.canvas.fill(),this.hitDetection){for(this.setHitContextStyle("fill",c,b),this.hitContext.beginPath(),a=0;a<h.length;a+=2)d=h[a],e=h[a+1],0==a&&this.canvas.moveTo(d,e),this.hitContext.lineTo(d,e);this.hitContext.closePath(),this.hitContext.fill()}}if(!1!==b.stroke){for(this.setCanvasStyle("stroke",b),this.canvas.beginPath(),a=0;a<h.length;a+=2)d=h[a],e=h[a+1],0==a&&this.canvas.moveTo(d,e),this.canvas.lineTo(d,e);if(this.canvas.closePath(),this.canvas.stroke(),this.hitDetection){for(this.setHitContextStyle("stroke",c,b,f),this.hitContext.beginPath(),a=0;a<h.length;a+=2)d=h[a],e=h[a+1],0==a&&this.hitContext.moveTo(d,e),this.hitContext.lineTo(d,e);this.hitContext.closePath(),this.hitContext.stroke()}}b.strokeWidth=g,this.canvas.restore(),this.hitDetection&&this.hitContext.restore(),this.setCanvasStyle("reset")}},setCanvasStyle:function(a,b){"fill"===a?(this.canvas.globalAlpha=b.fillOpacity,this.canvas.fillStyle=b.fillColor):"stroke"===a?(this.canvas.globalAlpha=b.strokeOpacity,this.canvas.strokeStyle=b.strokeColor,this.canvas.lineWidth=b.strokeWidth):(this.canvas.globalAlpha=0,this.canvas.lineWidth=1)},featureIdToHex:function(a){a=Number(a.split("_").pop())+1,a>=16777216&&(this.hitOverflow=a-16777215,a=a%16777216+1),a="000000"+a.toString(16);var b=a.length;return a="#"+a.substring(b-6,b)},setHitContextStyle:function(a,b,c,d){b=this.featureIdToHex(b),"fill"==a?(this.hitContext.globalAlpha=1,this.hitContext.fillStyle=b):"stroke"==a?(this.hitContext.globalAlpha=1,this.hitContext.strokeStyle=b,"undefined"==typeof d?this.hitContext.lineWidth=c.strokeWidth+2:isNaN(d)||(this.hitContext.lineWidth=c.strokeWidth+2/d)):(this.hitContext.globalAlpha=0,this.hitContext.lineWidth=1)},drawPoint:function(a,b,c){if(!1!==b.graphic)if(b.externalGraphic)this.drawExternalGraphic(a,b,c);else if(b.graphicName&&"circle"!=b.graphicName)this.drawNamedSymbol(a,b,c);else{var d=this.getLocalXY(a);if(a=d[0],d=d[1],!isNaN(a)&&!isNaN(d)){var e=2*Math.PI,f=b.pointRadius;!1!==b.fill&&(this.setCanvasStyle("fill",b),this.canvas.beginPath(),this.canvas.arc(a,d,f,0,e,!0),this.canvas.fill(),this.hitDetection&&(this.setHitContextStyle("fill",c,b),this.hitContext.beginPath(),this.hitContext.arc(a,d,f,0,e,!0),this.hitContext.fill())),!1!==b.stroke&&(this.setCanvasStyle("stroke",b),this.canvas.beginPath(),this.canvas.arc(a,d,f,0,e,!0),this.canvas.stroke(),this.hitDetection&&(this.setHitContextStyle("stroke",c,b),this.hitContext.beginPath(),this.hitContext.arc(a,d,f,0,e,!0),this.hitContext.stroke()),this.setCanvasStyle("reset"))}}},drawLineString:function(a,b,c){b=OpenLayers.Util.applyDefaults({fill:!1},b),this.drawLinearRing(a,b,c)},drawLinearRing:function(a,b,c){!1!==b.fill&&(this.setCanvasStyle("fill",b),this.renderPath(this.canvas,a,b,c,"fill"),this.hitDetection&&(this.setHitContextStyle("fill",c,b),this.renderPath(this.hitContext,a,b,c,"fill"))),!1!==b.stroke&&(this.setCanvasStyle("stroke",b),this.renderPath(this.canvas,a,b,c,"stroke"),this.hitDetection&&(this.setHitContextStyle("stroke",c,b),this.renderPath(this.hitContext,a,b,c,"stroke"))),this.setCanvasStyle("reset")},renderPath:function(a,b,c,d,e){b=b.components,c=b.length,a.beginPath(),d=this.getLocalXY(b[0]);var f=d[1];if(!isNaN(d[0])&&!isNaN(f)){for(a.moveTo(d[0],d[1]),d=1;c>d;++d)f=this.getLocalXY(b[d]),a.lineTo(f[0],f[1]);"fill"===e?a.fill():a.stroke()}},drawPolygon:function(a,b,c){a=a.components;var d=a.length;this.drawLinearRing(a[0],b,c);for(var e=1;d>e;++e)this.canvas.globalCompositeOperation="destination-out",this.hitDetection&&(this.hitContext.globalCompositeOperation="destination-out"),this.drawLinearRing(a[e],OpenLayers.Util.applyDefaults({stroke:!1,fillOpacity:1},b),c),this.canvas.globalCompositeOperation="source-over",this.hitDetection&&(this.hitContext.globalCompositeOperation="source-over"),this.drawLinearRing(a[e],OpenLayers.Util.applyDefaults({fill:!1},b),c)},drawText:function(a,b){var c=this.getLocalXY(a);this.setCanvasStyle("reset"),this.canvas.fillStyle=b.fontColor,this.canvas.globalAlpha=b.fontOpacity||1;var d=[b.fontStyle?b.fontStyle:"normal","normal",b.fontWeight?b.fontWeight:"normal",b.fontSize?b.fontSize:"1em",b.fontFamily?b.fontFamily:"sans-serif"].join(" "),e=b.label.split("\n"),f=e.length;if(this.canvas.fillText){this.canvas.font=d,this.canvas.textAlign=OpenLayers.Renderer.Canvas.LABEL_ALIGN[b.labelAlign[0]]||"center",this.canvas.textBaseline=OpenLayers.Renderer.Canvas.LABEL_ALIGN[b.labelAlign[1]]||"middle";var g=OpenLayers.Renderer.Canvas.LABEL_FACTOR[b.labelAlign[1]];for(null==g&&(g=-.5),d=this.canvas.measureText("Mg").height||this.canvas.measureText("xx").width,c[1]+=d*g*(f-1),g=0;f>g;g++)b.labelOutlineWidth&&(this.canvas.save(),this.canvas.globalAlpha=b.labelOutlineOpacity||b.fontOpacity||1,this.canvas.strokeStyle=b.labelOutlineColor,this.canvas.lineWidth=b.labelOutlineWidth,this.canvas.strokeText(e[g],c[0],c[1]+d*g+1),this.canvas.restore()),this.canvas.fillText(e[g],c[0],c[1]+d*g)}else if(this.canvas.mozDrawText){this.canvas.mozTextStyle=d;var h=OpenLayers.Renderer.Canvas.LABEL_FACTOR[b.labelAlign[0]];for(null==h&&(h=-.5),g=OpenLayers.Renderer.Canvas.LABEL_FACTOR[b.labelAlign[1]],null==g&&(g=-.5),d=this.canvas.mozMeasureText("xx"),c[1]+=d*(1+g*f),g=0;f>g;g++){var i=c[0]+h*this.canvas.mozMeasureText(e[g]),j=c[1]+g*d;this.canvas.translate(i,j),this.canvas.mozDrawText(e[g]),this.canvas.translate(-i,-j)}}this.setCanvasStyle("reset")},getLocalXY:function(a){var b=this.getResolution(),c=this.extent;return[(a.x-this.featureDx)/b+-c.left/b,c.top/b-a.y/b]},clear:function(){var a=this.root.height,b=this.root.width;this.canvas.clearRect(0,0,b,a),this.features={},this.hitDetection&&this.hitContext.clearRect(0,0,b,a)},getFeatureIdFromEvent:function(a){var b;if(this.hitDetection&&"none"!==this.root.style.display&&!this.map.dragging&&(a=a.xy,a=this.hitContext.getImageData(0|a.x,0|a.y,1,1).data,255===a[3]&&(a=a[2]+256*(a[1]+256*a[0])))){a="OpenLayers_Feature_Vector_"+(a-1+this.hitOverflow);try{b=this.features[a][0]}catch(c){}}return b},eraseFeatures:function(a){OpenLayers.Util.isArray(a)||(a=[a]);for(var b=0;b<a.length;++b)delete this.features[a[b].id];this.redraw()},redraw:function(){if(!this.locked){var a=this.root.height,b=this.root.width;this.canvas.clearRect(0,0,b,a),this.hitDetection&&this.hitContext.clearRect(0,0,b,a);var c,d,e,a=[],f=this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent();for(e in this.features)this.features.hasOwnProperty(e)&&(b=this.features[e][0],c=b.geometry,this.calculateFeatureDx(c.getBounds(),f),d=this.features[e][1],this.drawGeometry(c,d,b.id),d.label&&a.push([b,d]));for(b=0,c=a.length;c>b;++b)e=a[b],this.drawText(e[0].geometry.getCentroid(),e[1])}},CLASS_NAME:"OpenLayers.Renderer.Canvas"}),OpenLayers.Renderer.Canvas.LABEL_ALIGN={l:"left",r:"right",t:"top",b:"bottom"},OpenLayers.Renderer.Canvas.LABEL_FACTOR={l:0,r:-1,t:0,b:-1},OpenLayers.Renderer.Canvas.drawImageScaleFactor=null,OpenLayers.Format.OSM=OpenLayers.Class(OpenLayers.Format.XML,{checkTags:!1,interestingTagsExclude:null,areaTags:null,initialize:function(a){var b={interestingTagsExclude:"source source_ref source:ref history attribution created_by".split(" "),areaTags:"area building leisure tourism ruins historic landuse military natural sport".split(" ")},b=OpenLayers.Util.extend(b,a),c={};for(a=0;a<b.interestingTagsExclude.length;a++)c[b.interestingTagsExclude[a]]=!0;for(b.interestingTagsExclude=c,c={},a=0;a<b.areaTags.length;a++)c[b.areaTags[a]]=!0;b.areaTags=c,this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[b])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b=this.getNodes(a),c=this.getWays(a);a=Array(c.length);for(var d=0;d<c.length;d++){for(var e=Array(c[d].nodes.length),f=this.isWayArea(c[d])?1:0,g=0;g<c[d].nodes.length;g++){var h=b[c[d].nodes[g]],i=new OpenLayers.Geometry.Point(h.lon,h.lat);i.osm_id=parseInt(c[d].nodes[g]),e[g]=i,h.used=!0}h=null,h=f?new OpenLayers.Geometry.Polygon(new OpenLayers.Geometry.LinearRing(e)):new OpenLayers.Geometry.LineString(e),this.internalProjection&&this.externalProjection&&h.transform(this.externalProjection,this.internalProjection),e=new OpenLayers.Feature.Vector(h,c[d].tags),e.osm_id=parseInt(c[d].id),e.fid="way."+e.osm_id,a[d]=e}for(var j in b){if(h=b[j],!h.used||this.checkTags){if(c=null,this.checkTags){if(c=this.getTags(h.node,!0),h.used&&!c[1])continue;c=c[0]}else c=this.getTags(h.node);e=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(h.lon,h.lat),c),this.internalProjection&&this.externalProjection&&e.geometry.transform(this.externalProjection,this.internalProjection),e.osm_id=parseInt(j),e.fid="node."+e.osm_id,a.push(e)}h.node=null}return a},getNodes:function(a){a=a.getElementsByTagName("node");for(var b={},c=0;c<a.length;c++){var d=a[c],e=d.getAttribute("id");b[e]={lat:d.getAttribute("lat"),lon:d.getAttribute("lon"),node:d}}return b},getWays:function(a){a=a.getElementsByTagName("way");for(var b=[],c=0;c<a.length;c++){var d=a[c],e={id:d.getAttribute("id")};e.tags=this.getTags(d),d=d.getElementsByTagName("nd"),e.nodes=Array(d.length);for(var f=0;f<d.length;f++)e.nodes[f]=d[f].getAttribute("ref");b.push(e)}return b},getTags:function(a,b){for(var c=a.getElementsByTagName("tag"),d={},e=!1,f=0;f<c.length;f++){var g=c[f].getAttribute("k");d[g]=c[f].getAttribute("v"),b&&(this.interestingTagsExclude[g]||(e=!0))}return b?[d,e]:d},isWayArea:function(a){var b=!1,c=!1;if(a.nodes[0]==a.nodes[a.nodes.length-1]&&(b=!0),this.checkTags)for(var d in a.tags)if(this.areaTags[d]){c=!0;break}return b&&(this.checkTags?c:!0)},write:function(a){OpenLayers.Util.isArray(a)||(a=[a]),this.osm_id=1,this.created_nodes={};var b=this.createElementNS(null,"osm");b.setAttribute("version","0.5"),b.setAttribute("generator","OpenLayers "+OpenLayers.VERSION_NUMBER);for(var c=a.length-1;c>=0;c--)for(var d=this.createFeatureNodes(a[c]),e=0;e<d.length;e++)b.appendChild(d[e]);return OpenLayers.Format.XML.prototype.write.apply(this,[b])},createFeatureNodes:function(a){var b=[],c=a.geometry.CLASS_NAME,c=c.substring(c.lastIndexOf(".")+1),c=c.toLowerCase();return(c=this.createXML[c])&&(b=c.apply(this,[a])),b},createXML:{point:function(a){var b=null,c=a.geometry?a.geometry:a;this.internalProjection&&this.externalProjection&&(c=c.clone(),c.transform(this.internalProjection,this.externalProjection));var d=!1;a.osm_id?(b=a.osm_id,this.created_nodes[b]&&(d=!0)):(b=-this.osm_id,this.osm_id++);var e=d?this.created_nodes[b]:this.createElementNS(null,"node");return this.created_nodes[b]=e,e.setAttribute("id",b),e.setAttribute("lon",c.x),e.setAttribute("lat",c.y),a.attributes&&this.serializeTags(a,e),this.setState(a,e),d?[]:[e]},linestring:function(a){var b,c=[],d=a.geometry;a.osm_id?b=a.osm_id:(b=-this.osm_id,this.osm_id++);var e=this.createElementNS(null,"way");for(e.setAttribute("id",b),b=0;b<d.components.length;b++){var f=this.createXML.point.apply(this,[d.components[b]]);if(f.length){var f=f[0],g=f.getAttribute("id");c.push(f)}else g=d.components[b].osm_id,f=this.created_nodes[g];this.setState(a,f),f=this.createElementNS(null,"nd"),f.setAttribute("ref",g),e.appendChild(f)}return this.serializeTags(a,e),c.push(e),c},polygon:function(a){var b=OpenLayers.Util.extend({area:"yes"},a.attributes),b=new OpenLayers.Feature.Vector(a.geometry.components[0],b);return b.osm_id=a.osm_id,this.createXML.linestring.apply(this,[b])}},serializeTags:function(a,b){for(var c in a.attributes){var d=this.createElementNS(null,"tag");d.setAttribute("k",c),d.setAttribute("v",a.attributes[c]),b.appendChild(d)}},setState:function(a,b){if(a.state){var c=null;switch(a.state){case OpenLayers.State.UPDATE:case OpenLayers.State.DELETE:c="delete"}c&&b.setAttribute("action",c)}},CLASS_NAME:"OpenLayers.Format.OSM"}),OpenLayers.Handler.Keyboard=OpenLayers.Class(OpenLayers.Handler,{KEY_EVENTS:["keydown","keyup"],eventListener:null,observeElement:null,initialize:function(a,b,c){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.eventListener=OpenLayers.Function.bindAsEventListener(this.handleKeyEvent,this)},destroy:function(){this.deactivate(),this.eventListener=null,OpenLayers.Handler.prototype.destroy.apply(this,arguments)},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.observeElement=this.observeElement||document;for(var a=0,b=this.KEY_EVENTS.length;b>a;a++)OpenLayers.Event.observe(this.observeElement,this.KEY_EVENTS[a],this.eventListener);return!0}return!1},deactivate:function(){var a=!1;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){for(var a=0,b=this.KEY_EVENTS.length;b>a;a++)OpenLayers.Event.stopObserving(this.observeElement,this.KEY_EVENTS[a],this.eventListener);a=!0}return a},handleKeyEvent:function(a){this.checkModifiers(a)&&this.callback(a.type,[a])},CLASS_NAME:"OpenLayers.Handler.Keyboard"}),OpenLayers.Control.ModifyFeature=OpenLayers.Class(OpenLayers.Control,{documentDrag:!1,geometryTypes:null,clickout:!0,toggle:!0,standalone:!1,layer:null,feature:null,vertex:null,vertices:null,virtualVertices:null,handlers:null,deleteCodes:null,virtualStyle:null,vertexRenderIntent:null,mode:null,createVertices:!0,modified:!1,radiusHandle:null,dragHandle:null,onModificationStart:function(){},onModification:function(){},onModificationEnd:function(){},initialize:function(a,b){b=b||{},this.layer=a,this.vertices=[],this.virtualVertices=[],this.virtualStyle=OpenLayers.Util.extend({},this.layer.style||this.layer.styleMap.createSymbolizer(null,b.vertexRenderIntent)),this.virtualStyle.fillOpacity=.3,this.virtualStyle.strokeOpacity=.3,this.deleteCodes=[46,68],this.mode=OpenLayers.Control.ModifyFeature.RESHAPE,OpenLayers.Control.prototype.initialize.apply(this,[b]),OpenLayers.Util.isArray(this.deleteCodes)||(this.deleteCodes=[this.deleteCodes]);var c={documentDrag:this.documentDrag,stopDown:!1};this.handlers={keyboard:new OpenLayers.Handler.Keyboard(this,{keydown:this.handleKeypress}),drag:new OpenLayers.Handler.Drag(this,{down:function(a){this.vertex=null,(a=this.layer.getFeatureFromEvent(this.handlers.drag.evt))?this.dragStart(a):this.clickout&&(this._unselect=this.feature)},move:function(a){delete this._unselect,this.vertex&&this.dragVertex(this.vertex,a)},up:function(){this.handlers.drag.stopDown=!1,this._unselect&&(this.unselectFeature(this._unselect),delete this._unselect)},done:function(a){this.vertex&&this.dragComplete(this.vertex)}},c)}},destroy:function(){this.map&&this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.layer=null,OpenLayers.Control.prototype.destroy.apply(this,[])},activate:function(){return this.moveLayerToTop(),this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.handlers.keyboard.activate()&&this.handlers.drag.activate()&&OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){var a=!1;return OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.moveLayerBack(),this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.layer.removeFeatures(this.vertices,{silent:!0}),this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.vertices=[],this.handlers.drag.deactivate(),this.handlers.keyboard.deactivate(),(a=this.feature)&&a.geometry&&a.layer&&this.unselectFeature(a),a=!0),a},beforeSelectFeature:function(a){return this.layer.events.triggerEvent("beforefeaturemodified",{feature:a})},selectFeature:function(a){if(!(this.feature===a||this.geometryTypes&&-1==OpenLayers.Util.indexOf(this.geometryTypes,a.geometry.CLASS_NAME))){!1!==this.beforeSelectFeature(a)&&(this.feature&&this.unselectFeature(this.feature),this.feature=a,this.layer.selectedFeatures.push(a),this.layer.drawFeature(a,"select"),this.modified=!1,this.resetVertices(),this.onModificationStart(this.feature));var b=a.modified;!a.geometry||b&&b.geometry||(this._originalGeometry=a.geometry.clone())}},unselectFeature:function(a){this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[],this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),delete this.dragHandle),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),delete this.radiusHandle),this.layer.drawFeature(this.feature,"default"),this.feature=null,OpenLayers.Util.removeItem(this.layer.selectedFeatures,a),
this.onModificationEnd(a),this.layer.events.triggerEvent("afterfeaturemodified",{feature:a,modified:this.modified}),this.modified=!1},dragStart:function(a){var b="OpenLayers.Geometry.Point"==a.geometry.CLASS_NAME;this.standalone||(a._sketch||!b)&&a._sketch||(this.toggle&&this.feature===a&&(this._unselect=a),this.selectFeature(a)),(a._sketch||b)&&(this.vertex=a,this.handlers.drag.stopDown=!0)},dragVertex:function(a,b){var c=this.map.getLonLatFromViewPortPx(b),d=a.geometry;d.move(c.lon-d.x,c.lat-d.y),this.modified=!0,"OpenLayers.Geometry.Point"==this.feature.geometry.CLASS_NAME?this.layer.events.triggerEvent("vertexmodified",{vertex:a.geometry,feature:this.feature,pixel:b}):(a._index?(a.geometry.parent.addComponent(a.geometry,a._index),delete a._index,OpenLayers.Util.removeItem(this.virtualVertices,a),this.vertices.push(a)):a==this.dragHandle?(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null)):a!==this.radiusHandle&&this.layer.events.triggerEvent("vertexmodified",{vertex:a.geometry,feature:this.feature,pixel:b}),0<this.virtualVertices.length&&(this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.layer.drawFeature(this.feature,this.standalone?void 0:"select")),this.layer.drawFeature(a)},dragComplete:function(a){this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature})},setFeatureState:function(){if(this.feature.state!=OpenLayers.State.INSERT&&this.feature.state!=OpenLayers.State.DELETE&&(this.feature.state=OpenLayers.State.UPDATE,this.modified&&this._originalGeometry)){var a=this.feature;a.modified=OpenLayers.Util.extend(a.modified,{geometry:this._originalGeometry}),delete this._originalGeometry}},resetVertices:function(){0<this.vertices.length&&(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[]),0<this.virtualVertices.length&&(this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),this.dragHandle=null),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null),this.feature&&"OpenLayers.Geometry.Point"!=this.feature.geometry.CLASS_NAME&&(this.mode&OpenLayers.Control.ModifyFeature.DRAG&&this.collectDragHandle(),this.mode&(OpenLayers.Control.ModifyFeature.ROTATE|OpenLayers.Control.ModifyFeature.RESIZE)&&this.collectRadiusHandle(),this.mode&OpenLayers.Control.ModifyFeature.RESHAPE&&(this.mode&OpenLayers.Control.ModifyFeature.RESIZE||this.collectVertices()))},handleKeypress:function(a){var b=a.keyCode;this.feature&&-1!=OpenLayers.Util.indexOf(this.deleteCodes,b)&&(b=this.layer.getFeatureFromEvent(this.handlers.drag.evt))&&-1!=OpenLayers.Util.indexOf(this.vertices,b)&&!this.handlers.drag.dragging&&b.geometry.parent&&(b.geometry.parent.removeComponent(b.geometry),this.layer.events.triggerEvent("vertexremoved",{vertex:b.geometry,feature:this.feature,pixel:a.xy}),this.layer.drawFeature(this.feature,this.standalone?void 0:"select"),this.modified=!0,this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature}))},collectVertices:function(){function a(c){var d,e,f;if("OpenLayers.Geometry.Point"==c.CLASS_NAME)e=new OpenLayers.Feature.Vector(c),e._sketch=!0,e.renderIntent=b.vertexRenderIntent,b.vertices.push(e);else{for(f=c.components.length,"OpenLayers.Geometry.LinearRing"==c.CLASS_NAME&&(f-=1),d=0;f>d;++d)e=c.components[d],"OpenLayers.Geometry.Point"==e.CLASS_NAME?(e=new OpenLayers.Feature.Vector(e),e._sketch=!0,e.renderIntent=b.vertexRenderIntent,b.vertices.push(e)):a(e);if(b.createVertices&&"OpenLayers.Geometry.MultiPoint"!=c.CLASS_NAME)for(d=0,f=c.components.length;f-1>d;++d){e=c.components[d];var g=c.components[d+1];"OpenLayers.Geometry.Point"==e.CLASS_NAME&&"OpenLayers.Geometry.Point"==g.CLASS_NAME&&(e=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point((e.x+g.x)/2,(e.y+g.y)/2),null,b.virtualStyle),e.geometry.parent=c,e._index=d+1,e._sketch=!0,b.virtualVertices.push(e))}}}this.vertices=[],this.virtualVertices=[];var b=this;a.call(this,this.feature.geometry),this.layer.addFeatures(this.virtualVertices,{silent:!0}),this.layer.addFeatures(this.vertices,{silent:!0})},collectDragHandle:function(){var a=this.feature.geometry,b=a.getBounds().getCenterLonLat(),b=new OpenLayers.Geometry.Point(b.lon,b.lat),c=new OpenLayers.Feature.Vector(b);b.move=function(b,c){OpenLayers.Geometry.Point.prototype.move.call(this,b,c),a.move(b,c)},c._sketch=!0,this.dragHandle=c,this.dragHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.dragHandle],{silent:!0})},collectRadiusHandle:function(){var a=this.feature.geometry,b=a.getBounds(),c=b.getCenterLonLat(),d=new OpenLayers.Geometry.Point(c.lon,c.lat),b=new OpenLayers.Geometry.Point(b.right,b.bottom),c=new OpenLayers.Feature.Vector(b),e=this.mode&OpenLayers.Control.ModifyFeature.RESIZE,f=this.mode&OpenLayers.Control.ModifyFeature.RESHAPE,g=this.mode&OpenLayers.Control.ModifyFeature.ROTATE;b.move=function(b,c){OpenLayers.Geometry.Point.prototype.move.call(this,b,c);var h=this.x-d.x,i=this.y-d.y,j=h-b,k=i-c;if(g){var l=Math.atan2(k,j),l=Math.atan2(i,h)-l,l=l*(180/Math.PI);a.rotate(l,d)}if(e){var m;f?(i/=k,m=h/j/i):(j=Math.sqrt(j*j+k*k),i=Math.sqrt(h*h+i*i)/j),a.resize(i,d,m)}},c._sketch=!0,this.radiusHandle=c,this.radiusHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.radiusHandle],{silent:!0})},setMap:function(a){this.handlers.drag.setMap(a),OpenLayers.Control.prototype.setMap.apply(this,arguments)},handleMapEvents:function(a){"removelayer"!=a.type&&"order"!=a.property||this.moveLayerToTop()},moveLayerToTop:function(){var a=Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1;this.layer.setZIndex(a)},moveLayerBack:function(){var a=this.layer.getZIndex()-1;a>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(a):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Control.ModifyFeature"}),OpenLayers.Control.ModifyFeature.RESHAPE=1,OpenLayers.Control.ModifyFeature.RESIZE=2,OpenLayers.Control.ModifyFeature.ROTATE=4,OpenLayers.Control.ModifyFeature.DRAG=8,OpenLayers.Layer.Bing=OpenLayers.Class(OpenLayers.Layer.XYZ,{key:null,serverResolutions:[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,.5971642833948135,.29858214169740677,.14929107084870338,.07464553542435169],attributionTemplate:'<span class="olBingAttribution ${type}"><div><a target="_blank" href="http://www.bing.com/maps/"><img src="${logo}" /></a></div>${copyrights}<a style="white-space: nowrap" target="_blank" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a></span>',metadata:null,protocolRegex:/^http:/i,type:"Road",culture:"en-US",metadataParams:null,tileOptions:null,protocol:~window.location.href.indexOf("http")?"":"http:",initialize:function(a){a=OpenLayers.Util.applyDefaults({sphericalMercator:!0},a),OpenLayers.Layer.XYZ.prototype.initialize.apply(this,[a.name||"Bing "+(a.type||this.type),null,a]),this.tileOptions=OpenLayers.Util.extend({crossOriginKeyword:"anonymous"},this.options.tileOptions),this.loadMetadata()},loadMetadata:function(){this._callbackId="_callback_"+this.id.replace(/\./g,"_"),window[this._callbackId]=OpenLayers.Function.bind(OpenLayers.Layer.Bing.processMetadata,this);var a=OpenLayers.Util.applyDefaults({key:this.key,jsonp:this._callbackId,include:"ImageryProviders"},this.metadataParams),a=this.protocol+"//dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.type+"?"+OpenLayers.Util.getParameterString(a),b=document.createElement("script");b.type="text/javascript",b.src=a,b.id=this._callbackId,document.getElementsByTagName("head")[0].appendChild(b)},initLayer:function(){var a=this.metadata.resourceSets[0].resources[0],b=a.imageUrl.replace("{quadkey}","${quadkey}"),b=b.replace("{culture}",this.culture),b=b.replace(this.protocolRegex,this.protocol);this.url=[];for(var c=0;c<a.imageUrlSubdomains.length;++c)this.url.push(b.replace("{subdomain}",a.imageUrlSubdomains[c]));this.addOptions({maxResolution:Math.min(this.serverResolutions[a.zoomMin],this.maxResolution||Number.POSITIVE_INFINITY),numZoomLevels:Math.min(a.zoomMax+1-a.zoomMin,this.numZoomLevels)},!0),this.isBaseLayer||this.redraw(),this.updateAttribution()},getURL:function(a){if(this.url){var b=this.getXYZ(a);a=b.x;for(var c=b.y,b=b.z,d=[],e=b;e>0;--e){var f="0",g=1<<e-1;0!=(a&g)&&f++,0!=(c&g)&&(f++,f++),d.push(f)}return d=d.join(""),a=this.selectUrl(""+a+c+b,this.url),OpenLayers.String.format(a,{quadkey:d})}},updateAttribution:function(){var a=this.metadata;if(a.resourceSets&&this.map&&this.map.center){var b,c,d,e,f,g,h,i=a.resourceSets[0].resources[0],j=this.map.getExtent().transform(this.map.getProjectionObject(),new OpenLayers.Projection("EPSG:4326")),k=i.imageryProviders||[],l=OpenLayers.Util.indexOf(this.serverResolutions,this.getServerResolution()),i="";for(c=0,d=k.length;d>c;++c)for(b=k[c],e=0,f=b.coverageAreas.length;f>e;++e)h=b.coverageAreas[e],g=OpenLayers.Bounds.fromArray(h.bbox,!0),j.intersectsBounds(g)&&l<=h.zoomMax&&l>=h.zoomMin&&(i+=b.attribution+" ");a=a.brandLogoUri.replace(this.protocolRegex,this.protocol),this.attribution=OpenLayers.String.format(this.attributionTemplate,{type:this.type.toLowerCase(),logo:a,copyrights:i}),this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"attribution"})}},setMap:function(){OpenLayers.Layer.XYZ.prototype.setMap.apply(this,arguments),this.map.events.register("moveend",this,this.updateAttribution)},clone:function(a){return null==a&&(a=new OpenLayers.Layer.Bing(this.options)),a=OpenLayers.Layer.XYZ.prototype.clone.apply(this,[a])},destroy:function(){this.map&&this.map.events.unregister("moveend",this,this.updateAttribution),OpenLayers.Layer.XYZ.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.Bing"}),OpenLayers.Layer.Bing.processMetadata=function(a){this.metadata=a,this.initLayer(),a=document.getElementById(this._callbackId),a.parentNode.removeChild(a),window[this._callbackId]=void 0,delete this._callbackId},OpenLayers.StyleMap=OpenLayers.Class({styles:null,extendDefault:!0,initialize:function(a,b){if(this.styles={"default":new OpenLayers.Style(OpenLayers.Feature.Vector.style["default"]),select:new OpenLayers.Style(OpenLayers.Feature.Vector.style.select),temporary:new OpenLayers.Style(OpenLayers.Feature.Vector.style.temporary),"delete":new OpenLayers.Style(OpenLayers.Feature.Vector.style["delete"])},a instanceof OpenLayers.Style)this.styles["default"]=a,this.styles.select=a,this.styles.temporary=a,this.styles["delete"]=a;else if("object"==typeof a)for(var c in a)if(a[c]instanceof OpenLayers.Style)this.styles[c]=a[c];else{if("object"!=typeof a[c]){this.styles["default"]=new OpenLayers.Style(a),this.styles.select=new OpenLayers.Style(a),this.styles.temporary=new OpenLayers.Style(a),this.styles["delete"]=new OpenLayers.Style(a);break}this.styles[c]=new OpenLayers.Style(a[c])}OpenLayers.Util.extend(this,b)},destroy:function(){for(var a in this.styles)this.styles[a].destroy();this.styles=null},createSymbolizer:function(a,b){a||(a=new OpenLayers.Feature.Vector),this.styles[b]||(b="default"),a.renderIntent=b;var c={};return this.extendDefault&&"default"!=b&&(c=this.styles["default"].createSymbolizer(a)),OpenLayers.Util.extend(c,this.styles[b].createSymbolizer(a))},addUniqueValueRules:function(a,b,c,d){var e,f=[];for(e in c)f.push(new OpenLayers.Rule({symbolizer:c[e],context:d,filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,property:b,value:e})}));this.styles[a].addRules(f)},CLASS_NAME:"OpenLayers.StyleMap"}),OpenLayers.Layer.Vector=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,isFixed:!1,features:null,filter:null,selectedFeatures:null,unrenderedFeatures:null,reportError:!0,style:null,styleMap:null,strategies:null,protocol:null,renderers:["SVG","VML","Canvas"],renderer:null,rendererOptions:null,geometryType:null,drawn:!1,ratio:1,initialize:function(a,b){if(OpenLayers.Layer.prototype.initialize.apply(this,arguments),this.renderer&&this.renderer.supported()||this.assignRenderer(),this.renderer&&this.renderer.supported()||(this.renderer=null,this.displayError()),this.styleMap||(this.styleMap=new OpenLayers.StyleMap),this.features=[],this.selectedFeatures=[],this.unrenderedFeatures={},this.strategies)for(var c=0,d=this.strategies.length;d>c;c++)this.strategies[c].setLayer(this)},destroy:function(){if(this.strategies){var a,b,c;for(b=0,c=this.strategies.length;c>b;b++)a=this.strategies[b],a.autoDestroy&&a.destroy();this.strategies=null}this.protocol&&(this.protocol.autoDestroy&&this.protocol.destroy(),this.protocol=null),this.destroyFeatures(),this.unrenderedFeatures=this.selectedFeatures=this.features=null,this.renderer&&this.renderer.destroy(),this.drawn=this.geometryType=this.renderer=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(a){null==a&&(a=new OpenLayers.Layer.Vector(this.name,this.getOptions())),a=OpenLayers.Layer.prototype.clone.apply(this,[a]);for(var b=this.features,c=b.length,d=Array(c),e=0;c>e;++e)d[e]=b[e].clone();return a.features=d,a},refresh:function(a){this.calculateInRange()&&this.visibility&&this.events.triggerEvent("refresh",a)},assignRenderer:function(){for(var a=0,b=this.renderers.length;b>a;a++){var c=this.renderers[a];if((c="function"==typeof c?c:OpenLayers.Renderer[c])&&c.prototype.supported()){this.renderer=new c(this.div,this.rendererOptions);break}}},displayError:function(){this.reportError&&OpenLayers.Console.userError(OpenLayers.i18n("browserNotSupported",{renderers:this.renderers.join("\n")}))},setMap:function(a){if(OpenLayers.Layer.prototype.setMap.apply(this,arguments),this.renderer){this.renderer.map=this.map;var b=this.map.getSize();b.w*=this.ratio,b.h*=this.ratio,this.renderer.setSize(b)}else this.map.removeLayer(this)},afterAdd:function(){if(this.strategies){var a,b,c;for(b=0,c=this.strategies.length;c>b;b++)a=this.strategies[b],a.autoActivate&&a.activate()}},removeMap:function(a){if(this.drawn=!1,this.strategies){var b,c;for(b=0,c=this.strategies.length;c>b;b++)a=this.strategies[b],a.autoActivate&&a.deactivate()}},onMapResize:function(){OpenLayers.Layer.prototype.onMapResize.apply(this,arguments);var a=this.map.getSize();a.w*=this.ratio,a.h*=this.ratio,this.renderer.setSize(a)},moveTo:function(a,b,c){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var d=!0;if(!c){this.renderer.root.style.visibility="hidden";var d=this.map.getSize(),e=d.w,d=d.h,e=e/2*this.ratio-e/2,d=d/2*this.ratio-d/2,e=e+this.map.layerContainerOriginPx.x,e=-Math.round(e),d=d+this.map.layerContainerOriginPx.y,d=-Math.round(d);if(this.div.style.left=e+"px",this.div.style.top=d+"px",e=this.map.getExtent().scale(this.ratio),d=this.renderer.setExtent(e,b),this.renderer.root.style.visibility="visible",!0===OpenLayers.IS_GECKO&&(this.div.scrollLeft=this.div.scrollLeft),!b&&d)for(var f in this.unrenderedFeatures)e=this.unrenderedFeatures[f],this.drawFeature(e)}if(!this.drawn||b||!d)for(this.drawn=!0,f=0,d=this.features.length;d>f;f++)this.renderer.locked=f!==d-1,e=this.features[f],this.drawFeature(e)},display:function(a){OpenLayers.Layer.prototype.display.apply(this,arguments);var b=this.div.style.display;b!=this.renderer.root.style.display&&(this.renderer.root.style.display=b)},addFeatures:function(a,b){OpenLayers.Util.isArray(a)||(a=[a]);var c=!b||!b.silent;if(c){var d={features:a};if(!1===this.events.triggerEvent("beforefeaturesadded",d))return;a=d.features}for(var d=[],e=0,f=a.length;f>e;e++){this.renderer.locked=e!=a.length-1?!0:!1;var g=a[e];if(this.geometryType&&!(g.geometry instanceof this.geometryType))throw new TypeError("addFeatures: component should be an "+this.geometryType.prototype.CLASS_NAME);if(g.layer=this,!g.style&&this.style&&(g.style=OpenLayers.Util.extend({},this.style)),c){if(!1===this.events.triggerEvent("beforefeatureadded",{feature:g}))continue;this.preFeatureInsert(g)}d.push(g),this.features.push(g),this.drawFeature(g),c&&(this.events.triggerEvent("featureadded",{feature:g}),this.onFeatureInsert(g))}c&&this.events.triggerEvent("featuresadded",{features:d})},removeFeatures:function(a,b){if(a&&0!==a.length){if(a===this.features)return this.removeAllFeatures(b);OpenLayers.Util.isArray(a)||(a=[a]),a===this.selectedFeatures&&(a=a.slice());var c=!b||!b.silent;c&&this.events.triggerEvent("beforefeaturesremoved",{features:a});for(var d=a.length-1;d>=0;d--){this.renderer.locked=0!=d&&a[d-1].geometry?!0:!1;var e=a[d];delete this.unrenderedFeatures[e.id],c&&this.events.triggerEvent("beforefeatureremoved",{feature:e}),this.features=OpenLayers.Util.removeItem(this.features,e),e.layer=null,e.geometry&&this.renderer.eraseFeatures(e),-1!=OpenLayers.Util.indexOf(this.selectedFeatures,e)&&OpenLayers.Util.removeItem(this.selectedFeatures,e),c&&this.events.triggerEvent("featureremoved",{feature:e})}c&&this.events.triggerEvent("featuresremoved",{features:a})}},removeAllFeatures:function(a){a=!a||!a.silent;var b=this.features;a&&this.events.triggerEvent("beforefeaturesremoved",{features:b});for(var c,d=b.length-1;d>=0;d--)c=b[d],a&&this.events.triggerEvent("beforefeatureremoved",{feature:c}),c.layer=null,a&&this.events.triggerEvent("featureremoved",{feature:c});this.renderer.clear(),this.features=[],this.unrenderedFeatures={},this.selectedFeatures=[],a&&this.events.triggerEvent("featuresremoved",{features:b})},destroyFeatures:function(a,b){if(void 0==a&&(a=this.features),a){this.removeFeatures(a,b);for(var c=a.length-1;c>=0;c--)a[c].destroy()}},drawFeature:function(a,b){if(this.drawn){if("object"!=typeof b){b||a.state!==OpenLayers.State.DELETE||(b="delete");var c=b||a.renderIntent;(b=a.style||this.style)||(b=this.styleMap.createSymbolizer(a,c))}c=this.renderer.drawFeature(a,b),!1===c||null===c?this.unrenderedFeatures[a.id]=a:delete this.unrenderedFeatures[a.id]}},eraseFeatures:function(a){this.renderer.eraseFeatures(a)},getFeatureFromEvent:function(a){if(!this.renderer)throw Error("getFeatureFromEvent called on layer with no renderer. This usually means you destroyed a layer, but not some handler which is associated with it.");var b=null;return(a=this.renderer.getFeatureIdFromEvent(a))&&(b="string"==typeof a?this.getFeatureById(a):a),b},getFeatureBy:function(a,b){for(var c=null,d=0,e=this.features.length;e>d;++d)if(this.features[d][a]==b){c=this.features[d];break}return c},getFeatureById:function(a){return this.getFeatureBy("id",a)},getFeatureByFid:function(a){return this.getFeatureBy("fid",a)},getFeaturesByAttribute:function(a,b){var c,d,e=this.features.length,f=[];for(c=0;e>c;c++)(d=this.features[c])&&d.attributes&&d.attributes[a]===b&&f.push(d);return f},onFeatureInsert:function(a){},preFeatureInsert:function(a){},getDataExtent:function(){var a=null,b=this.features;if(b&&0<b.length)for(var c=null,d=0,e=b.length;e>d;d++)(c=b[d].geometry)&&(null===a&&(a=new OpenLayers.Bounds),a.extend(c.getBounds()));return a},CLASS_NAME:"OpenLayers.Layer.Vector"}),OpenLayers.Layer.PointGrid=OpenLayers.Class(OpenLayers.Layer.Vector,{dx:null,dy:null,ratio:1.5,maxFeatures:250,rotation:0,origin:null,gridBounds:null,initialize:function(a){a=a||{},OpenLayers.Layer.Vector.prototype.initialize.apply(this,[a.name,a])},setMap:function(a){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments),a.events.register("moveend",this,this.onMoveEnd)},removeMap:function(a){a.events.unregister("moveend",this,this.onMoveEnd),OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},setRatio:function(a){this.ratio=a,this.updateGrid(!0)},setMaxFeatures:function(a){this.maxFeatures=a,this.updateGrid(!0)},setSpacing:function(a,b){this.dx=a,this.dy=b||a,this.updateGrid(!0)},setOrigin:function(a){this.origin=a,this.updateGrid(!0)},getOrigin:function(){return this.origin||(this.origin=this.map.getExtent().getCenterLonLat()),this.origin},setRotation:function(a){this.rotation=a,this.updateGrid(!0)},onMoveEnd:function(){this.updateGrid()},getViewBounds:function(){var a=this.map.getExtent();if(this.rotation){var b=this.getOrigin(),b=new OpenLayers.Geometry.Point(b.lon,b.lat),a=a.toGeometry();a.rotate(-this.rotation,b),a=a.getBounds()}return a},updateGrid:function(a){if(a||this.invalidBounds()){var b=this.getViewBounds(),c=this.getOrigin();a=new OpenLayers.Geometry.Point(c.lon,c.lat);var d=b.getWidth(),e=b.getHeight(),f=d/e,g=Math.sqrt(this.dx*this.dy*this.maxFeatures/f),d=Math.min(d*this.ratio,g*f),e=Math.min(e*this.ratio,g),b=b.getCenterLonLat();this.gridBounds=new OpenLayers.Bounds(b.lon-d/2,b.lat-e/2,b.lon+d/2,b.lat+e/2);for(var h,b=Math.floor(e/this.dy),d=Math.floor(d/this.dx),e=c.lon+this.dx*Math.ceil((this.gridBounds.left-c.lon)/this.dx),c=c.lat+this.dy*Math.ceil((this.gridBounds.bottom-c.lat)/this.dy),g=Array(b*d),i=0;d>i;++i)for(var f=e+i*this.dx,j=0;b>j;++j)h=c+j*this.dy,h=new OpenLayers.Geometry.Point(f,h),this.rotation&&h.rotate(this.rotation,a),g[i*b+j]=new OpenLayers.Feature.Vector(h);this.destroyFeatures(this.features,{silent:!0}),this.addFeatures(g,{silent:!0})}},invalidBounds:function(){return!this.gridBounds||!this.gridBounds.containsBounds(this.getViewBounds())},CLASS_NAME:"OpenLayers.Layer.PointGrid"}),OpenLayers.Handler.MouseWheel=OpenLayers.Class(OpenLayers.Handler,{wheelListener:null,interval:0,maxDelta:Number.POSITIVE_INFINITY,delta:0,cumulative:!0,initialize:function(a,b,c){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.wheelListener=OpenLayers.Function.bindAsEventListener(this.onWheelEvent,this)},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments),this.wheelListener=null},onWheelEvent:function(a){if(this.map&&this.checkModifiers(a)){for(var b=!1,c=!1,d=!1,e=OpenLayers.Event.element(a);null!=e&&!d&&!b;){if(!b)try{var f,b=(f=e.currentStyle?e.currentStyle.overflow:document.defaultView.getComputedStyle(e,null).getPropertyValue("overflow"))&&"auto"==f||"scroll"==f}catch(g){}if(!c&&(c=OpenLayers.Element.hasClass(e,"olScrollable"),!c))for(var d=0,h=this.map.layers.length;h>d;d++){var i=this.map.layers[d];if(e==i.div||e==i.pane){c=!0;break}}d=e==this.map.div,e=e.parentNode}if(!b&&d){if(c)if(b=0,a.wheelDelta?(b=a.wheelDelta,0===b%160&&(b*=.75),b/=120):a.detail&&(b=-(a.detail/Math.abs(a.detail))),this.delta+=b,window.clearTimeout(this._timeoutId),this.interval&&Math.abs(this.delta)<this.maxDelta){var j=OpenLayers.Util.extend({},a);this._timeoutId=window.setTimeout(OpenLayers.Function.bind(function(){this.wheelZoom(j)},this),this.interval)}else this.wheelZoom(a);OpenLayers.Event.stop(a)}}},wheelZoom:function(a){var b=this.delta;this.delta=0,b&&(a.xy=this.map.events.getMousePosition(a),0>b?this.callback("down",[a,this.cumulative?Math.max(-this.maxDelta,b):-1]):this.callback("up",[a,this.cumulative?Math.min(this.maxDelta,b):1]))},activate:function(a){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){var b=this.wheelListener;return OpenLayers.Event.observe(window,"DOMMouseScroll",b),OpenLayers.Event.observe(window,"mousewheel",b),OpenLayers.Event.observe(document,"mousewheel",b),!0}return!1},deactivate:function(a){if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){var b=this.wheelListener;return OpenLayers.Event.stopObserving(window,"DOMMouseScroll",b),OpenLayers.Event.stopObserving(window,"mousewheel",b),OpenLayers.Event.stopObserving(document,"mousewheel",b),!0}return!1},CLASS_NAME:"OpenLayers.Handler.MouseWheel"}),OpenLayers.Symbolizer=OpenLayers.Class({zIndex:0,initialize:function(a){OpenLayers.Util.extend(this,a)},clone:function(){return new(eval(this.CLASS_NAME))(OpenLayers.Util.extend({},this))},CLASS_NAME:"OpenLayers.Symbolizer"}),OpenLayers.Symbolizer.Raster=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(a){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Raster"}),OpenLayers.Rule=OpenLayers.Class({id:null,name:null,title:null,description:null,context:null,filter:null,elseFilter:!1,symbolizer:null,symbolizers:null,minScaleDenominator:null,maxScaleDenominator:null,initialize:function(a){this.symbolizer={},OpenLayers.Util.extend(this,a),this.symbolizers&&delete this.symbolizer,this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var a in this.symbolizer)this.symbolizer[a]=null;this.symbolizer=null,delete this.symbolizers},evaluate:function(a){var b=this.getContext(a),c=!0;if(this.minScaleDenominator||this.maxScaleDenominator)var d=a.layer.map.getScale();return this.minScaleDenominator&&(c=d>=OpenLayers.Style.createLiteral(this.minScaleDenominator,b)),c&&this.maxScaleDenominator&&(c=d<OpenLayers.Style.createLiteral(this.maxScaleDenominator,b)),c&&this.filter&&(c=this.filter.evaluate("OpenLayers.Filter.FeatureId"==this.filter.CLASS_NAME?a:b)),c},getContext:function(a){var b=this.context;return b||(b=a.attributes||a.data),"function"==typeof this.context&&(b=this.context(a)),b},clone:function(){var a=OpenLayers.Util.extend({},this);if(this.symbolizers){var b=this.symbolizers.length;a.symbolizers=Array(b);for(var c=0;b>c;++c)a.symbolizers[c]=this.symbolizers[c].clone()}else{a.symbolizer={};for(var d in this.symbolizer)b=this.symbolizer[d],c=typeof b,"object"===c?a.symbolizer[d]=OpenLayers.Util.extend({},b):"string"===c&&(a.symbolizer[d]=b)}return a.filter=this.filter&&this.filter.clone(),a.context=this.context&&OpenLayers.Util.extend({},this.context),new OpenLayers.Rule(a)},CLASS_NAME:"OpenLayers.Rule"}),OpenLayers.Format.SLD=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{profile:null,defaultVersion:"1.0.0",stringifyOutput:!0,namedLayersAsArray:!1,CLASS_NAME:"OpenLayers.Format.SLD"}),OpenLayers.Symbolizer.Polygon=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(a){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Polygon"}),OpenLayers.Format.GML.v2=OpenLayers.Class(OpenLayers.Format.GML.Base,{schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",initialize:function(a){OpenLayers.Format.GML.Base.prototype.initialize.apply(this,[a])},readers:{gml:OpenLayers.Util.applyDefaults({outerBoundaryIs:function(a,b){var c={};this.readChildNodes(a,c),b.outer=c.components[0]},innerBoundaryIs:function(a,b){var c={};this.readChildNodes(a,c),b.inner.push(c.components[0])},Box:function(a,b){var c={};this.readChildNodes(a,c),b.components||(b.components=[]);var d=c.points[0],c=c.points[1];b.components.push(new OpenLayers.Bounds(d.x,d.y,c.x,c.y))}},OpenLayers.Format.GML.Base.prototype.readers.gml),feature:OpenLayers.Format.GML.Base.prototype.readers.feature,wfs:OpenLayers.Format.GML.Base.prototype.readers.wfs},write:function(a){var b;return b=OpenLayers.Util.isArray(a)?"wfs:FeatureCollection":"gml:featureMember",a=this.writeNode(b,a),this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{gml:OpenLayers.Util.applyDefaults({Point:function(a){var b=this.createElementNSPlus("gml:Point");return this.writeNode("coordinates",[a],b),b},coordinates:function(a){for(var b,c=a.length,d=Array(c),e=0;c>e;++e)b=a[e],d[e]=this.xy?b.x+","+b.y:b.y+","+b.x,void 0!=b.z&&(d[e]+=","+b.z);return this.createElementNSPlus("gml:coordinates",{attributes:{decimal:".",cs:",",ts:" "},value:1==c?d[0]:d.join(" ")})},LineString:function(a){var b=this.createElementNSPlus("gml:LineString");return this.writeNode("coordinates",a.components,b),b},Polygon:function(a){var b=this.createElementNSPlus("gml:Polygon");this.writeNode("outerBoundaryIs",a.components[0],b);for(var c=1;c<a.components.length;++c)this.writeNode("innerBoundaryIs",a.components[c],b);return b},outerBoundaryIs:function(a){var b=this.createElementNSPlus("gml:outerBoundaryIs");return this.writeNode("LinearRing",a,b),b},innerBoundaryIs:function(a){var b=this.createElementNSPlus("gml:innerBoundaryIs");return this.writeNode("LinearRing",a,b),b},LinearRing:function(a){var b=this.createElementNSPlus("gml:LinearRing");return this.writeNode("coordinates",a.components,b),b},Box:function(a){var b=this.createElementNSPlus("gml:Box");return this.writeNode("coordinates",[{x:a.left,y:a.bottom},{x:a.right,y:a.top}],b),this.srsName&&b.setAttribute("srsName",this.srsName),b}},OpenLayers.Format.GML.Base.prototype.writers.gml),feature:OpenLayers.Format.GML.Base.prototype.writers.feature,wfs:OpenLayers.Format.GML.Base.prototype.writers.wfs},CLASS_NAME:"OpenLayers.Format.GML.v2"}),OpenLayers.Format.Filter.v1_0_0=OpenLayers.Class(OpenLayers.Format.GML.v2,OpenLayers.Format.Filter.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/ogc/filter/1.0.0/filter.xsd",initialize:function(a){OpenLayers.Format.GML.v2.prototype.initialize.apply(this,[a])},readers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO});this.readChildNodes(a,c),b.filters.push(c)},PropertyIsNotEqualTo:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.NOT_EQUAL_TO});this.readChildNodes(a,c),b.filters.push(c)},PropertyIsLike:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LIKE});this.readChildNodes(a,c);var d=a.getAttribute("wildCard"),e=a.getAttribute("singleChar"),f=a.getAttribute("escape");c.value2regex(d,e,f),b.filters.push(c)}},OpenLayers.Format.Filter.v1.prototype.readers.ogc),gml:OpenLayers.Format.GML.v2.prototype.readers.gml,feature:OpenLayers.Format.GML.v2.prototype.readers.feature},writers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsEqualTo");return this.writeNode("PropertyName",a,b),this.writeOgcExpression(a.value,b),b},PropertyIsNotEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsNotEqualTo");return this.writeNode("PropertyName",a,b),this.writeOgcExpression(a.value,b),b},PropertyIsLike:function(a){var b=this.createElementNSPlus("ogc:PropertyIsLike",{attributes:{wildCard:"*",singleChar:".",escape:"!"}});return this.writeNode("PropertyName",a,b),this.writeNode("Literal",a.regex2value(),b),b},BBOX:function(a){var b=this.createElementNSPlus("ogc:BBOX");a.property&&this.writeNode("PropertyName",a,b);var c=this.writeNode("gml:Box",a.value,b);return a.projection&&c.setAttribute("srsName",a.projection),b}},OpenLayers.Format.Filter.v1.prototype.writers.ogc),gml:OpenLayers.Format.GML.v2.prototype.writers.gml,feature:OpenLayers.Format.GML.v2.prototype.writers.feature},writeSpatial:function(a,b){var c=this.createElementNSPlus("ogc:"+b);if(this.writeNode("PropertyName",a,c),a.value instanceof OpenLayers.Filter.Function)this.writeNode("Function",a.value,c);else{var d;d=a.value instanceof OpenLayers.Geometry?this.writeNode("feature:_geometry",a.value).firstChild:this.writeNode("gml:Box",a.value),a.projection&&d.setAttribute("srsName",a.projection),c.appendChild(d)}return c},CLASS_NAME:"OpenLayers.Format.Filter.v1_0_0"}),OpenLayers.Format.WFST.v1_0_0=OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0,OpenLayers.Format.WFST.v1,{version:"1.0.0",srsNameInQuery:!1,schemaLocations:{wfs:"http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd"},initialize:function(a){OpenLayers.Format.Filter.v1_0_0.prototype.initialize.apply(this,[a]),OpenLayers.Format.WFST.v1.prototype.initialize.apply(this,[a])},readNode:function(a,b,c){return OpenLayers.Format.GML.v2.prototype.readNode.apply(this,arguments)},readers:{wfs:OpenLayers.Util.applyDefaults({WFS_TransactionResponse:function(a,b){b.insertIds=[],b.success=!1,this.readChildNodes(a,b);
},InsertResult:function(a,b){var c={fids:[]};this.readChildNodes(a,c),b.insertIds=b.insertIds.concat(c.fids)},TransactionResult:function(a,b){this.readChildNodes(a,b)},Status:function(a,b){this.readChildNodes(a,b)},SUCCESS:function(a,b){b.success=!0}},OpenLayers.Format.WFST.v1.prototype.readers.wfs),gml:OpenLayers.Format.GML.v2.prototype.readers.gml,feature:OpenLayers.Format.GML.v2.prototype.readers.feature,ogc:OpenLayers.Format.Filter.v1_0_0.prototype.readers.ogc},writers:{wfs:OpenLayers.Util.applyDefaults({Query:function(a){a=OpenLayers.Util.extend({featureNS:this.featureNS,featurePrefix:this.featurePrefix,featureType:this.featureType,srsName:this.srsName,srsNameInQuery:this.srsNameInQuery},a);var b=a.featurePrefix,c=this.createElementNSPlus("wfs:Query",{attributes:{typeName:(b?b+":":"")+a.featureType}});if(a.srsNameInQuery&&a.srsName&&c.setAttribute("srsName",a.srsName),a.featureNS&&c.setAttribute("xmlns:"+b,a.featureNS),a.propertyNames)for(var b=0,d=a.propertyNames.length;d>b;b++)this.writeNode("ogc:PropertyName",{property:a.propertyNames[b]},c);return a.filter&&(this.setFilterProperty(a.filter),this.writeNode("ogc:Filter",a.filter,c)),c}},OpenLayers.Format.WFST.v1.prototype.writers.wfs),gml:OpenLayers.Format.GML.v2.prototype.writers.gml,feature:OpenLayers.Format.GML.v2.prototype.writers.feature,ogc:OpenLayers.Format.Filter.v1_0_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.WFST.v1_0_0"}),OpenLayers.ElementsIndexer=OpenLayers.Class({maxZIndex:null,order:null,indices:null,compare:null,initialize:function(a){this.compare=a?OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER:OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER,this.clear()},insert:function(a){this.exists(a)&&this.remove(a);var b=a.id;this.determineZIndex(a);for(var c,d=-1,e=this.order.length;e-d>1;)c=parseInt((d+e)/2),0<this.compare(this,a,OpenLayers.Util.getElement(this.order[c]))?d=c:e=c;return this.order.splice(e,0,b),this.indices[b]=this.getZIndex(a),this.getNextElement(e)},remove:function(a){a=a.id;var b=OpenLayers.Util.indexOf(this.order,a);b>=0&&(this.order.splice(b,1),delete this.indices[a],this.maxZIndex=0<this.order.length?this.indices[this.order[this.order.length-1]]:0)},clear:function(){this.order=[],this.indices={},this.maxZIndex=0},exists:function(a){return null!=this.indices[a.id]},getZIndex:function(a){return a._style.graphicZIndex},determineZIndex:function(a){var b=a._style.graphicZIndex;null==b?(b=this.maxZIndex,a._style.graphicZIndex=b):b>this.maxZIndex&&(this.maxZIndex=b)},getNextElement:function(a){if(a+=1,a<this.order.length){var b=OpenLayers.Util.getElement(this.order[a]);return void 0==b&&(b=this.getNextElement(a)),b}return null},CLASS_NAME:"OpenLayers.ElementsIndexer"}),OpenLayers.ElementsIndexer.IndexingMethods={Z_ORDER:function(a,b,c){b=a.getZIndex(b);var d=0;return c&&(a=a.getZIndex(c),d=b-a),d},Z_ORDER_DRAWING_ORDER:function(a,b,c){return a=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(a,b,c),c&&0==a&&(a=1),a},Z_ORDER_Y_ORDER:function(a,b,c){return a=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(a,b,c),c&&0===a&&(b=c._boundsBottom-b._boundsBottom,a=0===b?1:b),a}},OpenLayers.Renderer.Elements=OpenLayers.Class(OpenLayers.Renderer,{rendererRoot:null,root:null,vectorRoot:null,textRoot:null,xmlns:null,xOffset:0,indexer:null,BACKGROUND_ID_SUFFIX:"_background",LABEL_ID_SUFFIX:"_label",LABEL_OUTLINE_SUFFIX:"_outline",initialize:function(a,b){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.rendererRoot=this.createRenderRoot(),this.root=this.createRoot("_root"),this.vectorRoot=this.createRoot("_vroot"),this.textRoot=this.createRoot("_troot"),this.root.appendChild(this.vectorRoot),this.root.appendChild(this.textRoot),this.rendererRoot.appendChild(this.root),this.container.appendChild(this.rendererRoot),b&&(b.zIndexing||b.yOrdering)&&(this.indexer=new OpenLayers.ElementsIndexer(b.yOrdering))},destroy:function(){this.clear(),this.xmlns=this.root=this.rendererRoot=null,OpenLayers.Renderer.prototype.destroy.apply(this,arguments)},clear:function(){var a,b=this.vectorRoot;if(b)for(;a=b.firstChild;)b.removeChild(a);if(b=this.textRoot)for(;a=b.firstChild;)b.removeChild(a);this.indexer&&this.indexer.clear()},setExtent:function(a,b){var c=OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),d=this.getResolution();if(this.map.baseLayer&&this.map.baseLayer.wrapDateLine){var e,f=a.getWidth()/this.map.getExtent().getWidth();a=a.scale(1/f),f=this.map.getMaxExtent(),f.right>a.left&&f.right<a.right?e=!0:f.left>a.left&&f.left<a.right&&(e=!1),(e!==this.rightOfDateLine||b)&&(c=!1,this.xOffset=!0===e?f.getWidth()/d:0),this.rightOfDateLine=e}return c},getNodeType:function(a,b){},drawGeometry:function(a,b,c){var d=a.CLASS_NAME,e=!0;if("OpenLayers.Geometry.Collection"==d||"OpenLayers.Geometry.MultiPoint"==d||"OpenLayers.Geometry.MultiLineString"==d||"OpenLayers.Geometry.MultiPolygon"==d){for(var d=0,f=a.components.length;f>d;d++)e=this.drawGeometry(a.components[d],b,c)&&e;return e}return d=e=!1,"none"!=b.display&&(b.backgroundGraphic?this.redrawBackgroundNode(a.id,a,b,c):d=!0,e=this.redrawNode(a.id,a,b,c)),0==e&&(b=document.getElementById(a.id))&&(b._style.backgroundGraphic&&(d=!0),b.parentNode.removeChild(b)),d&&(b=document.getElementById(a.id+this.BACKGROUND_ID_SUFFIX))&&b.parentNode.removeChild(b),e},redrawNode:function(a,b,c,d){return c=this.applyDefaultSymbolizer(c),a=this.nodeFactory(a,this.getNodeType(b,c)),a._featureId=d,a._boundsBottom=b.getBounds().bottom,a._geometryClass=b.CLASS_NAME,a._style=c,b=this.drawGeometryNode(a,b,c),!1===b?!1:(a=b.node,this.indexer?(c=this.indexer.insert(a))?this.vectorRoot.insertBefore(a,c):this.vectorRoot.appendChild(a):a.parentNode!==this.vectorRoot&&this.vectorRoot.appendChild(a),this.postDraw(a),b.complete)},redrawBackgroundNode:function(a,b,c,d){return c=OpenLayers.Util.extend({},c),c.externalGraphic=c.backgroundGraphic,c.graphicXOffset=c.backgroundXOffset,c.graphicYOffset=c.backgroundYOffset,c.graphicZIndex=c.backgroundGraphicZIndex,c.graphicWidth=c.backgroundWidth||c.graphicWidth,c.graphicHeight=c.backgroundHeight||c.graphicHeight,c.backgroundGraphic=null,c.backgroundXOffset=null,c.backgroundYOffset=null,c.backgroundGraphicZIndex=null,this.redrawNode(a+this.BACKGROUND_ID_SUFFIX,b,c,null)},drawGeometryNode:function(a,b,c){c=c||a._style;var d,e={isFilled:void 0===c.fill?!0:c.fill,isStroked:void 0===c.stroke?!!c.strokeWidth:c.stroke};switch(b.CLASS_NAME){case"OpenLayers.Geometry.Point":!1===c.graphic&&(e.isFilled=!1,e.isStroked=!1),d=this.drawPoint(a,b);break;case"OpenLayers.Geometry.LineString":e.isFilled=!1,d=this.drawLineString(a,b);break;case"OpenLayers.Geometry.LinearRing":d=this.drawLinearRing(a,b);break;case"OpenLayers.Geometry.Polygon":d=this.drawPolygon(a,b);break;case"OpenLayers.Geometry.Rectangle":d=this.drawRectangle(a,b)}return a._options=e,0!=d?{node:this.setStyle(a,c,e,b),complete:d}:!1},postDraw:function(a){},drawPoint:function(a,b){},drawLineString:function(a,b){},drawLinearRing:function(a,b){},drawPolygon:function(a,b){},drawRectangle:function(a,b){},drawCircle:function(a,b){},removeText:function(a){var b=document.getElementById(a+this.LABEL_ID_SUFFIX);b&&this.textRoot.removeChild(b),(a=document.getElementById(a+this.LABEL_OUTLINE_SUFFIX))&&this.textRoot.removeChild(a)},getFeatureIdFromEvent:function(a){var b=a.target,c=b&&b.correspondingUseElement;return(c?c:b||a.srcElement)._featureId},eraseGeometry:function(a,b){if("OpenLayers.Geometry.MultiPoint"==a.CLASS_NAME||"OpenLayers.Geometry.MultiLineString"==a.CLASS_NAME||"OpenLayers.Geometry.MultiPolygon"==a.CLASS_NAME||"OpenLayers.Geometry.Collection"==a.CLASS_NAME)for(var c=0,d=a.components.length;d>c;c++)this.eraseGeometry(a.components[c],b);else(c=OpenLayers.Util.getElement(a.id))&&c.parentNode&&(c.geometry&&(c.geometry.destroy(),c.geometry=null),c.parentNode.removeChild(c),this.indexer&&this.indexer.remove(c),c._style.backgroundGraphic&&(c=OpenLayers.Util.getElement(a.id+this.BACKGROUND_ID_SUFFIX))&&c.parentNode&&c.parentNode.removeChild(c))},nodeFactory:function(a,b){var c=OpenLayers.Util.getElement(a);return c?this.nodeTypeCompare(c,b)||(c.parentNode.removeChild(c),c=this.nodeFactory(a,b)):c=this.createNode(b,a),c},nodeTypeCompare:function(a,b){},createNode:function(a,b){},moveRoot:function(a){var b=this.root;a.root.parentNode==this.rendererRoot&&(b=a.root),b.parentNode.removeChild(b),a.rendererRoot.appendChild(b)},getRenderLayerId:function(){return this.root.parentNode.parentNode.id},isComplexSymbol:function(a){return"circle"!=a&&!!a},CLASS_NAME:"OpenLayers.Renderer.Elements"}),OpenLayers.Control.ArgParser=OpenLayers.Class(OpenLayers.Control,{center:null,zoom:null,layers:null,displayProjection:null,getParameters:function(a){a=a||window.location.href;var b=OpenLayers.Util.getParameters(a),c=a.indexOf("#");return c>0&&(a="?"+a.substring(c+1,a.length),OpenLayers.Util.extend(b,OpenLayers.Util.getParameters(a))),b},setMap:function(a){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var b=0,c=this.map.controls.length;c>b;b++){var d=this.map.controls[b];if(d!=this&&"OpenLayers.Control.ArgParser"==d.CLASS_NAME){d.displayProjection!=this.displayProjection&&(this.displayProjection=d.displayProjection);break}}b==this.map.controls.length&&(b=this.getParameters(),b.layers&&(this.layers=b.layers,this.map.events.register("addlayer",this,this.configureLayers),this.configureLayers()),b.lat&&b.lon&&(this.center=new OpenLayers.LonLat(parseFloat(b.lon),parseFloat(b.lat)),b.zoom&&(this.zoom=parseFloat(b.zoom)),this.map.events.register("changebaselayer",this,this.setCenter),this.setCenter()))},setCenter:function(){this.map.baseLayer&&(this.map.events.unregister("changebaselayer",this,this.setCenter),this.displayProjection&&this.center.transform(this.displayProjection,this.map.getProjectionObject()),this.map.setCenter(this.center,this.zoom))},configureLayers:function(){if(this.layers.length==this.map.layers.length){this.map.events.unregister("addlayer",this,this.configureLayers);for(var a=0,b=this.layers.length;b>a;a++){var c=this.map.layers[a],d=this.layers.charAt(a);"B"==d?this.map.setBaseLayer(c):"T"!=d&&"F"!=d||c.setVisibility("T"==d)}}},CLASS_NAME:"OpenLayers.Control.ArgParser"}),OpenLayers.Control.Permalink=OpenLayers.Class(OpenLayers.Control,{argParserClass:OpenLayers.Control.ArgParser,element:null,anchor:!1,base:"",displayProjection:null,initialize:function(a,b,c){null===a||"object"!=typeof a||OpenLayers.Util.isElement(a)?(OpenLayers.Control.prototype.initialize.apply(this,[c]),this.element=OpenLayers.Util.getElement(a),this.base=b||document.location.href):(this.base=document.location.href,OpenLayers.Control.prototype.initialize.apply(this,[a]),null!=this.element&&(this.element=OpenLayers.Util.getElement(this.element)))},destroy:function(){this.element&&this.element.parentNode==this.div&&(this.div.removeChild(this.element),this.element=null),this.map&&this.map.events.unregister("moveend",this,this.updateLink),OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(a){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var b=0,c=this.map.controls.length;c>b;b++){var d=this.map.controls[b];if(d.CLASS_NAME==this.argParserClass.CLASS_NAME){d.displayProjection!=this.displayProjection&&(this.displayProjection=d.displayProjection);break}}b==this.map.controls.length&&this.map.addControl(new this.argParserClass({displayProjection:this.displayProjection}))},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||this.anchor||(this.element=document.createElement("a"),this.element.innerHTML=OpenLayers.i18n("Permalink"),this.element.href="",this.div.appendChild(this.element)),this.map.events.on({moveend:this.updateLink,changelayer:this.updateLink,changebaselayer:this.updateLink,scope:this}),this.updateLink(),this.div},updateLink:function(){var a=this.anchor?"#":"?",b=this.base,c=null;-1!=b.indexOf("#")&&0==this.anchor&&(c=b.substring(b.indexOf("#"),b.length)),-1!=b.indexOf(a)&&(b=b.substring(0,b.indexOf(a))),b=b.split("#")[0]+a+OpenLayers.Util.getParameterString(this.createParams()),c&&(b+=c),this.anchor&&!this.element?window.location.href=b:this.element.href=b},createParams:function(a,b,c){a=a||this.map.getCenter();var d=OpenLayers.Util.getParameters(this.base);if(a)for(d.zoom=b||this.map.getZoom(),b=a.lat,a=a.lon,this.displayProjection&&(b=OpenLayers.Projection.transform({x:a,y:b},this.map.getProjectionObject(),this.displayProjection),a=b.x,b=b.y),d.lat=Math.round(1e5*b)/1e5,d.lon=Math.round(1e5*a)/1e5,c=c||this.map.layers,d.layers="",a=0,b=c.length;b>a;a++){var e=c[a];d.layers=e.isBaseLayer?d.layers+(e==this.map.baseLayer?"B":"0"):d.layers+(e.getVisibility()?"T":"F")}return d},CLASS_NAME:"OpenLayers.Control.Permalink"}),OpenLayers.Layer.TMS=OpenLayers.Class(OpenLayers.Layer.Grid,{serviceVersion:"1.0.0",layername:null,type:null,isBaseLayer:!0,tileOrigin:null,serverResolutions:null,zoomOffset:0,initialize:function(a,b,c){var d=[];d.push(a,b,{},c),OpenLayers.Layer.Grid.prototype.initialize.apply(this,d)},clone:function(a){return null==a&&(a=new OpenLayers.Layer.TMS(this.name,this.url,this.getOptions())),a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){a=this.adjustBounds(a);var b=this.getServerResolution(),c=Math.round((a.left-this.tileOrigin.lon)/(b*this.tileSize.w));return a=Math.round((a.bottom-this.tileOrigin.lat)/(b*this.tileSize.h)),b=this.getServerZoom(),c=this.serviceVersion+"/"+this.layername+"/"+b+"/"+c+"/"+a+"."+this.type,a=this.url,OpenLayers.Util.isArray(a)&&(a=this.selectUrl(c,a)),a+c},setMap:function(a){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.TMS"}),OpenLayers.Format.WCSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.0",CLASS_NAME:"OpenLayers.Format.WCSCapabilities"}),OpenLayers.Format.WCSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{regExes:{trimSpace:/^\s*|\s*$/g,splitSpace:/\s+/},defaultPrefix:"wcs",read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b={};return this.readNode(a,b),b},CLASS_NAME:"OpenLayers.Format.WCSCapabilities.v1"}),OpenLayers.Format.WCSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.WCSCapabilities.v1,{namespaces:{wcs:"http://www.opengis.net/wcs",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",ows:"http://www.opengis.net/ows"},errorProperty:"service",readers:{wcs:{WCS_Capabilities:function(a,b){this.readChildNodes(a,b)},Service:function(a,b){b.service={},this.readChildNodes(a,b.service)},name:function(a,b){b.name=this.getChildValue(a)},label:function(a,b){b.label=this.getChildValue(a)},keywords:function(a,b){b.keywords=[],this.readChildNodes(a,b.keywords)},keyword:function(a,b){b.push(this.getChildValue(a))},responsibleParty:function(a,b){b.responsibleParty={},this.readChildNodes(a,b.responsibleParty)},individualName:function(a,b){b.individualName=this.getChildValue(a)},organisationName:function(a,b){b.organisationName=this.getChildValue(a)},positionName:function(a,b){b.positionName=this.getChildValue(a)},contactInfo:function(a,b){b.contactInfo={},this.readChildNodes(a,b.contactInfo)},phone:function(a,b){b.phone={},this.readChildNodes(a,b.phone)},voice:function(a,b){b.voice=this.getChildValue(a)},facsimile:function(a,b){b.facsimile=this.getChildValue(a)},address:function(a,b){b.address={},this.readChildNodes(a,b.address)},deliveryPoint:function(a,b){b.deliveryPoint=this.getChildValue(a)},city:function(a,b){b.city=this.getChildValue(a)},postalCode:function(a,b){b.postalCode=this.getChildValue(a)},country:function(a,b){b.country=this.getChildValue(a)},electronicMailAddress:function(a,b){b.electronicMailAddress=this.getChildValue(a)},fees:function(a,b){b.fees=this.getChildValue(a)},accessConstraints:function(a,b){b.accessConstraints=this.getChildValue(a)},ContentMetadata:function(a,b){b.contentMetadata=[],this.readChildNodes(a,b.contentMetadata)},CoverageOfferingBrief:function(a,b){var c={};this.readChildNodes(a,c),b.push(c)},name:function(a,b){b.name=this.getChildValue(a)},label:function(a,b){b.label=this.getChildValue(a)},lonLatEnvelope:function(a,b){var c=this.getElementsByTagNameNS(a,"http://www.opengis.net/gml","pos");if(2==c.length){var d={},e={};OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this,[c[0],d]),OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this,[c[1],e]),b.lonLatEnvelope={},b.lonLatEnvelope.srsName=a.getAttribute("srsName"),b.lonLatEnvelope.min=d.points[0],b.lonLatEnvelope.max=e.points[0]}}}},CLASS_NAME:"OpenLayers.Format.WCSCapabilities.v1_0_0"}),OpenLayers.Strategy.Fixed=OpenLayers.Class(OpenLayers.Strategy,{preload:!1,activate:function(){var a=OpenLayers.Strategy.prototype.activate.apply(this,arguments);return a&&(this.layer.events.on({refresh:this.load,scope:this}),1==this.layer.visibility||this.preload?this.load():this.layer.events.on({visibilitychanged:this.load,scope:this})),a},deactivate:function(){var a=OpenLayers.Strategy.prototype.deactivate.call(this);return a&&this.layer.events.un({refresh:this.load,visibilitychanged:this.load,scope:this}),a},load:function(a){var b=this.layer;b.events.triggerEvent("loadstart",{filter:b.filter}),b.protocol.read(OpenLayers.Util.applyDefaults({callback:this.merge,filter:b.filter,scope:this},a)),b.events.un({visibilitychanged:this.load,scope:this})},merge:function(a){var b=this.layer;b.destroyFeatures();var c=a.features;if(c&&0<c.length){var d=b.projection,e=b.map.getProjectionObject();if(!e.equals(d))for(var f,g=0,h=c.length;h>g;++g)(f=c[g].geometry)&&f.transform(d,e);b.addFeatures(c)}b.events.triggerEvent("loadend",{response:a})},CLASS_NAME:"OpenLayers.Strategy.Fixed"}),OpenLayers.Control.Zoom=OpenLayers.Class(OpenLayers.Control,{zoomInText:"+",zoomInId:"olZoomInLink",zoomOutText:"−",zoomOutId:"olZoomOutLink",draw:function(){var a=OpenLayers.Control.prototype.draw.apply(this),b=this.getOrCreateLinks(a),c=b.zoomIn,b=b.zoomOut,d=this.map.events;return b.parentNode!==a&&(d=this.events,d.attachToElement(b.parentNode)),d.register("buttonclick",this,this.onZoomClick),this.zoomInLink=c,this.zoomOutLink=b,a},getOrCreateLinks:function(a){var b=document.getElementById(this.zoomInId),c=document.getElementById(this.zoomOutId);return b||(b=document.createElement("a"),b.href="#zoomIn",b.appendChild(document.createTextNode(this.zoomInText)),b.className="olControlZoomIn",a.appendChild(b)),OpenLayers.Element.addClass(b,"olButton"),c||(c=document.createElement("a"),c.href="#zoomOut",c.appendChild(document.createTextNode(this.zoomOutText)),c.className="olControlZoomOut",a.appendChild(c)),OpenLayers.Element.addClass(c,"olButton"),{zoomIn:b,zoomOut:c}},onZoomClick:function(a){a=a.buttonElement,a===this.zoomInLink?this.map.zoomIn():a===this.zoomOutLink&&this.map.zoomOut()},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onZoomClick),delete this.zoomInLink,delete this.zoomOutLink,OpenLayers.Control.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Control.Zoom"}),OpenLayers.Layer.PointTrack=OpenLayers.Class(OpenLayers.Layer.Vector,{dataFrom:null,styleFrom:null,addNodes:function(a,b){if(2>a.length)throw Error("At least two point features have to be added to create a line from");for(var c,d,e,f=Array(a.length-1),g=0,h=a.length;h>g;g++){if(c=a[g],e=c.geometry){if("OpenLayers.Geometry.Point"!=e.CLASS_NAME)throw new TypeError("Only features with point geometries are supported.")}else e=c.lonlat,e=new OpenLayers.Geometry.Point(e.lon,e.lat);if(g>0){c=null!=this.dataFrom?a[g+this.dataFrom].data||a[g+this.dataFrom].attributes:null;var i=null!=this.styleFrom?a[g+this.styleFrom].style:null;d=new OpenLayers.Geometry.LineString([d,e]),f[g-1]=new OpenLayers.Feature.Vector(d,c,i)}d=e}this.addFeatures(f,b)},CLASS_NAME:"OpenLayers.Layer.PointTrack"}),OpenLayers.Layer.PointTrack.SOURCE_NODE=-1,OpenLayers.Layer.PointTrack.TARGET_NODE=0,OpenLayers.Layer.PointTrack.dataFrom={SOURCE_NODE:-1,TARGET_NODE:0},OpenLayers.Protocol.WFS=function(a){a=OpenLayers.Util.applyDefaults(a,OpenLayers.Protocol.WFS.DEFAULTS);var b=OpenLayers.Protocol.WFS["v"+a.version.replace(/\./g,"_")];if(!b)throw"Unsupported WFS version: "+a.version;return new b(a)},OpenLayers.Protocol.WFS.fromWMSLayer=function(a,b){var c,d;return c=a.params.LAYERS,c=(OpenLayers.Util.isArray(c)?c[0]:c).split(":"),1<c.length&&(d=c[0]),c=c.pop(),d={url:a.url,featureType:c,featurePrefix:d,srsName:a.projection&&a.projection.getCode()||a.map&&a.map.getProjectionObject().getCode(),version:"1.1.0"},new OpenLayers.Protocol.WFS(OpenLayers.Util.applyDefaults(b,d))},OpenLayers.Protocol.WFS.DEFAULTS={version:"1.0.0"},OpenLayers.Layer.Markers=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,markers:null,drawn:!1,initialize:function(a,b){OpenLayers.Layer.prototype.initialize.apply(this,arguments),this.markers=[]},destroy:function(){this.clearMarkers(),this.markers=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setOpacity:function(a){if(a!=this.opacity){this.opacity=a,a=0;for(var b=this.markers.length;b>a;a++)this.markers[a].setOpacity(this.opacity)}},moveTo:function(a,b,c){if(OpenLayers.Layer.prototype.moveTo.apply(this,arguments),b||!this.drawn){for(var d=0,e=this.markers.length;e>d;d++)this.drawMarker(this.markers[d]);this.drawn=!0}},addMarker:function(a){this.markers.push(a),1>this.opacity&&a.setOpacity(this.opacity),this.map&&this.map.getExtent()&&(a.map=this.map,this.drawMarker(a))},removeMarker:function(a){this.markers&&this.markers.length&&(OpenLayers.Util.removeItem(this.markers,a),a.erase())},clearMarkers:function(){if(null!=this.markers)for(;0<this.markers.length;)this.removeMarker(this.markers[0])},drawMarker:function(a){var b=this.map.getLayerPxFromLonLat(a.lonlat);null==b?a.display(!1):a.isDrawn()?a.icon&&a.icon.moveTo(b):(a=a.draw(b),this.div.appendChild(a))},getDataExtent:function(){var a=null;if(this.markers&&0<this.markers.length)for(var a=new OpenLayers.Bounds,b=0,c=this.markers.length;c>b;b++)a.extend(this.markers[b].lonlat);return a},CLASS_NAME:"OpenLayers.Layer.Markers"}),OpenLayers.Control.Pan=OpenLayers.Class(OpenLayers.Control.Button,{slideFactor:50,slideRatio:null,direction:null,initialize:function(a,b){this.direction=a,this.CLASS_NAME+=this.direction,OpenLayers.Control.prototype.initialize.apply(this,[b])},trigger:function(){if(this.map){var a=OpenLayers.Function.bind(function(a){return this.slideRatio?this.map.getSize()[a]*this.slideRatio:this.slideFactor},this);switch(this.direction){case OpenLayers.Control.Pan.NORTH:this.map.pan(0,-a("h"));break;case OpenLayers.Control.Pan.SOUTH:this.map.pan(0,a("h"));break;case OpenLayers.Control.Pan.WEST:this.map.pan(-a("w"),0);break;case OpenLayers.Control.Pan.EAST:this.map.pan(a("w"),0)}}},CLASS_NAME:"OpenLayers.Control.Pan"}),OpenLayers.Control.Pan.NORTH="North",OpenLayers.Control.Pan.SOUTH="South",OpenLayers.Control.Pan.EAST="East",OpenLayers.Control.Pan.WEST="West",OpenLayers.Format.CSWGetDomain=function(a){a=OpenLayers.Util.applyDefaults(a,OpenLayers.Format.CSWGetDomain.DEFAULTS);var b=OpenLayers.Format.CSWGetDomain["v"+a.version.replace(/\./g,"_")];if(!b)throw"Unsupported CSWGetDomain version: "+a.version;return new b(a)},OpenLayers.Format.CSWGetDomain.DEFAULTS={version:"2.0.2"},OpenLayers.Format.CSWGetDomain.v2_0_2=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",csw:"http://www.opengis.net/cat/csw/2.0.2"},defaultPrefix:"csw",version:"2.0.2",schemaLocation:"http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",PropertyName:null,ParameterName:null,read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b={};return this.readNode(a,b),b},readers:{csw:{GetDomainResponse:function(a,b){this.readChildNodes(a,b)},DomainValues:function(a,b){OpenLayers.Util.isArray(b.DomainValues)||(b.DomainValues=[]);for(var c=a.attributes,d={},e=0,f=c.length;f>e;++e)d[c[e].name]=c[e].nodeValue;this.readChildNodes(a,d),b.DomainValues.push(d)},PropertyName:function(a,b){b.PropertyName=this.getChildValue(a)},ParameterName:function(a,b){b.ParameterName=this.getChildValue(a)},ListOfValues:function(a,b){OpenLayers.Util.isArray(b.ListOfValues)||(b.ListOfValues=[]),this.readChildNodes(a,b.ListOfValues)},Value:function(a,b){for(var c=a.attributes,d={},e=0,f=c.length;f>e;++e)d[c[e].name]=c[e].nodeValue;d.value=this.getChildValue(a),b.push({Value:d})},ConceptualScheme:function(a,b){b.ConceptualScheme={},this.readChildNodes(a,b.ConceptualScheme)},Name:function(a,b){b.Name=this.getChildValue(a)},Document:function(a,b){b.Document=this.getChildValue(a)},Authority:function(a,b){b.Authority=this.getChildValue(a)},RangeOfValues:function(a,b){b.RangeOfValues={},this.readChildNodes(a,b.RangeOfValues)},MinValue:function(a,b){for(var c=a.attributes,d={},e=0,f=c.length;f>e;++e)d[c[e].name]=c[e].nodeValue;d.value=this.getChildValue(a),b.MinValue=d},MaxValue:function(a,b){for(var c=a.attributes,d={},e=0,f=c.length;f>e;++e)d[c[e].name]=c[e].nodeValue;d.value=this.getChildValue(a),b.MaxValue=d}}},write:function(a){return a=this.writeNode("csw:GetDomain",a),OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{csw:{GetDomain:function(a){var b=this.createElementNSPlus("csw:GetDomain",{attributes:{service:"CSW",version:this.version}});return a.PropertyName||this.PropertyName?this.writeNode("csw:PropertyName",a.PropertyName||this.PropertyName,b):(a.ParameterName||this.ParameterName)&&this.writeNode("csw:ParameterName",a.ParameterName||this.ParameterName,b),this.readChildNodes(b,a),b},PropertyName:function(a){return this.createElementNSPlus("csw:PropertyName",{value:a})},ParameterName:function(a){return this.createElementNSPlus("csw:ParameterName",{value:a})}}},CLASS_NAME:"OpenLayers.Format.CSWGetDomain.v2_0_2"}),OpenLayers.Format.ArcXML.Features=OpenLayers.Class(OpenLayers.Format.XML,{read:function(a){return(new OpenLayers.Format.ArcXML).read(a).features.feature}}),OpenLayers.Control.Snapping=OpenLayers.Class(OpenLayers.Control,{DEFAULTS:{tolerance:10,node:!0,edge:!0,vertex:!0},greedy:!0,precedence:["node","vertex","edge"],resolution:null,geoToleranceCache:null,layer:null,feature:null,point:null,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,[a]),this.options=a||{},this.options.layer&&this.setLayer(this.options.layer),a=OpenLayers.Util.extend({},this.options.defaults),this.defaults=OpenLayers.Util.applyDefaults(a,this.DEFAULTS),this.setTargets(this.options.targets),0===this.targets.length&&this.layer&&this.addTargetLayer(this.layer),this.geoToleranceCache={}},setLayer:function(a){this.active?(this.deactivate(),this.layer=a,this.activate()):this.layer=a},setTargets:function(a){if(this.targets=[],a&&a.length)for(var b,c=0,d=a.length;d>c;++c)b=a[c],b instanceof OpenLayers.Layer.Vector?this.addTargetLayer(b):this.addTarget(b)},addTargetLayer:function(a){this.addTarget({layer:a})},addTarget:function(a){a=OpenLayers.Util.applyDefaults(a,this.defaults),a.nodeTolerance=a.nodeTolerance||a.tolerance,a.vertexTolerance=a.vertexTolerance||a.tolerance,a.edgeTolerance=a.edgeTolerance||a.tolerance,this.targets.push(a)},removeTargetLayer:function(a){for(var b,c=this.targets.length-1;c>=0;--c)b=this.targets[c],b.layer===a&&this.removeTarget(b)},removeTarget:function(a){return OpenLayers.Util.removeItem(this.targets,a)},activate:function(){var a=OpenLayers.Control.prototype.activate.call(this);return a&&this.layer&&this.layer.events&&this.layer.events.on({sketchstarted:this.onSketchModified,sketchmodified:this.onSketchModified,vertexmodified:this.onVertexModified,scope:this}),a},deactivate:function(){var a=OpenLayers.Control.prototype.deactivate.call(this);return a&&this.layer&&this.layer.events&&this.layer.events.un({sketchstarted:this.onSketchModified,sketchmodified:this.onSketchModified,vertexmodified:this.onVertexModified,scope:this}),this.point=this.feature=null,a},onSketchModified:function(a){this.feature=a.feature,this.considerSnapping(a.vertex,a.vertex)},onVertexModified:function(a){this.feature=a.feature;var b=this.layer.map.getLonLatFromViewPortPx(a.pixel);this.considerSnapping(a.vertex,new OpenLayers.Geometry.Point(b.lon,b.lat))},considerSnapping:function(a,b){for(var c,d,e={rank:Number.POSITIVE_INFINITY,dist:Number.POSITIVE_INFINITY,x:null,y:null},f=!1,g=0,h=this.targets.length;h>g;++g)if(d=this.targets[g],c=this.testTarget(d,b)){if(this.greedy){e=c,e.target=d,f=!0;break}(c.rank<e.rank||c.rank===e.rank&&c.dist<e.dist)&&(e=c,e.target=d,f=!0)}f&&(!1!==this.events.triggerEvent("beforesnap",{point:a,x:e.x,y:e.y,distance:e.dist,layer:e.target.layer,snapType:this.precedence[e.rank]})?(a.x=e.x,a.y=e.y,this.point=a,this.events.triggerEvent("snap",{point:a,snapType:this.precedence[e.rank],layer:e.target.layer,distance:e.dist})):f=!1),this.point&&!f&&(a.x=b.x,a.y=b.y,this.point=null,this.events.triggerEvent("unsnap",{point:a}))},testTarget:function(a,b){var c=this.layer.map.getResolution();if("minResolution"in a&&c<a.minResolution||"maxResolution"in a&&c>=a.maxResolution)return null;for(var d,e,f,g,h,i,c={node:this.getGeoTolerance(a.nodeTolerance,c),vertex:this.getGeoTolerance(a.vertexTolerance,c),edge:this.getGeoTolerance(a.edgeTolerance,c)},j=Math.max(c.node,c.vertex,c.edge),k={rank:Number.POSITIVE_INFINITY,dist:Number.POSITIVE_INFINITY},l=!1,m=a.layer.features,n=this.precedence.length,o=new OpenLayers.LonLat(b.x,b.y),p=0,q=m.length;q>p;++p)if(d=m[p],d!==this.feature&&!d._sketch&&d.state!==OpenLayers.State.DELETE&&(!a.filter||a.filter.evaluate(d))&&d.atPoint(o,j,j))for(var r=0,s=Math.min(k.rank+1,n);s>r;++r)if(e=this.precedence[r],a[e])if("edge"===e){if(f=d.geometry.distanceTo(b,{details:!0}),h=f.distance,h<=c[e]&&h<k.dist){k={rank:r,dist:h,x:f.x0,y:f.y0},l=!0;break}}else{f=d.geometry.getVertices("node"===e),i=!1;for(var t=0,u=f.length;u>t;++t)g=f[t],h=g.distanceTo(b),h<=c[e]&&(r<k.rank||r===k.rank&&h<k.dist)&&(k={rank:r,dist:h,x:g.x,y:g.y},i=l=!0);if(i)break}return l?k:null},getGeoTolerance:function(a,b){b!==this.resolution&&(this.resolution=b,this.geoToleranceCache={});var c=this.geoToleranceCache[a];return void 0===c&&(c=a*b,this.geoToleranceCache[a]=c),c},destroy:function(){this.active&&this.deactivate(),delete this.layer,delete this.targets,OpenLayers.Control.prototype.destroy.call(this)},CLASS_NAME:"OpenLayers.Control.Snapping"}),OpenLayers.Format.OWSCommon.v1_1_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1,{namespaces:{ows:"http://www.opengis.net/ows/1.1",xlink:"http://www.w3.org/1999/xlink"},readers:{ows:OpenLayers.Util.applyDefaults({ExceptionReport:function(a,b){b.exceptionReport={version:a.getAttribute("version"),language:a.getAttribute("xml:lang"),exceptions:[]},this.readChildNodes(a,b.exceptionReport)},AllowedValues:function(a,b){b.allowedValues={},this.readChildNodes(a,b.allowedValues)},AnyValue:function(a,b){b.anyValue=!0},DataType:function(a,b){b.dataType=this.getChildValue(a)},Range:function(a,b){b.range={},this.readChildNodes(a,b.range)},MinimumValue:function(a,b){b.minValue=this.getChildValue(a)},MaximumValue:function(a,b){b.maxValue=this.getChildValue(a)},Identifier:function(a,b){b.identifier=this.getChildValue(a)},SupportedCRS:function(a,b){b.supportedCRS=this.getChildValue(a)}},OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)},writers:{ows:OpenLayers.Util.applyDefaults({Range:function(a){var b=this.createElementNSPlus("ows:Range",{attributes:{"ows:rangeClosure":a.closure}});return this.writeNode("ows:MinimumValue",a.minValue,b),this.writeNode("ows:MaximumValue",a.maxValue,b),b},MinimumValue:function(a){return this.createElementNSPlus("ows:MinimumValue",{value:a})},MaximumValue:function(a){return this.createElementNSPlus("ows:MaximumValue",{value:a})},Value:function(a){return this.createElementNSPlus("ows:Value",{
value:a})}},OpenLayers.Format.OWSCommon.v1.prototype.writers.ows)},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1_1_0"}),OpenLayers.Format.WCSGetCoverage=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows/1.1",wcs:"http://www.opengis.net/wcs/1.1",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.1.2",schemaLocation:"http://www.opengis.net/wcs/1.1 http://schemas.opengis.net/wcs/1.1/wcsGetCoverage.xsd",write:function(a){return a=this.writeNode("wcs:GetCoverage",a),this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{wcs:{GetCoverage:function(a){var b=this.createElementNSPlus("wcs:GetCoverage",{attributes:{version:a.version||this.VERSION,service:"WCS"}});return this.writeNode("ows:Identifier",a.identifier,b),this.writeNode("wcs:DomainSubset",a.domainSubset,b),this.writeNode("wcs:Output",a.output,b),b},DomainSubset:function(a){var b=this.createElementNSPlus("wcs:DomainSubset",{});return this.writeNode("ows:BoundingBox",a.boundingBox,b),a.temporalSubset&&this.writeNode("wcs:TemporalSubset",a.temporalSubset,b),b},TemporalSubset:function(a){for(var b=this.createElementNSPlus("wcs:TemporalSubset",{}),c=0,d=a.timePeriods.length;d>c;++c)this.writeNode("wcs:TimePeriod",a.timePeriods[c],b);return b},TimePeriod:function(a){var b=this.createElementNSPlus("wcs:TimePeriod",{});return this.writeNode("wcs:BeginPosition",a.begin,b),this.writeNode("wcs:EndPosition",a.end,b),a.resolution&&this.writeNode("wcs:TimeResolution",a.resolution,b),b},BeginPosition:function(a){return this.createElementNSPlus("wcs:BeginPosition",{value:a})},EndPosition:function(a){return this.createElementNSPlus("wcs:EndPosition",{value:a})},TimeResolution:function(a){return this.createElementNSPlus("wcs:TimeResolution",{value:a})},Output:function(a){var b=this.createElementNSPlus("wcs:Output",{attributes:{format:a.format,store:a.store}});return a.gridCRS&&this.writeNode("wcs:GridCRS",a.gridCRS,b),b},GridCRS:function(a){var b=this.createElementNSPlus("wcs:GridCRS",{});return this.writeNode("wcs:GridBaseCRS",a.baseCRS,b),a.type&&this.writeNode("wcs:GridType",a.type,b),a.origin&&this.writeNode("wcs:GridOrigin",a.origin,b),this.writeNode("wcs:GridOffsets",a.offsets,b),a.CS&&this.writeNode("wcs:GridCS",a.CS,b),b},GridBaseCRS:function(a){return this.createElementNSPlus("wcs:GridBaseCRS",{value:a})},GridOrigin:function(a){return this.createElementNSPlus("wcs:GridOrigin",{value:a})},GridType:function(a){return this.createElementNSPlus("wcs:GridType",{value:a})},GridOffsets:function(a){return this.createElementNSPlus("wcs:GridOffsets",{value:a})},GridCS:function(a){return this.createElementNSPlus("wcs:GridCS",{value:a})}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows},CLASS_NAME:"OpenLayers.Format.WCSGetCoverage"}),OpenLayers.Format.KML=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{kml:"http://www.opengis.net/kml/2.2",gx:"http://www.google.com/kml/ext/2.2"},kmlns:"http://earth.google.com/kml/2.0",placemarksDesc:"No description available",foldersName:"OpenLayers export",foldersDesc:"Exported on "+new Date,extractAttributes:!0,kvpAttributes:!1,extractStyles:!1,extractTracks:!1,trackAttributes:null,internalns:null,features:null,styles:null,styleBaseUrl:"",fetched:null,maxDepth:0,initialize:function(a){this.regExes={trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,kmlColor:/(\w{2})(\w{2})(\w{2})(\w{2})/,kmlIconPalette:/root:\/\/icons\/palette-(\d+)(\.\w+)/,straightBracket:/\$\[(.*?)\]/g},this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){return this.features=[],this.styles={},this.fetched={},this.parseData(a,{depth:0,styleBaseUrl:this.styleBaseUrl})},parseData:function(a,b){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));for(var c=["Link","NetworkLink","Style","StyleMap","Placemark"],d=0,e=c.length;e>d;++d){var f=c[d],g=this.getElementsByTagNameNS(a,"*",f);if(0!=g.length)switch(f.toLowerCase()){case"link":case"networklink":this.parseLinks(g,b);break;case"style":this.extractStyles&&this.parseStyles(g,b);break;case"stylemap":this.extractStyles&&this.parseStyleMaps(g,b);break;case"placemark":this.parseFeatures(g,b)}}return this.features},parseLinks:function(a,b){if(b.depth>=this.maxDepth)return!1;var c=OpenLayers.Util.extend({},b);c.depth++;for(var d=0,e=a.length;e>d;d++){var f=this.parseProperty(a[d],"*","href");f&&!this.fetched[f]&&(this.fetched[f]=!0,(f=this.fetchLink(f))&&this.parseData(f,c))}},fetchLink:function(a){return(a=OpenLayers.Request.GET({url:a,async:!1}))?a.responseText:void 0},parseStyles:function(a,b){for(var c=0,d=a.length;d>c;c++){var e=this.parseStyle(a[c]);e&&(this.styles[(b.styleBaseUrl||"")+"#"+e.id]=e)}},parseKmlColor:function(a){var b=null;return a&&(a=a.match(this.regExes.kmlColor))&&(b={color:"#"+a[4]+a[3]+a[2],opacity:parseInt(a[1],16)/255}),b},parseStyle:function(a){for(var b,c,d={},e=["LineStyle","PolyStyle","IconStyle","BalloonStyle","LabelStyle"],f=0,g=e.length;g>f;++f)if(b=e[f],c=this.getElementsByTagNameNS(a,"*",b)[0])switch(b.toLowerCase()){case"linestyle":b=this.parseProperty(c,"*","color"),(b=this.parseKmlColor(b))&&(d.strokeColor=b.color,d.strokeOpacity=b.opacity),(b=this.parseProperty(c,"*","width"))&&(d.strokeWidth=b);break;case"polystyle":b=this.parseProperty(c,"*","color"),(b=this.parseKmlColor(b))&&(d.fillOpacity=b.opacity,d.fillColor=b.color),"0"==this.parseProperty(c,"*","fill")&&(d.fillColor="none"),"0"==this.parseProperty(c,"*","outline")&&(d.strokeWidth="0");break;case"iconstyle":var h=parseFloat(this.parseProperty(c,"*","scale")||1);b=32*h;var i=32*h,j=this.getElementsByTagNameNS(c,"*","Icon")[0];if(j){var k=this.parseProperty(j,"*","href");if(k){var l=this.parseProperty(j,"*","w"),m=this.parseProperty(j,"*","h");!OpenLayers.String.startsWith(k,"http://maps.google.com/mapfiles/kml")||l||m||(m=l=64,h/=2),l=l||m,m=m||l,l&&(b=parseInt(l)*h),m&&(i=parseInt(m)*h),(m=k.match(this.regExes.kmlIconPalette))&&(l=m[1],m=m[2],k=this.parseProperty(j,"*","x"),j=this.parseProperty(j,"*","y"),k="http://maps.google.com/mapfiles/kml/pal"+l+"/icon"+(8*(j?7-j/32:7)+(k?k/32:0))+m),d.graphicOpacity=1,d.externalGraphic=k}}(c=this.getElementsByTagNameNS(c,"*","hotSpot")[0])&&(k=parseFloat(c.getAttribute("x")),j=parseFloat(c.getAttribute("y")),l=c.getAttribute("xunits"),"pixels"==l?d.graphicXOffset=-k*h:"insetPixels"==l?d.graphicXOffset=-b+k*h:"fraction"==l&&(d.graphicXOffset=-b*k),c=c.getAttribute("yunits"),"pixels"==c?d.graphicYOffset=-i+j*h+1:"insetPixels"==c?d.graphicYOffset=-(j*h)+1:"fraction"==c&&(d.graphicYOffset=-i*(1-j)+1)),d.graphicWidth=b,d.graphicHeight=i;break;case"balloonstyle":(c=OpenLayers.Util.getXmlNodeValue(c))&&(d.balloonStyle=c.replace(this.regExes.straightBracket,"${$1}"));break;case"labelstyle":b=this.parseProperty(c,"*","color"),(b=this.parseKmlColor(b))&&(d.fontColor=b.color,d.fontOpacity=b.opacity)}return!d.strokeColor&&d.fillColor&&(d.strokeColor=d.fillColor),(a=a.getAttribute("id"))&&d&&(d.id=a),d},parseStyleMaps:function(a,b){for(var c=0,d=a.length;d>c;c++)for(var e=a[c],f=this.getElementsByTagNameNS(e,"*","Pair"),e=e.getAttribute("id"),g=0,h=f.length;h>g;g++){var i=f[g],j=this.parseProperty(i,"*","key");(i=this.parseProperty(i,"*","styleUrl"))&&"normal"==j&&(this.styles[(b.styleBaseUrl||"")+"#"+e]=this.styles[(b.styleBaseUrl||"")+i])}},parseFeatures:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d],g=this.parseFeature.apply(this,[f]);if(!g)throw"Bad Placemark: "+d;if(this.extractStyles&&g.attributes&&g.attributes.styleUrl&&(g.style=this.getStyle(g.attributes.styleUrl,b)),this.extractStyles){var h=this.getElementsByTagNameNS(f,"*","Style")[0];h&&(h=this.parseStyle(h))&&(g.style=OpenLayers.Util.extend(g.style,h))}this.extractTracks?(f=this.getElementsByTagNameNS(f,this.namespaces.gx,"Track"))&&0<f.length&&(g={features:[],feature:g},this.readNode(f[0],g),0<g.features.length&&c.push.apply(c,g.features)):c.push(g)}this.features=this.features.concat(c)},readers:{kml:{when:function(a,b){b.whens.push(OpenLayers.Date.parse(this.getChildValue(a)))},_trackPointAttribute:function(a,b){var c=a.nodeName.split(":").pop();b.attributes[c].push(this.getChildValue(a))}},gx:{Track:function(a,b){var c={whens:[],points:[],angles:[]};if(this.trackAttributes){var d;c.attributes={};for(var e=0,f=this.trackAttributes.length;f>e;++e)d=this.trackAttributes[e],c.attributes[d]=[],d in this.readers.kml||(this.readers.kml[d]=this.readers.kml._trackPointAttribute)}if(this.readChildNodes(a,c),c.whens.length!==c.points.length)throw Error("gx:Track with unequal number of when ("+c.whens.length+") and gx:coord ("+c.points.length+") elements.");var g=0<c.angles.length;if(g&&c.whens.length!==c.angles.length)throw Error("gx:Track with unequal number of when ("+c.whens.length+") and gx:angles ("+c.angles.length+") elements.");for(var h,e=0,f=c.whens.length;f>e;++e){if(h=b.feature.clone(),h.fid=b.feature.fid||b.feature.id,d=c.points[e],h.geometry=d,"z"in d&&(h.attributes.altitude=d.z),this.internalProjection&&this.externalProjection&&h.geometry.transform(this.externalProjection,this.internalProjection),this.trackAttributes)for(var i=0,j=this.trackAttributes.length;j>i;++i)d=this.trackAttributes[i],h.attributes[d]=c.attributes[d][e];h.attributes.when=c.whens[e],h.attributes.trackId=b.feature.id,g&&(d=c.angles[e],h.attributes.heading=parseFloat(d[0]),h.attributes.tilt=parseFloat(d[1]),h.attributes.roll=parseFloat(d[2])),b.features.push(h)}},coord:function(a,b){var c=this.getChildValue(a).replace(this.regExes.trimSpace,"").split(/\s+/),d=new OpenLayers.Geometry.Point(c[0],c[1]);2<c.length&&(d.z=parseFloat(c[2])),b.points.push(d)},angles:function(a,b){var c=this.getChildValue(a).replace(this.regExes.trimSpace,"").split(/\s+/);b.angles.push(c)}}},parseFeature:function(a){for(var b,c,d,e=["MultiGeometry","Polygon","LineString","Point"],f=0,g=e.length;g>f;++f)if(b=e[f],this.internalns=a.namespaceURI?a.namespaceURI:this.kmlns,c=this.getElementsByTagNameNS(a,this.internalns,b),0<c.length){if(!(e=this.parseGeometry[b.toLowerCase()]))throw new TypeError("Unsupported geometry type: "+b);d=e.apply(this,[c[0]]),this.internalProjection&&this.externalProjection&&d.transform(this.externalProjection,this.internalProjection);break}var h;return this.extractAttributes&&(h=this.parseAttributes(a)),b=new OpenLayers.Feature.Vector(d,h),a=a.getAttribute("id")||a.getAttribute("name"),null!=a&&(b.fid=a),b},getStyle:function(a,b){var c=OpenLayers.Util.removeTail(a),d=OpenLayers.Util.extend({},b);return d.depth++,d.styleBaseUrl=c,!this.styles[a]&&!OpenLayers.String.startsWith(a,"#")&&d.depth<=this.maxDepth&&!this.fetched[c]&&(c=this.fetchLink(c))&&this.parseData(c,d),OpenLayers.Util.extend({},this.styles[a])},parseGeometry:{point:function(a){var b=this.getElementsByTagNameNS(a,this.internalns,"coordinates");if(a=[],0<b.length){var c=b[0].firstChild.nodeValue,c=c.replace(this.regExes.removeSpace,"");a=c.split(",")}if(b=null,!(1<a.length))throw"Bad coordinate string: "+c;return 2==a.length&&(a[2]=null),b=new OpenLayers.Geometry.Point(a[0],a[1],a[2])},linestring:function(a,b){var c=this.getElementsByTagNameNS(a,this.internalns,"coordinates"),d=null;if(0<c.length){for(var e,f,c=this.getChildValue(c[0]),c=c.replace(this.regExes.trimSpace,""),c=c.replace(this.regExes.trimComma,","),d=c.split(this.regExes.splitSpace),g=d.length,h=Array(g),i=0;g>i;++i){if(e=d[i].split(","),f=e.length,!(f>1))throw"Bad LineString point coordinates: "+d[i];2==e.length&&(e[2]=null),h[i]=new OpenLayers.Geometry.Point(e[0],e[1],e[2])}if(!g)throw"Bad LineString coordinates: "+c;d=b?new OpenLayers.Geometry.LinearRing(h):new OpenLayers.Geometry.LineString(h)}return d},polygon:function(a){a=this.getElementsByTagNameNS(a,this.internalns,"LinearRing");var b=a.length,c=Array(b);if(b>0)for(var d=0,e=a.length;e>d;++d){if(!(b=this.parseGeometry.linestring.apply(this,[a[d],!0])))throw"Bad LinearRing geometry: "+d;c[d]=b}return new OpenLayers.Geometry.Polygon(c)},multigeometry:function(a){for(var b,c=[],d=a.childNodes,e=0,f=d.length;f>e;++e)a=d[e],1==a.nodeType&&(b=a.prefix?a.nodeName.split(":")[1]:a.nodeName,(b=this.parseGeometry[b.toLowerCase()])&&c.push(b.apply(this,[a])));return new OpenLayers.Geometry.Collection(c)}},parseAttributes:function(a){var b={},c=a.getElementsByTagName("ExtendedData");c.length&&(b=this.parseExtendedData(c[0]));var d,e,f;a=a.childNodes;for(var c=0,g=a.length;g>c;++c)if(d=a[c],1==d.nodeType&&(e=d.childNodes,1<=e.length&&3>=e.length)){switch(e.length){case 1:f=e[0];break;case 2:f=e[0],e=e[1],f=3==f.nodeType||4==f.nodeType?f:e;break;default:f=e[1]}(3==f.nodeType||4==f.nodeType)&&(d=d.prefix?d.nodeName.split(":")[1]:d.nodeName,(f=OpenLayers.Util.getXmlNodeValue(f))&&(f=f.replace(this.regExes.trimSpace,""),b[d]=f))}return b},parseExtendedData:function(a){var b,c,d,e,f={},g=a.getElementsByTagName("Data");for(b=0,c=g.length;c>b;b++){d=g[b],e=d.getAttribute("name");var h={},i=d.getElementsByTagName("value");i.length&&(h.value=this.getChildValue(i[0])),this.kvpAttributes?f[e]=h.value:(d=d.getElementsByTagName("displayName"),d.length&&(h.displayName=this.getChildValue(d[0])),f[e]=h)}for(a=a.getElementsByTagName("SimpleData"),b=0,c=a.length;c>b;b++)h={},d=a[b],e=d.getAttribute("name"),h.value=this.getChildValue(d),this.kvpAttributes?f[e]=h.value:(h.displayName=e,f[e]=h);return f},parseProperty:function(a,b,c){var d;a=this.getElementsByTagNameNS(a,b,c);try{d=OpenLayers.Util.getXmlNodeValue(a[0])}catch(e){d=null}return d},write:function(a){OpenLayers.Util.isArray(a)||(a=[a]);for(var b=this.createElementNS(this.kmlns,"kml"),c=this.createFolderXML(),d=0,e=a.length;e>d;++d)c.appendChild(this.createPlacemarkXML(a[d]));return b.appendChild(c),OpenLayers.Format.XML.prototype.write.apply(this,[b])},createFolderXML:function(){var a=this.createElementNS(this.kmlns,"Folder");if(this.foldersName){var b=this.createElementNS(this.kmlns,"name"),c=this.createTextNode(this.foldersName);b.appendChild(c),a.appendChild(b)}return this.foldersDesc&&(b=this.createElementNS(this.kmlns,"description"),c=this.createTextNode(this.foldersDesc),b.appendChild(c),a.appendChild(b)),a},createPlacemarkXML:function(a){var b=this.createElementNS(this.kmlns,"name"),c=a.style&&a.style.label?a.style.label:a.id;b.appendChild(this.createTextNode(a.attributes.name||c));var d=this.createElementNS(this.kmlns,"description");return d.appendChild(this.createTextNode(a.attributes.description||this.placemarksDesc)),c=this.createElementNS(this.kmlns,"Placemark"),null!=a.fid&&c.setAttribute("id",a.fid),c.appendChild(b),c.appendChild(d),b=this.buildGeometryNode(a.geometry),c.appendChild(b),a.attributes&&(a=this.buildExtendedData(a.attributes))&&c.appendChild(a),c},buildGeometryNode:function(a){var b=a.CLASS_NAME,b=b.substring(b.lastIndexOf(".")+1),b=this.buildGeometry[b.toLowerCase()],c=null;return b&&(c=b.apply(this,[a])),c},buildGeometry:{point:function(a){var b=this.createElementNS(this.kmlns,"Point");return b.appendChild(this.buildCoordinatesNode(a)),b},multipoint:function(a){return this.buildGeometry.collection.apply(this,[a])},linestring:function(a){var b=this.createElementNS(this.kmlns,"LineString");return b.appendChild(this.buildCoordinatesNode(a)),b},multilinestring:function(a){return this.buildGeometry.collection.apply(this,[a])},linearring:function(a){var b=this.createElementNS(this.kmlns,"LinearRing");return b.appendChild(this.buildCoordinatesNode(a)),b},polygon:function(a){var b=this.createElementNS(this.kmlns,"Polygon");a=a.components;for(var c,d,e=0,f=a.length;f>e;++e)c=0==e?"outerBoundaryIs":"innerBoundaryIs",c=this.createElementNS(this.kmlns,c),d=this.buildGeometry.linearring.apply(this,[a[e]]),c.appendChild(d),b.appendChild(c);return b},multipolygon:function(a){return this.buildGeometry.collection.apply(this,[a])},collection:function(a){for(var b,c=this.createElementNS(this.kmlns,"MultiGeometry"),d=0,e=a.components.length;e>d;++d)(b=this.buildGeometryNode.apply(this,[a.components[d]]))&&c.appendChild(b);return c}},buildCoordinatesNode:function(a){var b,c=this.createElementNS(this.kmlns,"coordinates");if(b=a.components){for(var d=b.length,e=Array(d),f=0;d>f;++f)a=b[f],e[f]=this.buildCoordinates(a);b=e.join(" ")}else b=this.buildCoordinates(a);return b=this.createTextNode(b),c.appendChild(b),c},buildCoordinates:function(a){return this.internalProjection&&this.externalProjection&&(a=a.clone(),a.transform(this.internalProjection,this.externalProjection)),a.x+","+a.y},buildExtendedData:function(a){var b,c=this.createElementNS(this.kmlns,"ExtendedData");for(b in a)if(a[b]&&"name"!=b&&"description"!=b&&"styleUrl"!=b){var d=this.createElementNS(this.kmlns,"Data");d.setAttribute("name",b);var e=this.createElementNS(this.kmlns,"value");if("object"==typeof a[b]){if(a[b].value&&e.appendChild(this.createTextNode(a[b].value)),a[b].displayName){var f=this.createElementNS(this.kmlns,"displayName");f.appendChild(this.getXMLDoc().createCDATASection(a[b].displayName)),d.appendChild(f)}}else e.appendChild(this.createTextNode(a[b]));d.appendChild(e),c.appendChild(d)}return this.isSimpleContent(c)?null:c},CLASS_NAME:"OpenLayers.Format.KML"}),OpenLayers.Format.WMSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.1",profile:null,CLASS_NAME:"OpenLayers.Format.WMSCapabilities"}),OpenLayers.Format.WMSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{wms:"http://www.opengis.net/wms",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"wms",read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b=a;a&&9==a.nodeType&&(a=a.documentElement);var c={};return this.readNode(a,c),void 0===c.service&&(a=new OpenLayers.Format.OGCExceptionReport,c.error=a.read(b)),c},readers:{wms:{Service:function(a,b){b.service={},this.readChildNodes(a,b.service)},Name:function(a,b){b.name=this.getChildValue(a)},Title:function(a,b){b.title=this.getChildValue(a)},Abstract:function(a,b){b["abstract"]=this.getChildValue(a)},BoundingBox:function(a,b){var c={};c.bbox=[parseFloat(a.getAttribute("minx")),parseFloat(a.getAttribute("miny")),parseFloat(a.getAttribute("maxx")),parseFloat(a.getAttribute("maxy"))];var d={x:parseFloat(a.getAttribute("resx")),y:parseFloat(a.getAttribute("resy"))};return isNaN(d.x)&&isNaN(d.y)||(c.res=d),c},OnlineResource:function(a,b){b.href=this.getAttributeNS(a,this.namespaces.xlink,"href")},ContactInformation:function(a,b){b.contactInformation={},this.readChildNodes(a,b.contactInformation)},ContactPersonPrimary:function(a,b){b.personPrimary={},this.readChildNodes(a,b.personPrimary)},ContactPerson:function(a,b){b.person=this.getChildValue(a)},ContactOrganization:function(a,b){b.organization=this.getChildValue(a)},ContactPosition:function(a,b){b.position=this.getChildValue(a)},ContactAddress:function(a,b){b.contactAddress={},this.readChildNodes(a,b.contactAddress)},AddressType:function(a,b){b.type=this.getChildValue(a)},Address:function(a,b){b.address=this.getChildValue(a)},City:function(a,b){b.city=this.getChildValue(a)},StateOrProvince:function(a,b){b.stateOrProvince=this.getChildValue(a)},PostCode:function(a,b){b.postcode=this.getChildValue(a)},Country:function(a,b){b.country=this.getChildValue(a)},ContactVoiceTelephone:function(a,b){b.phone=this.getChildValue(a)},ContactFacsimileTelephone:function(a,b){b.fax=this.getChildValue(a)},ContactElectronicMailAddress:function(a,b){b.email=this.getChildValue(a)},Fees:function(a,b){var c=this.getChildValue(a);c&&"none"!=c.toLowerCase()&&(b.fees=c)},AccessConstraints:function(a,b){var c=this.getChildValue(a);c&&"none"!=c.toLowerCase()&&(b.accessConstraints=c)},Capability:function(a,b){b.capability={nestedLayers:[],layers:[]},this.readChildNodes(a,b.capability)},Request:function(a,b){b.request={},this.readChildNodes(a,b.request)},GetCapabilities:function(a,b){b.getcapabilities={formats:[]},this.readChildNodes(a,b.getcapabilities)},Format:function(a,b){OpenLayers.Util.isArray(b.formats)?b.formats.push(this.getChildValue(a)):b.format=this.getChildValue(a)},DCPType:function(a,b){this.readChildNodes(a,b)},HTTP:function(a,b){this.readChildNodes(a,b)},Get:function(a,b){b.get={},this.readChildNodes(a,b.get),b.href||(b.href=b.get.href)},Post:function(a,b){b.post={},this.readChildNodes(a,b.post),b.href||(b.href=b.get.href)},GetMap:function(a,b){b.getmap={formats:[]},this.readChildNodes(a,b.getmap)},GetFeatureInfo:function(a,b){b.getfeatureinfo={formats:[]},this.readChildNodes(a,b.getfeatureinfo)},Exception:function(a,b){b.exception={formats:[]},this.readChildNodes(a,b.exception)},Layer:function(a,b){var c,d;b.capability?(d=b.capability,c=b):d=b;var e=a.getAttributeNode("queryable"),f=e&&e.specified?a.getAttribute("queryable"):null,g=(e=a.getAttributeNode("cascaded"))&&e.specified?a.getAttribute("cascaded"):null,e=(e=a.getAttributeNode("opaque"))&&e.specified?a.getAttribute("opaque"):null,h=a.getAttribute("noSubsets"),i=a.getAttribute("fixedWidth"),j=a.getAttribute("fixedHeight"),k=c||{},l=OpenLayers.Util.extend;c={nestedLayers:[],styles:c?[].concat(c.styles):[],srs:c?l({},k.srs):{},metadataURLs:[],bbox:c?l({},k.bbox):{},llbbox:k.llbbox,dimensions:c?l({},k.dimensions):{},authorityURLs:c?l({},k.authorityURLs):{},identifiers:{},keywords:[],queryable:f&&""!==f?"1"===f||"true"===f:k.queryable||!1,cascaded:null!==g?parseInt(g):k.cascaded||0,opaque:e?"1"===e||"true"===e:k.opaque||!1,noSubsets:null!==h?"1"===h||"true"===h:k.noSubsets||!1,fixedWidth:null!=i?parseInt(i):k.fixedWidth||0,fixedHeight:null!=j?parseInt(j):k.fixedHeight||0,minScale:k.minScale,maxScale:k.maxScale,attribution:k.attribution},b.nestedLayers.push(c),c.capability=d,this.readChildNodes(a,c),delete c.capability,c.name&&(f=c.name.split(":"),g=d.request,e=g.getfeatureinfo,0<f.length&&(c.prefix=f[0]),d.layers.push(c),void 0===c.formats&&(c.formats=g.getmap.formats),void 0===c.infoFormats&&e&&(c.infoFormats=e.formats))},Attribution:function(a,b){b.attribution={},this.readChildNodes(a,b.attribution)},LogoURL:function(a,b){b.logo={width:a.getAttribute("width"),height:a.getAttribute("height")},this.readChildNodes(a,b.logo)},Style:function(a,b){var c={};b.styles.push(c),this.readChildNodes(a,c)},LegendURL:function(a,b){var c={width:a.getAttribute("width"),height:a.getAttribute("height")};b.legend=c,this.readChildNodes(a,c)},MetadataURL:function(a,b){var c={type:a.getAttribute("type")};b.metadataURLs.push(c),this.readChildNodes(a,c)},DataURL:function(a,b){b.dataURL={},this.readChildNodes(a,b.dataURL)},FeatureListURL:function(a,b){b.featureListURL={},this.readChildNodes(a,b.featureListURL)},AuthorityURL:function(a,b){var c=a.getAttribute("name"),d={};this.readChildNodes(a,d),b.authorityURLs[c]=d.href},Identifier:function(a,b){var c=a.getAttribute("authority");b.identifiers[c]=this.getChildValue(a)},KeywordList:function(a,b){this.readChildNodes(a,b)},SRS:function(a,b){b.srs[this.getChildValue(a)]=!0}}},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1"}),OpenLayers.Format.WMSCapabilities.v1_1=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1,{readers:{wms:OpenLayers.Util.applyDefaults({WMT_MS_Capabilities:function(a,b){this.readChildNodes(a,b)},Keyword:function(a,b){b.keywords&&b.keywords.push(this.getChildValue(a))},DescribeLayer:function(a,b){b.describelayer={formats:[]},this.readChildNodes(a,b.describelayer)},GetLegendGraphic:function(a,b){b.getlegendgraphic={formats:[]},this.readChildNodes(a,b.getlegendgraphic)},GetStyles:function(a,b){b.getstyles={formats:[]},this.readChildNodes(a,b.getstyles)},PutStyles:function(a,b){b.putstyles={formats:[]},this.readChildNodes(a,b.putstyles)},UserDefinedSymbolization:function(a,b){var c={supportSLD:1==parseInt(a.getAttribute("SupportSLD")),userLayer:1==parseInt(a.getAttribute("UserLayer")),userStyle:1==parseInt(a.getAttribute("UserStyle")),remoteWFS:1==parseInt(a.getAttribute("RemoteWFS"))};b.userSymbols=c},LatLonBoundingBox:function(a,b){b.llbbox=[parseFloat(a.getAttribute("minx")),parseFloat(a.getAttribute("miny")),parseFloat(a.getAttribute("maxx")),parseFloat(a.getAttribute("maxy"))]},BoundingBox:function(a,b){var c=OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this,[a,b]);c.srs=a.getAttribute("SRS"),b.bbox[c.srs]=c},ScaleHint:function(a,b){var c=a.getAttribute("min"),d=a.getAttribute("max"),e=Math.pow(2,.5),f=OpenLayers.INCHES_PER_UNIT.m;0!=c&&(b.maxScale=parseFloat((c/e*f*OpenLayers.DOTS_PER_INCH).toPrecision(13))),d!=Number.POSITIVE_INFINITY&&(b.minScale=parseFloat((d/e*f*OpenLayers.DOTS_PER_INCH).toPrecision(13)))},Dimension:function(a,b){var c={name:a.getAttribute("name").toLowerCase(),units:a.getAttribute("units"),unitsymbol:a.getAttribute("unitSymbol")};b.dimensions[c.name]=c},Extent:function(a,b){var c=a.getAttribute("name").toLowerCase();if(c in b.dimensions){c=b.dimensions[c],c.nearestVal="1"===a.getAttribute("nearestValue"),c.multipleVal="1"===a.getAttribute("multipleValues"),c.current="1"===a.getAttribute("current"),c["default"]=a.getAttribute("default")||"";var d=this.getChildValue(a);c.values=d.split(",")}}},OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1"}),OpenLayers.Format.WMSCapabilities.v1_1_0=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1,{version:"1.1.0",readers:{wms:OpenLayers.Util.applyDefaults({SRS:function(a,b){for(var c=this.getChildValue(a).split(/ +/),d=0,e=c.length;e>d;d++)b.srs[c[d]]=!0}},OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_0"}),OpenLayers.Protocol.WFS.v1=OpenLayers.Class(OpenLayers.Protocol,{version:null,srsName:"EPSG:4326",featureType:null,featureNS:null,geometryName:"the_geom",schema:null,featurePrefix:"feature",formatOptions:null,readFormat:null,readOptions:null,initialize:function(a){OpenLayers.Protocol.prototype.initialize.apply(this,[a]),a.format||(this.format=OpenLayers.Format.WFST(OpenLayers.Util.extend({version:this.version,featureType:this.featureType,featureNS:this.featureNS,featurePrefix:this.featurePrefix,geometryName:this.geometryName,srsName:this.srsName,schema:this.schema},this.formatOptions))),!a.geometryName&&1<parseFloat(this.format.version)&&this.setGeometryName(null)},destroy:function(){this.options&&!this.options.format&&this.format.destroy(),this.format=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(a){OpenLayers.Protocol.prototype.read.apply(this,arguments),a=OpenLayers.Util.extend({},a),OpenLayers.Util.applyDefaults(a,this.options||{});var b=new OpenLayers.Protocol.Response({requestType:"read"}),c=OpenLayers.Format.XML.prototype.write.apply(this.format,[this.format.writeNode("wfs:GetFeature",a)]);return b.priv=OpenLayers.Request.POST({url:a.url,callback:this.createCallback(this.handleRead,b,a),params:a.params,headers:a.headers,data:c}),b},setFeatureType:function(a){this.featureType=a,this.format.featureType=a},setGeometryName:function(a){this.geometryName=a,this.format.geometryName=a},handleRead:function(a,b){if(b=OpenLayers.Util.extend({},b),OpenLayers.Util.applyDefaults(b,this.options),b.callback){var c=a.priv;200<=c.status&&300>c.status?(c=this.parseResponse(c,b.readOptions))&&!1!==c.success?(b.readOptions&&"object"==b.readOptions.output?OpenLayers.Util.extend(a,c):a.features=c,a.code=OpenLayers.Protocol.Response.SUCCESS):(a.code=OpenLayers.Protocol.Response.FAILURE,a.error=c):a.code=OpenLayers.Protocol.Response.FAILURE,b.callback.call(b.scope,a)}},parseResponse:function(a,b){var c=a.responseXML;if(c&&c.documentElement||(c=a.responseText),!c||0>=c.length)return null;if(c=null!==this.readFormat?this.readFormat.read(c):this.format.read(c,b),!this.featureNS){var d=this.readFormat||this.format;this.featureNS=d.featureNS,d.autoConfig=!1,this.geometryName||this.setGeometryName(d.geometryName)}return c},commit:function(a,b){b=OpenLayers.Util.extend({},b),OpenLayers.Util.applyDefaults(b,this.options);var c=new OpenLayers.Protocol.Response({requestType:"commit",reqFeatures:a});return c.priv=OpenLayers.Request.POST({url:b.url,headers:b.headers,data:this.format.write(a,b),callback:this.createCallback(this.handleCommit,c,b)}),c},handleCommit:function(a,b){if(b.callback){var c=a.priv,d=c.responseXML;d&&d.documentElement||(d=c.responseText),c=this.format.read(d)||{},a.insertIds=c.insertIds||[],c.success?a.code=OpenLayers.Protocol.Response.SUCCESS:(a.code=OpenLayers.Protocol.Response.FAILURE,a.error=c),b.callback.call(b.scope,a)}},filterDelete:function(a,b){b=OpenLayers.Util.extend({},b),OpenLayers.Util.applyDefaults(b,this.options),new OpenLayers.Protocol.Response({requestType:"commit"});var c=this.format.createElementNSPlus("wfs:Transaction",{attributes:{service:"WFS",version:this.version}}),d=this.format.createElementNSPlus("wfs:Delete",{attributes:{typeName:(b.featureNS?this.featurePrefix+":":"")+b.featureType}});b.featureNS&&d.setAttribute("xmlns:"+this.featurePrefix,b.featureNS);var e=this.format.writeNode("ogc:Filter",a);return d.appendChild(e),c.appendChild(d),c=OpenLayers.Format.XML.prototype.write.apply(this.format,[c]),OpenLayers.Request.POST({url:this.url,callback:b.callback||function(){},data:c})},abort:function(a){a&&a.priv.abort()},CLASS_NAME:"OpenLayers.Protocol.WFS.v1"}),OpenLayers.Handler.Feature=OpenLayers.Class(OpenLayers.Handler,{EVENTMAP:{click:{"in":"click",out:"clickout"},mousemove:{"in":"over",out:"out"},dblclick:{"in":"dblclick",out:null},mousedown:{"in":null,out:null},mouseup:{"in":null,out:null},touchstart:{"in":"click",out:"clickout"}},feature:null,lastFeature:null,down:null,up:null,clickTolerance:4,geometryTypes:null,stopClick:!0,stopDown:!0,stopUp:!1,initialize:function(a,b,c,d){OpenLayers.Handler.prototype.initialize.apply(this,[a,c,d]),this.layer=b},touchstart:function(a){return this.startTouch(),OpenLayers.Event.isMultiTouch(a)?!0:this.mousedown(a)},touchmove:function(a){OpenLayers.Event.preventDefault(a)},mousedown:function(a){return(OpenLayers.Event.isLeftClick(a)||OpenLayers.Event.isSingleTouch(a))&&(this.down=a.xy),this.handle(a)?!this.stopDown:!0},mouseup:function(a){return this.up=a.xy,this.handle(a)?!this.stopUp:!0},click:function(a){return this.handle(a)?!this.stopClick:!0},mousemove:function(a){return this.callbacks.over||this.callbacks.out?(this.handle(a),!0):!0},dblclick:function(a){return!this.handle(a)},geometryTypeMatches:function(a){return null==this.geometryTypes||-1<OpenLayers.Util.indexOf(this.geometryTypes,a.geometry.CLASS_NAME)},handle:function(a){this.feature&&!this.feature.layer&&(this.feature=null);var b=a.type,c=!1,d=!!this.feature,e="click"==b||"dblclick"==b||"touchstart"==b;return(this.feature=this.layer.getFeatureFromEvent(a))&&!this.feature.layer&&(this.feature=null),this.lastFeature&&!this.lastFeature.layer&&(this.lastFeature=null),this.feature?("touchstart"===b&&OpenLayers.Event.preventDefault(a),a=this.feature!=this.lastFeature,this.geometryTypeMatches(this.feature)?(d&&a?(this.lastFeature&&this.triggerCallback(b,"out",[this.lastFeature]),this.triggerCallback(b,"in",[this.feature])):d&&!e||this.triggerCallback(b,"in",[this.feature]),this.lastFeature=this.feature,c=!0):(this.lastFeature&&(d&&a||e)&&this.triggerCallback(b,"out",[this.lastFeature]),this.feature=null)):this.lastFeature&&(d||e)&&this.triggerCallback(b,"out",[this.lastFeature]),c},triggerCallback:function(a,b,c){(b=this.EVENTMAP[a][b])&&("click"==a&&this.up&&this.down?(Math.sqrt(Math.pow(this.up.x-this.down.x,2)+Math.pow(this.up.y-this.down.y,2))<=this.clickTolerance&&this.callback(b,c),this.up=this.down=null):this.callback(b,c))},activate:function(){var a=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.moveLayerToTop(),this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),a=!0),a},deactivate:function(){var a=!1;
return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.moveLayerBack(),this.up=this.down=this.lastFeature=this.feature=null,this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),a=!0),a},handleMapEvents:function(a){"removelayer"!=a.type&&"order"!=a.property||this.moveLayerToTop()},moveLayerToTop:function(){var a=Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1;this.layer.setZIndex(a)},moveLayerBack:function(){var a=this.layer.getZIndex()-1;a>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(a):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Handler.Feature"}),OpenLayers.Layer.Vector.RootContainer=OpenLayers.Class(OpenLayers.Layer.Vector,{displayInLayerSwitcher:!1,layers:null,display:function(){},getFeatureFromEvent:function(a){for(var b,c=this.layers,d=0;d<c.length;d++)if(b=c[d].getFeatureFromEvent(a))return b},setMap:function(a){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments),this.collectRoots(),a.events.register("changelayer",this,this.handleChangeLayer)},removeMap:function(a){a.events.unregister("changelayer",this,this.handleChangeLayer),this.resetRoots(),OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},collectRoots:function(){for(var a,b=0;b<this.map.layers.length;++b)a=this.map.layers[b],-1!=OpenLayers.Util.indexOf(this.layers,a)&&a.renderer.moveRoot(this.renderer)},resetRoots:function(){for(var a,b=0;b<this.layers.length;++b)a=this.layers[b],this.renderer&&a.renderer.getRenderLayerId()==this.id&&this.renderer.moveRoot(a.renderer)},handleChangeLayer:function(a){var b=a.layer;"order"==a.property&&-1!=OpenLayers.Util.indexOf(this.layers,b)&&(this.resetRoots(),this.collectRoots())},CLASS_NAME:"OpenLayers.Layer.Vector.RootContainer"}),OpenLayers.Control.SelectFeature=OpenLayers.Class(OpenLayers.Control,{multipleKey:null,toggleKey:null,multiple:!1,clickout:!0,toggle:!1,hover:!1,highlightOnly:!1,box:!1,onBeforeSelect:function(){},onSelect:function(){},onUnselect:function(){},scope:null,geometryTypes:null,layer:null,layers:null,callbacks:null,selectStyle:null,renderIntent:"select",handlers:null,initialize:function(a,b){OpenLayers.Control.prototype.initialize.apply(this,[b]),null===this.scope&&(this.scope=this),this.initLayer(a);var c={click:this.clickFeature,clickout:this.clickoutFeature};this.hover&&(c.over=this.overFeature,c.out=this.outFeature),this.callbacks=OpenLayers.Util.extend(c,this.callbacks),this.handlers={feature:new OpenLayers.Handler.Feature(this,this.layer,this.callbacks,{geometryTypes:this.geometryTypes})},this.box&&(this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},{boxDivClassName:"olHandlerBoxSelectFeature"}))},initLayer:function(a){OpenLayers.Util.isArray(a)?(this.layers=a,this.layer=new OpenLayers.Layer.Vector.RootContainer(this.id+"_container",{layers:a})):this.layer=a},destroy:function(){this.active&&this.layers&&this.map.removeLayer(this.layer),OpenLayers.Control.prototype.destroy.apply(this,arguments),this.layers&&this.layer.destroy()},activate:function(){return this.active||(this.layers&&this.map.addLayer(this.layer),this.handlers.feature.activate(),this.box&&this.handlers.box&&this.handlers.box.activate()),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.active&&(this.handlers.feature.deactivate(),this.handlers.box&&this.handlers.box.deactivate(),this.layers&&this.map.removeLayer(this.layer)),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},unselectAll:function(a){var b,c,d,e,f=this.layers||[this.layer];for(d=0;d<f.length;++d)if(b=f[d],e=0,null!=b.selectedFeatures)for(;b.selectedFeatures.length>e;)c=b.selectedFeatures[e],a&&a.except==c?++e:this.unselect(c)},clickFeature:function(a){this.hover||(-1<OpenLayers.Util.indexOf(a.layer.selectedFeatures,a)?this.toggleSelect()?this.unselect(a):this.multipleSelect()||this.unselectAll({except:a}):(this.multipleSelect()||this.unselectAll({except:a}),this.select(a)))},multipleSelect:function(){return this.multiple||this.handlers.feature.evt&&this.handlers.feature.evt[this.multipleKey]},toggleSelect:function(){return this.toggle||this.handlers.feature.evt&&this.handlers.feature.evt[this.toggleKey]},clickoutFeature:function(a){!this.hover&&this.clickout&&this.unselectAll()},overFeature:function(a){var b=a.layer;this.hover&&(this.highlightOnly?this.highlight(a):-1==OpenLayers.Util.indexOf(b.selectedFeatures,a)&&this.select(a))},outFeature:function(a){if(this.hover)if(this.highlightOnly){if(a._lastHighlighter==this.id)if(a._prevHighlighter&&a._prevHighlighter!=this.id){delete a._lastHighlighter;var b=this.map.getControl(a._prevHighlighter);b&&b.highlight(a)}else this.unhighlight(a)}else this.unselect(a)},highlight:function(a){var b=a.layer;!1!==this.events.triggerEvent("beforefeaturehighlighted",{feature:a})&&(a._prevHighlighter=a._lastHighlighter,a._lastHighlighter=this.id,b.drawFeature(a,this.selectStyle||this.renderIntent),this.events.triggerEvent("featurehighlighted",{feature:a}))},unhighlight:function(a){var b=a.layer;void 0==a._prevHighlighter?delete a._lastHighlighter:(a._prevHighlighter!=this.id&&(a._lastHighlighter=a._prevHighlighter),delete a._prevHighlighter),b.drawFeature(a,a.style||a.layer.style||"default"),this.events.triggerEvent("featureunhighlighted",{feature:a})},select:function(a){var b=this.onBeforeSelect.call(this.scope,a),c=a.layer;!1!==b&&(b=c.events.triggerEvent("beforefeatureselected",{feature:a}),!1!==b&&(c.selectedFeatures.push(a),this.highlight(a),this.handlers.feature.lastFeature||(this.handlers.feature.lastFeature=c.selectedFeatures[0]),c.events.triggerEvent("featureselected",{feature:a}),this.onSelect.call(this.scope,a)))},unselect:function(a){var b=a.layer;this.unhighlight(a),OpenLayers.Util.removeItem(b.selectedFeatures,a),b.events.triggerEvent("featureunselected",{feature:a}),this.onUnselect.call(this.scope,a)},selectBox:function(a){if(a instanceof OpenLayers.Bounds){var b=this.map.getLonLatFromPixel({x:a.left,y:a.bottom});a=this.map.getLonLatFromPixel({x:a.right,y:a.top}),b=new OpenLayers.Bounds(b.lon,b.lat,a.lon,a.lat),this.multipleSelect()||this.unselectAll(),a=this.multiple,this.multiple=!0;var c=this.layers||[this.layer];this.events.triggerEvent("boxselectionstart",{layers:c});for(var d,e=0;e<c.length;++e){d=c[e];for(var f=0,g=d.features.length;g>f;++f){var h=d.features[f];h.getVisibility()&&(null==this.geometryTypes||-1<OpenLayers.Util.indexOf(this.geometryTypes,h.geometry.CLASS_NAME))&&b.toGeometry().intersects(h.geometry)&&-1==OpenLayers.Util.indexOf(d.selectedFeatures,h)&&this.select(h)}}this.multiple=a,this.events.triggerEvent("boxselectionend",{layers:c})}},setMap:function(a){this.handlers.feature.setMap(a),this.box&&this.handlers.box.setMap(a),OpenLayers.Control.prototype.setMap.apply(this,arguments)},setLayer:function(a){var b=this.active;this.unselectAll(),this.deactivate(),this.layers&&(this.layer.destroy(),this.layers=null),this.initLayer(a),this.handlers.feature.layer=this.layer,b&&this.activate()},CLASS_NAME:"OpenLayers.Control.SelectFeature"}),OpenLayers.Handler.Point=OpenLayers.Class(OpenLayers.Handler,{point:null,layer:null,multi:!1,citeCompliant:!1,mouseDown:!1,stoppedDown:null,lastDown:null,lastUp:null,persist:!1,stopDown:!1,stopUp:!1,layerOptions:null,pixelTolerance:5,lastTouchPx:null,initialize:function(a,b,c){c&&c.layerOptions&&c.layerOptions.styleMap||(this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style["default"],{})),OpenLayers.Handler.prototype.initialize.apply(this,arguments)},activate:function(){if(!OpenLayers.Handler.prototype.activate.apply(this,arguments))return!1;var a=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions);return this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,a),this.map.addLayer(this.layer),!0},createFeature:function(a){a=this.layer.getLonLatFromViewPortPx(a),a=new OpenLayers.Geometry.Point(a.lon,a.lat),this.point=new OpenLayers.Feature.Vector(a),this.callback("create",[this.point.geometry,this.point]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.point],{silent:!0})},deactivate:function(){return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)?(this.cancel(),null!=this.layer.map&&(this.destroyFeature(!0),this.layer.destroy(!1)),this.layer=null,!0):!1},destroyFeature:function(a){!this.layer||!a&&this.persist||this.layer.destroyFeatures(),this.point=null},destroyPersistedFeature:function(){var a=this.layer;a&&1<a.features.length&&this.layer.features[0].destroy()},finalize:function(a){this.mouseDown=!1,this.lastTouchPx=this.lastUp=this.lastDown=null,this.callback(a?"cancel":"done",[this.geometryClone()]),this.destroyFeature(a)},cancel:function(){this.finalize(!0)},click:function(a){return OpenLayers.Event.stop(a),!1},dblclick:function(a){return OpenLayers.Event.stop(a),!1},modifyFeature:function(a){this.point||this.createFeature(a),a=this.layer.getLonLatFromViewPortPx(a),this.point.geometry.x=a.lon,this.point.geometry.y=a.lat,this.callback("modify",[this.point.geometry,this.point,!1]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.point,this.style)},getGeometry:function(){var a=this.point&&this.point.geometry;return a&&this.multi&&(a=new OpenLayers.Geometry.MultiPoint([a])),a},geometryClone:function(){var a=this.getGeometry();return a&&a.clone()},mousedown:function(a){return this.down(a)},touchstart:function(a){return this.startTouch(),this.lastTouchPx=a.xy,this.down(a)},mousemove:function(a){return this.move(a)},touchmove:function(a){return this.lastTouchPx=a.xy,this.move(a)},mouseup:function(a){return this.up(a)},touchend:function(a){return a.xy=this.lastTouchPx,this.up(a)},down:function(a){return this.mouseDown=!0,this.lastDown=a.xy,this.touch||this.modifyFeature(a.xy),this.stoppedDown=this.stopDown,!this.stopDown},move:function(a){return this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(a.xy),!0},up:function(a){return this.mouseDown=!1,this.stoppedDown=this.stopDown,!this.checkModifiers(a)||this.lastUp&&this.lastUp.equals(a.xy)||!this.lastDown||!this.passesTolerance(this.lastDown,a.xy,this.pixelTolerance)?!0:(this.touch&&this.modifyFeature(a.xy),this.persist&&this.destroyPersistedFeature(),this.lastUp=a.xy,this.finalize(),!this.stopUp)},mouseout:function(a){OpenLayers.Util.mouseLeft(a,this.map.viewPortDiv)&&(this.stoppedDown=this.stopDown,this.mouseDown=!1)},passesTolerance:function(a,b,c){var d=!0;return null!=c&&a&&b&&a.distanceTo(b)>c&&(d=!1),d},CLASS_NAME:"OpenLayers.Handler.Point"}),OpenLayers.Handler.Path=OpenLayers.Class(OpenLayers.Handler.Point,{line:null,maxVertices:null,doubleTouchTolerance:20,freehand:!1,freehandToggle:"shiftKey",timerId:null,redoStack:null,createFeature:function(a){a=this.layer.getLonLatFromViewPortPx(a),a=new OpenLayers.Geometry.Point(a.lon,a.lat),this.point=new OpenLayers.Feature.Vector(a),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([this.point.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.line,this.point],{silent:!0})},destroyFeature:function(a){OpenLayers.Handler.Point.prototype.destroyFeature.call(this,a),this.line=null},destroyPersistedFeature:function(){var a=this.layer;a&&2<a.features.length&&this.layer.features[0].destroy()},removePoint:function(){this.point&&this.layer.removeFeatures([this.point])},addPoint:function(a){this.layer.removeFeatures([this.point]),a=this.layer.getLonLatFromViewPortPx(a),this.point=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(a.lon,a.lat)),this.line.geometry.addComponent(this.point.geometry,this.line.geometry.components.length),this.layer.addFeatures([this.point]),this.callback("point",[this.point.geometry,this.getGeometry()]),this.callback("modify",[this.point.geometry,this.getSketch()]),this.drawFeature(),delete this.redoStack},insertXY:function(a,b){this.line.geometry.addComponent(new OpenLayers.Geometry.Point(a,b),this.getCurrentPointIndex()),this.drawFeature(),delete this.redoStack},insertDeltaXY:function(a,b){var c=this.getCurrentPointIndex()-1,c=this.line.geometry.components[c];!c||isNaN(c.x)||isNaN(c.y)||this.insertXY(c.x+a,c.y+b)},insertDirectionLength:function(a,b){a*=Math.PI/180;var c=b*Math.cos(a),d=b*Math.sin(a);this.insertDeltaXY(c,d)},insertDeflectionLength:function(a,b){var c=this.getCurrentPointIndex()-1;if(c>0){var d=this.line.geometry.components[c],c=this.line.geometry.components[c-1],d=Math.atan2(d.y-c.y,d.x-c.x);this.insertDirectionLength(180*d/Math.PI+a,b)}},getCurrentPointIndex:function(){return this.line.geometry.components.length-1},undo:function(){var a=this.line.geometry,b=a.components,c=this.getCurrentPointIndex()-1,d=b[c],e=a.removeComponent(d);return e&&(this.touch&&c>0&&(b=a.components,a=b[c-1],c=this.getCurrentPointIndex(),b=b[c],b.x=a.x,b.y=a.y),this.redoStack||(this.redoStack=[]),this.redoStack.push(d),this.drawFeature()),e},redo:function(){var a=this.redoStack&&this.redoStack.pop();return a&&(this.line.geometry.addComponent(a,this.getCurrentPointIndex()),this.drawFeature()),!!a},freehandMode:function(a){return this.freehandToggle&&a[this.freehandToggle]?!this.freehand:this.freehand},modifyFeature:function(a,b){this.line||this.createFeature(a);var c=this.layer.getLonLatFromViewPortPx(a);this.point.geometry.x=c.lon,this.point.geometry.y=c.lat,this.callback("modify",[this.point.geometry,this.getSketch(),b]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.line,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.line},getGeometry:function(){var a=this.line&&this.line.geometry;return a&&this.multi&&(a=new OpenLayers.Geometry.MultiLineString([a])),a},touchstart:function(a){return this.timerId&&this.passesTolerance(this.lastTouchPx,a.xy,this.doubleTouchTolerance)?(this.finishGeometry(),window.clearTimeout(this.timerId),this.timerId=null,!1):(this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),this.timerId=window.setTimeout(OpenLayers.Function.bind(function(){this.timerId=null},this),300),OpenLayers.Handler.Point.prototype.touchstart.call(this,a))},down:function(a){var b=this.stopDown;return this.freehandMode(a)&&(b=!0,this.touch&&(this.modifyFeature(a.xy,!!this.lastUp),OpenLayers.Event.stop(a))),this.touch||this.lastDown&&this.passesTolerance(this.lastDown,a.xy,this.pixelTolerance)||this.modifyFeature(a.xy,!!this.lastUp),this.mouseDown=!0,this.lastDown=a.xy,this.stoppedDown=b,!b},move:function(a){return this.stoppedDown&&this.freehandMode(a)?(this.persist&&this.destroyPersistedFeature(),this.maxVertices&&this.line&&this.line.geometry.components.length===this.maxVertices?(this.removePoint(),this.finalize()):this.addPoint(a.xy),!1):(this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(a.xy,!!this.lastUp),!0)},up:function(a){return!this.mouseDown||this.lastUp&&this.lastUp.equals(a.xy)||(this.stoppedDown&&this.freehandMode(a)?(this.persist&&this.destroyPersistedFeature(),this.removePoint(),this.finalize()):this.passesTolerance(this.lastDown,a.xy,this.pixelTolerance)&&(this.touch&&this.modifyFeature(a.xy),null==this.lastUp&&this.persist&&this.destroyPersistedFeature(),this.addPoint(a.xy),this.lastUp=a.xy,this.line.geometry.components.length===this.maxVertices+1&&this.finishGeometry())),this.stoppedDown=this.stopDown,this.mouseDown=!1,!this.stopUp},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-1]),this.removePoint(),this.finalize()},dblclick:function(a){return this.freehandMode(a)||this.finishGeometry(),!1},CLASS_NAME:"OpenLayers.Handler.Path"}),OpenLayers.Spherical=OpenLayers.Spherical||{},OpenLayers.Spherical.DEFAULT_RADIUS=6378137,OpenLayers.Spherical.computeDistanceBetween=function(a,b,c){c=c||OpenLayers.Spherical.DEFAULT_RADIUS;var d=Math.sin(Math.PI*(b.lon-a.lon)/360),e=Math.sin(Math.PI*(b.lat-a.lat)/360);return a=e*e+d*d*Math.cos(Math.PI*a.lat/180)*Math.cos(Math.PI*b.lat/180),2*c*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))},OpenLayers.Spherical.computeHeading=function(a,b){var c=Math.sin(Math.PI*(a.lon-b.lon)/180)*Math.cos(Math.PI*b.lat/180),d=Math.cos(Math.PI*a.lat/180)*Math.sin(Math.PI*b.lat/180)-Math.sin(Math.PI*a.lat/180)*Math.cos(Math.PI*b.lat/180)*Math.cos(Math.PI*(a.lon-b.lon)/180);return 180*Math.atan2(c,d)/Math.PI},OpenLayers.Control.CacheWrite=OpenLayers.Class(OpenLayers.Control,{layers:null,imageFormat:"image/png",quotaRegEx:/quota/i,setMap:function(a){OpenLayers.Control.prototype.setMap.apply(this,arguments);var b,c=this.layers||a.layers;for(b=c.length-1;b>=0;--b)this.addLayer({layer:c[b]});this.layers||a.events.on({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this})},addLayer:function(a){a.layer.events.on({tileloadstart:this.makeSameOrigin,tileloaded:this.onTileLoaded,scope:this})},removeLayer:function(a){a.layer.events.un({tileloadstart:this.makeSameOrigin,tileloaded:this.onTileLoaded,scope:this})},makeSameOrigin:function(a){if(this.active&&(a=a.tile,a instanceof OpenLayers.Tile.Image&&!a.crossOriginKeyword&&"data:"!==a.url.substr(0,5))){var b=OpenLayers.Request.makeSameOrigin(a.url,OpenLayers.ProxyHost);OpenLayers.Control.CacheWrite.urlMap[b]=a.url,a.url=b}},onTileLoaded:function(a){this.active&&!a.aborted&&a.tile instanceof OpenLayers.Tile.Image&&"data:"!==a.tile.url.substr(0,5)&&(this.cache({tile:a.tile}),delete OpenLayers.Control.CacheWrite.urlMap[a.tile.url])},cache:function(a){if(window.localStorage){a=a.tile;try{var b=a.getCanvasContext();b&&window.localStorage.setItem("olCache_"+(OpenLayers.Control.CacheWrite.urlMap[a.url]||a.url),b.canvas.toDataURL(this.imageFormat))}catch(c){(b=c.name||c.message)&&this.quotaRegEx.test(b)?this.events.triggerEvent("cachefull",{tile:a}):OpenLayers.Console.error(c.toString())}}},destroy:function(){if(this.layers||this.map){var a,b=this.layers||this.map.layers;for(a=b.length-1;a>=0;--a)this.removeLayer({layer:b[a]})}this.map&&this.map.events.un({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.CacheWrite"}),OpenLayers.Control.CacheWrite.clearCache=function(){if(window.localStorage){var a,b;for(a=window.localStorage.length-1;a>=0;--a)b=window.localStorage.key(a),"olCache_"===b.substr(0,8)&&window.localStorage.removeItem(b)}},OpenLayers.Control.CacheWrite.urlMap={},OpenLayers.Format.Context=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{layerOptions:null,layerParams:null,read:function(a,b){var c=OpenLayers.Format.XML.VersionedOGC.prototype.read.apply(this,arguments);if(b&&b.map)if(this.context=c,b.map instanceof OpenLayers.Map)c=this.mergeContextToMap(c,b.map);else{var d=b.map;(OpenLayers.Util.isElement(d)||"string"==typeof d)&&(d={div:d}),c=this.contextToMap(c,d)}return c},getLayerFromContext:function(a){var b,c,d={queryable:a.queryable,visibility:a.visibility,maxExtent:a.maxExtent,metadata:OpenLayers.Util.applyDefaults(a.metadata,{styles:a.styles,formats:a.formats,"abstract":a["abstract"],dataURL:a.dataURL}),numZoomLevels:a.numZoomLevels,units:a.units,isBaseLayer:a.isBaseLayer,opacity:a.opacity,displayInLayerSwitcher:a.displayInLayerSwitcher,singleTile:a.singleTile,tileSize:a.tileSize?new OpenLayers.Size(a.tileSize.width,a.tileSize.height):void 0,minScale:a.minScale||a.maxScaleDenominator,maxScale:a.maxScale||a.minScaleDenominator,srs:a.srs,dimensions:a.dimensions,metadataURL:a.metadataURL};this.layerOptions&&OpenLayers.Util.applyDefaults(d,this.layerOptions);var e={layers:a.name,transparent:a.transparent,version:a.version};if(a.formats&&0<a.formats.length)for(e.format=a.formats[0].value,b=0,c=a.formats.length;c>b;b++){var f=a.formats[b];if(1==f.current){e.format=f.value;break}}if(a.styles&&0<a.styles.length)for(b=0,c=a.styles.length;c>b;b++)if(f=a.styles[b],1==f.current){f.href?e.sld=f.href:f.body?e.sld_body=f.body:e.styles=f.name;break}return this.layerParams&&OpenLayers.Util.applyDefaults(e,this.layerParams),b=null,c=a.service,c==OpenLayers.Format.Context.serviceTypes.WFS?(d.strategies=[new OpenLayers.Strategy.BBOX],d.protocol=new OpenLayers.Protocol.WFS({url:a.url,featurePrefix:a.name.split(":")[0],featureType:a.name.split(":").pop()}),b=new OpenLayers.Layer.Vector(a.title||a.name,d)):c==OpenLayers.Format.Context.serviceTypes.KML?(d.strategies=[new OpenLayers.Strategy.Fixed],d.protocol=new OpenLayers.Protocol.HTTP({url:a.url,format:new OpenLayers.Format.KML}),b=new OpenLayers.Layer.Vector(a.title||a.name,d)):c==OpenLayers.Format.Context.serviceTypes.GML?(d.strategies=[new OpenLayers.Strategy.Fixed],d.protocol=new OpenLayers.Protocol.HTTP({url:a.url,format:new OpenLayers.Format.GML}),b=new OpenLayers.Layer.Vector(a.title||a.name,d)):a.features?(b=new OpenLayers.Layer.Vector(a.title||a.name,d),b.addFeatures(a.features)):!0!==a.categoryLayer&&(b=new OpenLayers.Layer.WMS(a.title||a.name,a.url,e,d)),b},getLayersFromContext:function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=this.getLayerFromContext(a[c]);null!==e&&b.push(e)}return b},contextToMap:function(a,b){b=OpenLayers.Util.applyDefaults({maxExtent:a.maxExtent,projection:a.projection,units:a.units},b),b.maxExtent&&(b.maxResolution=b.maxExtent.getWidth()/OpenLayers.Map.TILE_WIDTH),b.metadata={contactInformation:a.contactInformation,"abstract":a["abstract"],keywords:a.keywords,logo:a.logo,descriptionURL:a.descriptionURL};var c=new OpenLayers.Map(b);return c.addLayers(this.getLayersFromContext(a.layersContext)),c.setCenter(a.bounds.getCenterLonLat(),c.getZoomForExtent(a.bounds,!0)),c},mergeContextToMap:function(a,b){return b.addLayers(this.getLayersFromContext(a.layersContext)),b},write:function(a,b){return a=this.toContext(a),OpenLayers.Format.XML.VersionedOGC.prototype.write.apply(this,arguments)},CLASS_NAME:"OpenLayers.Format.Context"}),OpenLayers.Format.Context.serviceTypes={WMS:"urn:ogc:serviceType:WMS",WFS:"urn:ogc:serviceType:WFS",WCS:"urn:ogc:serviceType:WCS",GML:"urn:ogc:serviceType:GML",SLD:"urn:ogc:serviceType:SLD",FES:"urn:ogc:serviceType:FES",KML:"urn:ogc:serviceType:KML"},OpenLayers.Format.WMC=OpenLayers.Class(OpenLayers.Format.Context,{defaultVersion:"1.1.0",layerToContext:function(a){var b=this.getParser(),c={queryable:a.queryable,visibility:a.visibility,name:a.params.LAYERS,title:a.name,"abstract":a.metadata["abstract"],dataURL:a.metadata.dataURL,metadataURL:a.metadataURL,server:{version:a.params.VERSION,url:a.url},maxExtent:a.maxExtent,transparent:a.params.TRANSPARENT,numZoomLevels:a.numZoomLevels,units:a.units,isBaseLayer:a.isBaseLayer,opacity:1==a.opacity?void 0:a.opacity,displayInLayerSwitcher:a.displayInLayerSwitcher,singleTile:a.singleTile,tileSize:a.singleTile||!a.tileSize?void 0:{width:a.tileSize.w,height:a.tileSize.h},minScale:a.options.resolutions||a.options.scales||a.options.maxResolution||a.options.minScale?a.minScale:void 0,maxScale:a.options.resolutions||a.options.scales||a.options.minResolution||a.options.maxScale?a.maxScale:void 0,formats:[],styles:[],srs:a.srs,dimensions:a.dimensions};if(a.metadata.servertitle&&(c.server.title=a.metadata.servertitle),a.metadata.formats&&0<a.metadata.formats.length)for(var d=0,e=a.metadata.formats.length;e>d;d++){var f=a.metadata.formats[d];c.formats.push({value:f.value,current:f.value==a.params.FORMAT})}else c.formats.push({value:a.params.FORMAT,current:!0});if(a.metadata.styles&&0<a.metadata.styles.length)for(d=0,e=a.metadata.styles.length;e>d;d++)b=a.metadata.styles[d],b.current=b.href==a.params.SLD||b.body==a.params.SLD_BODY||b.name==a.params.STYLES?!0:!1,c.styles.push(b);else c.styles.push({href:a.params.SLD,body:a.params.SLD_BODY,name:a.params.STYLES||b.defaultStyleName,title:b.defaultStyleTitle,current:!0});return c},toContext:function(a){var b={},c=a.layers;if("OpenLayers.Map"==a.CLASS_NAME){var d=a.metadata||{};b.size=a.getSize(),b.bounds=a.getExtent(),b.projection=a.projection,b.title=a.title,b.keywords=d.keywords,b["abstract"]=d["abstract"],b.logo=d.logo,b.descriptionURL=d.descriptionURL,b.contactInformation=d.contactInformation,b.maxExtent=a.maxExtent}else OpenLayers.Util.applyDefaults(b,a),void 0!=b.layers&&delete b.layers;if(void 0==b.layersContext&&(b.layersContext=[]),void 0!=c&&OpenLayers.Util.isArray(c))for(a=0,d=c.length;d>a;a++){var e=c[a];e instanceof OpenLayers.Layer.WMS&&b.layersContext.push(this.layerToContext(e))}return b},CLASS_NAME:"OpenLayers.Format.WMC"}),OpenLayers.Format.WMC.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ol:"http://openlayers.org/context",wmc:"http://www.opengis.net/context",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"",getNamespacePrefix:function(a){var b=null;if(null==a)b=this.namespaces[this.defaultPrefix];else for(b in this.namespaces)if(this.namespaces[b]==a)break;return b},defaultPrefix:"wmc",rootPrefix:null,defaultStyleName:"",defaultStyleTitle:"Default",initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a=a.documentElement,this.rootPrefix=a.prefix;var b={version:a.getAttribute("version")};return this.runChildNodes(b,a),b},runChildNodes:function(a,b){for(var c,d,e,f=b.childNodes,g=0,h=f.length;h>g;++g)c=f[g],1==c.nodeType&&(d=this.getNamespacePrefix(c.namespaceURI),e=c.nodeName.split(":").pop(),(d=this["read_"+d+"_"+e])&&d.apply(this,[a,c]))},read_wmc_General:function(a,b){this.runChildNodes(a,b)},read_wmc_BoundingBox:function(a,b){a.projection=b.getAttribute("SRS"),a.bounds=new OpenLayers.Bounds(b.getAttribute("minx"),b.getAttribute("miny"),b.getAttribute("maxx"),b.getAttribute("maxy"))},read_wmc_LayerList:function(a,b){a.layersContext=[],this.runChildNodes(a,b)},read_wmc_Layer:function(a,b){var c={visibility:"1"!=b.getAttribute("hidden"),queryable:"1"==b.getAttribute("queryable"),formats:[],styles:[],metadata:{}};this.runChildNodes(c,b),a.layersContext.push(c)},read_wmc_Extension:function(a,b){this.runChildNodes(a,b)},read_ol_units:function(a,b){a.units=this.getChildValue(b)},read_ol_maxExtent:function(a,b){var c=new OpenLayers.Bounds(b.getAttribute("minx"),b.getAttribute("miny"),b.getAttribute("maxx"),b.getAttribute("maxy"));a.maxExtent=c},read_ol_transparent:function(a,b){a.transparent=this.getChildValue(b)},read_ol_numZoomLevels:function(a,b){a.numZoomLevels=parseInt(this.getChildValue(b))},read_ol_opacity:function(a,b){a.opacity=parseFloat(this.getChildValue(b))},read_ol_singleTile:function(a,b){a.singleTile="true"==this.getChildValue(b)},read_ol_tileSize:function(a,b){var c={width:b.getAttribute("width"),height:b.getAttribute("height")};a.tileSize=c},read_ol_isBaseLayer:function(a,b){a.isBaseLayer="true"==this.getChildValue(b)},read_ol_displayInLayerSwitcher:function(a,b){a.displayInLayerSwitcher="true"==this.getChildValue(b)},read_wmc_Server:function(a,b){a.version=b.getAttribute("version"),a.url=this.getOnlineResource_href(b),a.metadata.servertitle=b.getAttribute("title")},read_wmc_FormatList:function(a,b){this.runChildNodes(a,b)},read_wmc_Format:function(a,b){var c={value:this.getChildValue(b)};"1"==b.getAttribute("current")&&(c.current=!0),a.formats.push(c)},read_wmc_StyleList:function(a,b){this.runChildNodes(a,b)},read_wmc_Style:function(a,b){var c={};this.runChildNodes(c,b),"1"==b.getAttribute("current")&&(c.current=!0),a.styles.push(c)},read_wmc_SLD:function(a,b){this.runChildNodes(a,b)},read_sld_StyledLayerDescriptor:function(a,b){var c=OpenLayers.Format.XML.prototype.write.apply(this,[b]);a.body=c},read_sld_FeatureTypeStyle:function(a,b){var c=OpenLayers.Format.XML.prototype.write.apply(this,[b]);a.body=c},read_wmc_OnlineResource:function(a,b){a.href=this.getAttributeNS(b,this.namespaces.xlink,"href")},read_wmc_Name:function(a,b){var c=this.getChildValue(b);c&&(a.name=c)},read_wmc_Title:function(a,b){var c=this.getChildValue(b);c&&(a.title=c)},read_wmc_MetadataURL:function(a,b){a.metadataURL=this.getOnlineResource_href(b)},read_wmc_KeywordList:function(a,b){a.keywords=[],this.runChildNodes(a.keywords,b)},read_wmc_Keyword:function(a,b){a.push(this.getChildValue(b))},read_wmc_Abstract:function(a,b){var c=this.getChildValue(b);c&&(a["abstract"]=c)},read_wmc_LogoURL:function(a,b){a.logo={width:b.getAttribute("width"),height:b.getAttribute("height"),format:b.getAttribute("format"),href:this.getOnlineResource_href(b)}},read_wmc_DescriptionURL:function(a,b){a.descriptionURL=this.getOnlineResource_href(b)},read_wmc_ContactInformation:function(a,b){var c={};this.runChildNodes(c,b),a.contactInformation=c},read_wmc_ContactPersonPrimary:function(a,b){var c={};this.runChildNodes(c,b),a.personPrimary=c},read_wmc_ContactPerson:function(a,b){var c=this.getChildValue(b);c&&(a.person=c)},read_wmc_ContactOrganization:function(a,b){var c=this.getChildValue(b);c&&(a.organization=c)},read_wmc_ContactPosition:function(a,b){var c=this.getChildValue(b);c&&(a.position=c)},read_wmc_ContactAddress:function(a,b){var c={};this.runChildNodes(c,b),a.contactAddress=c},read_wmc_AddressType:function(a,b){var c=this.getChildValue(b);c&&(a.type=c)},read_wmc_Address:function(a,b){var c=this.getChildValue(b);c&&(a.address=c)},read_wmc_City:function(a,b){var c=this.getChildValue(b);c&&(a.city=c)},read_wmc_StateOrProvince:function(a,b){var c=this.getChildValue(b);c&&(a.stateOrProvince=c)},read_wmc_PostCode:function(a,b){var c=this.getChildValue(b);c&&(a.postcode=c)},read_wmc_Country:function(a,b){var c=this.getChildValue(b);c&&(a.country=c)},read_wmc_ContactVoiceTelephone:function(a,b){var c=this.getChildValue(b);c&&(a.phone=c)},read_wmc_ContactFacsimileTelephone:function(a,b){var c=this.getChildValue(b);c&&(a.fax=c)},read_wmc_ContactElectronicMailAddress:function(a,b){var c=this.getChildValue(b);c&&(a.email=c)},read_wmc_DataURL:function(a,b){a.dataURL=this.getOnlineResource_href(b)},read_wmc_LegendURL:function(a,b){var c={width:b.getAttribute("width"),height:b.getAttribute("height"),format:b.getAttribute("format"),href:this.getOnlineResource_href(b)};a.legend=c},read_wmc_DimensionList:function(a,b){a.dimensions={},this.runChildNodes(a.dimensions,b)},read_wmc_Dimension:function(a,b){var c={name:b.getAttribute("name").toLowerCase(),units:b.getAttribute("units")||"",unitSymbol:b.getAttribute("unitSymbol")||"",userValue:b.getAttribute("userValue")||"",nearestValue:"1"===b.getAttribute("nearestValue"),multipleValues:"1"===b.getAttribute("multipleValues"),current:"1"===b.getAttribute("current"),"default":b.getAttribute("default")||""},d=this.getChildValue(b);c.values=d.split(","),a[c.name]=c},write:function(a,b){var c=this.createElementDefaultNS("ViewContext");return this.setAttributes(c,{version:this.VERSION,id:b&&"string"==typeof b.id?b.id:OpenLayers.Util.createUniqueID("OpenLayers_Context_")}),this.setAttributeNS(c,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),c.appendChild(this.write_wmc_General(a)),c.appendChild(this.write_wmc_LayerList(a)),OpenLayers.Format.XML.prototype.write.apply(this,[c])},createElementDefaultNS:function(a,b,c){return a=this.createElementNS(this.namespaces[this.defaultPrefix],a),b&&a.appendChild(this.createTextNode(b)),c&&this.setAttributes(a,c),a},setAttributes:function(a,b){var c,d;for(d in b)c=b[d].toString(),c.match(/[A-Z]/)?this.setAttributeNS(a,null,d,c):a.setAttribute(d,c)},write_wmc_General:function(a){var b=this.createElementDefaultNS("General");a.size&&b.appendChild(this.createElementDefaultNS("Window",null,{width:a.size.w,height:a.size.h}));var c=a.bounds;return b.appendChild(this.createElementDefaultNS("BoundingBox",null,{minx:c.left.toPrecision(18),miny:c.bottom.toPrecision(18),maxx:c.right.toPrecision(18),maxy:c.top.toPrecision(18),SRS:a.projection})),b.appendChild(this.createElementDefaultNS("Title",a.title)),a.keywords&&b.appendChild(this.write_wmc_KeywordList(a.keywords)),
a["abstract"]&&b.appendChild(this.createElementDefaultNS("Abstract",a["abstract"])),a.logo&&b.appendChild(this.write_wmc_URLType("LogoURL",a.logo.href,a.logo)),a.descriptionURL&&b.appendChild(this.write_wmc_URLType("DescriptionURL",a.descriptionURL)),a.contactInformation&&b.appendChild(this.write_wmc_ContactInformation(a.contactInformation)),b.appendChild(this.write_ol_MapExtension(a)),b},write_wmc_KeywordList:function(a){for(var b=this.createElementDefaultNS("KeywordList"),c=0,d=a.length;d>c;c++)b.appendChild(this.createElementDefaultNS("Keyword",a[c]));return b},write_wmc_ContactInformation:function(a){var b=this.createElementDefaultNS("ContactInformation");return a.personPrimary&&b.appendChild(this.write_wmc_ContactPersonPrimary(a.personPrimary)),a.position&&b.appendChild(this.createElementDefaultNS("ContactPosition",a.position)),a.contactAddress&&b.appendChild(this.write_wmc_ContactAddress(a.contactAddress)),a.phone&&b.appendChild(this.createElementDefaultNS("ContactVoiceTelephone",a.phone)),a.fax&&b.appendChild(this.createElementDefaultNS("ContactFacsimileTelephone",a.fax)),a.email&&b.appendChild(this.createElementDefaultNS("ContactElectronicMailAddress",a.email)),b},write_wmc_ContactPersonPrimary:function(a){var b=this.createElementDefaultNS("ContactPersonPrimary");return a.person&&b.appendChild(this.createElementDefaultNS("ContactPerson",a.person)),a.organization&&b.appendChild(this.createElementDefaultNS("ContactOrganization",a.organization)),b},write_wmc_ContactAddress:function(a){var b=this.createElementDefaultNS("ContactAddress");return a.type&&b.appendChild(this.createElementDefaultNS("AddressType",a.type)),a.address&&b.appendChild(this.createElementDefaultNS("Address",a.address)),a.city&&b.appendChild(this.createElementDefaultNS("City",a.city)),a.stateOrProvince&&b.appendChild(this.createElementDefaultNS("StateOrProvince",a.stateOrProvince)),a.postcode&&b.appendChild(this.createElementDefaultNS("PostCode",a.postcode)),a.country&&b.appendChild(this.createElementDefaultNS("Country",a.country)),b},write_ol_MapExtension:function(a){var b=this.createElementDefaultNS("Extension");if(a=a.maxExtent){var c=this.createElementNS(this.namespaces.ol,"ol:maxExtent");this.setAttributes(c,{minx:a.left.toPrecision(18),miny:a.bottom.toPrecision(18),maxx:a.right.toPrecision(18),maxy:a.top.toPrecision(18)}),b.appendChild(c)}return b},write_wmc_LayerList:function(a){for(var b=this.createElementDefaultNS("LayerList"),c=0,d=a.layersContext.length;d>c;++c)b.appendChild(this.write_wmc_Layer(a.layersContext[c]));return b},write_wmc_Layer:function(a){var b=this.createElementDefaultNS("Layer",null,{queryable:a.queryable?"1":"0",hidden:a.visibility?"0":"1"});return b.appendChild(this.write_wmc_Server(a)),b.appendChild(this.createElementDefaultNS("Name",a.name)),b.appendChild(this.createElementDefaultNS("Title",a.title)),a["abstract"]&&b.appendChild(this.createElementDefaultNS("Abstract",a["abstract"])),a.dataURL&&b.appendChild(this.write_wmc_URLType("DataURL",a.dataURL)),a.metadataURL&&b.appendChild(this.write_wmc_URLType("MetadataURL",a.metadataURL)),b},write_wmc_LayerExtension:function(a){var b=this.createElementDefaultNS("Extension"),c=a.maxExtent,d=this.createElementNS(this.namespaces.ol,"ol:maxExtent");this.setAttributes(d,{minx:c.left.toPrecision(18),miny:c.bottom.toPrecision(18),maxx:c.right.toPrecision(18),maxy:c.top.toPrecision(18)}),b.appendChild(d),a.tileSize&&!a.singleTile&&(c=this.createElementNS(this.namespaces.ol,"ol:tileSize"),this.setAttributes(c,a.tileSize),b.appendChild(c));for(var c="transparent numZoomLevels units isBaseLayer opacity displayInLayerSwitcher singleTile".split(" "),e=0,f=c.length;f>e;++e)(d=this.createOLPropertyNode(a,c[e]))&&b.appendChild(d);return b},createOLPropertyNode:function(a,b){var c=null;return null!=a[b]&&(c=this.createElementNS(this.namespaces.ol,"ol:"+b),c.appendChild(this.createTextNode(a[b].toString()))),c},write_wmc_Server:function(a){a=a.server;var b=this.createElementDefaultNS("Server"),c={service:"OGC:WMS",version:a.version};return a.title&&(c.title=a.title),this.setAttributes(b,c),b.appendChild(this.write_wmc_OnlineResource(a.url)),b},write_wmc_URLType:function(a,b,c){if(a=this.createElementDefaultNS(a),a.appendChild(this.write_wmc_OnlineResource(b)),c){b=["width","height","format"];for(var d=0;d<b.length;d++)b[d]in c&&a.setAttribute(b[d],c[b[d]])}return a},write_wmc_DimensionList:function(a){var b,c=this.createElementDefaultNS("DimensionList");for(b in a.dimensions){var d,e={},f=a.dimensions[b];for(d in f)e[d]="boolean"==typeof f[d]?Number(f[d]):f[d];f="",e.values&&(f=e.values.join(","),delete e.values),c.appendChild(this.createElementDefaultNS("Dimension",f,e))}return c},write_wmc_FormatList:function(a){for(var b=this.createElementDefaultNS("FormatList"),c=0,d=a.formats.length;d>c;c++){var e=a.formats[c];b.appendChild(this.createElementDefaultNS("Format",e.value,e.current&&1==e.current?{current:"1"}:null))}return b},write_wmc_StyleList:function(a){var b=this.createElementDefaultNS("StyleList");if((a=a.styles)&&OpenLayers.Util.isArray(a))for(var c,d=0,e=a.length;e>d;d++){var f=a[d],g=this.createElementDefaultNS("Style",null,f.current&&1==f.current?{current:"1"}:null);f.href?(c=this.createElementDefaultNS("SLD"),f.name&&c.appendChild(this.createElementDefaultNS("Name",f.name)),f.title&&c.appendChild(this.createElementDefaultNS("Title",f.title)),f.legend&&c.appendChild(this.write_wmc_URLType("LegendURL",f.legend.href,f.legend)),f=this.write_wmc_OnlineResource(f.href),c.appendChild(f),g.appendChild(c)):f.body?(c=this.createElementDefaultNS("SLD"),f.name&&c.appendChild(this.createElementDefaultNS("Name",f.name)),f.title&&c.appendChild(this.createElementDefaultNS("Title",f.title)),f.legend&&c.appendChild(this.write_wmc_URLType("LegendURL",f.legend.href,f.legend)),f=OpenLayers.Format.XML.prototype.read.apply(this,[f.body]).documentElement,c.ownerDocument&&c.ownerDocument.importNode&&(f=c.ownerDocument.importNode(f,!0)),c.appendChild(f),g.appendChild(c)):(g.appendChild(this.createElementDefaultNS("Name",f.name)),g.appendChild(this.createElementDefaultNS("Title",f.title)),f["abstract"]&&g.appendChild(this.createElementDefaultNS("Abstract",f["abstract"])),f.legend&&g.appendChild(this.write_wmc_URLType("LegendURL",f.legend.href,f.legend))),b.appendChild(g)}return b},write_wmc_OnlineResource:function(a){var b=this.createElementDefaultNS("OnlineResource");return this.setAttributeNS(b,this.namespaces.xlink,"xlink:type","simple"),this.setAttributeNS(b,this.namespaces.xlink,"xlink:href",a),b},getOnlineResource_href:function(a){var b={};return a=a.getElementsByTagName("OnlineResource"),0<a.length&&this.read_wmc_OnlineResource(b,a[0]),b.href},CLASS_NAME:"OpenLayers.Format.WMC.v1"}),OpenLayers.Control.PanPanel=OpenLayers.Class(OpenLayers.Control.Panel,{slideFactor:50,slideRatio:null,initialize:function(a){OpenLayers.Control.Panel.prototype.initialize.apply(this,[a]),a={slideFactor:this.slideFactor,slideRatio:this.slideRatio},this.addControls([new OpenLayers.Control.Pan(OpenLayers.Control.Pan.NORTH,a),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.SOUTH,a),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.EAST,a),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.WEST,a)])},CLASS_NAME:"OpenLayers.Control.PanPanel"}),OpenLayers.Control.Attribution=OpenLayers.Class(OpenLayers.Control,{separator:", ",template:"${layers}",destroy:function(){this.map.events.un({removelayer:this.updateAttribution,addlayer:this.updateAttribution,changelayer:this.updateAttribution,changebaselayer:this.updateAttribution,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.map.events.on({changebaselayer:this.updateAttribution,changelayer:this.updateAttribution,addlayer:this.updateAttribution,removelayer:this.updateAttribution,scope:this}),this.updateAttribution(),this.div},updateAttribution:function(){var a=[];if(this.map&&this.map.layers){for(var b=0,c=this.map.layers.length;c>b;b++){var d=this.map.layers[b];d.attribution&&d.getVisibility()&&-1===OpenLayers.Util.indexOf(a,d.attribution)&&a.push(d.attribution)}this.div.innerHTML=OpenLayers.String.format(this.template,{layers:a.join(this.separator)})}},CLASS_NAME:"OpenLayers.Control.Attribution"}),OpenLayers.Kinetic=OpenLayers.Class({threshold:0,deceleration:.0035,nbPoints:100,delay:200,points:void 0,timerId:void 0,initialize:function(a){OpenLayers.Util.extend(this,a)},begin:function(){OpenLayers.Animation.stop(this.timerId),this.timerId=void 0,this.points=[]},update:function(a){this.points.unshift({xy:a,tick:(new Date).getTime()}),this.points.length>this.nbPoints&&this.points.pop()},end:function(a){for(var b,c,d=(new Date).getTime(),e=0,f=this.points.length;f>e&&(c=this.points[e],!(d-c.tick>this.delay));e++)b=c;return!b||(e=(new Date).getTime()-b.tick,d=Math.sqrt(Math.pow(a.x-b.xy.x,2)+Math.pow(a.y-b.xy.y,2)),e=d/e,0==e||e<this.threshold)?void 0:(d=Math.asin((a.y-b.xy.y)/d),b.xy.x<=a.x&&(d=Math.PI-d),{speed:e,theta:d})},move:function(a,b){var c=a.speed,d=Math.cos(a.theta),e=-Math.sin(a.theta),f=(new Date).getTime(),g=0,h=0;this.timerId=OpenLayers.Animation.start(OpenLayers.Function.bind(function(){if(null!=this.timerId){var a,i,j=(new Date).getTime()-f,k=-this.deceleration*Math.pow(j,2)/2+c*j,l=k*d,k=k*e;a=!1,0>=-this.deceleration*j+c&&(OpenLayers.Animation.stop(this.timerId),this.timerId=null,a=!0),j=l-g,i=k-h,g=l,h=k,b(j,i,a)}},this))},CLASS_NAME:"OpenLayers.Kinetic"}),OpenLayers.Format.WPSExecute=OpenLayers.Class(OpenLayers.Format.XML,OpenLayers.Format.Filter.v1_1_0,{namespaces:{ows:"http://www.opengis.net/ows/1.1",gml:"http://www.opengis.net/gml",wps:"http://www.opengis.net/wps/1.0.0",wfs:"http://www.opengis.net/wfs",ogc:"http://www.opengis.net/ogc",wcs:"http://www.opengis.net/wcs",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",schemaLocationAttr:function(a){},write:function(a){var b;return window.ActiveXObject?this.xmldom=b=new ActiveXObject("Microsoft.XMLDOM"):b=document.implementation.createDocument("","",null),a=this.writeNode("wps:Execute",a,b),this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[a])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b={};return this.readNode(a,b),b},writers:{wps:{Execute:function(a){var b=this.createElementNSPlus("wps:Execute",{attributes:{version:this.VERSION,service:"WPS"}});return this.writeNode("ows:Identifier",a.identifier,b),this.writeNode("wps:DataInputs",a.dataInputs,b),this.writeNode("wps:ResponseForm",a.responseForm,b),b},ResponseForm:function(a){var b=this.createElementNSPlus("wps:ResponseForm",{});return a.rawDataOutput&&this.writeNode("wps:RawDataOutput",a.rawDataOutput,b),a.responseDocument&&this.writeNode("wps:ResponseDocument",a.responseDocument,b),b},ResponseDocument:function(a){var b=this.createElementNSPlus("wps:ResponseDocument",{attributes:{storeExecuteResponse:a.storeExecuteResponse,lineage:a.lineage,status:a.status}});if(a.outputs)for(var c=0,d=a.outputs.length;d>c;c++)this.writeNode("wps:Output",a.outputs[c],b);return b},Output:function(a){var b=this.createElementNSPlus("wps:Output",{attributes:{asReference:a.asReference,mimeType:a.mimeType,encoding:a.encoding,schema:a.schema}});return this.writeNode("ows:Identifier",a.identifier,b),this.writeNode("ows:Title",a.title,b),this.writeNode("ows:Abstract",a["abstract"],b),b},RawDataOutput:function(a){var b=this.createElementNSPlus("wps:RawDataOutput",{attributes:{mimeType:a.mimeType,encoding:a.encoding,schema:a.schema}});return this.writeNode("ows:Identifier",a.identifier,b),b},DataInputs:function(a){for(var b=this.createElementNSPlus("wps:DataInputs",{}),c=0,d=a.length;d>c;++c)this.writeNode("wps:Input",a[c],b);return b},Input:function(a){var b=this.createElementNSPlus("wps:Input",{});return this.writeNode("ows:Identifier",a.identifier,b),a.title&&this.writeNode("ows:Title",a.title,b),a.data&&this.writeNode("wps:Data",a.data,b),a.reference&&this.writeNode("wps:Reference",a.reference,b),a.boundingBoxData&&this.writeNode("wps:BoundingBoxData",a.boundingBoxData,b),b},Data:function(a){var b=this.createElementNSPlus("wps:Data",{});return a.literalData?this.writeNode("wps:LiteralData",a.literalData,b):a.complexData?this.writeNode("wps:ComplexData",a.complexData,b):a.boundingBoxData&&this.writeNode("ows:BoundingBox",a.boundingBoxData,b),b},LiteralData:function(a){return this.createElementNSPlus("wps:LiteralData",{attributes:{uom:a.uom},value:a.value})},ComplexData:function(a){var b=this.createElementNSPlus("wps:ComplexData",{attributes:{mimeType:a.mimeType,encoding:a.encoding,schema:a.schema}}),c=a.value;return b.appendChild("string"==typeof c?this.getXMLDoc().createCDATASection(a.value):c),b},Reference:function(a){var b=this.createElementNSPlus("wps:Reference",{attributes:{mimeType:a.mimeType,"xlink:href":a.href,method:a.method,encoding:a.encoding,schema:a.schema}});return a.body&&this.writeNode("wps:Body",a.body,b),b},BoundingBoxData:function(a,b){this.writers.ows.BoundingBox.apply(this,[a,b,"wps:BoundingBoxData"])},Body:function(a){var b=this.createElementNSPlus("wps:Body",{});return a.wcs?this.writeNode("wcs:GetCoverage",a.wcs,b):a.wfs?(this.featureType=a.wfs.featureType,this.version=a.wfs.version,this.writeNode("wfs:GetFeature",a.wfs,b)):this.writeNode("wps:Execute",a,b),b}},wcs:OpenLayers.Format.WCSGetCoverage.prototype.writers.wcs,wfs:OpenLayers.Format.WFST.v1_1_0.prototype.writers.wfs,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc,ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows},readers:{wps:{ExecuteResponse:function(a,b){b.executeResponse={lang:a.getAttribute("lang"),statusLocation:a.getAttribute("statusLocation"),serviceInstance:a.getAttribute("serviceInstance"),service:a.getAttribute("service")},this.readChildNodes(a,b.executeResponse)},Process:function(a,b){b.process={},this.readChildNodes(a,b.process)},Status:function(a,b){b.status={creationTime:a.getAttribute("creationTime")},this.readChildNodes(a,b.status)},ProcessSucceeded:function(a,b){b.processSucceeded=!0},ProcessOutputs:function(a,b){b.processOutputs=[],this.readChildNodes(a,b.processOutputs)},Output:function(a,b){var c={};this.readChildNodes(a,c),b.push(c)},Reference:function(a,b){b.reference={href:a.getAttribute("href"),mimeType:a.getAttribute("mimeType"),encoding:a.getAttribute("encoding"),schema:a.getAttribute("schema")}},Data:function(a,b){b.data={},this.readChildNodes(a,b)},LiteralData:function(a,b){b.literalData={dataType:a.getAttribute("dataType"),uom:a.getAttribute("uom"),value:this.getChildValue(a)}},ComplexData:function(a,b){if(b.complexData={mimeType:a.getAttribute("mimeType"),schema:a.getAttribute("schema"),encoding:a.getAttribute("encoding"),value:""},this.isSimpleContent(a)){var c;for(c=a.firstChild;c;c=c.nextSibling)switch(c.nodeType){case 3:case 4:b.complexData.value+=c.nodeValue}}else for(c=a.firstChild;c;c=c.nextSibling)1==c.nodeType&&(b.complexData.value=c)},BoundingBox:function(a,b){b.boundingBoxData={dimensions:a.getAttribute("dimensions"),crs:a.getAttribute("crs")},this.readChildNodes(a,b.boundingBoxData)}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WPSExecute"}),OpenLayers.Layer.GeoRSS=OpenLayers.Class(OpenLayers.Layer.Markers,{location:null,features:null,formatOptions:null,selectedFeature:null,icon:null,popupSize:null,useFeedTitle:!0,initialize:function(a,b,c){OpenLayers.Layer.Markers.prototype.initialize.apply(this,[a,c]),this.location=b,this.features=[]},destroy:function(){OpenLayers.Layer.Markers.prototype.destroy.apply(this,arguments),this.clearFeatures(),this.features=null},loadRSS:function(){this.loaded||(this.events.triggerEvent("loadstart"),OpenLayers.Request.GET({url:this.location,success:this.parseData,scope:this}),this.loaded=!0)},moveTo:function(a,b,c){OpenLayers.Layer.Markers.prototype.moveTo.apply(this,arguments),this.visibility&&!this.loaded&&this.loadRSS()},parseData:function(a){var b=a.responseXML;if(b&&b.documentElement||(b=OpenLayers.Format.XML.prototype.read(a.responseText)),this.useFeedTitle){a=null;try{a=b.getElementsByTagNameNS("*","title")[0].firstChild.nodeValue}catch(c){a=b.getElementsByTagName("title")[0].firstChild.nodeValue}a&&this.setName(a)}a={},OpenLayers.Util.extend(a,this.formatOptions),this.map&&!this.projection.equals(this.map.getProjectionObject())&&(a.externalProjection=this.projection,a.internalProjection=this.map.getProjectionObject()),b=new OpenLayers.Format.GeoRSS(a).read(b),a=0;for(var d=b.length;d>a;a++){var e={},f=b[a];if(f.geometry){var g=f.attributes.title?f.attributes.title:"Untitled",h=f.attributes.description?f.attributes.description:"No description.",i=f.attributes.link?f.attributes.link:"",f=f.geometry.getBounds().getCenterLonLat();if(e.icon=null==this.icon?OpenLayers.Marker.defaultIcon():this.icon.clone(),e.popupSize=this.popupSize?this.popupSize.clone():new OpenLayers.Size(250,120),g||h){e.title=g,e.description=h;var j='<div class="olLayerGeoRSSClose">[x]</div>',j=j+'<div class="olLayerGeoRSSTitle">';i&&(j+='<a class="link" href="'+i+'" target="_blank">'),j+=g,i&&(j+="</a>"),j+="</div>",j+='<div style="" class="olLayerGeoRSSDescription">',j+=h,j+="</div>",e.popupContentHTML=j}f=new OpenLayers.Feature(this,f,e),this.features.push(f),e=f.createMarker(),e.events.register("click",f,this.markerClick),this.addMarker(e)}}this.events.triggerEvent("loadend")},markerClick:function(a){var b=this==this.layer.selectedFeature;this.layer.selectedFeature=b?null:this;for(var c=0,d=this.layer.map.popups.length;d>c;c++)this.layer.map.removePopup(this.layer.map.popups[c]);b||(b=this.createPopup(),OpenLayers.Event.observe(b.div,"click",OpenLayers.Function.bind(function(){for(var a=0,b=this.layer.map.popups.length;b>a;a++)this.layer.map.removePopup(this.layer.map.popups[a])},this)),this.layer.map.addPopup(b)),OpenLayers.Event.stop(a)},clearFeatures:function(){if(null!=this.features)for(;0<this.features.length;){var a=this.features[0];OpenLayers.Util.removeItem(this.features,a),a.destroy()}},CLASS_NAME:"OpenLayers.Layer.GeoRSS"}),OpenLayers.Symbolizer.Point=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(a){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Point"}),OpenLayers.Symbolizer.Line=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(a){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Line"}),OpenLayers.Symbolizer.Text=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(a){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Text"}),OpenLayers.Format.SLD.v1=OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0,{namespaces:{sld:"http://www.opengis.net/sld",ogc:"http://www.opengis.net/ogc",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"sld",schemaLocation:null,multipleSymbolizers:!1,featureTypeCounter:null,defaultSymbolizer:{fillColor:"#808080",fillOpacity:1,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,strokeDashstyle:"solid",pointRadius:3,graphicName:"square"},read:function(a,b){b=OpenLayers.Util.applyDefaults(b,this.options);var c={namedLayers:!0===b.namedLayersAsArray?[]:{}};return this.readChildNodes(a,c),c},readers:OpenLayers.Util.applyDefaults({sld:{StyledLayerDescriptor:function(a,b){b.version=a.getAttribute("version"),this.readChildNodes(a,b)},Name:function(a,b){b.name=this.getChildValue(a)},Title:function(a,b){b.title=this.getChildValue(a)},Abstract:function(a,b){b.description=this.getChildValue(a)},NamedLayer:function(a,b){var c={userStyles:[],namedStyles:[]};this.readChildNodes(a,c);for(var d=0,e=c.userStyles.length;e>d;++d)c.userStyles[d].layerName=c.name;OpenLayers.Util.isArray(b.namedLayers)?b.namedLayers.push(c):b.namedLayers[c.name]=c},NamedStyle:function(a,b){b.namedStyles.push(this.getChildName(a.firstChild))},UserStyle:function(a,b){var c={defaultsPerSymbolizer:!0,rules:[]};this.featureTypeCounter=-1,this.readChildNodes(a,c),this.multipleSymbolizers?(delete c.defaultsPerSymbolizer,c=new OpenLayers.Style2(c)):c=new OpenLayers.Style(this.defaultSymbolizer,c),b.userStyles.push(c)},IsDefault:function(a,b){"1"==this.getChildValue(a)&&(b.isDefault=!0)},FeatureTypeStyle:function(a,b){++this.featureTypeCounter;var c={rules:this.multipleSymbolizers?b.rules:[]};this.readChildNodes(a,c),this.multipleSymbolizers||(b.rules=c.rules)},Rule:function(a,b){var c;this.multipleSymbolizers&&(c={symbolizers:[]}),c=new OpenLayers.Rule(c),this.readChildNodes(a,c),b.rules.push(c)},ElseFilter:function(a,b){b.elseFilter=!0},MinScaleDenominator:function(a,b){b.minScaleDenominator=parseFloat(this.getChildValue(a))},MaxScaleDenominator:function(a,b){b.maxScaleDenominator=parseFloat(this.getChildValue(a))},TextSymbolizer:function(a,b){var c={};this.readChildNodes(a,c),this.multipleSymbolizers?(c.zIndex=this.featureTypeCounter,b.symbolizers.push(new OpenLayers.Symbolizer.Text(c))):b.symbolizer.Text=OpenLayers.Util.applyDefaults(c,b.symbolizer.Text)},LabelPlacement:function(a,b){this.readChildNodes(a,b)},PointPlacement:function(a,b){var c={};this.readChildNodes(a,c),c.labelRotation=c.rotation,delete c.rotation;var d,e=b.labelAnchorPointX,f=b.labelAnchorPointY;1/3>=e?d="l":e>1/3&&2/3>e?d="c":e>=2/3&&(d="r"),1/3>=f?d+="b":f>1/3&&2/3>f?d+="m":f>=2/3&&(d+="t"),c.labelAlign=d,OpenLayers.Util.applyDefaults(b,c)},AnchorPoint:function(a,b){this.readChildNodes(a,b)},AnchorPointX:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.labelAnchorPointX=c)},AnchorPointY:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.labelAnchorPointY=c)},Displacement:function(a,b){this.readChildNodes(a,b)},DisplacementX:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.labelXOffset=c)},DisplacementY:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.labelYOffset=c)},LinePlacement:function(a,b){this.readChildNodes(a,b)},PerpendicularOffset:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.labelPerpendicularOffset=c)},Label:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.label=c)},Font:function(a,b){this.readChildNodes(a,b)},Halo:function(a,b){var c={};this.readChildNodes(a,c),b.haloRadius=c.haloRadius,b.haloColor=c.fillColor,b.haloOpacity=c.fillOpacity},Radius:function(a,b){var c=this.readers.ogc._expression.call(this,a);null!=c&&(b.haloRadius=c)},RasterSymbolizer:function(a,b){var c={};this.readChildNodes(a,c),this.multipleSymbolizers?(c.zIndex=this.featureTypeCounter,b.symbolizers.push(new OpenLayers.Symbolizer.Raster(c))):b.symbolizer.Raster=OpenLayers.Util.applyDefaults(c,b.symbolizer.Raster)},Geometry:function(a,b){b.geometry={},this.readChildNodes(a,b.geometry)},ColorMap:function(a,b){b.colorMap=[],this.readChildNodes(a,b.colorMap)},ColorMapEntry:function(a,b){var c=a.getAttribute("quantity"),d=a.getAttribute("opacity");b.push({color:a.getAttribute("color"),quantity:null!==c?parseFloat(c):void 0,label:a.getAttribute("label")||void 0,opacity:null!==d?parseFloat(d):void 0})},LineSymbolizer:function(a,b){var c={};this.readChildNodes(a,c),this.multipleSymbolizers?(c.zIndex=this.featureTypeCounter,b.symbolizers.push(new OpenLayers.Symbolizer.Line(c))):b.symbolizer.Line=OpenLayers.Util.applyDefaults(c,b.symbolizer.Line)},PolygonSymbolizer:function(a,b){var c={fill:!1,stroke:!1};this.multipleSymbolizers||(c=b.symbolizer.Polygon||c),this.readChildNodes(a,c),this.multipleSymbolizers?(c.zIndex=this.featureTypeCounter,b.symbolizers.push(new OpenLayers.Symbolizer.Polygon(c))):b.symbolizer.Polygon=c},PointSymbolizer:function(a,b){var c={fill:!1,stroke:!1,graphic:!1};this.multipleSymbolizers||(c=b.symbolizer.Point||c),this.readChildNodes(a,c),this.multipleSymbolizers?(c.zIndex=this.featureTypeCounter,b.symbolizers.push(new OpenLayers.Symbolizer.Point(c))):b.symbolizer.Point=c},Stroke:function(a,b){b.stroke=!0,this.readChildNodes(a,b)},Fill:function(a,b){b.fill=!0,this.readChildNodes(a,b)},CssParameter:function(a,b){var c=a.getAttribute("name"),d=this.cssMap[c];b.label&&("fill"===c?d="fontColor":"fill-opacity"===c&&(d="fontOpacity")),d&&(c=this.readers.ogc._expression.call(this,a))&&(b[d]=c)},Graphic:function(a,b){b.graphic=!0;var c={};this.readChildNodes(a,c);for(var d,e,f="stroke strokeColor strokeWidth strokeOpacity strokeLinecap fill fillColor fillOpacity graphicName rotation graphicFormat".split(" "),g=0,h=f.length;h>g;++g)d=f[g],e=c[d],void 0!=e&&(b[d]=e);void 0!=c.opacity&&(b.graphicOpacity=c.opacity),void 0!=c.size&&(isNaN(c.size/2)?b.graphicWidth=c.size:b.pointRadius=c.size/2),void 0!=c.href&&(b.externalGraphic=c.href),void 0!=c.rotation&&(b.rotation=c.rotation)},ExternalGraphic:function(a,b){this.readChildNodes(a,b)},Mark:function(a,b){this.readChildNodes(a,b)},WellKnownName:function(a,b){b.graphicName=this.getChildValue(a)},Opacity:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.opacity=c)},Size:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.size=c)},Rotation:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.rotation=c)},OnlineResource:function(a,b){b.href=this.getAttributeNS(a,this.namespaces.xlink,"href")},Format:function(a,b){b.graphicFormat=this.getChildValue(a)}}},OpenLayers.Format.Filter.v1_0_0.prototype.readers),cssMap:{stroke:"strokeColor","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","stroke-linecap":"strokeLinecap","stroke-dasharray":"strokeDashstyle",fill:"fillColor","fill-opacity":"fillOpacity","font-family":"fontFamily","font-size":"fontSize","font-weight":"fontWeight","font-style":"fontStyle"},getCssProperty:function(a){var b,c=null;for(b in this.cssMap)if(this.cssMap[b]==a){c=b;break}return c},getGraphicFormat:function(a){var b,c;for(c in this.graphicFormats)if(this.graphicFormats[c].test(a)){b=c;break}return b||this.defaultGraphicFormat},defaultGraphicFormat:"image/png",graphicFormats:{"image/jpeg":/\.jpe?g$/i,"image/gif":/\.gif$/i,"image/png":/\.png$/i},write:function(a){return this.writers.sld.StyledLayerDescriptor.apply(this,[a])},writers:OpenLayers.Util.applyDefaults({sld:{_OGCExpression:function(a,b){var c=this.createElementNSPlus(a),d="string"==typeof b?b.split("${"):[b];c.appendChild(this.createTextNode(d[0]));for(var e,f,g=1,h=d.length;h>g;g++)e=d[g],f=e.indexOf("}"),f>0?(this.writeNode("ogc:PropertyName",{property:e.substring(0,f)},c),c.appendChild(this.createTextNode(e.substring(++f)))):c.appendChild(this.createTextNode("${"+e));return c},StyledLayerDescriptor:function(a){var b=this.createElementNSPlus("sld:StyledLayerDescriptor",{attributes:{version:this.VERSION,"xsi:schemaLocation":this.schemaLocation}});if(b.setAttribute("xmlns:ogc",this.namespaces.ogc),b.setAttribute("xmlns:gml",this.namespaces.gml),a.name&&this.writeNode("Name",a.name,b),a.title&&this.writeNode("Title",a.title,b),a.description&&this.writeNode("Abstract",a.description,b),OpenLayers.Util.isArray(a.namedLayers))for(var c=0,d=a.namedLayers.length;d>c;++c)this.writeNode("NamedLayer",a.namedLayers[c],b);else for(c in a.namedLayers)this.writeNode("NamedLayer",a.namedLayers[c],b);return b},Name:function(a){return this.createElementNSPlus("sld:Name",{value:a})},Title:function(a){return this.createElementNSPlus("sld:Title",{value:a})},Abstract:function(a){return this.createElementNSPlus("sld:Abstract",{value:a})},NamedLayer:function(a){var b=this.createElementNSPlus("sld:NamedLayer");if(this.writeNode("Name",a.name,b),a.namedStyles)for(var c=0,d=a.namedStyles.length;d>c;++c)this.writeNode("NamedStyle",a.namedStyles[c],b);if(a.userStyles)for(c=0,d=a.userStyles.length;d>c;++c)this.writeNode("UserStyle",a.userStyles[c],b);return b},NamedStyle:function(a){var b=this.createElementNSPlus("sld:NamedStyle");return this.writeNode("Name",a,b),b},UserStyle:function(a){var b=this.createElementNSPlus("sld:UserStyle");if(a.name&&this.writeNode("Name",a.name,b),a.title&&this.writeNode("Title",a.title,b),a.description&&this.writeNode("Abstract",a.description,b),a.isDefault&&this.writeNode("IsDefault",a.isDefault,b),this.multipleSymbolizers&&a.rules){for(var c,d,e,f,g,h={0:[]},i=[0],j=0,k=a.rules.length;k>j;++j)if(c=a.rules[j],c.symbolizers){d={};for(var l=0,m=c.symbolizers.length;m>l;++l)e=c.symbolizers[l],f=e.zIndex,f in d||(g=c.clone(),g.symbolizers=[],d[f]=g),d[f].symbolizers.push(e.clone());for(f in d)f in h||(i.push(f),h[f]=[]),h[f].push(d[f])}else h[0].push(c.clone());for(i.sort(),j=0,k=i.length;k>j;++j)c=h[i[j]],0<c.length&&(g=a.clone(),g.rules=h[i[j]],this.writeNode("FeatureTypeStyle",g,b))}else this.writeNode("FeatureTypeStyle",a,b);return b},IsDefault:function(a){return this.createElementNSPlus("sld:IsDefault",{value:a?"1":"0"})},FeatureTypeStyle:function(a){for(var b=this.createElementNSPlus("sld:FeatureTypeStyle"),c=0,d=a.rules.length;d>c;++c)this.writeNode("Rule",a.rules[c],b);return b},Rule:function(a){var b=this.createElementNSPlus("sld:Rule");a.name&&this.writeNode("Name",a.name,b),a.title&&this.writeNode("Title",a.title,b),a.description&&this.writeNode("Abstract",a.description,b),a.elseFilter?this.writeNode("ElseFilter",null,b):a.filter&&this.writeNode("ogc:Filter",a.filter,b),void 0!=a.minScaleDenominator&&this.writeNode("MinScaleDenominator",a.minScaleDenominator,b),void 0!=a.maxScaleDenominator&&this.writeNode("MaxScaleDenominator",a.maxScaleDenominator,b);var c,d;if(this.multipleSymbolizers&&a.symbolizers)for(var e=0,f=a.symbolizers.length;f>e;++e)d=a.symbolizers[e],c=d.CLASS_NAME.split(".").pop(),this.writeNode(c+"Symbolizer",d,b);else for(var f=OpenLayers.Style.SYMBOLIZER_PREFIXES,e=0,g=f.length;g>e;++e)c=f[e],(d=a.symbolizer[c])&&this.writeNode(c+"Symbolizer",d,b);return b},ElseFilter:function(){return this.createElementNSPlus("sld:ElseFilter")},MinScaleDenominator:function(a){return this.createElementNSPlus("sld:MinScaleDenominator",{value:a})},MaxScaleDenominator:function(a){return this.createElementNSPlus("sld:MaxScaleDenominator",{value:a})},LineSymbolizer:function(a){var b=this.createElementNSPlus("sld:LineSymbolizer");return this.writeNode("Stroke",a,b),b},Stroke:function(a){var b=this.createElementNSPlus("sld:Stroke");return void 0!=a.strokeColor&&this.writeNode("CssParameter",{symbolizer:a,key:"strokeColor"},b),void 0!=a.strokeOpacity&&this.writeNode("CssParameter",{symbolizer:a,key:"strokeOpacity"},b),void 0!=a.strokeWidth&&this.writeNode("CssParameter",{symbolizer:a,key:"strokeWidth"},b),void 0!=a.strokeDashstyle&&"solid"!==a.strokeDashstyle&&this.writeNode("CssParameter",{symbolizer:a,key:"strokeDashstyle"},b),void 0!=a.strokeLinecap&&this.writeNode("CssParameter",{symbolizer:a,key:"strokeLinecap"},b),b},CssParameter:function(a){return this.createElementNSPlus("sld:CssParameter",{attributes:{name:this.getCssProperty(a.key)},value:a.symbolizer[a.key]})},TextSymbolizer:function(a){var b=this.createElementNSPlus("sld:TextSymbolizer");return null!=a.label&&this.writeNode("Label",a.label,b),null==a.fontFamily&&null==a.fontSize&&null==a.fontWeight&&null==a.fontStyle||this.writeNode("Font",a,b),null==a.labelAnchorPointX&&null==a.labelAnchorPointY&&null==a.labelAlign&&null==a.labelXOffset&&null==a.labelYOffset&&null==a.labelRotation&&null==a.labelPerpendicularOffset||this.writeNode("LabelPlacement",a,b),null==a.haloRadius&&null==a.haloColor&&null==a.haloOpacity||this.writeNode("Halo",a,b),null==a.fontColor&&null==a.fontOpacity||this.writeNode("Fill",{fillColor:a.fontColor,fillOpacity:a.fontOpacity},b),b},LabelPlacement:function(a){var b=this.createElementNSPlus("sld:LabelPlacement");return null==a.labelAnchorPointX&&null==a.labelAnchorPointY&&null==a.labelAlign&&null==a.labelXOffset&&null==a.labelYOffset&&null==a.labelRotation||null!=a.labelPerpendicularOffset||this.writeNode("PointPlacement",a,b),
null!=a.labelPerpendicularOffset&&this.writeNode("LinePlacement",a,b),b},LinePlacement:function(a){var b=this.createElementNSPlus("sld:LinePlacement");return this.writeNode("PerpendicularOffset",a.labelPerpendicularOffset,b),b},PerpendicularOffset:function(a){return this.createElementNSPlus("sld:PerpendicularOffset",{value:a})},PointPlacement:function(a){var b=this.createElementNSPlus("sld:PointPlacement");return null==a.labelAnchorPointX&&null==a.labelAnchorPointY&&null==a.labelAlign||this.writeNode("AnchorPoint",a,b),null==a.labelXOffset&&null==a.labelYOffset||this.writeNode("Displacement",a,b),null!=a.labelRotation&&this.writeNode("Rotation",a.labelRotation,b),b},AnchorPoint:function(a){var b=this.createElementNSPlus("sld:AnchorPoint"),c=a.labelAnchorPointX,d=a.labelAnchorPointY;if(null!=c&&this.writeNode("AnchorPointX",c,b),null!=d&&this.writeNode("AnchorPointY",d,b),null==c&&null==d){var e=a.labelAlign.substr(0,1);a=a.labelAlign.substr(1,1),"l"===e?c=0:"c"===e?c=.5:"r"===e&&(c=1),"b"===a?d=0:"m"===a?d=.5:"t"===a&&(d=1),this.writeNode("AnchorPointX",c,b),this.writeNode("AnchorPointY",d,b)}return b},AnchorPointX:function(a){return this.createElementNSPlus("sld:AnchorPointX",{value:a})},AnchorPointY:function(a){return this.createElementNSPlus("sld:AnchorPointY",{value:a})},Displacement:function(a){var b=this.createElementNSPlus("sld:Displacement");return null!=a.labelXOffset&&this.writeNode("DisplacementX",a.labelXOffset,b),null!=a.labelYOffset&&this.writeNode("DisplacementY",a.labelYOffset,b),b},DisplacementX:function(a){return this.createElementNSPlus("sld:DisplacementX",{value:a})},DisplacementY:function(a){return this.createElementNSPlus("sld:DisplacementY",{value:a})},Font:function(a){var b=this.createElementNSPlus("sld:Font");return a.fontFamily&&this.writeNode("CssParameter",{symbolizer:a,key:"fontFamily"},b),a.fontSize&&this.writeNode("CssParameter",{symbolizer:a,key:"fontSize"},b),a.fontWeight&&this.writeNode("CssParameter",{symbolizer:a,key:"fontWeight"},b),a.fontStyle&&this.writeNode("CssParameter",{symbolizer:a,key:"fontStyle"},b),b},Label:function(a){return this.writers.sld._OGCExpression.call(this,"sld:Label",a)},Halo:function(a){var b=this.createElementNSPlus("sld:Halo");return a.haloRadius&&this.writeNode("Radius",a.haloRadius,b),(a.haloColor||a.haloOpacity)&&this.writeNode("Fill",{fillColor:a.haloColor,fillOpacity:a.haloOpacity},b),b},Radius:function(a){return this.createElementNSPlus("sld:Radius",{value:a})},RasterSymbolizer:function(a){var b=this.createElementNSPlus("sld:RasterSymbolizer");return a.geometry&&this.writeNode("Geometry",a.geometry,b),a.opacity&&this.writeNode("Opacity",a.opacity,b),a.colorMap&&this.writeNode("ColorMap",a.colorMap,b),b},Geometry:function(a){var b=this.createElementNSPlus("sld:Geometry");return a.property&&this.writeNode("ogc:PropertyName",a,b),b},ColorMap:function(a){for(var b=this.createElementNSPlus("sld:ColorMap"),c=0,d=a.length;d>c;++c)this.writeNode("ColorMapEntry",a[c],b);return b},ColorMapEntry:function(a){var b=this.createElementNSPlus("sld:ColorMapEntry");return b.setAttribute("color",a.color),void 0!==a.opacity&&b.setAttribute("opacity",parseFloat(a.opacity)),void 0!==a.quantity&&b.setAttribute("quantity",parseFloat(a.quantity)),void 0!==a.label&&b.setAttribute("label",a.label),b},PolygonSymbolizer:function(a){var b=this.createElementNSPlus("sld:PolygonSymbolizer");return!1!==a.fill&&this.writeNode("Fill",a,b),!1!==a.stroke&&this.writeNode("Stroke",a,b),b},Fill:function(a){var b=this.createElementNSPlus("sld:Fill");return a.fillColor&&this.writeNode("CssParameter",{symbolizer:a,key:"fillColor"},b),null!=a.fillOpacity&&this.writeNode("CssParameter",{symbolizer:a,key:"fillOpacity"},b),b},PointSymbolizer:function(a){var b=this.createElementNSPlus("sld:PointSymbolizer");return this.writeNode("Graphic",a,b),b},Graphic:function(a){var b=this.createElementNSPlus("sld:Graphic");return void 0!=a.externalGraphic?this.writeNode("ExternalGraphic",a,b):this.writeNode("Mark",a,b),void 0!=a.graphicOpacity&&this.writeNode("Opacity",a.graphicOpacity,b),void 0!=a.pointRadius?this.writeNode("Size",2*a.pointRadius,b):void 0!=a.graphicWidth&&this.writeNode("Size",a.graphicWidth,b),void 0!=a.rotation&&this.writeNode("Rotation",a.rotation,b),b},ExternalGraphic:function(a){var b=this.createElementNSPlus("sld:ExternalGraphic");return this.writeNode("OnlineResource",a.externalGraphic,b),a=a.graphicFormat||this.getGraphicFormat(a.externalGraphic),this.writeNode("Format",a,b),b},Mark:function(a){var b=this.createElementNSPlus("sld:Mark");return a.graphicName&&this.writeNode("WellKnownName",a.graphicName,b),!1!==a.fill&&this.writeNode("Fill",a,b),!1!==a.stroke&&this.writeNode("Stroke",a,b),b},WellKnownName:function(a){return this.createElementNSPlus("sld:WellKnownName",{value:a})},Opacity:function(a){return this.createElementNSPlus("sld:Opacity",{value:a})},Size:function(a){return this.writers.sld._OGCExpression.call(this,"sld:Size",a)},Rotation:function(a){return this.createElementNSPlus("sld:Rotation",{value:a})},OnlineResource:function(a){return this.createElementNSPlus("sld:OnlineResource",{attributes:{"xlink:type":"simple","xlink:href":a}})},Format:function(a){return this.createElementNSPlus("sld:Format",{value:a})}}},OpenLayers.Format.Filter.v1_0_0.prototype.writers),CLASS_NAME:"OpenLayers.Format.SLD.v1"}),OpenLayers.Layer.WMS=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"},isBaseLayer:!0,encodeBBOX:!1,noMagic:!1,yx:{},initialize:function(a,b,c,d){var e=[];c=OpenLayers.Util.upperCaseObject(c),1.3<=parseFloat(c.VERSION)&&!c.EXCEPTIONS&&(c.EXCEPTIONS="INIMAGE"),e.push(a,b,c,d),OpenLayers.Layer.Grid.prototype.initialize.apply(this,e),OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)),!this.noMagic&&this.params.TRANSPARENT&&"true"==this.params.TRANSPARENT.toString().toLowerCase()&&(null!=d&&d.isBaseLayer||(this.isBaseLayer=!1),"image/jpeg"==this.params.FORMAT&&(this.params.FORMAT=OpenLayers.Util.alphaHack()?"image/gif":"image/png"))},clone:function(a){return null==a&&(a=new OpenLayers.Layer.WMS(this.name,this.url,this.params,this.getOptions())),a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},reverseAxisOrder:function(){var a=this.projection.getCode();return 1.3<=parseFloat(this.params.VERSION)&&!!(this.yx[a]||OpenLayers.Projection.defaults[a]&&OpenLayers.Projection.defaults[a].yx)},getURL:function(a){a=this.adjustBounds(a);var b=this.getImageSize(),c={},d=this.reverseAxisOrder();return c.BBOX=this.encodeBBOX?a.toBBOX(null,d):a.toArray(d),c.WIDTH=b.w,c.HEIGHT=b.h,this.getFullRequestString(c)},mergeNewParams:function(a){return a=[OpenLayers.Util.upperCaseObject(a)],OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,a)},getFullRequestString:function(a,b){var c=this.map.getProjectionObject(),c=this.projection&&this.projection.equals(c)?this.projection.getCode():c.getCode(),c="none"==c?null:c;return 1.3<=parseFloat(this.params.VERSION)?this.params.CRS=c:this.params.SRS=c,"boolean"==typeof this.params.TRANSPARENT&&(a.TRANSPARENT=this.params.TRANSPARENT?"TRUE":"FALSE"),OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.WMS"}),OpenLayers.Layer.KaMap=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,DEFAULT_PARAMS:{i:"jpeg",map:""},initialize:function(a,b,c,d){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments),this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS)},getURL:function(a){a=this.adjustBounds(a);var b=this.map.getResolution(),c=Math.round(1e4*this.map.getScale())/1e4,d=Math.round(a.left/b);return a=-Math.round(a.top/b),this.getFullRequestString({t:a,l:d,s:c})},calculateGridLayout:function(a,b,c){return b=c*this.tileSize.w,c*=this.tileSize.h,{tilelon:b,tilelat:c,startcol:Math.floor(a.left/b)-this.buffer,startrow:Math.floor(a.top/c)+this.buffer}},getTileBoundsForGridIndex:function(a,b){this.getTileOrigin();var c=this.gridLayout,d=c.tilelon,e=c.tilelat,f=(c.startcol+b)*d,c=(c.startrow-a)*e;return new OpenLayers.Bounds(f,c,f+d,c+e)},clone:function(a){return null==a&&(a=new OpenLayers.Layer.KaMap(this.name,this.url,this.params,this.getOptions())),a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a]),null!=this.tileSize&&(a.tileSize=this.tileSize.clone()),a.grid=[],a},getTileBounds:function(a){var b=this.getResolution(),c=b*this.tileSize.w,b=b*this.tileSize.h,d=this.getLonLatFromViewPortPx(a);return a=c*Math.floor(d.lon/c),d=b*Math.floor(d.lat/b),new OpenLayers.Bounds(a,d,a+c,d+b)},CLASS_NAME:"OpenLayers.Layer.KaMap"}),OpenLayers.Format.WMC.v1_1_0=OpenLayers.Class(OpenLayers.Format.WMC.v1,{VERSION:"1.1.0",schemaLocation:"http://www.opengis.net/context http://schemas.opengis.net/context/1.1.0/context.xsd",initialize:function(a){OpenLayers.Format.WMC.v1.prototype.initialize.apply(this,[a])},read_sld_MinScaleDenominator:function(a,b){var c=parseFloat(this.getChildValue(b));c>0&&(a.maxScale=c)},read_sld_MaxScaleDenominator:function(a,b){a.minScale=parseFloat(this.getChildValue(b))},read_wmc_SRS:function(a,b){"srs"in a||(a.srs={}),a.srs[this.getChildValue(b)]=!0},write_wmc_Layer:function(a){var b=OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this,[a]);if(a.maxScale){var c=this.createElementNS(this.namespaces.sld,"sld:MinScaleDenominator");c.appendChild(this.createTextNode(a.maxScale.toPrecision(16))),b.appendChild(c)}if(a.minScale&&(c=this.createElementNS(this.namespaces.sld,"sld:MaxScaleDenominator"),c.appendChild(this.createTextNode(a.minScale.toPrecision(16))),b.appendChild(c)),a.srs)for(var d in a.srs)b.appendChild(this.createElementDefaultNS("SRS",d));return b.appendChild(this.write_wmc_FormatList(a)),b.appendChild(this.write_wmc_StyleList(a)),a.dimensions&&b.appendChild(this.write_wmc_DimensionList(a)),b.appendChild(this.write_wmc_LayerExtension(a)),b},CLASS_NAME:"OpenLayers.Format.WMC.v1_1_0"}),OpenLayers.Format.XLS=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.0",stringifyOutput:!0,CLASS_NAME:"OpenLayers.Format.XLS"}),OpenLayers.Format.XLS.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xls:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},xy:!0,defaultPrefix:"xls",schemaLocation:null,read:function(a,b){OpenLayers.Util.applyDefaults(b,this.options);var c={};return this.readChildNodes(a,c),c},readers:{xls:{XLS:function(a,b){b.version=a.getAttribute("version"),this.readChildNodes(a,b)},Response:function(a,b){this.readChildNodes(a,b)},GeocodeResponse:function(a,b){b.responseLists=[],this.readChildNodes(a,b)},GeocodeResponseList:function(a,b){var c={features:[],numberOfGeocodedAddresses:parseInt(a.getAttribute("numberOfGeocodedAddresses"))};b.responseLists.push(c),this.readChildNodes(a,c)},GeocodedAddress:function(a,b){var c=new OpenLayers.Feature.Vector;b.features.push(c),this.readChildNodes(a,c),c.geometry=c.components[0]},GeocodeMatchCode:function(a,b){b.attributes.matchCode={accuracy:parseFloat(a.getAttribute("accuracy")),matchType:a.getAttribute("matchType")}},Address:function(a,b){var c={countryCode:a.getAttribute("countryCode"),addressee:a.getAttribute("addressee"),street:[],place:[]};b.attributes.address=c,this.readChildNodes(a,c)},freeFormAddress:function(a,b){b.freeFormAddress=this.getChildValue(a)},StreetAddress:function(a,b){this.readChildNodes(a,b)},Building:function(a,b){b.building={number:a.getAttribute("number"),subdivision:a.getAttribute("subdivision"),buildingName:a.getAttribute("buildingName")}},Street:function(a,b){b.street.push(this.getChildValue(a))},Place:function(a,b){b.place[a.getAttribute("type")]=this.getChildValue(a)},PostalCode:function(a,b){b.postalCode=this.getChildValue(a)}},gml:OpenLayers.Format.GML.v3.prototype.readers.gml},write:function(a){return this.writers.xls.XLS.apply(this,[a])},writers:{xls:{XLS:function(a){var b=this.createElementNSPlus("xls:XLS",{attributes:{version:this.VERSION,"xsi:schemaLocation":this.schemaLocation}});return this.writeNode("RequestHeader",a.header,b),this.writeNode("Request",a,b),b},RequestHeader:function(a){return this.createElementNSPlus("xls:RequestHeader")},Request:function(a){var b=this.createElementNSPlus("xls:Request",{attributes:{methodName:"GeocodeRequest",requestID:a.requestID||"",version:this.VERSION}});return this.writeNode("GeocodeRequest",a.addresses,b),b},GeocodeRequest:function(a){for(var b=this.createElementNSPlus("xls:GeocodeRequest"),c=0,d=a.length;d>c;c++)this.writeNode("Address",a[c],b);return b},Address:function(a){var b=this.createElementNSPlus("xls:Address",{attributes:{countryCode:a.countryCode}});return a.freeFormAddress?this.writeNode("freeFormAddress",a.freeFormAddress,b):(a.street&&this.writeNode("StreetAddress",a,b),a.municipality&&this.writeNode("Municipality",a.municipality,b),a.countrySubdivision&&this.writeNode("CountrySubdivision",a.countrySubdivision,b),a.postalCode&&this.writeNode("PostalCode",a.postalCode,b)),b},freeFormAddress:function(a){return this.createElementNSPlus("freeFormAddress",{value:a})},StreetAddress:function(a){var b=this.createElementNSPlus("xls:StreetAddress");a.building&&this.writeNode(b,"Building",a.building),a=a.street,OpenLayers.Util.isArray(a)||(a=[a]);for(var c=0,d=a.length;d>c;c++)this.writeNode("Street",a[c],b);return b},Building:function(a){return this.createElementNSPlus("xls:Building",{attributes:{number:a.number,subdivision:a.subdivision,buildingName:a.buildingName}})},Street:function(a){return this.createElementNSPlus("xls:Street",{value:a})},Municipality:function(a){return this.createElementNSPlus("xls:Place",{attributes:{type:"Municipality"},value:a})},CountrySubdivision:function(a){return this.createElementNSPlus("xls:Place",{attributes:{type:"CountrySubdivision"},value:a})},PostalCode:function(a){return this.createElementNSPlus("xls:PostalCode",{value:a})}}},CLASS_NAME:"OpenLayers.Format.XLS.v1"}),OpenLayers.Format.XLS.v1_1_0=OpenLayers.Class(OpenLayers.Format.XLS.v1,{VERSION:"1.1",schemaLocation:"http://www.opengis.net/xls http://schemas.opengis.net/ols/1.1.0/LocationUtilityService.xsd",CLASS_NAME:"OpenLayers.Format.XLS.v1_1_0"}),OpenLayers.Format.XLS.v1_1=OpenLayers.Format.XLS.v1_1_0,OpenLayers.Renderer.SVG=OpenLayers.Class(OpenLayers.Renderer.Elements,{xmlns:"http://www.w3.org/2000/svg",xlinkns:"http://www.w3.org/1999/xlink",MAX_PIXEL:15e3,translationParameters:null,symbolMetrics:null,initialize:function(a){this.supported()&&(OpenLayers.Renderer.Elements.prototype.initialize.apply(this,arguments),this.translationParameters={x:0,y:0},this.symbolMetrics={})},supported:function(){return document.implementation&&(document.implementation.hasFeature("org.w3c.svg","1.0")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#SVG","1.1")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))},inValidRange:function(a,b,c){return a+=c?0:this.translationParameters.x,b+=c?0:this.translationParameters.y,a>=-this.MAX_PIXEL&&a<=this.MAX_PIXEL&&b>=-this.MAX_PIXEL&&b<=this.MAX_PIXEL},setExtent:function(a,b){var c=OpenLayers.Renderer.Elements.prototype.setExtent.apply(this,arguments),d=this.getResolution(),e=-a.left/d,d=a.top/d;return b?(this.left=e,this.top=d,this.rendererRoot.setAttributeNS(null,"viewBox","0 0 "+this.size.w+" "+this.size.h),this.translate(this.xOffset,0),!0):((e=this.translate(e-this.left+this.xOffset,d-this.top))||this.setExtent(a,!0),c&&e)},translate:function(a,b){if(this.inValidRange(a,b,!0)){var c="";return(a||b)&&(c="translate("+a+","+b+")"),this.root.setAttributeNS(null,"transform",c),this.translationParameters={x:a,y:b},!0}return!1},setSize:function(a){OpenLayers.Renderer.prototype.setSize.apply(this,arguments),this.rendererRoot.setAttributeNS(null,"width",this.size.w),this.rendererRoot.setAttributeNS(null,"height",this.size.h)},getNodeType:function(a,b){var c=null;switch(a.CLASS_NAME){case"OpenLayers.Geometry.Point":c=b.externalGraphic?"image":this.isComplexSymbol(b.graphicName)?"svg":"circle";break;case"OpenLayers.Geometry.Rectangle":c="rect";break;case"OpenLayers.Geometry.LineString":c="polyline";break;case"OpenLayers.Geometry.LinearRing":c="polygon";break;case"OpenLayers.Geometry.Polygon":case"OpenLayers.Geometry.Curve":c="path"}return c},setStyle:function(a,b,c){b=b||a._style,c=c||a._options;var d=b.title||b.graphicTitle;if(d){a.setAttributeNS(null,"title",d);var e=a.getElementsByTagName("title");0<e.length?e[0].firstChild.textContent=d:(e=this.nodeFactory(null,"title"),e.textContent=d,a.appendChild(e))}var f,e=parseFloat(a.getAttributeNS(null,"r")),d=1;if("OpenLayers.Geometry.Point"==a._geometryClass&&e){if(a.style.visibility="",!1===b.graphic)a.style.visibility="hidden";else if(b.externalGraphic){f=this.getPosition(a),b.graphicWidth&&b.graphicHeight&&a.setAttributeNS(null,"preserveAspectRatio","none");var e=b.graphicWidth||b.graphicHeight,g=b.graphicHeight||b.graphicWidth,e=e?e:2*b.pointRadius,g=g?g:2*b.pointRadius,h=void 0!=b.graphicYOffset?b.graphicYOffset:-(.5*g),i=b.graphicOpacity||b.fillOpacity;a.setAttributeNS(null,"x",(f.x+(void 0!=b.graphicXOffset?b.graphicXOffset:-(.5*e))).toFixed()),a.setAttributeNS(null,"y",(f.y+h).toFixed()),a.setAttributeNS(null,"width",e),a.setAttributeNS(null,"height",g),a.setAttributeNS(this.xlinkns,"xlink:href",b.externalGraphic),a.setAttributeNS(null,"style","opacity: "+i),a.onclick=OpenLayers.Event.preventDefault}else if(this.isComplexSymbol(b.graphicName)){var e=3*b.pointRadius,g=2*e,j=this.importSymbol(b.graphicName);f=this.getPosition(a),d=3*this.symbolMetrics[j.id][0]/g,h=a.parentNode,i=a.nextSibling,h&&h.removeChild(a),a.firstChild&&a.removeChild(a.firstChild),a.appendChild(j.firstChild.cloneNode(!0)),a.setAttributeNS(null,"viewBox",j.getAttributeNS(null,"viewBox")),a.setAttributeNS(null,"width",g),a.setAttributeNS(null,"height",g),a.setAttributeNS(null,"x",f.x-e),a.setAttributeNS(null,"y",f.y-e),i?h.insertBefore(a,i):h&&h.appendChild(a)}else a.setAttributeNS(null,"r",b.pointRadius);e=b.rotation,void 0===e&&void 0===a._rotation||!f||(a._rotation=e,e|=0,"svg"!==a.nodeName?a.setAttributeNS(null,"transform","rotate("+e+" "+f.x+" "+f.y+")"):(f=this.symbolMetrics[j.id],a.firstChild.setAttributeNS(null,"transform","rotate("+e+" "+f[1]+" "+f[2]+")")))}return c.isFilled?(a.setAttributeNS(null,"fill",b.fillColor),a.setAttributeNS(null,"fill-opacity",b.fillOpacity)):a.setAttributeNS(null,"fill","none"),c.isStroked?(a.setAttributeNS(null,"stroke",b.strokeColor),a.setAttributeNS(null,"stroke-opacity",b.strokeOpacity),a.setAttributeNS(null,"stroke-width",b.strokeWidth*d),a.setAttributeNS(null,"stroke-linecap",b.strokeLinecap||"round"),a.setAttributeNS(null,"stroke-linejoin","round"),b.strokeDashstyle&&a.setAttributeNS(null,"stroke-dasharray",this.dashStyle(b,d))):a.setAttributeNS(null,"stroke","none"),b.pointerEvents&&a.setAttributeNS(null,"pointer-events",b.pointerEvents),null!=b.cursor&&a.setAttributeNS(null,"cursor",b.cursor),a},dashStyle:function(a,b){var c=a.strokeWidth*b,d=a.strokeDashstyle;switch(d){case"solid":return"none";case"dot":return[1,4*c].join();case"dash":return[4*c,4*c].join();case"dashdot":return[4*c,4*c,1,4*c].join();case"longdash":return[8*c,4*c].join();case"longdashdot":return[8*c,4*c,1,4*c].join();default:return OpenLayers.String.trim(d).replace(/\s+/g,",")}},createNode:function(a,b){var c=document.createElementNS(this.xmlns,a);return b&&c.setAttributeNS(null,"id",b),c},nodeTypeCompare:function(a,b){return b==a.nodeName},createRenderRoot:function(){var a=this.nodeFactory(this.container.id+"_svgRoot","svg");return a.style.display="block",a},createRoot:function(a){return this.nodeFactory(this.container.id+a,"g")},createDefs:function(){var a=this.nodeFactory(this.container.id+"_defs","defs");return this.rendererRoot.appendChild(a),a},drawPoint:function(a,b){return this.drawCircle(a,b,1)},drawCircle:function(a,b,c){var d=this.getResolution(),e=(b.x-this.featureDx)/d+this.left;return b=this.top-b.y/d,this.inValidRange(e,b)?(a.setAttributeNS(null,"cx",e),a.setAttributeNS(null,"cy",b),a.setAttributeNS(null,"r",c),a):!1},drawLineString:function(a,b){var c=this.getComponentsString(b.components);return c.path?(a.setAttributeNS(null,"points",c.path),c.complete?a:null):!1},drawLinearRing:function(a,b){var c=this.getComponentsString(b.components);return c.path?(a.setAttributeNS(null,"points",c.path),c.complete?a:null):!1},drawPolygon:function(a,b){for(var c,d,e="",f=!0,g=!0,h=0,i=b.components.length;i>h;h++)e+=" M",c=this.getComponentsString(b.components[h].components," "),(d=c.path)?(e+=" "+d,g=c.complete&&g):f=!1;return f?(a.setAttributeNS(null,"d",e+" z"),a.setAttributeNS(null,"fill-rule","evenodd"),g?a:null):!1},drawRectangle:function(a,b){var c=this.getResolution(),d=(b.x-this.featureDx)/c+this.left,e=this.top-b.y/c;return this.inValidRange(d,e)?(a.setAttributeNS(null,"x",d),a.setAttributeNS(null,"y",e),a.setAttributeNS(null,"width",b.width/c),a.setAttributeNS(null,"height",b.height/c),a):!1},drawText:function(a,b,c){var d=!!b.labelOutlineWidth;if(d){var e=OpenLayers.Util.extend({},b);e.fontColor=e.labelOutlineColor,e.fontStrokeColor=e.labelOutlineColor,e.fontStrokeWidth=b.labelOutlineWidth,b.labelOutlineOpacity&&(e.fontOpacity=b.labelOutlineOpacity),delete e.labelOutlineWidth,this.drawText(a,e,c)}var f=this.getResolution(),e=(c.x-this.featureDx)/f+this.left,g=c.y/f-this.top,d=d?this.LABEL_OUTLINE_SUFFIX:this.LABEL_ID_SUFFIX,f=this.nodeFactory(a+d,"text");f.setAttributeNS(null,"x",e),f.setAttributeNS(null,"y",-g),b.fontColor&&f.setAttributeNS(null,"fill",b.fontColor),b.fontStrokeColor&&f.setAttributeNS(null,"stroke",b.fontStrokeColor),b.fontStrokeWidth&&f.setAttributeNS(null,"stroke-width",b.fontStrokeWidth),b.fontOpacity&&f.setAttributeNS(null,"opacity",b.fontOpacity),b.fontFamily&&f.setAttributeNS(null,"font-family",b.fontFamily),b.fontSize&&f.setAttributeNS(null,"font-size",b.fontSize),b.fontWeight&&f.setAttributeNS(null,"font-weight",b.fontWeight),b.fontStyle&&f.setAttributeNS(null,"font-style",b.fontStyle),!0===b.labelSelect?(f.setAttributeNS(null,"pointer-events","visible"),f._featureId=a):f.setAttributeNS(null,"pointer-events","none"),g=b.labelAlign||OpenLayers.Renderer.defaultSymbolizer.labelAlign,f.setAttributeNS(null,"text-anchor",OpenLayers.Renderer.SVG.LABEL_ALIGN[g[0]]||"middle"),!0===OpenLayers.IS_GECKO&&f.setAttributeNS(null,"dominant-baseline",OpenLayers.Renderer.SVG.LABEL_ALIGN[g[1]]||"central");for(var h=b.label.split("\n"),i=h.length;f.childNodes.length>i;)f.removeChild(f.lastChild);for(var j=0;i>j;j++){var k=this.nodeFactory(a+d+"_tspan_"+j,"tspan");if(!0===b.labelSelect&&(k._featureId=a,k._geometry=c,k._geometryClass=c.CLASS_NAME),!1===OpenLayers.IS_GECKO&&k.setAttributeNS(null,"baseline-shift",OpenLayers.Renderer.SVG.LABEL_VSHIFT[g[1]]||"-35%"),k.setAttribute("x",e),0==j){var l=OpenLayers.Renderer.SVG.LABEL_VFACTOR[g[1]];null==l&&(l=-.5),k.setAttribute("dy",l*(i-1)+"em")}else k.setAttribute("dy","1em");k.textContent=""===h[j]?" ":h[j],k.parentNode||f.appendChild(k)}f.parentNode||this.textRoot.appendChild(f)},getComponentsString:function(a,b){for(var c,d=[],e=!0,f=a.length,g=[],h=0;f>h;h++)c=a[h],d.push(c),(c=this.getShortString(c))?g.push(c):(h>0&&this.getShortString(a[h-1])&&g.push(this.clipLine(a[h],a[h-1])),f-1>h&&this.getShortString(a[h+1])&&g.push(this.clipLine(a[h],a[h+1])),e=!1);return{path:g.join(b||","),complete:e}},clipLine:function(a,b){if(b.equals(a))return"";var c,d=this.getResolution(),e=this.MAX_PIXEL-this.translationParameters.x,f=this.MAX_PIXEL-this.translationParameters.y,g=(b.x-this.featureDx)/d+this.left,h=this.top-b.y/d,i=(a.x-this.featureDx)/d+this.left,d=this.top-a.y/d;return(-e>i||i>e)&&(c=(d-h)/(i-g),i=0>i?-e:e,d=h+(i-g)*c),(-f>d||d>f)&&(c=(i-g)/(d-h),d=0>d?-f:f,i=g+(d-h)*c),i+","+d},getShortString:function(a){var b=this.getResolution(),c=(a.x-this.featureDx)/b+this.left;return a=this.top-a.y/b,this.inValidRange(c,a)?c+","+a:!1},getPosition:function(a){return{x:parseFloat(a.getAttributeNS(null,"cx")),y:parseFloat(a.getAttributeNS(null,"cy"))}},importSymbol:function(a){this.defs||(this.defs=this.createDefs());var b=this.container.id+"-"+a,c=document.getElementById(b);if(null!=c)return c;var d=OpenLayers.Renderer.symbol[a];if(!d)throw Error(a+" is not a valid symbol name");a=this.nodeFactory(b,"symbol");var e=this.nodeFactory(null,"polygon");a.appendChild(e);for(var f,g,c=new OpenLayers.Bounds(Number.MAX_VALUE,Number.MAX_VALUE,0,0),h=[],i=0;i<d.length;i+=2)f=d[i],g=d[i+1],c.left=Math.min(c.left,f),c.bottom=Math.min(c.bottom,g),c.right=Math.max(c.right,f),c.top=Math.max(c.top,g),h.push(f,",",g);return e.setAttributeNS(null,"points",h.join(" ")),d=c.getWidth(),e=c.getHeight(),a.setAttributeNS(null,"viewBox",[c.left-d,c.bottom-e,3*d,3*e].join(" ")),this.symbolMetrics[b]=[Math.max(d,e),c.getCenterLonLat().lon,c.getCenterLonLat().lat],this.defs.appendChild(a),a},getFeatureIdFromEvent:function(a){var b=OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this,arguments);return b||(b=a.target,b=b.parentNode&&b!=this.rendererRoot?b.parentNode._featureId:void 0),b},CLASS_NAME:"OpenLayers.Renderer.SVG"}),OpenLayers.Renderer.SVG.LABEL_ALIGN={l:"start",r:"end",b:"bottom",t:"hanging"},OpenLayers.Renderer.SVG.LABEL_VSHIFT={t:"-70%",b:"0"},OpenLayers.Renderer.SVG.LABEL_VFACTOR={t:0,b:-1},OpenLayers.Renderer.SVG.preventDefault=function(a){OpenLayers.Event.preventDefault(a)},OpenLayers.Format.SLD.v1_0_0=OpenLayers.Class(OpenLayers.Format.SLD.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/sld http://schemas.opengis.net/sld/1.0.0/StyledLayerDescriptor.xsd",CLASS_NAME:"OpenLayers.Format.SLD.v1_0_0"}),OpenLayers.Format.OWSContext=OpenLayers.Class(OpenLayers.Format.Context,{defaultVersion:"0.3.1",getVersion:function(a,b){var c=OpenLayers.Format.XML.VersionedOGC.prototype.getVersion.apply(this,arguments);return"0.3.0"===c&&(c=this.defaultVersion),c},toContext:function(a){var b={};return"OpenLayers.Map"==a.CLASS_NAME&&(b.bounds=a.getExtent(),b.maxExtent=a.maxExtent,b.projection=a.projection,b.size=a.getSize(),b.layers=a.layers),b},CLASS_NAME:"OpenLayers.Format.OWSContext"}),OpenLayers.Format.OWSContext.v0_3_1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{owc:"http://www.opengis.net/ows-context",gml:"http://www.opengis.net/gml",kml:"http://www.opengis.net/kml/2.2",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},VERSION:"0.3.1",schemaLocation:"http://www.opengis.net/ows-context http://www.ogcnetwork.net/schemas/owc/0.3.1/owsContext.xsd",defaultPrefix:"owc",extractAttributes:!0,xy:!0,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},featureNS:"http://mapserver.gis.umn.edu/mapserver",featureType:"vector",geometryName:"geometry",nestingLayerLookup:null,initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]),OpenLayers.Format.GML.v2.prototype.setGeometryTypes.call(this)},setNestingPath:function(a){if(a.layersContext)for(var b=0,c=a.layersContext.length;c>b;b++){var d=a.layersContext[b],e=[],f=a.title||"";a.metadata&&a.metadata.nestingPath&&(e=a.metadata.nestingPath.slice()),""!=f&&e.push(f),d.metadata.nestingPath=e,d.layersContext&&this.setNestingPath(d)}},decomposeNestingPath:function(a){var b=[];if(OpenLayers.Util.isArray(a)){for(a=a.slice();0<a.length;)b.push(a.slice()),a.pop();b.reverse()}return b},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b={};return this.readNode(a,b),this.setNestingPath({layersContext:b.layersContext}),a=[],this.processLayer(a,b),delete b.layersContext,b.layersContext=a,b},processLayer:function(a,b){if(b.layersContext)for(var c=0,d=b.layersContext.length;d>c;c++){var e=b.layersContext[c];a.push(e),e.layersContext&&this.processLayer(a,e)}},write:function(a,b){this.nestingLayerLookup={},b=b||{},OpenLayers.Util.applyDefaults(b,a);var c=this.writeNode("OWSContext",b);return this.nestingLayerLookup=null,this.setAttributeNS(c,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[c])},readers:{kml:{Document:function(a,b){b.features=new OpenLayers.Format.KML({kmlns:this.namespaces.kml,extractStyles:!0}).read(a)}},owc:{OWSContext:function(a,b){this.readChildNodes(a,b)},General:function(a,b){this.readChildNodes(a,b)},ResourceList:function(a,b){this.readChildNodes(a,b)},Layer:function(a,b){var c={metadata:{},visibility:"1"!=a.getAttribute("hidden"),queryable:"1"==a.getAttribute("queryable"),opacity:null!=a.getAttribute("opacity")?parseFloat(a.getAttribute("opacity")):null,name:a.getAttribute("name"),categoryLayer:null==a.getAttribute("name"),formats:[],styles:[]};b.layersContext||(b.layersContext=[]),b.layersContext.push(c),this.readChildNodes(a,c)},InlineGeometry:function(a,b){b.features=[];var c,d=this.getElementsByTagNameNS(a,this.namespaces.gml,"featureMember");1<=d.length&&(c=d[0]),c&&c.firstChild&&(d=c.firstChild.nextSibling?c.firstChild.nextSibling:c.firstChild,this.setNamespace("feature",d.namespaceURI),this.featureType=d.localName||d.nodeName.split(":").pop(),this.readChildNodes(a,b))},Server:function(a,b){(!b.service&&!b.version||b.service!=OpenLayers.Format.Context.serviceTypes.WMS)&&(b.service=a.getAttribute("service"),b.version=a.getAttribute("version"),this.readChildNodes(a,b))},Name:function(a,b){b.name=this.getChildValue(a),this.readChildNodes(a,b)},Title:function(a,b){b.title=this.getChildValue(a),this.readChildNodes(a,b)},StyleList:function(a,b){this.readChildNodes(a,b.styles)},Style:function(a,b){var c={};b.push(c),this.readChildNodes(a,c)},LegendURL:function(a,b){var c={};b.legend=c,this.readChildNodes(a,c)},OnlineResource:function(a,b){b.url=this.getAttributeNS(a,this.namespaces.xlink,"href"),this.readChildNodes(a,b)}},ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,gml:OpenLayers.Format.GML.v2.prototype.readers.gml,sld:OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld,feature:OpenLayers.Format.GML.v2.prototype.readers.feature},writers:{owc:{OWSContext:function(a){var b=this.createElementNSPlus("OWSContext",{attributes:{version:this.VERSION,id:a.id||OpenLayers.Util.createUniqueID("OpenLayers_OWSContext_")}});return this.writeNode("General",a,b),this.writeNode("ResourceList",a,b),b},General:function(a){var b=this.createElementNSPlus("General");return this.writeNode("ows:BoundingBox",a,b),this.writeNode("ows:Title",a.title||"OpenLayers OWSContext",b),b},ResourceList:function(a){for(var b=this.createElementNSPlus("ResourceList"),c=0,d=a.layers.length;d>c;c++){var e=a.layers[c],f=this.decomposeNestingPath(e.metadata.nestingPath);this.writeNode("_Layer",{layer:e,subPaths:f},b)}return b},Server:function(a){var b=this.createElementNSPlus("Server",{attributes:{version:a.version,service:a.service}});return this.writeNode("OnlineResource",a,b),b},OnlineResource:function(a){return this.createElementNSPlus("OnlineResource",{attributes:{"xlink:href":a.url}})},InlineGeometry:function(a){var b=this.createElementNSPlus("InlineGeometry"),c=a.getDataExtent();null!==c&&this.writeNode("gml:boundedBy",c,b);for(var c=0,d=a.features.length;d>c;c++)this.writeNode("gml:featureMember",a.features[c],b);return b},StyleList:function(a){for(var b=this.createElementNSPlus("StyleList"),c=0,d=a.length;d>c;c++)this.writeNode("Style",a[c],b);return b},Style:function(a){var b=this.createElementNSPlus("Style");return this.writeNode("Name",a,b),this.writeNode("Title",a,b),a.legend&&this.writeNode("LegendURL",a,b),b},Name:function(a){return this.createElementNSPlus("Name",{value:a.name})},Title:function(a){return this.createElementNSPlus("Title",{value:a.title})},LegendURL:function(a){var b=this.createElementNSPlus("LegendURL");return this.writeNode("OnlineResource",a.legend,b),
b},_WMS:function(a){var b=this.createElementNSPlus("Layer",{attributes:{name:a.params.LAYERS,queryable:a.queryable?"1":"0",hidden:a.visibility?"0":"1",opacity:a.hasOwnProperty("opacity")?a.opacity:null}});return this.writeNode("ows:Title",a.name,b),this.writeNode("ows:OutputFormat",a.params.FORMAT,b),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.WMS,version:a.params.VERSION,url:a.url},b),a.metadata.styles&&0<a.metadata.styles.length&&this.writeNode("StyleList",a.metadata.styles,b),b},_Layer:function(a){var b,c,d;return b=a.layer,c=a.subPaths,d=null,0<c.length?(b=c[0].join("/"),c=b.lastIndexOf("/"),d=this.nestingLayerLookup[b],c=c>0?b.substring(c+1,b.length):b,d||(d=this.createElementNSPlus("Layer"),this.writeNode("ows:Title",c,d),this.nestingLayerLookup[b]=d),a.subPaths.shift(),this.writeNode("_Layer",a,d)):(b instanceof OpenLayers.Layer.WMS?d=this.writeNode("_WMS",b):b instanceof OpenLayers.Layer.Vector&&(b.protocol instanceof OpenLayers.Protocol.WFS.v1?d=this.writeNode("_WFS",b):b.protocol instanceof OpenLayers.Protocol.HTTP?b.protocol.format instanceof OpenLayers.Format.GML?(b.protocol.format.version="2.1.2",d=this.writeNode("_GML",b)):b.protocol.format instanceof OpenLayers.Format.KML&&(b.protocol.format.version="2.2",d=this.writeNode("_KML",b)):(this.setNamespace("feature",this.featureNS),d=this.writeNode("_InlineGeometry",b))),b.options.maxScale&&this.writeNode("sld:MinScaleDenominator",b.options.maxScale,d),b.options.minScale&&this.writeNode("sld:MaxScaleDenominator",b.options.minScale,d),this.nestingLayerLookup[b.name]=d),d},_WFS:function(a){var b=this.createElementNSPlus("Layer",{attributes:{name:a.protocol.featurePrefix+":"+a.protocol.featureType,hidden:a.visibility?"0":"1"}});return this.writeNode("ows:Title",a.name,b),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.WFS,version:a.protocol.version,url:a.protocol.url},b),b},_InlineGeometry:function(a){var b=this.createElementNSPlus("Layer",{attributes:{name:this.featureType,hidden:a.visibility?"0":"1"}});return this.writeNode("ows:Title",a.name,b),this.writeNode("InlineGeometry",a,b),b},_GML:function(a){var b=this.createElementNSPlus("Layer");return this.writeNode("ows:Title",a.name,b),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.GML,url:a.protocol.url,version:a.protocol.format.version},b),b},_KML:function(a){var b=this.createElementNSPlus("Layer");return this.writeNode("ows:Title",a.name,b),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.KML,version:a.protocol.format.version,url:a.protocol.url},b),b}},gml:OpenLayers.Util.applyDefaults({boundedBy:function(a){var b=this.createElementNSPlus("gml:boundedBy");return this.writeNode("gml:Box",a,b),b}},OpenLayers.Format.GML.v2.prototype.writers.gml),ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.writers.ows,sld:OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld,feature:OpenLayers.Format.GML.v2.prototype.writers.feature},CLASS_NAME:"OpenLayers.Format.OWSContext.v0_3_1"}),OpenLayers.Popup=OpenLayers.Class({events:null,id:"",lonlat:null,div:null,contentSize:null,size:null,contentHTML:null,backgroundColor:"",opacity:"",border:"",contentDiv:null,groupDiv:null,closeDiv:null,autoSize:!1,minSize:null,maxSize:null,displayClass:"olPopup",contentDisplayClass:"olPopupContent",padding:0,disableFirefoxOverflowHack:!1,fixPadding:function(){"number"==typeof this.padding&&(this.padding=new OpenLayers.Bounds(this.padding,this.padding,this.padding,this.padding))},panMapIfOutOfView:!1,keepInMap:!1,closeOnMove:!1,map:null,initialize:function(a,b,c,d,e,f){null==a&&(a=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")),this.id=a,this.lonlat=b,this.contentSize=null!=c?c:new OpenLayers.Size(OpenLayers.Popup.WIDTH,OpenLayers.Popup.HEIGHT),null!=d&&(this.contentHTML=d),this.backgroundColor=OpenLayers.Popup.COLOR,this.opacity=OpenLayers.Popup.OPACITY,this.border=OpenLayers.Popup.BORDER,this.div=OpenLayers.Util.createDiv(this.id,null,null,null,null,null,"hidden"),this.div.className=this.displayClass,this.groupDiv=OpenLayers.Util.createDiv(this.id+"_GroupDiv",null,null,null,"relative",null,"hidden"),a=this.div.id+"_contentDiv",this.contentDiv=OpenLayers.Util.createDiv(a,null,this.contentSize.clone(),null,"relative"),this.contentDiv.className=this.contentDisplayClass,this.groupDiv.appendChild(this.contentDiv),this.div.appendChild(this.groupDiv),e&&this.addCloseBox(f),this.registerEvents()},destroy:function(){this.border=this.opacity=this.backgroundColor=this.contentHTML=this.size=this.lonlat=this.id=null,this.closeOnMove&&this.map&&this.map.events.unregister("movestart",this,this.hide),this.events.destroy(),this.events=null,this.closeDiv&&(OpenLayers.Event.stopObservingElement(this.closeDiv),this.groupDiv.removeChild(this.closeDiv)),this.closeDiv=null,this.div.removeChild(this.groupDiv),this.groupDiv=null,null!=this.map&&this.map.removePopup(this),this.panMapIfOutOfView=this.padding=this.maxSize=this.minSize=this.autoSize=this.div=this.map=null},draw:function(a){return null==a&&null!=this.lonlat&&null!=this.map&&(a=this.map.getLayerPxFromLonLat(this.lonlat)),this.closeOnMove&&this.map.events.register("movestart",this,this.hide),this.disableFirefoxOverflowHack||"firefox"!=OpenLayers.BROWSER_NAME||(this.map.events.register("movestart",this,function(){var a=document.defaultView.getComputedStyle(this.contentDiv,null).getPropertyValue("overflow");"hidden"!=a&&(this.contentDiv._oldOverflow=a,this.contentDiv.style.overflow="hidden")}),this.map.events.register("moveend",this,function(){var a=this.contentDiv._oldOverflow;a&&(this.contentDiv.style.overflow=a,this.contentDiv._oldOverflow=null)})),this.moveTo(a),this.autoSize||this.size||this.setSize(this.contentSize),this.setBackgroundColor(),this.setOpacity(),this.setBorder(),this.setContentHTML(),this.panMapIfOutOfView&&this.panIntoView(),this.div},updatePosition:function(){if(this.lonlat&&this.map){var a=this.map.getLayerPxFromLonLat(this.lonlat);a&&this.moveTo(a)}},moveTo:function(a){null!=a&&null!=this.div&&(this.div.style.left=a.x+"px",this.div.style.top=a.y+"px")},visible:function(){return OpenLayers.Element.visible(this.div)},toggle:function(){this.visible()?this.hide():this.show()},show:function(){this.div.style.display="",this.panMapIfOutOfView&&this.panIntoView()},hide:function(){this.div.style.display="none"},setSize:function(a){this.size=a.clone();var b=this.getContentDivPadding(),c=b.left+b.right,d=b.top+b.bottom;if(this.fixPadding(),c+=this.padding.left+this.padding.right,d+=this.padding.top+this.padding.bottom,this.closeDiv)var e=parseInt(this.closeDiv.style.width),c=c+(e+b.right);this.size.w+=c,this.size.h+=d,"msie"==OpenLayers.BROWSER_NAME&&(this.contentSize.w+=b.left+b.right,this.contentSize.h+=b.bottom+b.top),null!=this.div&&(this.div.style.width=this.size.w+"px",this.div.style.height=this.size.h+"px"),null!=this.contentDiv&&(this.contentDiv.style.width=a.w+"px",this.contentDiv.style.height=a.h+"px")},updateSize:function(){var a="<div class='"+this.contentDisplayClass+"'>"+this.contentDiv.innerHTML+"</div>",b=this.map?this.map.div:document.body,c=OpenLayers.Util.getRenderedDimensions(a,null,{displayClass:this.displayClass,containerElement:b}),d=this.getSafeContentSize(c),e=null;d.equals(c)?e=c:(c={w:d.w<c.w?d.w:null,h:d.h<c.h?d.h:null},c.w&&c.h?e=d:(a=OpenLayers.Util.getRenderedDimensions(a,c,{displayClass:this.contentDisplayClass,containerElement:b}),"hidden"!=OpenLayers.Element.getStyle(this.contentDiv,"overflow")&&a.equals(d)&&(d=OpenLayers.Util.getScrollbarWidth(),c.w?a.h+=d:a.w+=d),e=this.getSafeContentSize(a))),this.setSize(e)},setBackgroundColor:function(a){void 0!=a&&(this.backgroundColor=a),null!=this.div&&(this.div.style.backgroundColor=this.backgroundColor)},setOpacity:function(a){void 0!=a&&(this.opacity=a),null!=this.div&&(this.div.style.opacity=this.opacity,this.div.style.filter="alpha(opacity="+100*this.opacity+")")},setBorder:function(a){void 0!=a&&(this.border=a),null!=this.div&&(this.div.style.border=this.border)},setContentHTML:function(a){null!=a&&(this.contentHTML=a),null!=this.contentDiv&&null!=this.contentHTML&&this.contentHTML!=this.contentDiv.innerHTML&&(this.contentDiv.innerHTML=this.contentHTML,this.autoSize&&(this.registerImageListeners(),this.updateSize()))},registerImageListeners:function(){for(var a=function(){null!==this.popup.id&&(this.popup.updateSize(),this.popup.visible()&&this.popup.panMapIfOutOfView&&this.popup.panIntoView(),OpenLayers.Event.stopObserving(this.img,"load",this.img._onImgLoad))},b=this.contentDiv.getElementsByTagName("img"),c=0,d=b.length;d>c;c++){var e=b[c];(0==e.width||0==e.height)&&(e._onImgLoad=OpenLayers.Function.bind(a,{popup:this,img:e}),OpenLayers.Event.observe(e,"load",e._onImgLoad))}},getSafeContentSize:function(a){a=a.clone();var b=this.getContentDivPadding(),c=b.left+b.right,d=b.top+b.bottom;if(this.fixPadding(),c+=this.padding.left+this.padding.right,d+=this.padding.top+this.padding.bottom,this.closeDiv)var e=parseInt(this.closeDiv.style.width),c=c+(e+b.right);if(this.minSize&&(a.w=Math.max(a.w,this.minSize.w-c),a.h=Math.max(a.h,this.minSize.h-d)),this.maxSize&&(a.w=Math.min(a.w,this.maxSize.w-c),a.h=Math.min(a.h,this.maxSize.h-d)),this.map&&this.map.size){if(e=b=0,this.keepInMap&&!this.panMapIfOutOfView)switch(e=this.map.getPixelFromLonLat(this.lonlat),this.relativePosition){case"tr":b=e.x,e=this.map.size.h-e.y;break;case"tl":b=this.map.size.w-e.x,e=this.map.size.h-e.y;break;case"bl":b=this.map.size.w-e.x,e=e.y;break;case"br":b=e.x,e=e.y;break;default:b=e.x,e=this.map.size.h-e.y}d=this.map.size.h-this.map.paddingForPopups.top-this.map.paddingForPopups.bottom-d-e,a.w=Math.min(a.w,this.map.size.w-this.map.paddingForPopups.left-this.map.paddingForPopups.right-c-b),a.h=Math.min(a.h,d)}return a},getContentDivPadding:function(){var a=this._contentDivPadding;return a||(null==this.div.parentNode&&(this.div.style.display="none",document.body.appendChild(this.div)),this._contentDivPadding=a=new OpenLayers.Bounds(OpenLayers.Element.getStyle(this.contentDiv,"padding-left"),OpenLayers.Element.getStyle(this.contentDiv,"padding-bottom"),OpenLayers.Element.getStyle(this.contentDiv,"padding-right"),OpenLayers.Element.getStyle(this.contentDiv,"padding-top")),this.div.parentNode==document.body&&(document.body.removeChild(this.div),this.div.style.display="")),a},addCloseBox:function(a){this.closeDiv=OpenLayers.Util.createDiv(this.id+"_close",null,{w:17,h:17}),this.closeDiv.className="olPopupCloseBox";var b=this.getContentDivPadding();this.closeDiv.style.right=b.right+"px",this.closeDiv.style.top=b.top+"px",this.groupDiv.appendChild(this.closeDiv),a=a||function(a){this.hide(),OpenLayers.Event.stop(a)},OpenLayers.Event.observe(this.closeDiv,"touchend",OpenLayers.Function.bindAsEventListener(a,this)),OpenLayers.Event.observe(this.closeDiv,"click",OpenLayers.Function.bindAsEventListener(a,this))},panIntoView:function(){var a=this.map.getSize(),b=this.map.getViewPortPxFromLayerPx(new OpenLayers.Pixel(parseInt(this.div.style.left),parseInt(this.div.style.top))),c=b.clone();b.x<this.map.paddingForPopups.left?c.x=this.map.paddingForPopups.left:b.x+this.size.w>a.w-this.map.paddingForPopups.right&&(c.x=a.w-this.map.paddingForPopups.right-this.size.w),b.y<this.map.paddingForPopups.top?c.y=this.map.paddingForPopups.top:b.y+this.size.h>a.h-this.map.paddingForPopups.bottom&&(c.y=a.h-this.map.paddingForPopups.bottom-this.size.h),this.map.pan(b.x-c.x,b.y-c.y)},registerEvents:function(){this.events=new OpenLayers.Events(this,this.div,null,!0),this.events.on({mousedown:this.onmousedown,mousemove:this.onmousemove,mouseup:this.onmouseup,click:this.onclick,mouseout:this.onmouseout,dblclick:this.ondblclick,touchstart:function(a){OpenLayers.Event.stop(a,!0)},scope:this})},onmousedown:function(a){this.mousedown=!0,OpenLayers.Event.stop(a,!0)},onmousemove:function(a){this.mousedown&&OpenLayers.Event.stop(a,!0)},onmouseup:function(a){this.mousedown&&(this.mousedown=!1,OpenLayers.Event.stop(a,!0))},onclick:function(a){OpenLayers.Event.stop(a,!0)},onmouseout:function(a){this.mousedown=!1},ondblclick:function(a){OpenLayers.Event.stop(a,!0)},CLASS_NAME:"OpenLayers.Popup"}),OpenLayers.Popup.WIDTH=200,OpenLayers.Popup.HEIGHT=200,OpenLayers.Popup.COLOR="white",OpenLayers.Popup.OPACITY=1,OpenLayers.Popup.BORDER="0px",OpenLayers.Control.ScaleLine=OpenLayers.Class(OpenLayers.Control,{maxWidth:100,topOutUnits:"km",topInUnits:"m",bottomOutUnits:"mi",bottomInUnits:"ft",eTop:null,eBottom:null,geodesic:!1,draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.eTop||(this.eTop=document.createElement("div"),this.eTop.className=this.displayClass+"Top",this.div.appendChild(this.eTop),this.eTop.style.visibility=""==this.topOutUnits||""==this.topInUnits?"hidden":"visible",this.eBottom=document.createElement("div"),this.eBottom.className=this.displayClass+"Bottom",this.div.appendChild(this.eBottom),this.eBottom.style.visibility=""==this.bottomOutUnits||""==this.bottomInUnits?"hidden":"visible"),this.map.events.register("moveend",this,this.update),this.update(),this.div},getBarLen:function(a){var b=parseInt(Math.log(a)/Math.log(10)),b=Math.pow(10,b);return a=parseInt(a/b),(a>5?5:a>2?2:1)*b},update:function(){var a=this.map.getResolution();if(a){var b=this.map.getUnits(),c=OpenLayers.INCHES_PER_UNIT,d=this.maxWidth*a*c[b],e=1;!0===this.geodesic&&(e=(this.map.getGeodesicPixelSize().w||1e-6)*this.maxWidth/(d/c.km),d*=e);var f,g;d>1e5?(f=this.topOutUnits,g=this.bottomOutUnits):(f=this.topInUnits,g=this.bottomInUnits);var h=d/c[f],i=d/c[g],d=this.getBarLen(h),j=this.getBarLen(i),h=d/c[b]*c[f],i=j/c[b]*c[g],b=h/a/e,a=i/a/e;"visible"==this.eBottom.style.visibility&&(this.eBottom.style.width=Math.round(a)+"px",this.eBottom.innerHTML=j+" "+g),"visible"==this.eTop.style.visibility&&(this.eTop.style.width=Math.round(b)+"px",this.eTop.innerHTML=d+" "+f)}},CLASS_NAME:"OpenLayers.Control.ScaleLine"}),OpenLayers.Icon=OpenLayers.Class({url:null,size:null,offset:null,calculateOffset:null,imageDiv:null,px:null,initialize:function(a,b,c,d){this.url=a,this.size=b||{w:20,h:20},this.offset=c||{x:-(this.size.w/2),y:-(this.size.h/2)},this.calculateOffset=d,a=OpenLayers.Util.createUniqueID("OL_Icon_"),this.imageDiv=OpenLayers.Util.createAlphaImageDiv(a)},destroy:function(){this.erase(),OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild),this.imageDiv.innerHTML="",this.imageDiv=null},clone:function(){return new OpenLayers.Icon(this.url,this.size,this.offset,this.calculateOffset)},setSize:function(a){null!=a&&(this.size=a),this.draw()},setUrl:function(a){null!=a&&(this.url=a),this.draw()},draw:function(a){return OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,this.size,this.url,"absolute"),this.moveTo(a),this.imageDiv},erase:function(){null!=this.imageDiv&&null!=this.imageDiv.parentNode&&OpenLayers.Element.remove(this.imageDiv)},setOpacity:function(a){OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,null,null,null,null,null,a)},moveTo:function(a){null!=a&&(this.px=a),null!=this.imageDiv&&(null==this.px?this.display(!1):(this.calculateOffset&&(this.offset=this.calculateOffset(this.size)),OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,{x:this.px.x+this.offset.x,y:this.px.y+this.offset.y})))},display:function(a){this.imageDiv.style.display=a?"":"none"},isDrawn:function(){return this.imageDiv&&this.imageDiv.parentNode&&11!=this.imageDiv.parentNode.nodeType},CLASS_NAME:"OpenLayers.Icon"}),OpenLayers.Marker=OpenLayers.Class({icon:null,lonlat:null,events:null,map:null,initialize:function(a,b){this.lonlat=a;var c=b?b:OpenLayers.Marker.defaultIcon();null==this.icon?this.icon=c:(this.icon.url=c.url,this.icon.size=c.size,this.icon.offset=c.offset,this.icon.calculateOffset=c.calculateOffset),this.events=new OpenLayers.Events(this,this.icon.imageDiv)},destroy:function(){this.erase(),this.map=null,this.events.destroy(),this.events=null,null!=this.icon&&(this.icon.destroy(),this.icon=null)},draw:function(a){return this.icon.draw(a)},erase:function(){null!=this.icon&&this.icon.erase()},moveTo:function(a){null!=a&&null!=this.icon&&this.icon.moveTo(a),this.lonlat=this.map.getLonLatFromLayerPx(a)},isDrawn:function(){return this.icon&&this.icon.isDrawn()},onScreen:function(){var a=!1;return this.map&&(a=this.map.getExtent().containsLonLat(this.lonlat)),a},inflate:function(a){this.icon&&this.icon.setSize({w:this.icon.size.w*a,h:this.icon.size.h*a})},setOpacity:function(a){this.icon.setOpacity(a)},setUrl:function(a){this.icon.setUrl(a)},display:function(a){this.icon.display(a)},CLASS_NAME:"OpenLayers.Marker"}),OpenLayers.Marker.defaultIcon=function(){return new OpenLayers.Icon(OpenLayers.Util.getImageLocation("marker.png"),{w:21,h:25},{x:-10.5,y:-25})},OpenLayers.Layer.TileCache=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,format:"image/png",serverResolutions:null,initialize:function(a,b,c,d){this.layername=c,OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a,b,{},d]),this.extension=this.format.split("/")[1].toLowerCase(),this.extension="jpg"==this.extension?"jpeg":this.extension},clone:function(a){return null==a&&(a=new OpenLayers.Layer.TileCache(this.name,this.url,this.layername,this.getOptions())),a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){var b=this.getServerResolution(),c=this.maxExtent,d=this.tileSize,e=Math.round((a.left-c.left)/(b*d.w));return a=Math.round((a.bottom-c.bottom)/(b*d.h)),b=null!=this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,b):this.map.getZoom(),e=[this.layername,OpenLayers.Number.zeroPad(b,2),OpenLayers.Number.zeroPad(parseInt(e/1e6),3),OpenLayers.Number.zeroPad(parseInt(e/1e3)%1e3,3),OpenLayers.Number.zeroPad(parseInt(e)%1e3,3),OpenLayers.Number.zeroPad(parseInt(a/1e6),3),OpenLayers.Number.zeroPad(parseInt(a/1e3)%1e3,3),OpenLayers.Number.zeroPad(parseInt(a)%1e3,3)+"."+this.extension].join("/"),b=this.url,OpenLayers.Util.isArray(b)&&(b=this.selectUrl(e,b)),b="/"==b.charAt(b.length-1)?b:b+"/",b+e},CLASS_NAME:"OpenLayers.Layer.TileCache"}),OpenLayers.Strategy.Paging=OpenLayers.Class(OpenLayers.Strategy,{features:null,length:10,num:null,paging:!1,activate:function(){var a=OpenLayers.Strategy.prototype.activate.call(this);return a&&this.layer.events.on({beforefeaturesadded:this.cacheFeatures,scope:this}),a},deactivate:function(){var a=OpenLayers.Strategy.prototype.deactivate.call(this);return a&&(this.clearCache(),this.layer.events.un({beforefeaturesadded:this.cacheFeatures,scope:this})),a},cacheFeatures:function(a){this.paging||(this.clearCache(),this.features=a.features,this.pageNext(a))},clearCache:function(){if(this.features)for(var a=0;a<this.features.length;++a)this.features[a].destroy();this.num=this.features=null},pageCount:function(){return Math.ceil((this.features?this.features.length:0)/this.length)},pageNum:function(){return this.num},pageLength:function(a){return a&&a>0&&(this.length=a),this.length},pageNext:function(a){var b=!1;return this.features&&(null===this.num&&(this.num=-1),b=this.page((this.num+1)*this.length,a)),b},pagePrevious:function(){var a=!1;return this.features&&(null===this.num&&(this.num=this.pageCount()),a=this.page((this.num-1)*this.length)),a},page:function(a,b){var c=!1;if(this.features&&a>=0&&a<this.features.length){var d=Math.floor(a/this.length);d!=this.num&&(this.paging=!0,c=this.features.slice(a,a+this.length),this.layer.removeFeatures(this.layer.features),this.num=d,b&&b.features?b.features=c:this.layer.addFeatures(c),this.paging=!1,c=!0)}return c},CLASS_NAME:"OpenLayers.Strategy.Paging"}),OpenLayers.Control.DragFeature=OpenLayers.Class(OpenLayers.Control,{geometryTypes:null,onStart:function(a,b){},onDrag:function(a,b){},onComplete:function(a,b){},onEnter:function(a){},onLeave:function(a){},documentDrag:!1,layer:null,feature:null,dragCallbacks:{},featureCallbacks:{},lastPixel:null,initialize:function(a,b){OpenLayers.Control.prototype.initialize.apply(this,[b]),this.layer=a,this.handlers={drag:new OpenLayers.Handler.Drag(this,OpenLayers.Util.extend({down:this.downFeature,move:this.moveFeature,up:this.upFeature,out:this.cancel,done:this.doneDragging},this.dragCallbacks),{documentDrag:this.documentDrag}),feature:new OpenLayers.Handler.Feature(this,this.layer,OpenLayers.Util.extend({click:this.clickFeature,clickout:this.clickoutFeature,over:this.overFeature,out:this.outFeature},this.featureCallbacks),{geometryTypes:this.geometryTypes})}},clickFeature:function(a){this.handlers.feature.touch&&!this.over&&this.overFeature(a)&&(this.handlers.drag.dragstart(this.handlers.feature.evt),this.handlers.drag.stopDown=!1)},clickoutFeature:function(a){this.handlers.feature.touch&&this.over&&(this.outFeature(a),this.handlers.drag.stopDown=!0)},destroy:function(){this.layer=null,OpenLayers.Control.prototype.destroy.apply(this,[])},activate:function(){return this.handlers.feature.activate()&&OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.handlers.drag.deactivate(),this.handlers.feature.deactivate(),this.feature=null,this.dragging=!1,this.lastPixel=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass+"Over"),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},overFeature:function(a){var b=!1;return this.handlers.drag.dragging?this.over=this.feature.id==a.id?!0:!1:(this.feature=a,this.handlers.drag.activate(),this.over=b=!0,OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass+"Over"),this.onEnter(a)),b},downFeature:function(a){this.lastPixel=a,this.onStart(this.feature,a)},moveFeature:function(a){var b=this.map.getResolution();this.feature.geometry.move(b*(a.x-this.lastPixel.x),b*(this.lastPixel.y-a.y)),this.layer.drawFeature(this.feature),this.lastPixel=a,this.onDrag(this.feature,a)},upFeature:function(a){this.over||this.handlers.drag.deactivate()},doneDragging:function(a){this.onComplete(this.feature,a)},outFeature:function(a){this.handlers.drag.dragging?this.feature.id==a.id&&(this.over=!1):(this.over=!1,this.handlers.drag.deactivate(),OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass+"Over"),this.onLeave(a),this.feature=null)},cancel:function(){this.handlers.drag.deactivate(),this.over=!1},setMap:function(a){this.handlers.drag.setMap(a),this.handlers.feature.setMap(a),OpenLayers.Control.prototype.setMap.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.DragFeature"}),OpenLayers.Control.TransformFeature=OpenLayers.Class(OpenLayers.Control,{geometryTypes:null,layer:null,preserveAspectRatio:!1,rotate:!0,feature:null,renderIntent:"temporary",rotationHandleSymbolizer:null,box:null,center:null,scale:1,ratio:1,rotation:0,handles:null,rotationHandles:null,dragControl:null,irregular:!1,initialize:function(a,b){OpenLayers.Control.prototype.initialize.apply(this,[b]),this.layer=a,this.rotationHandleSymbolizer||(this.rotationHandleSymbolizer={stroke:!1,pointRadius:10,fillOpacity:0,cursor:"pointer"}),this.createBox(),this.createControl()},activate:function(){var a=!1;return OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.dragControl.activate(),this.layer.addFeatures([this.box]),this.rotate&&this.layer.addFeatures(this.rotationHandles),this.layer.addFeatures(this.handles),a=!0),a},deactivate:function(){var a=!1;return OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.layer.removeFeatures(this.handles),this.rotate&&this.layer.removeFeatures(this.rotationHandles),this.layer.removeFeatures([this.box]),this.dragControl.deactivate(),a=!0),a},setMap:function(a){this.dragControl.setMap(a),OpenLayers.Control.prototype.setMap.apply(this,arguments)},setFeature:function(a,b){b=OpenLayers.Util.applyDefaults(b,{rotation:0,scale:1,ratio:1});var c=this.rotation,d=this.center;if(OpenLayers.Util.extend(this,b),!1!==this.events.triggerEvent("beforesetfeature",{feature:a})){this.feature=a,this.activate(),this._setfeature=!0;var e=this.feature.geometry.getBounds();this.box.move(e.getCenterLonLat()),this.box.geometry.rotate(-c,d),this._angle=0,this.rotation?(c=a.geometry.clone(),c.rotate(-this.rotation,this.center),c=new OpenLayers.Feature.Vector(c.getBounds().toGeometry()),c.geometry.rotate(this.rotation,this.center),this.box.geometry.rotate(this.rotation,this.center),this.box.move(c.geometry.getBounds().getCenterLonLat()),c=c.geometry.components[0].components[0].getBounds().getCenterLonLat()):c=new OpenLayers.LonLat(e.left,e.bottom),this.handles[0].move(c),delete this._setfeature,this.events.triggerEvent("setfeature",{feature:a})}},unsetFeature:function(){this.active?this.deactivate():(this.feature=null,this.rotation=0,this.ratio=this.scale=1)},createBox:function(){var a=this;this.center=new OpenLayers.Geometry.Point(0,0),this.box=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([new OpenLayers.Geometry.Point(-1,-1),new OpenLayers.Geometry.Point(0,-1),new OpenLayers.Geometry.Point(1,-1),new OpenLayers.Geometry.Point(1,0),new OpenLayers.Geometry.Point(1,1),new OpenLayers.Geometry.Point(0,1),new OpenLayers.Geometry.Point(-1,1),new OpenLayers.Geometry.Point(-1,0),new OpenLayers.Geometry.Point(-1,-1)]),null,"string"==typeof this.renderIntent?null:this.renderIntent),this.box.geometry.move=function(b,c){a._moving=!0,OpenLayers.Geometry.LineString.prototype.move.apply(this,arguments),a.center.move(b,c),delete a._moving};for(var b,c,d,e=function(a,b){OpenLayers.Geometry.Point.prototype.move.apply(this,arguments),this._rotationHandle&&this._rotationHandle.geometry.move(a,b),this._handle.geometry.move(a,b)},f=function(a,b,c){OpenLayers.Geometry.Point.prototype.resize.apply(this,arguments),this._rotationHandle&&this._rotationHandle.geometry.resize(a,b,c),this._handle.geometry.resize(a,b,c)},g=function(a,b){OpenLayers.Geometry.Point.prototype.rotate.apply(this,arguments),this._rotationHandle&&this._rotationHandle.geometry.rotate(a,b),this._handle.geometry.rotate(a,b)},h=function(b,c){var d=this.x,e=this.y;if(OpenLayers.Geometry.Point.prototype.move.call(this,b,c),!a._moving){var f=a.dragControl.handlers.drag.evt,g=!(!a._setfeature&&a.preserveAspectRatio||f&&f.shiftKey),h=new OpenLayers.Geometry.Point(d,e),f=a.center;this.rotate(-a.rotation,f),h.rotate(-a.rotation,f);var i=this.x-f.x,j=this.y-f.y,k=i-(this.x-h.x),l=j-(this.y-h.y);a.irregular&&!a._setfeature&&(i-=(this.x-h.x)/2,j-=(this.y-h.y)/2),this.x=d,this.y=e,h=1,g?(j=1e-5>Math.abs(l)?1:j/l,h=(1e-5>Math.abs(k)?1:i/k)/j):(k=Math.sqrt(k*k+l*l),j=Math.sqrt(i*i+j*j)/k),a._moving=!0,a.box.geometry.rotate(-a.rotation,f),delete a._moving,a.box.geometry.resize(j,f,h),a.box.geometry.rotate(a.rotation,f),a.transformFeature({scale:j,ratio:h}),a.irregular&&!a._setfeature&&(i=f.clone(),i.x+=1e-5>Math.abs(d-f.x)?0:this.x-d,i.y+=1e-5>Math.abs(e-f.y)?0:this.y-e,a.box.geometry.move(this.x-d,this.y-e),a.transformFeature({center:i}))}},i=function(b,c){var d=this.x,e=this.y;if(OpenLayers.Geometry.Point.prototype.move.call(this,b,c),!a._moving){var f=a.dragControl.handlers.drag.evt,f=f&&f.shiftKey?45:1,g=a.center,h=this.x-g.x,i=this.y-g.y;this.x=d,this.y=e,d=Math.atan2(i-c,h-b),d=Math.atan2(i,h)-d,d*=180/Math.PI,a._angle=(a._angle+d)%360,d=a.rotation%f,(Math.abs(a._angle)>=f||0!==d)&&(d=Math.round(a._angle/f)*f-d,a._angle=0,a.box.geometry.rotate(d,g),a.transformFeature({rotation:d}))}},j=Array(8),k=Array(4),l="sw s se e ne n nw w".split(" "),m=0;8>m;++m)b=this.box.geometry.components[m],c=new OpenLayers.Feature.Vector(b.clone(),{role:l[m]+"-resize"},"string"==typeof this.renderIntent?null:this.renderIntent),0==m%2&&(d=new OpenLayers.Feature.Vector(b.clone(),{role:l[m]+"-rotate"},"string"==typeof this.rotationHandleSymbolizer?null:this.rotationHandleSymbolizer),d.geometry.move=i,b._rotationHandle=d,k[m/2]=d),b.move=e,b.resize=f,b.rotate=g,c.geometry.move=h,b._handle=c,j[m]=c;this.rotationHandles=k,this.handles=j},createControl:function(){var a=this;this.dragControl=new OpenLayers.Control.DragFeature(this.layer,{documentDrag:!0,moveFeature:function(b){this.feature===a.feature&&(this.feature=a.box),OpenLayers.Control.DragFeature.prototype.moveFeature.apply(this,arguments)},onDrag:function(b,c){b===a.box&&a.transformFeature({center:a.center})},onStart:function(b,c){var d=!a.geometryTypes||-1!==OpenLayers.Util.indexOf(a.geometryTypes,b.geometry.CLASS_NAME),e=OpenLayers.Util.indexOf(a.handles,b),e=e+OpenLayers.Util.indexOf(a.rotationHandles,b);b!==a.feature&&b!==a.box&&-2==e&&d&&a.setFeature(b)},onComplete:function(b,c){a.events.triggerEvent("transformcomplete",{feature:a.feature})}})},drawHandles:function(){for(var a=this.layer,b=0;8>b;++b)this.rotate&&0===b%2&&a.drawFeature(this.rotationHandles[b/2],this.rotationHandleSymbolizer),a.drawFeature(this.handles[b],this.renderIntent)},transformFeature:function(a){if(!this._setfeature){this.scale*=a.scale||1,this.ratio*=a.ratio||1;var b=this.rotation;if(this.rotation=(this.rotation+(a.rotation||0))%360,!1!==this.events.triggerEvent("beforetransform",a)){var c=this.feature,d=c.geometry,e=this.center;d.rotate(-b,e),a.scale||a.ratio?d.resize(a.scale,e,a.ratio):a.center&&c.move(a.center.getBounds().getCenterLonLat()),d.rotate(this.rotation,e),this.layer.drawFeature(c),c.toState(OpenLayers.State.UPDATE),this.events.triggerEvent("transform",a)}}this.layer.drawFeature(this.box,this.renderIntent),this.drawHandles()},destroy:function(){for(var a,b=0;8>b;++b)a=this.box.geometry.components[b],a._handle.destroy(),a._handle=null,a._rotationHandle&&a._rotationHandle.destroy(),a._rotationHandle=null;this.rotationHandles=this.rotationHandleSymbolizer=this.handles=this.feature=this.center=null,this.box.destroy(),this.layer=this.box=null,this.dragControl.destroy(),this.dragControl=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.TransformFeature"}),OpenLayers.Handler.Box=OpenLayers.Class(OpenLayers.Handler,{dragHandler:null,boxDivClassName:"olHandlerBoxZoomBox",boxOffsets:null,initialize:function(a,b,c){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.dragHandler=new OpenLayers.Handler.Drag(this,{down:this.startBox,move:this.moveBox,out:this.removeBox,up:this.endBox},{keyMask:this.keyMask})},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments),this.dragHandler&&(this.dragHandler.destroy(),this.dragHandler=null)},setMap:function(a){OpenLayers.Handler.prototype.setMap.apply(this,arguments),this.dragHandler&&this.dragHandler.setMap(a)},startBox:function(a){this.callback("start",[]),this.zoomBox=OpenLayers.Util.createDiv("zoomBox",{x:-9999,y:-9999}),this.zoomBox.className=this.boxDivClassName,this.zoomBox.style.zIndex=this.map.Z_INDEX_BASE.Popup-1,this.map.viewPortDiv.appendChild(this.zoomBox),OpenLayers.Element.addClass(this.map.viewPortDiv,"olDrawBox")},moveBox:function(a){var b=this.dragHandler.start.x,c=this.dragHandler.start.y,d=Math.abs(b-a.x),e=Math.abs(c-a.y),f=this.getBoxOffsets();this.zoomBox.style.width=d+f.width+1+"px",this.zoomBox.style.height=e+f.height+1+"px",this.zoomBox.style.left=(a.x<b?b-d-f.left:b-f.left)+"px",this.zoomBox.style.top=(a.y<c?c-e-f.top:c-f.top)+"px"},endBox:function(a){var b;if(5<Math.abs(this.dragHandler.start.x-a.x)||5<Math.abs(this.dragHandler.start.y-a.y)){var c=this.dragHandler.start;b=Math.min(c.y,a.y);var d=Math.max(c.y,a.y),e=Math.min(c.x,a.x);a=Math.max(c.x,a.x),b=new OpenLayers.Bounds(e,d,a,b)}else b=this.dragHandler.start.clone();this.removeBox(),this.callback("done",[b])},removeBox:function(){this.map.viewPortDiv.removeChild(this.zoomBox),this.boxOffsets=this.zoomBox=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDrawBox")},activate:function(){return OpenLayers.Handler.prototype.activate.apply(this,arguments)?(this.dragHandler.activate(),!0):!1},deactivate:function(){return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)?(this.dragHandler.deactivate()&&this.zoomBox&&this.removeBox(),!0):!1},getBoxOffsets:function(){if(!this.boxOffsets){var a=document.createElement("div");a.style.position="absolute",a.style.border="1px solid black",a.style.width="3px",document.body.appendChild(a);
var b=3==a.clientWidth;document.body.removeChild(a);var a=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-left-width")),c=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-right-width")),d=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-top-width")),e=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-bottom-width"));this.boxOffsets={left:a,right:c,top:d,bottom:e,width:!1===b?a+c:0,height:!1===b?d+e:0}}return this.boxOffsets},CLASS_NAME:"OpenLayers.Handler.Box"}),OpenLayers.Control.ZoomBox=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,out:!1,keyMask:null,alwaysZoom:!1,zoomOnClick:!0,draw:function(){this.handler=new OpenLayers.Handler.Box(this,{done:this.zoomBox},{keyMask:this.keyMask})},zoomBox:function(a){if(a instanceof OpenLayers.Bounds){var b,c=a.getCenterPixel();if(this.out){b=Math.min(this.map.size.h/(a.bottom-a.top),this.map.size.w/(a.right-a.left));var d=this.map.getExtent(),e=this.map.getLonLatFromPixel(c),f=e.lon-d.getWidth()/2*b;a=e.lon+d.getWidth()/2*b;var g=e.lat-d.getHeight()/2*b;b=e.lat+d.getHeight()/2*b,b=new OpenLayers.Bounds(f,g,a,b)}else f=this.map.getLonLatFromPixel({x:a.left,y:a.bottom}),a=this.map.getLonLatFromPixel({x:a.right,y:a.top}),b=new OpenLayers.Bounds(f.lon,f.lat,a.lon,a.lat);f=this.map.getZoom(),g=this.map.getSize(),a=g.w/2,g=g.h/2,b=this.map.getZoomForExtent(b),d=this.map.getResolution(),e=this.map.getResolutionForZoom(b),d==e?this.map.setCenter(this.map.getLonLatFromPixel(c)):this.map.zoomTo(b,{x:(d*c.x-e*a)/(d-e),y:(d*c.y-e*g)/(d-e)}),f==this.map.getZoom()&&1==this.alwaysZoom&&this.map.zoomTo(f+(this.out?-1:1))}else this.zoomOnClick&&(this.out?this.map.zoomTo(this.map.getZoom()-1,a):this.map.zoomTo(this.map.getZoom()+1,a))},CLASS_NAME:"OpenLayers.Control.ZoomBox"}),OpenLayers.Control.DragPan=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,panned:!1,interval:0,documentDrag:!1,kinetic:null,enableKinetic:!0,kineticInterval:10,draw:function(){if(this.enableKinetic&&OpenLayers.Kinetic){var a={interval:this.kineticInterval};"object"==typeof this.enableKinetic&&(a=OpenLayers.Util.extend(a,this.enableKinetic)),this.kinetic=new OpenLayers.Kinetic(a)}this.handler=new OpenLayers.Handler.Drag(this,{move:this.panMap,done:this.panMapDone,down:this.panMapStart},{interval:this.interval,documentDrag:this.documentDrag})},panMapStart:function(){this.kinetic&&this.kinetic.begin()},panMap:function(a){this.kinetic&&this.kinetic.update(a),this.panned=!0,this.map.pan(this.handler.last.x-a.x,this.handler.last.y-a.y,{dragging:!0,animate:!1})},panMapDone:function(a){if(this.panned){var b=null;if(this.kinetic&&(b=this.kinetic.end(a)),this.map.pan(this.handler.last.x-a.x,this.handler.last.y-a.y,{dragging:!!b,animate:!1}),b){var c=this;this.kinetic.move(b,function(a,b,d){c.map.pan(a,b,{dragging:!d,animate:!1})})}this.panned=!1}},CLASS_NAME:"OpenLayers.Control.DragPan"}),OpenLayers.Control.Navigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,documentDrag:!1,zoomBox:null,zoomBoxEnabled:!0,zoomWheelEnabled:!0,mouseWheelOptions:null,handleRightClicks:!1,zoomBoxKeyMask:OpenLayers.Handler.MOD_SHIFT,autoActivate:!0,initialize:function(a){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.zoomBox&&this.zoomBox.destroy(),this.zoomBox=null,this.pinchZoom&&this.pinchZoom.destroy(),this.pinchZoom=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.dragPan.activate(),this.zoomWheelEnabled&&this.handlers.wheel.activate(),this.handlers.click.activate(),this.zoomBoxEnabled&&this.zoomBox.activate(),this.pinchZoom&&this.pinchZoom.activate(),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.pinchZoom&&this.pinchZoom.deactivate(),this.zoomBox.deactivate(),this.dragPan.deactivate(),this.handlers.click.deactivate(),this.handlers.wheel.deactivate(),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},draw:function(){this.handleRightClicks&&(this.map.viewPortDiv.oncontextmenu=OpenLayers.Function.False),this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.defaultClick,dblclick:this.defaultDblClick,dblrightclick:this.defaultDblRightClick},{"double":!0,stopDouble:!0}),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.zoomBox=new OpenLayers.Control.ZoomBox({map:this.map,keyMask:this.zoomBoxKeyMask}),this.dragPan.draw(),this.zoomBox.draw(),this.handlers.wheel=new OpenLayers.Handler.MouseWheel(this,{up:this.wheelUp,down:this.wheelDown},OpenLayers.Util.extend(this.map.fractionalZoom?{}:{cumulative:!1,interval:50,maxDelta:6},this.mouseWheelOptions)),OpenLayers.Control.PinchZoom&&(this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions)))},defaultClick:function(a){a.lastTouches&&2==a.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(a){this.map.zoomTo(this.map.zoom+1,a.xy)},defaultDblRightClick:function(a){this.map.zoomTo(this.map.zoom-1,a.xy)},wheelChange:function(a,b){this.map.fractionalZoom||(b=Math.round(b));var c,d=this.map.getZoom();c=Math.max(d+b,0),c=Math.min(c,this.map.getNumZoomLevels()),c!==d&&this.map.zoomTo(c,a.xy)},wheelUp:function(a,b){this.wheelChange(a,b||1)},wheelDown:function(a,b){this.wheelChange(a,b||-1)},disableZoomBox:function(){this.zoomBoxEnabled=!1,this.zoomBox.deactivate()},enableZoomBox:function(){this.zoomBoxEnabled=!0,this.active&&this.zoomBox.activate()},disableZoomWheel:function(){this.zoomWheelEnabled=!1,this.handlers.wheel.deactivate()},enableZoomWheel:function(){this.zoomWheelEnabled=!0,this.active&&this.handlers.wheel.activate()},CLASS_NAME:"OpenLayers.Control.Navigation"}),OpenLayers.Control.DrawFeature=OpenLayers.Class(OpenLayers.Control,{layer:null,callbacks:null,multi:!1,featureAdded:function(){},initialize:function(a,b,c){OpenLayers.Control.prototype.initialize.apply(this,[c]),this.callbacks=OpenLayers.Util.extend({done:this.drawFeature,modify:function(a,b){this.layer.events.triggerEvent("sketchmodified",{vertex:a,feature:b})},create:function(a,b){this.layer.events.triggerEvent("sketchstarted",{vertex:a,feature:b})}},this.callbacks),this.layer=a,this.handlerOptions=this.handlerOptions||{},this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{renderers:a.renderers,rendererOptions:a.rendererOptions}),"multi"in this.handlerOptions||(this.handlerOptions.multi=this.multi),(a=this.layer.styleMap&&this.layer.styleMap.styles.temporary)&&(this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({"default":a})})),this.handler=new b(this,this.callbacks,this.handlerOptions)},drawFeature:function(a){a=new OpenLayers.Feature.Vector(a),!1!==this.layer.events.triggerEvent("sketchcomplete",{feature:a})&&(a.state=OpenLayers.State.INSERT,this.layer.addFeatures([a]),this.featureAdded(a),this.events.triggerEvent("featureadded",{feature:a}))},insertXY:function(a,b){this.handler&&this.handler.line&&this.handler.insertXY(a,b)},insertDeltaXY:function(a,b){this.handler&&this.handler.line&&this.handler.insertDeltaXY(a,b)},insertDirectionLength:function(a,b){this.handler&&this.handler.line&&this.handler.insertDirectionLength(a,b)},insertDeflectionLength:function(a,b){this.handler&&this.handler.line&&this.handler.insertDeflectionLength(a,b)},undo:function(){return this.handler.undo&&this.handler.undo()},redo:function(){return this.handler.redo&&this.handler.redo()},finishSketch:function(){this.handler.finishGeometry()},cancel:function(){this.handler.cancel()},CLASS_NAME:"OpenLayers.Control.DrawFeature"}),OpenLayers.Handler.Polygon=OpenLayers.Class(OpenLayers.Handler.Path,{holeModifier:null,drawingHole:!1,polygon:null,createFeature:function(a){a=this.layer.getLonLatFromViewPortPx(a),a=new OpenLayers.Geometry.Point(a.lon,a.lat),this.point=new OpenLayers.Feature.Vector(a),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing([this.point.geometry])),this.polygon=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([this.line.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.polygon,this.point],{silent:!0})},addPoint:function(a){if(!this.drawingHole&&this.holeModifier&&this.evt&&this.evt[this.holeModifier])for(var b,c=this.point.geometry,d=this.control.layer.features,e=d.length-1;e>=0;--e)if(b=d[e].geometry,(b instanceof OpenLayers.Geometry.Polygon||b instanceof OpenLayers.Geometry.MultiPolygon)&&b.intersects(c)){c=d[e],this.control.layer.removeFeatures([c],{silent:!0}),this.control.layer.events.registerPriority("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.registerPriority("sketchmodified",this,this.enforceTopology),c.geometry.addComponent(this.line.geometry),this.polygon=c,this.drawingHole=!0;break}OpenLayers.Handler.Path.prototype.addPoint.apply(this,arguments)},getCurrentPointIndex:function(){return this.line.geometry.components.length-2},enforceTopology:function(a){a=a.vertex;var b=this.line.geometry.components;this.polygon.geometry.intersects(a)||(b=b[b.length-3],a.x=b.x,a.y=b.y)},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-2]),this.removePoint(),this.finalize()},finalizeInteriorRing:function(){var a=this.line.geometry,b=0!==a.getArea();if(b){for(var c=this.polygon.geometry.components,d=c.length-2;d>=0;--d)if(a.intersects(c[d])){b=!1;break}if(b)a:for(d=c.length-2;d>0;--d)for(var e=c[d].components,f=0,g=e.length;g>f;++f)if(a.containsPoint(e[f])){b=!1;break a}}return b?this.polygon.state!==OpenLayers.State.INSERT&&(this.polygon.state=OpenLayers.State.UPDATE):this.polygon.geometry.removeComponent(a),this.restoreFeature(),!1},cancel:function(){return this.drawingHole&&(this.polygon.geometry.removeComponent(this.line.geometry),this.restoreFeature(!0)),OpenLayers.Handler.Path.prototype.cancel.apply(this,arguments)},restoreFeature:function(a){this.control.layer.events.unregister("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.unregister("sketchmodified",this,this.enforceTopology),this.layer.removeFeatures([this.polygon],{silent:!0}),this.control.layer.addFeatures([this.polygon],{silent:!0}),this.drawingHole=!1,a||this.control.layer.events.triggerEvent("sketchcomplete",{feature:this.polygon})},destroyFeature:function(a){OpenLayers.Handler.Path.prototype.destroyFeature.call(this,a),this.polygon=null},drawFeature:function(){this.layer.drawFeature(this.polygon,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.polygon},getGeometry:function(){var a=this.polygon&&this.polygon.geometry;return a&&this.multi&&(a=new OpenLayers.Geometry.MultiPolygon([a])),a},CLASS_NAME:"OpenLayers.Handler.Polygon"}),OpenLayers.Control.EditingToolbar=OpenLayers.Class(OpenLayers.Control.Panel,{citeCompliant:!1,initialize:function(a,b){OpenLayers.Control.Panel.prototype.initialize.apply(this,[b]),this.addControls([new OpenLayers.Control.Navigation]);var c=[new OpenLayers.Control.DrawFeature(a,OpenLayers.Handler.Point,{displayClass:"olControlDrawFeaturePoint",handlerOptions:{citeCompliant:this.citeCompliant}}),new OpenLayers.Control.DrawFeature(a,OpenLayers.Handler.Path,{displayClass:"olControlDrawFeaturePath",handlerOptions:{citeCompliant:this.citeCompliant}}),new OpenLayers.Control.DrawFeature(a,OpenLayers.Handler.Polygon,{displayClass:"olControlDrawFeaturePolygon",handlerOptions:{citeCompliant:this.citeCompliant}})];this.addControls(c)},draw:function(){var a=OpenLayers.Control.Panel.prototype.draw.apply(this,arguments);return null===this.defaultControl&&(this.defaultControl=this.controls[0]),a},CLASS_NAME:"OpenLayers.Control.EditingToolbar"}),OpenLayers.Strategy.BBOX=OpenLayers.Class(OpenLayers.Strategy,{bounds:null,resolution:null,ratio:2,resFactor:null,response:null,activate:function(){var a=OpenLayers.Strategy.prototype.activate.call(this);return a&&(this.layer.events.on({moveend:this.update,refresh:this.update,visibilitychanged:this.update,scope:this}),this.update()),a},deactivate:function(){var a=OpenLayers.Strategy.prototype.deactivate.call(this);return a&&this.layer.events.un({moveend:this.update,refresh:this.update,visibilitychanged:this.update,scope:this}),a},update:function(a){var b=this.getMapBounds();null!==b&&(a&&a.force||this.layer.visibility&&this.layer.calculateInRange()&&this.invalidBounds(b))&&(this.calculateBounds(b),this.resolution=this.layer.map.getResolution(),this.triggerRead(a))},getMapBounds:function(){if(null===this.layer.map)return null;var a=this.layer.map.getExtent();return a&&!this.layer.projection.equals(this.layer.map.getProjectionObject())&&(a=a.clone().transform(this.layer.map.getProjectionObject(),this.layer.projection)),a},invalidBounds:function(a){return a||(a=this.getMapBounds()),a=!this.bounds||!this.bounds.containsBounds(a),!a&&this.resFactor&&(a=this.resolution/this.layer.map.getResolution(),a=a>=this.resFactor||a<=1/this.resFactor),a},calculateBounds:function(a){a||(a=this.getMapBounds());var b=a.getCenterLonLat(),c=a.getWidth()*this.ratio;a=a.getHeight()*this.ratio,this.bounds=new OpenLayers.Bounds(b.lon-c/2,b.lat-a/2,b.lon+c/2,b.lat+a/2)},triggerRead:function(a){!this.response||a&&!0===a.noAbort||(this.layer.protocol.abort(this.response),this.layer.events.triggerEvent("loadend"));var b={filter:this.createFilter()};this.layer.events.triggerEvent("loadstart",b),this.response=this.layer.protocol.read(OpenLayers.Util.applyDefaults({filter:b.filter,callback:this.merge,scope:this},a))},createFilter:function(){var a=new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,value:this.bounds,projection:this.layer.projection});return this.layer.filter&&(a=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,filters:[this.layer.filter,a]})),a},merge:function(a){if(this.layer.destroyFeatures(),a.success()){var b=a.features;if(b&&0<b.length){var c=this.layer.projection,d=this.layer.map.getProjectionObject();if(!d.equals(c))for(var e,f=0,g=b.length;g>f;++f)(e=b[f].geometry)&&e.transform(c,d);this.layer.addFeatures(b)}}else this.bounds=null;this.response=null,this.layer.events.triggerEvent("loadend",{response:a})},CLASS_NAME:"OpenLayers.Strategy.BBOX"}),OpenLayers.Layer.WorldWind=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{},isBaseLayer:!0,lzd:null,zoomLevels:null,initialize:function(a,b,c,d,e,f){this.lzd=c,this.zoomLevels=d,c=[],c.push(a,b,e,f),OpenLayers.Layer.Grid.prototype.initialize.apply(this,c),this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS)},getZoom:function(){var a=this.map.getZoom();return this.map.getMaxExtent(),a-=Math.log(this.maxResolution/(this.lzd/512))/Math.log(2)},getURL:function(a){a=this.adjustBounds(a);var b=this.getZoom(),c=this.map.getMaxExtent(),d=this.lzd/Math.pow(2,this.getZoom()),e=Math.floor((a.left-c.left)/d);return a=Math.floor((a.bottom-c.bottom)/d),this.map.getResolution()<=this.lzd/512&&this.getZoom()<=this.zoomLevels?this.getFullRequestString({L:b,X:e,Y:a}):OpenLayers.Util.getImageLocation("blank.gif")},CLASS_NAME:"OpenLayers.Layer.WorldWind"}),OpenLayers.Protocol.CSW=function(a){a=OpenLayers.Util.applyDefaults(a,OpenLayers.Protocol.CSW.DEFAULTS);var b=OpenLayers.Protocol.CSW["v"+a.version.replace(/\./g,"_")];if(!b)throw"Unsupported CSW version: "+a.version;return new b(a)},OpenLayers.Protocol.CSW.DEFAULTS={version:"2.0.2"},OpenLayers.Format.WMTSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",yx:{"urn:ogc:def:crs:EPSG::4326":!0},createLayer:function(a,b){if(!("layer"in b))throw Error("Missing property 'layer' in configuration.");for(var c,d=a.contents,e=0,f=d.layers.length;f>e;++e)if(d.layers[e].identifier===b.layer){c=d.layers[e];break}if(!c)throw Error("Layer not found");var g=b.format;!g&&c.formats&&c.formats.length&&(g=c.formats[0]);var h;if(b.matrixSet?h=d.tileMatrixSets[b.matrixSet]:1<=c.tileMatrixSetLinks.length&&(h=d.tileMatrixSets[c.tileMatrixSetLinks[0].tileMatrixSet]),!h)throw Error("matrixSet not found");for(var i,e=0,f=c.styles.length;f>e&&(i=c.styles[e],!i.isDefault);++e);if(d=b.requestEncoding,!d&&(d="KVP",a.operationsMetadata.GetTile.dcp.http)){var j=a.operationsMetadata.GetTile.dcp.http;j.get[0].constraints&&(j=j.get[0].constraints.GetEncoding.allowedValues,j.KVP||!j.REST&&!j.RESTful||(d="REST"))}var j=[],k=b.params||{};delete b.params;for(var l=0,m=c.dimensions.length;m>l;l++){var n=c.dimensions[l];j.push(n.identifier),k.hasOwnProperty(n.identifier)||(k[n.identifier]=n["default"])}var o,l=b.projection||h.supportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"),m=b.units||("EPSG:4326"===l?"degrees":"m"),n=[];for(o in h.matrixIds)h.matrixIds.hasOwnProperty(o)&&n.push(28e-5*h.matrixIds[o].scaleDenominator/OpenLayers.METERS_PER_INCH/OpenLayers.INCHES_PER_UNIT[m]);if("REST"===d&&c.resourceUrls){o=[];for(var f=0,p=c.resourceUrls.length;p>f;++f)e=c.resourceUrls[f],e.format===g&&"tile"===e.resourceType&&o.push(e.template)}else{p=a.operationsMetadata.GetTile.dcp.http.get,o=[];for(var q,e=0,f=p.length;f>e;e++)q=p[e].constraints,(!q||q&&q.GetEncoding.allowedValues[d])&&o.push(p[e].url)}return new OpenLayers.Layer.WMTS(OpenLayers.Util.applyDefaults(b,{url:o,requestEncoding:d,name:c.title,style:i.identifier,format:g,matrixIds:h.matrixIds,matrixSet:h.identifier,projection:l,units:m,resolutions:!1===b.isBaseLayer?void 0:n,serverResolutions:n,tileFullExtent:h.bounds,dimensions:j,params:k}))},CLASS_NAME:"OpenLayers.Format.WMTSCapabilities"}),OpenLayers.Layer.Google.v3={DEFAULTS:{sphericalMercator:!0,projection:"EPSG:900913"},animationEnabled:!0,loadMapObject:function(){this.type||(this.type=google.maps.MapTypeId.ROADMAP);var a,b=OpenLayers.Layer.Google.cache[this.map.id];b?(a=b.mapObject,++b.count):(a=this.map.getCenter(),b=document.createElement("div"),b.className="olForeignContainer",b.style.width="100%",b.style.height="100%",a=new google.maps.Map(b,{center:a?new google.maps.LatLng(a.lat,a.lon):new google.maps.LatLng(0,0),zoom:this.map.getZoom()||0,mapTypeId:this.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1}),b=document.createElement("div"),b.style.width="100%",b.style.height="100%",a.controls[google.maps.ControlPosition.TOP_LEFT].push(b),b={googleControl:b,mapObject:a,count:1},OpenLayers.Layer.Google.cache[this.map.id]=b),this.mapObject=a,this.setGMapVisibility(this.visibility)},onMapResize:function(){this.visibility&&google.maps.event.trigger(this.mapObject,"resize")},setGMapVisibility:function(a){var b=OpenLayers.Layer.Google.cache[this.map.id],c=this.map;if(b){for(var d,e=this.type,f=c.layers,g=f.length-1;g>=0;--g)if(d=f[g],d instanceof OpenLayers.Layer.Google&&!0===d.visibility&&!0===d.inRange){e=d.type,a=!0;break}if(f=this.mapObject.getDiv(),!0===a){if(f.parentNode!==c.div)if(b.rendered)c.div.appendChild(f),b.googleControl.appendChild(c.viewPortDiv),google.maps.event.trigger(this.mapObject,"resize");else{var h=this;google.maps.event.addListenerOnce(this.mapObject,"tilesloaded",function(){b.rendered=!0,h.setGMapVisibility(h.getVisibility()),h.moveTo(h.map.getCenter())})}this.mapObject.setMapTypeId(e)}else b.googleControl.hasChildNodes()&&(c.div.appendChild(c.viewPortDiv),c.div.removeChild(f))}},getMapContainer:function(){return this.mapObject.getDiv()},getMapObjectBoundsFromOLBounds:function(a){var b=null;return null!=a&&(b=this.sphericalMercator?this.inverseMercator(a.bottom,a.left):new OpenLayers.LonLat(a.bottom,a.left),a=this.sphericalMercator?this.inverseMercator(a.top,a.right):new OpenLayers.LonLat(a.top,a.right),b=new google.maps.LatLngBounds(new google.maps.LatLng(b.lat,b.lon),new google.maps.LatLng(a.lat,a.lon))),b},getMapObjectLonLatFromMapObjectPixel:function(a){var b=this.map.getSize(),c=this.getLongitudeFromMapObjectLonLat(this.mapObject.center),d=this.getLatitudeFromMapObjectLonLat(this.mapObject.center),e=this.map.getResolution();return a=new OpenLayers.LonLat(c+(a.x-b.w/2)*e,d-(a.y-b.h/2)*e),this.wrapDateLine&&(a=a.wrapDateLine(this.maxExtent)),this.getMapObjectLonLatFromLonLat(a.lon,a.lat)},getMapObjectPixelFromMapObjectLonLat:function(a){var b=this.getLongitudeFromMapObjectLonLat(a);a=this.getLatitudeFromMapObjectLonLat(a);var c=this.map.getResolution(),d=this.map.getExtent();return this.getMapObjectPixelFromXY(1/c*(b-d.left),1/c*(d.top-a))},setMapObjectCenter:function(a,b){if(!1===this.animationEnabled&&b!=this.mapObject.zoom){var c=this.getMapContainer();google.maps.event.addListenerOnce(this.mapObject,"idle",function(){c.style.visibility=""}),c.style.visibility="hidden"}this.mapObject.setOptions({center:a,zoom:b})},getMapObjectZoomFromMapObjectBounds:function(a){return this.mapObject.getBoundsZoomLevel(a)},getMapObjectLonLatFromLonLat:function(a,b){var c;return this.sphericalMercator?(c=this.inverseMercator(a,b),c=new google.maps.LatLng(c.lat,c.lon)):c=new google.maps.LatLng(b,a),c},getMapObjectPixelFromXY:function(a,b){return new google.maps.Point(a,b)}},OpenLayers.Format.WPSDescribeProcess=OpenLayers.Class(OpenLayers.Format.XML,{VERSION:"1.0.0",namespaces:{wps:"http://www.opengis.net/wps/1.0.0",ows:"http://www.opengis.net/ows/1.1",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",defaultPrefix:"wps",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b={};return this.readNode(a,b),b},readers:{wps:{ProcessDescriptions:function(a,b){b.processDescriptions={},this.readChildNodes(a,b.processDescriptions)},ProcessDescription:function(a,b){var c={processVersion:this.getAttributeNS(a,this.namespaces.wps,"processVersion"),statusSupported:"true"===a.getAttribute("statusSupported"),storeSupported:"true"===a.getAttribute("storeSupported")};this.readChildNodes(a,c),b[c.identifier]=c},DataInputs:function(a,b){b.dataInputs=[],this.readChildNodes(a,b.dataInputs)},ProcessOutputs:function(a,b){b.processOutputs=[],this.readChildNodes(a,b.processOutputs)},Output:function(a,b){var c={};this.readChildNodes(a,c),b.push(c)},ComplexOutput:function(a,b){b.complexOutput={},this.readChildNodes(a,b.complexOutput)},LiteralOutput:function(a,b){b.literalOutput={},this.readChildNodes(a,b.literalOutput)},Input:function(a,b){var c={maxOccurs:parseInt(a.getAttribute("maxOccurs")),minOccurs:parseInt(a.getAttribute("minOccurs"))};this.readChildNodes(a,c),b.push(c)},BoundingBoxData:function(a,b){b.boundingBoxData={},this.readChildNodes(a,b.boundingBoxData)},CRS:function(a,b){b.CRSs||(b.CRSs={}),b.CRSs[this.getChildValue(a)]=!0},LiteralData:function(a,b){b.literalData={},this.readChildNodes(a,b.literalData)},ComplexData:function(a,b){b.complexData={},this.readChildNodes(a,b.complexData)},Default:function(a,b){b["default"]={},this.readChildNodes(a,b["default"])},Supported:function(a,b){b.supported={},this.readChildNodes(a,b.supported)},Format:function(a,b){var c={};this.readChildNodes(a,c),b.formats||(b.formats={}),b.formats[c.mimeType]=!0},MimeType:function(a,b){b.mimeType=this.getChildValue(a)}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WPSDescribeProcess"}),OpenLayers.Format.WKT=OpenLayers.Class(OpenLayers.Format,{initialize:function(a){this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},OpenLayers.Format.prototype.initialize.apply(this,[a])},read:function(a){var b,c;if(a=a.replace(/[\n\r]/g," "),(c=this.regExes.typeStr.exec(a))&&(a=c[1].toLowerCase(),c=c[2],this.parse[a]&&(b=this.parse[a].apply(this,[c])),this.internalProjection&&this.externalProjection))if(b&&"OpenLayers.Feature.Vector"==b.CLASS_NAME)b.geometry.transform(this.externalProjection,this.internalProjection);else if(b&&"geometrycollection"!=a&&"object"==typeof b)for(a=0,c=b.length;c>a;a++)b[a].geometry.transform(this.externalProjection,this.internalProjection);return b},write:function(a){var b,c;a.constructor==Array?c=!0:(a=[a],c=!1);var d=[];c&&d.push("GEOMETRYCOLLECTION(");for(var e=0,f=a.length;f>e;++e)c&&e>0&&d.push(","),b=a[e].geometry,d.push(this.extractGeometry(b));return c&&d.push(")"),d.join("")},extractGeometry:function(a){var b=a.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[b]?(this.internalProjection&&this.externalProjection&&(a=a.clone(),a.transform(this.internalProjection,this.externalProjection)),("collection"==b?"GEOMETRYCOLLECTION":b.toUpperCase())+"("+this.extract[b].apply(this,[a])+")"):null},extract:{point:function(a){return a.x+" "+a.y},multipoint:function(a){for(var b=[],c=0,d=a.components.length;d>c;++c)b.push("("+this.extract.point.apply(this,[a.components[c]])+")");return b.join(",")},linestring:function(a){for(var b=[],c=0,d=a.components.length;d>c;++c)b.push(this.extract.point.apply(this,[a.components[c]]));return b.join(",")},multilinestring:function(a){for(var b=[],c=0,d=a.components.length;d>c;++c)b.push("("+this.extract.linestring.apply(this,[a.components[c]])+")");return b.join(",")},polygon:function(a){for(var b=[],c=0,d=a.components.length;d>c;++c)b.push("("+this.extract.linestring.apply(this,[a.components[c]])+")");return b.join(",")},multipolygon:function(a){for(var b=[],c=0,d=a.components.length;d>c;++c)b.push("("+this.extract.polygon.apply(this,[a.components[c]])+")");return b.join(",")},collection:function(a){for(var b=[],c=0,d=a.components.length;d>c;++c)b.push(this.extractGeometry.apply(this,[a.components[c]]));return b.join(",")}},parse:{point:function(a){return a=OpenLayers.String.trim(a).split(this.regExes.spaces),new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(a[0],a[1]))},multipoint:function(a){for(var b=OpenLayers.String.trim(a).split(","),c=[],d=0,e=b.length;e>d;++d)a=b[d].replace(this.regExes.trimParens,"$1"),c.push(this.parse.point.apply(this,[a]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPoint(c))},linestring:function(a){a=OpenLayers.String.trim(a).split(",");for(var b=[],c=0,d=a.length;d>c;++c)b.push(this.parse.point.apply(this,[a[c]]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(b))},multilinestring:function(a){for(var b=OpenLayers.String.trim(a).split(this.regExes.parenComma),c=[],d=0,e=b.length;e>d;++d)a=b[d].replace(this.regExes.trimParens,"$1"),c.push(this.parse.linestring.apply(this,[a]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiLineString(c))},polygon:function(a){var b;a=OpenLayers.String.trim(a).split(this.regExes.parenComma);for(var c=[],d=0,e=a.length;e>d;++d)b=a[d].replace(this.regExes.trimParens,"$1"),b=this.parse.linestring.apply(this,[b]).geometry,b=new OpenLayers.Geometry.LinearRing(b.components),c.push(b);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon(c))},multipolygon:function(a){for(var b=OpenLayers.String.trim(a).split(this.regExes.doubleParenComma),c=[],d=0,e=b.length;e>d;++d)a=b[d].replace(this.regExes.trimParens,"$1"),c.push(this.parse.polygon.apply(this,[a]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPolygon(c))},geometrycollection:function(a){a=a.replace(/,\s*([A-Za-z])/g,"|$1"),a=OpenLayers.String.trim(a).split("|");for(var b=[],c=0,d=a.length;d>c;++c)b.push(OpenLayers.Format.WKT.prototype.read.apply(this,[a[c]]));return b}},CLASS_NAME:"OpenLayers.Format.WKT"}),OpenLayers.WPSProcess=OpenLayers.Class({client:null,server:null,identifier:null,description:null,localWPS:"http://geoserver/wps",formats:null,chained:0,executeCallbacks:null,initialize:function(a){OpenLayers.Util.extend(this,a),this.executeCallbacks=[],this.formats={"application/wkt":new OpenLayers.Format.WKT,"application/json":new OpenLayers.Format.GeoJSON}},describe:function(a){if(a=a||{},this.description){if(a.callback){var b=this.description;window.setTimeout(function(){a.callback.call(a.scope,b)},0)}}else this.client.describeProcess(this.server,this.identifier,function(b){this.description||this.parseDescription(b),a.callback&&a.callback.call(a.scope,this.description)},this)},configure:function(a){return this.describe({callback:function(){var b,c,d,e=this.description,f=a.inputs;for(c=0,d=e.dataInputs.length;d>c;++c)b=e.dataInputs[c],this.setInputData(b,f[b.identifier]);a.callback&&a.callback.call(a.scope)},scope:this}),this},execute:function(a){this.configure({inputs:a.inputs,callback:function(){var b=this,c=this.getOutputIndex(b.description.processOutputs,a.output);b.setResponseForm({outputIndex:c}),function d(){OpenLayers.Util.removeItem(b.executeCallbacks,d),0!==b.chained?b.executeCallbacks.push(d):OpenLayers.Request.POST({url:b.client.servers[b.server].url,data:(new OpenLayers.Format.WPSExecute).write(b.description),success:function(d){var e=b.findMimeType(b.description.processOutputs[c].complexOutput.supported.formats);d=b.formats[e].read(d.responseText),d instanceof OpenLayers.Feature.Vector&&(d=[d]),a.success&&(e={},e[a.output||"result"]=d,a.success.call(a.scope,e))},scope:b})}()},scope:this})},output:function(a){return new OpenLayers.WPSProcess.ChainLink({process:this,output:a})},parseDescription:function(a){a=this.client.servers[this.server],this.description=(new OpenLayers.Format.WPSDescribeProcess).read(a.processDescription[this.identifier]).processDescriptions[this.identifier]},setInputData:function(a,b){if(delete a.data,delete a.reference,b instanceof OpenLayers.WPSProcess.ChainLink)++this.chained,a.reference={method:"POST",href:b.process.server===this.server?this.localWPS:this.client.servers[b.process.server].url},b.process.describe({callback:function(){--this.chained,this.chainProcess(a,b)},scope:this});else{a.data={};var c=a.complexData;c?(c=this.findMimeType(c.supported.formats),a.data.complexData={mimeType:c,value:this.formats[c].write(this.toFeatures(b))}):a.data.literalData={value:b}}},setResponseForm:function(a){a=a||{};var b=this.description.processOutputs[a.outputIndex||0];this.description.responseForm={rawDataOutput:{identifier:b.identifier,mimeType:this.findMimeType(b.complexOutput.supported.formats,a.supportedFormats)}}},getOutputIndex:function(a,b){var c;if(b){for(var d=a.length-1;d>=0;--d)if(a[d].identifier===b){c=d;break}}else c=0;return c},chainProcess:function(a,b){var c=this.getOutputIndex(b.process.description.processOutputs,b.output);a.reference.mimeType=this.findMimeType(a.complexData.supported.formats,b.process.description.processOutputs[c].complexOutput.supported.formats);var d={};for(d[a.reference.mimeType]=!0,b.process.setResponseForm({outputIndex:c,supportedFormats:d}),a.reference.body=b.process.description;0<this.executeCallbacks.length;)this.executeCallbacks[0]()},toFeatures:function(a){var b=OpenLayers.Util.isArray(a);b||(a=[a]);for(var c,d=Array(a.length),e=0,f=a.length;f>e;++e)c=a[e],d[e]=c instanceof OpenLayers.Feature.Vector?c:new OpenLayers.Feature.Vector(c);return b?d:d[0]},findMimeType:function(a,b){b=b||this.formats;for(var c in a)if(c in b)return c},CLASS_NAME:"OpenLayers.WPSProcess"}),OpenLayers.WPSProcess.ChainLink=OpenLayers.Class({process:null,output:null,initialize:function(a){OpenLayers.Util.extend(this,a)},CLASS_NAME:"OpenLayers.WPSProcess.ChainLink"}),OpenLayers.WPSClient=OpenLayers.Class({servers:null,version:"1.0.0",lazy:!1,events:null,initialize:function(a){OpenLayers.Util.extend(this,a),this.events=new OpenLayers.Events(this),this.servers={};for(var b in a.servers)this.servers[b]="string"==typeof a.servers[b]?{url:a.servers[b],version:this.version,processDescription:{}}:a.servers[b];
},execute:function(a){this.getProcess(a.server,a.process).execute({inputs:a.inputs,success:a.success,scope:a.scope})},getProcess:function(a,b){var c=new OpenLayers.WPSProcess({client:this,server:a,identifier:b});return this.lazy||c.describe(),c},describeProcess:function(a,b,c,d){var e=this.servers[a];e.processDescription[b]?window.setTimeout(function(){c.call(d,e.processDescription[b])},0):b in e.processDescription?this.events.register("describeprocess",this,function f(a){a.identifier===b&&(this.events.unregister("describeprocess",this,f),c.call(d,a.raw))}):(e.processDescription[b]=null,OpenLayers.Request.GET({url:e.url,params:{SERVICE:"WPS",VERSION:e.version,REQUEST:"DescribeProcess",IDENTIFIER:b},success:function(a){e.processDescription[b]=a.responseText,this.events.triggerEvent("describeprocess",{identifier:b,raw:a.responseText})},scope:this}))},destroy:function(){this.events.destroy(),this.servers=this.events=null},CLASS_NAME:"OpenLayers.WPSClient"}),OpenLayers.Format.CSWGetRecords.v2_0_2=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{csw:"http://www.opengis.net/cat/csw/2.0.2",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",gmd:"http://www.isotc211.org/2005/gmd",geonet:"http://www.fao.org/geonetwork",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"csw",version:"2.0.2",schemaLocation:"http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",requestId:null,resultType:null,outputFormat:null,outputSchema:null,startPosition:null,maxRecords:null,DistributedSearch:null,ResponseHandler:null,Query:null,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b={};return this.readNode(a,b),b},readers:{csw:{GetRecordsResponse:function(a,b){b.records=[],this.readChildNodes(a,b);var c=this.getAttributeNS(a,"","version");""!=c&&(b.version=c)},RequestId:function(a,b){b.RequestId=this.getChildValue(a)},SearchStatus:function(a,b){b.SearchStatus={};var c=this.getAttributeNS(a,"","timestamp");""!=c&&(b.SearchStatus.timestamp=c)},SearchResults:function(a,b){this.readChildNodes(a,b);for(var c=a.attributes,d={},e=0,f=c.length;f>e;++e)d[c[e].name]="numberOfRecordsMatched"==c[e].name||"numberOfRecordsReturned"==c[e].name||"nextRecord"==c[e].name?parseInt(c[e].nodeValue):c[e].nodeValue;b.SearchResults=d},SummaryRecord:function(a,b){var c={type:"SummaryRecord"};this.readChildNodes(a,c),b.records.push(c)},BriefRecord:function(a,b){var c={type:"BriefRecord"};this.readChildNodes(a,c),b.records.push(c)},DCMIRecord:function(a,b){var c={type:"DCMIRecord"};this.readChildNodes(a,c),b.records.push(c)},Record:function(a,b){var c={type:"Record"};this.readChildNodes(a,c),b.records.push(c)},"*":function(a,b){var c=a.localName||a.nodeName.split(":").pop();b[c]=this.getChildValue(a)}},geonet:{info:function(a,b){var c={};this.readChildNodes(a,c),b.gninfo=c}},dc:{"*":function(a,b){var c=a.localName||a.nodeName.split(":").pop();OpenLayers.Util.isArray(b[c])||(b[c]=[]);for(var d={},e=a.attributes,f=0,g=e.length;g>f;++f)d[e[f].name]=e[f].nodeValue;d.value=this.getChildValue(a),""!=d.value&&b[c].push(d)}},dct:{"*":function(a,b){var c=a.localName||a.nodeName.split(":").pop();OpenLayers.Util.isArray(b[c])||(b[c]=[]),b[c].push(this.getChildValue(a))}},ows:OpenLayers.Util.applyDefaults({BoundingBox:function(a,b){b.bounds&&(b.BoundingBox=[{crs:b.projection,value:[b.bounds.left,b.bounds.bottom,b.bounds.right,b.bounds.top]}],delete b.projection,delete b.bounds),OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows.BoundingBox.apply(this,arguments)}},OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows)},write:function(a){return a=this.writeNode("csw:GetRecords",a),a.setAttribute("xmlns:gmd",this.namespaces.gmd),OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{csw:{GetRecords:function(a){a||(a={});var b=this.createElementNSPlus("csw:GetRecords",{attributes:{service:"CSW",version:this.version,requestId:a.requestId||this.requestId,resultType:a.resultType||this.resultType,outputFormat:a.outputFormat||this.outputFormat,outputSchema:a.outputSchema||this.outputSchema,startPosition:a.startPosition||this.startPosition,maxRecords:a.maxRecords||this.maxRecords}});(a.DistributedSearch||this.DistributedSearch)&&this.writeNode("csw:DistributedSearch",a.DistributedSearch||this.DistributedSearch,b);var c=a.ResponseHandler||this.ResponseHandler;if(OpenLayers.Util.isArray(c)&&0<c.length)for(var d=0,e=c.length;e>d;d++)this.writeNode("csw:ResponseHandler",c[d],b);return this.writeNode("Query",a.Query||this.Query,b),b},DistributedSearch:function(a){return this.createElementNSPlus("csw:DistributedSearch",{attributes:{hopCount:a.hopCount}})},ResponseHandler:function(a){return this.createElementNSPlus("csw:ResponseHandler",{value:a.value})},Query:function(a){a||(a={});var b=this.createElementNSPlus("csw:Query",{attributes:{typeNames:a.typeNames||"csw:Record"}}),c=a.ElementName;if(OpenLayers.Util.isArray(c)&&0<c.length)for(var d=0,e=c.length;e>d;d++)this.writeNode("csw:ElementName",c[d],b);else this.writeNode("csw:ElementSetName",a.ElementSetName||{value:"summary"},b);return a.Constraint&&this.writeNode("csw:Constraint",a.Constraint,b),a.SortBy&&this.writeNode("ogc:SortBy",a.SortBy,b),b},ElementName:function(a){return this.createElementNSPlus("csw:ElementName",{value:a.value})},ElementSetName:function(a){return this.createElementNSPlus("csw:ElementSetName",{attributes:{typeNames:a.typeNames},value:a.value})},Constraint:function(a){var b=this.createElementNSPlus("csw:Constraint",{attributes:{version:a.version}});if(a.Filter){var c=new OpenLayers.Format.Filter({version:a.version});b.appendChild(c.write(a.Filter))}else a.CqlText&&(a=this.createElementNSPlus("CqlText",{value:a.CqlText.value}),b.appendChild(a));return b}},ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.CSWGetRecords.v2_0_2"}),OpenLayers.Marker.Box=OpenLayers.Class(OpenLayers.Marker,{bounds:null,div:null,initialize:function(a,b,c){this.bounds=a,this.div=OpenLayers.Util.createDiv(),this.div.style.overflow="hidden",this.events=new OpenLayers.Events(this,this.div),this.setBorder(b,c)},destroy:function(){this.div=this.bounds=null,OpenLayers.Marker.prototype.destroy.apply(this,arguments)},setBorder:function(a,b){a||(a="red"),b||(b=2),this.div.style.border=b+"px solid "+a},draw:function(a,b){return OpenLayers.Util.modifyDOMElement(this.div,null,a,b),this.div},onScreen:function(){var a=!1;return this.map&&(a=this.map.getExtent().containsBounds(this.bounds,!0,!0)),a},display:function(a){this.div.style.display=a?"":"none"},CLASS_NAME:"OpenLayers.Marker.Box"}),OpenLayers.Format.Text=OpenLayers.Class(OpenLayers.Format,{defaultStyle:null,extractStyles:!0,initialize:function(a){a=a||{},!1!==a.extractStyles&&(a.defaultStyle={externalGraphic:OpenLayers.Util.getImageLocation("marker.png"),graphicWidth:21,graphicHeight:25,graphicXOffset:-10.5,graphicYOffset:-12.5}),OpenLayers.Format.prototype.initialize.apply(this,[a])},read:function(a){a=a.split("\n");for(var b,c=[],d=0;d<a.length-1;d++){var e=a[d].replace(/^\s*/,"").replace(/\s*$/,"");if("#"!=e.charAt(0))if(b){for(var e=e.split("	"),f=new OpenLayers.Geometry.Point(0,0),g={},h=this.defaultStyle?OpenLayers.Util.applyDefaults({},this.defaultStyle):null,i=!1,j=0;j<e.length;j++)if(e[j])if("point"==b[j])i=e[j].split(","),f.y=parseFloat(i[0]),f.x=parseFloat(i[1]),i=!0;else if("lat"==b[j])f.y=parseFloat(e[j]),i=!0;else if("lon"==b[j])f.x=parseFloat(e[j]),i=!0;else if("title"==b[j])g.title=e[j];else if("image"==b[j]||"icon"==b[j]&&h)h.externalGraphic=e[j];else if("iconSize"==b[j]&&h){var k=e[j].split(",");h.graphicWidth=parseFloat(k[0]),h.graphicHeight=parseFloat(k[1])}else"iconOffset"==b[j]&&h?(k=e[j].split(","),h.graphicXOffset=parseFloat(k[0]),h.graphicYOffset=parseFloat(k[1])):"description"==b[j]?g.description=e[j]:"overflow"==b[j]?g.overflow=e[j]:g[b[j]]=e[j];i&&(this.internalProjection&&this.externalProjection&&f.transform(this.externalProjection,this.internalProjection),e=new OpenLayers.Feature.Vector(f,g,h),c.push(e))}else b=e.split("	")}return c},CLASS_NAME:"OpenLayers.Format.Text"}),OpenLayers.Layer.Text=OpenLayers.Class(OpenLayers.Layer.Markers,{location:null,features:null,formatOptions:null,selectedFeature:null,initialize:function(a,b){OpenLayers.Layer.Markers.prototype.initialize.apply(this,arguments),this.features=[]},destroy:function(){OpenLayers.Layer.Markers.prototype.destroy.apply(this,arguments),this.clearFeatures(),this.features=null},loadText:function(){this.loaded||null==this.location||(this.events.triggerEvent("loadstart"),OpenLayers.Request.GET({url:this.location,success:this.parseData,failure:function(a){this.events.triggerEvent("loadend")},scope:this}),this.loaded=!0)},moveTo:function(a,b,c){OpenLayers.Layer.Markers.prototype.moveTo.apply(this,arguments),this.visibility&&!this.loaded&&this.loadText()},parseData:function(a){a=a.responseText;var b={};OpenLayers.Util.extend(b,this.formatOptions),this.map&&!this.projection.equals(this.map.getProjectionObject())&&(b.externalProjection=this.projection,b.internalProjection=this.map.getProjectionObject()),a=new OpenLayers.Format.Text(b).read(a);for(var b=0,c=a.length;c>b;b++){var d,e,f,g={},h=a[b];d=new OpenLayers.LonLat(h.geometry.x,h.geometry.y),h.style.graphicWidth&&h.style.graphicHeight&&(e=new OpenLayers.Size(h.style.graphicWidth,h.style.graphicHeight)),void 0!==h.style.graphicXOffset&&void 0!==h.style.graphicYOffset&&(f=new OpenLayers.Pixel(h.style.graphicXOffset,h.style.graphicYOffset)),null!=h.style.externalGraphic?g.icon=new OpenLayers.Icon(h.style.externalGraphic,e,f):(g.icon=OpenLayers.Marker.defaultIcon(),null!=e&&g.icon.setSize(e)),null!=h.attributes.title&&null!=h.attributes.description&&(g.popupContentHTML="<h2>"+h.attributes.title+"</h2><p>"+h.attributes.description+"</p>"),g.overflow=h.attributes.overflow||"auto",g=new OpenLayers.Feature(this,d,g),this.features.push(g),d=g.createMarker(),null!=h.attributes.title&&null!=h.attributes.description&&d.events.register("click",g,this.markerClick),this.addMarker(d)}this.events.triggerEvent("loadend")},markerClick:function(a){var b=this==this.layer.selectedFeature;this.layer.selectedFeature=b?null:this;for(var c=0,d=this.layer.map.popups.length;d>c;c++)this.layer.map.removePopup(this.layer.map.popups[c]);b||this.layer.map.addPopup(this.createPopup()),OpenLayers.Event.stop(a)},clearFeatures:function(){if(null!=this.features)for(;0<this.features.length;){var a=this.features[0];OpenLayers.Util.removeItem(this.features,a),a.destroy()}},CLASS_NAME:"OpenLayers.Layer.Text"}),OpenLayers.Handler.RegularPolygon=OpenLayers.Class(OpenLayers.Handler.Drag,{sides:4,radius:null,snapAngle:null,snapToggle:"shiftKey",layerOptions:null,persist:!1,irregular:!1,citeCompliant:!1,angle:null,fixedRadius:!1,feature:null,layer:null,origin:null,initialize:function(a,b,c){c&&c.layerOptions&&c.layerOptions.styleMap||(this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style["default"],{})),OpenLayers.Handler.Drag.prototype.initialize.apply(this,[a,b,c]),this.options=c?c:{}},setOptions:function(a){OpenLayers.Util.extend(this.options,a),OpenLayers.Util.extend(this,a)},activate:function(){var a=!1;return OpenLayers.Handler.Drag.prototype.activate.apply(this,arguments)&&(a=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions),this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,a),this.map.addLayer(this.layer),a=!0),a},deactivate:function(){var a=!1;return OpenLayers.Handler.Drag.prototype.deactivate.apply(this,arguments)&&(this.dragging&&this.cancel(),null!=this.layer.map&&(this.layer.destroy(!1),this.feature&&this.feature.destroy()),this.feature=this.layer=null,a=!0),a},down:function(a){this.fixedRadius=!!this.radius,a=this.layer.getLonLatFromViewPortPx(a.xy),this.origin=new OpenLayers.Geometry.Point(a.lon,a.lat),(!this.fixedRadius||this.irregular)&&(this.radius=this.map.getResolution()),this.persist&&this.clear(),this.feature=new OpenLayers.Feature.Vector,this.createGeometry(),this.callback("create",[this.origin,this.feature]),this.layer.addFeatures([this.feature],{silent:!0}),this.layer.drawFeature(this.feature,this.style)},move:function(a){var b=this.layer.getLonLatFromViewPortPx(a.xy),b=new OpenLayers.Geometry.Point(b.lon,b.lat);if(this.irregular?(a=Math.sqrt(2)*Math.abs(b.y-this.origin.y)/2,this.radius=Math.max(this.map.getResolution()/2,a)):this.fixedRadius?this.origin=b:(this.calculateAngle(b,a),this.radius=Math.max(this.map.getResolution()/2,b.distanceTo(this.origin))),this.modifyGeometry(),this.irregular){a=b.x-this.origin.x;var c,b=b.y-this.origin.y;c=0==b?a/(this.radius*Math.sqrt(2)):a/b,this.feature.geometry.resize(1,this.origin,c),this.feature.geometry.move(a/2,b/2)}this.layer.drawFeature(this.feature,this.style)},up:function(a){this.finalize(),this.start==this.last&&this.callback("done",[a.xy])},out:function(a){this.finalize()},createGeometry:function(){this.angle=Math.PI*(1/this.sides-.5),this.snapAngle&&(this.angle+=this.snapAngle*(Math.PI/180)),this.feature.geometry=OpenLayers.Geometry.Polygon.createRegularPolygon(this.origin,this.radius,this.sides,this.snapAngle)},modifyGeometry:function(){var a,b,c=this.feature.geometry.components[0];c.components.length!=this.sides+1&&(this.createGeometry(),c=this.feature.geometry.components[0]);for(var d=0;d<this.sides;++d)b=c.components[d],a=this.angle+2*d*Math.PI/this.sides,b.x=this.origin.x+this.radius*Math.cos(a),b.y=this.origin.y+this.radius*Math.sin(a),b.clearBounds()},calculateAngle:function(a,b){var c=Math.atan2(a.y-this.origin.y,a.x-this.origin.x);if(this.snapAngle&&this.snapToggle&&!b[this.snapToggle]){var d=Math.PI/180*this.snapAngle;this.angle=Math.round(c/d)*d}else this.angle=c},cancel:function(){this.callback("cancel",null),this.finalize()},finalize:function(){this.origin=null,this.radius=this.options.radius},clear:function(){this.layer&&(this.layer.renderer.clear(),this.layer.destroyFeatures())},callback:function(a,b){this.callbacks[a]&&this.callbacks[a].apply(this.control,[this.feature.geometry.clone()]),this.persist||"done"!=a&&"cancel"!=a||this.clear()},CLASS_NAME:"OpenLayers.Handler.RegularPolygon"}),OpenLayers.Control.SLDSelect=OpenLayers.Class(OpenLayers.Control,{clearOnDeactivate:!1,layers:null,callbacks:null,selectionSymbolizer:{Polygon:{fillColor:"#FF0000",stroke:!1},Line:{strokeColor:"#FF0000",strokeWidth:2},Point:{graphicName:"square",fillColor:"#FF0000",pointRadius:5}},layerOptions:null,sketchStyle:null,wfsCache:{},layerCache:{},initialize:function(a,b){OpenLayers.Control.prototype.initialize.apply(this,[b]),this.callbacks=OpenLayers.Util.extend({done:this.select,click:this.select},this.callbacks),this.handlerOptions=this.handlerOptions||{},this.layerOptions=OpenLayers.Util.applyDefaults(this.layerOptions,{displayInLayerSwitcher:!1,tileOptions:{maxGetUrlLength:2048}}),this.sketchStyle&&(this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({"default":this.sketchStyle})})),this.handler=new a(this,this.callbacks,this.handlerOptions)},destroy:function(){for(var a in this.layerCache)delete this.layerCache[a];for(a in this.wfsCache)delete this.wfsCache[a];OpenLayers.Control.prototype.destroy.apply(this,arguments)},coupleLayerVisiblity:function(a){this.setVisibility(a.object.getVisibility())},createSelectionLayer:function(a){var b;return this.layerCache[a.id]?b=this.layerCache[a.id]:(b=new OpenLayers.Layer.WMS(a.name,a.url,a.params,OpenLayers.Util.applyDefaults(this.layerOptions,a.getOptions())),this.layerCache[a.id]=b,!1===this.layerOptions.displayInLayerSwitcher&&a.events.on({visibilitychanged:this.coupleLayerVisiblity,scope:b}),this.map.addLayer(b)),b},createSLD:function(a,b,c){for(var d={version:"1.0.0",namedLayers:{}},e=(""+a.params.LAYERS).split(","),f=0,g=e.length;g>f;f++){var h=e[f];d.namedLayers[h]={name:h,userStyles:[]};var i=this.selectionSymbolizer,j=c[f];0<=j.type.indexOf("Polygon")?i={Polygon:this.selectionSymbolizer.Polygon}:0<=j.type.indexOf("LineString")?i={Line:this.selectionSymbolizer.Line}:0<=j.type.indexOf("Point")&&(i={Point:this.selectionSymbolizer.Point}),d.namedLayers[h].userStyles.push({name:"default",rules:[new OpenLayers.Rule({symbolizer:i,filter:b[f],maxScaleDenominator:a.options.minScale})]})}return new OpenLayers.Format.SLD({srsName:this.map.getProjection()}).write(d)},parseDescribeLayer:function(a){var b=new OpenLayers.Format.WMSDescribeLayer,c=a.responseXML;c&&c.documentElement||(c=a.responseText),a=b.read(c);for(var b=[],c=null,d=0,e=a.length;e>d;d++)"WFS"==a[d].owsType&&(b.push(a[d].typeName),c=a[d].owsURL);OpenLayers.Request.GET({url:c,params:{SERVICE:"WFS",TYPENAME:b.toString(),REQUEST:"DescribeFeatureType",VERSION:"1.0.0"},callback:function(a){var b=new OpenLayers.Format.WFSDescribeFeatureType,c=a.responseXML;c&&c.documentElement||(c=a.responseText),a=b.read(c),this.control.wfsCache[this.layer.id]=a,this.control._queue&&this.control.applySelection()},scope:this})},getGeometryAttributes:function(a){var b=[];a=this.wfsCache[a.id];for(var c=0,d=a.featureTypes.length;d>c;c++)for(var e=a.featureTypes[c].properties,f=0,g=e.length;g>f;f++){var h=e[f],i=h.type;(0<=i.indexOf("LineString")||0<=i.indexOf("GeometryAssociationType")||0<=i.indexOf("GeometryPropertyType")||0<=i.indexOf("Point")||0<=i.indexOf("Polygon"))&&b.push(h)}return b},activate:function(){var a=OpenLayers.Control.prototype.activate.call(this);if(a)for(var b=0,c=this.layers.length;c>b;b++){var d=this.layers[b];d&&!this.wfsCache[d.id]&&OpenLayers.Request.GET({url:d.url,params:{SERVICE:"WMS",VERSION:d.params.VERSION,LAYERS:d.params.LAYERS,REQUEST:"DescribeLayer"},callback:this.parseDescribeLayer,scope:{layer:d,control:this}})}return a},deactivate:function(){var a=OpenLayers.Control.prototype.deactivate.call(this);if(a)for(var b=0,c=this.layers.length;c>b;b++){var d=this.layers[b];if(d&&!0===this.clearOnDeactivate){var e=this.layerCache,f=e[d.id];f&&(d.events.un({visibilitychanged:this.coupleLayerVisiblity,scope:f}),f.destroy(),delete e[d.id])}}return a},setLayers:function(a){this.active?(this.deactivate(),this.layers=a,this.activate()):this.layers=a},createFilter:function(a,b){var c=null;return this.handler instanceof OpenLayers.Handler.RegularPolygon?c=new OpenLayers.Filter.Spatial(!0===this.handler.irregular?{type:OpenLayers.Filter.Spatial.BBOX,property:a.name,value:b.getBounds()}:{type:OpenLayers.Filter.Spatial.INTERSECTS,property:a.name,value:b}):this.handler instanceof OpenLayers.Handler.Polygon?c=new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:a.name,value:b}):this.handler instanceof OpenLayers.Handler.Path?c=new OpenLayers.Filter.Spatial(0<=a.type.indexOf("Point")?{type:OpenLayers.Filter.Spatial.DWITHIN,property:a.name,distance:.01*this.map.getExtent().getWidth(),distanceUnits:this.map.getUnits(),value:b}:{type:OpenLayers.Filter.Spatial.INTERSECTS,property:a.name,value:b}):this.handler instanceof OpenLayers.Handler.Click&&(c=new OpenLayers.Filter.Spatial(0<=a.type.indexOf("Polygon")?{type:OpenLayers.Filter.Spatial.INTERSECTS,property:a.name,value:b}:{type:OpenLayers.Filter.Spatial.DWITHIN,property:a.name,distance:.01*this.map.getExtent().getWidth(),distanceUnits:this.map.getUnits(),value:b})),c},select:function(a){this._queue=function(){for(var b=0,c=this.layers.length;c>b;b++){for(var d=this.layers[b],e=this.getGeometryAttributes(d),f=[],g=0,h=e.length;h>g;g++){var i=e[g];if(null!==i){if(!(a instanceof OpenLayers.Geometry)){var j=this.map.getLonLatFromPixel(a.xy);a=new OpenLayers.Geometry.Point(j.lon,j.lat)}i=this.createFilter(i,a),null!==i&&f.push(i)}}g=this.createSelectionLayer(d),this.events.triggerEvent("selected",{layer:d,filters:f}),d=this.createSLD(d,f,e),g.mergeNewParams({SLD_BODY:d}),delete this._queue}},this.applySelection()},applySelection:function(){for(var a=!0,b=0,c=this.layers.length;c>b;b++)if(!this.wfsCache[this.layers[b].id]){a=!1;break}a&&this._queue.call(this)},CLASS_NAME:"OpenLayers.Control.SLDSelect"}),OpenLayers.Control.Scale=OpenLayers.Class(OpenLayers.Control,{element:null,geodesic:!1,initialize:function(a,b){OpenLayers.Control.prototype.initialize.apply(this,[b]),this.element=OpenLayers.Util.getElement(a)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||(this.element=document.createElement("div"),this.div.appendChild(this.element)),this.map.events.register("moveend",this,this.updateScale),this.updateScale(),this.div},updateScale:function(){var a;if(!0===this.geodesic){if(!this.map.getUnits())return;a=OpenLayers.INCHES_PER_UNIT,a=(this.map.getGeodesicPixelSize().w||1e-6)*a.km*OpenLayers.DOTS_PER_INCH}else a=this.map.getScale();a&&(a=a>=9500&&95e4>=a?Math.round(a/1e3)+"K":a>=95e4?Math.round(a/1e6)+"M":Math.round(a),this.element.innerHTML=OpenLayers.i18n("Scale = 1 : ${scaleDenom}",{scaleDenom:a}))},CLASS_NAME:"OpenLayers.Control.Scale"}),OpenLayers.Layer.MapGuide=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,useHttpTile:!1,singleTile:!1,useOverlay:!1,useAsyncOverlay:!0,TILE_PARAMS:{operation:"GETTILEIMAGE",version:"1.2.0"},SINGLE_TILE_PARAMS:{operation:"GETMAPIMAGE",format:"PNG",locale:"en",clip:"1",version:"1.0.0"},OVERLAY_PARAMS:{operation:"GETDYNAMICMAPOVERLAYIMAGE",format:"PNG",locale:"en",clip:"1",version:"2.0.0"},FOLDER_PARAMS:{tileColumnsPerFolder:30,tileRowsPerFolder:30,format:"png",querystring:null},defaultSize:new OpenLayers.Size(300,300),tileOriginCorner:"tl",initialize:function(a,b,c,d){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments),(null==d||null==d.isBaseLayer)&&(this.isBaseLayer="true"!=this.transparent&&1!=this.transparent),d&&null!=d.useOverlay&&(this.useOverlay=d.useOverlay),this.singleTile?this.useOverlay?(OpenLayers.Util.applyDefaults(this.params,this.OVERLAY_PARAMS),this.useAsyncOverlay||(this.params.version="1.0.0")):OpenLayers.Util.applyDefaults(this.params,this.SINGLE_TILE_PARAMS):(this.useHttpTile?OpenLayers.Util.applyDefaults(this.params,this.FOLDER_PARAMS):OpenLayers.Util.applyDefaults(this.params,this.TILE_PARAMS),this.setTileSize(this.defaultSize))},clone:function(a){return null==a&&(a=new OpenLayers.Layer.MapGuide(this.name,this.url,this.params,this.getOptions())),a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){var b;b=a.getCenterLonLat();var c=this.map.getSize();return this.singleTile?(a={setdisplaydpi:OpenLayers.DOTS_PER_INCH,setdisplayheight:c.h*this.ratio,setdisplaywidth:c.w*this.ratio,setviewcenterx:b.lon,setviewcentery:b.lat,setviewscale:this.map.getScale()},this.useOverlay&&!this.useAsyncOverlay&&(b={},b=OpenLayers.Util.extend(b,a),b.operation="GETVISIBLEMAPEXTENT",b.version="1.0.0",b.session=this.params.session,b.mapName=this.params.mapName,b.format="text/xml",b=this.getFullRequestString(b),OpenLayers.Request.GET({url:b,async:!1})),b=this.getFullRequestString(a)):(c=this.map.getResolution(),b=Math.floor((a.left-this.maxExtent.left)/c),b=Math.round(b/this.tileSize.w),a=Math.floor((this.maxExtent.top-a.top)/c),a=Math.round(a/this.tileSize.h),b=this.useHttpTile?this.getImageFilePath({tilecol:b,tilerow:a,scaleindex:this.resolutions.length-this.map.zoom-1}):this.getFullRequestString({tilecol:b,tilerow:a,scaleindex:this.resolutions.length-this.map.zoom-1})),b},getFullRequestString:function(a,b){var c=null==b?this.url:b;"object"==typeof c&&(c=c[Math.floor(Math.random()*c.length)]);var d,e=c,f=OpenLayers.Util.extend({},this.params),f=OpenLayers.Util.extend(f,a),g=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(c));for(d in f)d.toUpperCase()in g&&delete f[d];return f=OpenLayers.Util.getParameterString(f),f=f.replace(/,/g,"+"),""!=f&&(g=c.charAt(c.length-1),e="&"==g||"?"==g?e+f:-1==c.indexOf("?")?e+("?"+f):e+("&"+f)),e},getImageFilePath:function(a,b){var c=null==b?this.url:b;"object"==typeof c&&(c=c[Math.floor(Math.random()*c.length)]);var d="",e="";return 0>a.tilerow&&(d="-"),d=0==a.tilerow?d+"0":d+Math.floor(Math.abs(a.tilerow/this.params.tileRowsPerFolder))*this.params.tileRowsPerFolder,0>a.tilecol&&(e="-"),e=0==a.tilecol?e+"0":e+Math.floor(Math.abs(a.tilecol/this.params.tileColumnsPerFolder))*this.params.tileColumnsPerFolder,d="/S"+Math.floor(a.scaleindex)+"/"+this.params.basemaplayergroupname+"/R"+d+"/C"+e+"/"+a.tilerow%this.params.tileRowsPerFolder+"_"+a.tilecol%this.params.tileColumnsPerFolder+"."+this.params.format,this.params.querystring&&(d+="?"+this.params.querystring),c+d},CLASS_NAME:"OpenLayers.Layer.MapGuide"}),OpenLayers.Control.Measure=OpenLayers.Class(OpenLayers.Control,{callbacks:null,displaySystem:"metric",geodesic:!1,displaySystemUnits:{geographic:["dd"],english:["mi","ft","in"],metric:["km","m"]},partialDelay:300,delayedTrigger:null,persist:!1,immediate:!1,initialize:function(a,b){OpenLayers.Control.prototype.initialize.apply(this,[b]);var c={done:this.measureComplete,point:this.measurePartial};this.immediate&&(c.modify=this.measureImmediate),this.callbacks=OpenLayers.Util.extend(c,this.callbacks),this.handlerOptions=OpenLayers.Util.extend({persist:this.persist},this.handlerOptions),this.handler=new a(this,this.callbacks,this.handlerOptions)},deactivate:function(){return this.cancelDelay(),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},cancel:function(){this.cancelDelay(),this.handler.cancel()},setImmediate:function(a){(this.immediate=a)?this.callbacks.modify=this.measureImmediate:delete this.callbacks.modify},updateHandler:function(a,b){var c=this.active;c&&this.deactivate(),this.handler=new a(this,this.callbacks,b),c&&this.activate()},measureComplete:function(a){this.cancelDelay(),this.measure(a,"measure")},measurePartial:function(a,b){this.cancelDelay(),b=b.clone(),this.handler.freehandMode(this.handler.evt)?this.measure(b,"measurepartial"):this.delayedTrigger=window.setTimeout(OpenLayers.Function.bind(function(){this.delayedTrigger=null,this.measure(b,"measurepartial")},this),this.partialDelay)},measureImmediate:function(a,b,c){c&&!this.handler.freehandMode(this.handler.evt)&&(this.cancelDelay(),this.measure(b.geometry,"measurepartial"))},cancelDelay:function(){null!==this.delayedTrigger&&(window.clearTimeout(this.delayedTrigger),this.delayedTrigger=null)},measure:function(a,b){var c,d;-1<a.CLASS_NAME.indexOf("LineString")?(c=this.getBestLength(a),d=1):(c=this.getBestArea(a),d=2),this.events.triggerEvent(b,{measure:c[0],units:c[1],order:d,geometry:a})},getBestArea:function(a){for(var b,c,d=this.displaySystemUnits[this.displaySystem],e=0,f=d.length;f>e&&(b=d[e],c=this.getArea(a,b),!(c>1));++e);return[c,b]},getArea:function(a,b){var c,d;this.geodesic?(c=a.getGeodesicArea(this.map.getProjectionObject()),d="m"):(c=a.getArea(),d=this.map.getUnits());var e=OpenLayers.INCHES_PER_UNIT[b];return e&&(c*=Math.pow(OpenLayers.INCHES_PER_UNIT[d]/e,2)),c},getBestLength:function(a){for(var b,c,d=this.displaySystemUnits[this.displaySystem],e=0,f=d.length;f>e&&(b=d[e],c=this.getLength(a,b),!(c>1));++e);return[c,b]},getLength:function(a,b){var c,d;this.geodesic?(c=a.getGeodesicLength(this.map.getProjectionObject()),d="m"):(c=a.getLength(),d=this.map.getUnits());var e=OpenLayers.INCHES_PER_UNIT[b];return e&&(c*=OpenLayers.INCHES_PER_UNIT[d]/e),c},CLASS_NAME:"OpenLayers.Control.Measure"}),OpenLayers.Format.WMC.v1_0_0=OpenLayers.Class(OpenLayers.Format.WMC.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/context http://schemas.opengis.net/context/1.0.0/context.xsd",initialize:function(a){OpenLayers.Format.WMC.v1.prototype.initialize.apply(this,[a])},read_wmc_SRS:function(a,b){var c=this.getChildValue(b);"object"!=typeof a.projections&&(a.projections={});for(var c=c.split(/ +/),d=0,e=c.length;e>d;d++)a.projections[c[d]]=!0},write_wmc_Layer:function(a){var b=OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this,[a]);if(a.srs){var c,d=[];for(c in a.srs)d.push(c);b.appendChild(this.createElementDefaultNS("SRS",d.join(" ")))}b.appendChild(this.write_wmc_FormatList(a)),b.appendChild(this.write_wmc_StyleList(a)),a.dimensions&&b.appendChild(this.write_wmc_DimensionList(a)),b.appendChild(this.write_wmc_LayerExtension(a))},CLASS_NAME:"OpenLayers.Format.WMC.v1_0_0"}),OpenLayers.Popup.Anchored=OpenLayers.Class(OpenLayers.Popup,{relativePosition:null,keepInMap:!0,anchor:null,initialize:function(a,b,c,d,e,f,g){OpenLayers.Popup.prototype.initialize.apply(this,[a,b,c,d,f,g]),this.anchor=null!=e?e:{size:new OpenLayers.Size(0,0),offset:new OpenLayers.Pixel(0,0)}},destroy:function(){this.relativePosition=this.anchor=null,OpenLayers.Popup.prototype.destroy.apply(this,arguments)},show:function(){this.updatePosition(),OpenLayers.Popup.prototype.show.apply(this,arguments)},moveTo:function(a){var b=this.relativePosition;this.relativePosition=this.calculateRelativePosition(a),OpenLayers.Popup.prototype.moveTo.call(this,this.calculateNewPx(a)),this.relativePosition!=b&&this.updateRelativePosition()},setSize:function(a){if(OpenLayers.Popup.prototype.setSize.apply(this,arguments),this.lonlat&&this.map){var b=this.map.getLayerPxFromLonLat(this.lonlat);this.moveTo(b)}},calculateRelativePosition:function(a){return a=this.map.getLonLatFromLayerPx(a),a=this.map.getExtent().determineQuadrant(a),OpenLayers.Bounds.oppositeQuadrant(a)},updateRelativePosition:function(){},calculateNewPx:function(a){a=a.offset(this.anchor.offset);var b=this.size||this.contentSize,c="t"==this.relativePosition.charAt(0);return a.y+=c?-b.h:this.anchor.size.h,c="l"==this.relativePosition.charAt(1),a.x+=c?-b.w:this.anchor.size.w,a},CLASS_NAME:"OpenLayers.Popup.Anchored"}),OpenLayers.Popup.Framed=OpenLayers.Class(OpenLayers.Popup.Anchored,{imageSrc:null,imageSize:null,isAlphaImage:!1,positionBlocks:null,blocks:null,fixedRelativePosition:!1,initialize:function(a,b,c,d,e,f,g){OpenLayers.Popup.Anchored.prototype.initialize.apply(this,arguments),this.fixedRelativePosition&&(this.updateRelativePosition(),this.calculateRelativePosition=function(a){return this.relativePosition}),this.contentDiv.style.position="absolute",this.contentDiv.style.zIndex=1,f&&(this.closeDiv.style.zIndex=1),this.groupDiv.style.position="absolute",this.groupDiv.style.top="0px",this.groupDiv.style.left="0px",this.groupDiv.style.height="100%",this.groupDiv.style.width="100%"},destroy:function(){this.isAlphaImage=this.imageSize=this.imageSrc=null,this.fixedRelativePosition=!1,this.positionBlocks=null;for(var a=0;a<this.blocks.length;a++){var b=this.blocks[a];b.image&&b.div.removeChild(b.image),b.image=null,b.div&&this.groupDiv.removeChild(b.div),b.div=null}this.blocks=null,OpenLayers.Popup.Anchored.prototype.destroy.apply(this,arguments)},setBackgroundColor:function(a){},setBorder:function(){},setOpacity:function(a){},setSize:function(a){OpenLayers.Popup.Anchored.prototype.setSize.apply(this,arguments),this.updateBlocks()},updateRelativePosition:function(){if(this.padding=this.positionBlocks[this.relativePosition].padding,this.closeDiv){var a=this.getContentDivPadding();this.closeDiv.style.right=a.right+this.padding.right+"px",this.closeDiv.style.top=a.top+this.padding.top+"px"}this.updateBlocks()},calculateNewPx:function(a){var b=OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply(this,arguments);return b=b.offset(this.positionBlocks[this.relativePosition].offset)},createBlocks:function(){this.blocks=[];var a,b=null;for(a in this.positionBlocks){b=a;break}for(b=this.positionBlocks[b],a=0;a<b.blocks.length;a++){var c={};this.blocks.push(c),c.div=OpenLayers.Util.createDiv(this.id+"_FrameDecorationDiv_"+a,null,null,null,"absolute",null,"hidden",null),c.image=(this.isAlphaImage?OpenLayers.Util.createAlphaImageDiv:OpenLayers.Util.createImage)(this.id+"_FrameDecorationImg_"+a,null,this.imageSize,this.imageSrc,"absolute",null,null,null),
c.div.appendChild(c.image),this.groupDiv.appendChild(c.div)}},updateBlocks:function(){if(this.blocks||this.createBlocks(),this.size&&this.relativePosition){for(var a=this.positionBlocks[this.relativePosition],b=0;b<a.blocks.length;b++){var c=a.blocks[b],d=this.blocks[b],e=c.anchor.left,f=c.anchor.bottom,g=c.anchor.right,h=c.anchor.top,i=isNaN(c.size.w)?this.size.w-(g+e):c.size.w,j=isNaN(c.size.h)?this.size.h-(f+h):c.size.h;d.div.style.width=(0>i?0:i)+"px",d.div.style.height=(0>j?0:j)+"px",d.div.style.left=null!=e?e+"px":"",d.div.style.bottom=null!=f?f+"px":"",d.div.style.right=null!=g?g+"px":"",d.div.style.top=null!=h?h+"px":"",d.image.style.left=c.position.x+"px",d.image.style.top=c.position.y+"px"}this.contentDiv.style.left=this.padding.left+"px",this.contentDiv.style.top=this.padding.top+"px"}},CLASS_NAME:"OpenLayers.Popup.Framed"}),OpenLayers.Popup.FramedCloud=OpenLayers.Class(OpenLayers.Popup.Framed,{contentDisplayClass:"olFramedCloudPopupContent",autoSize:!0,panMapIfOutOfView:!0,imageSize:new OpenLayers.Size(1276,736),isAlphaImage:!1,fixedRelativePosition:!1,positionBlocks:{tl:{offset:new OpenLayers.Pixel(44,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,18),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-632)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(0,-688)}]},tr:{offset:new OpenLayers.Pixel(-45,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,19),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-631)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(0,0,null,null),position:new OpenLayers.Pixel(-215,-687)}]},bl:{offset:new OpenLayers.Pixel(45,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(null,null,0,0),position:new OpenLayers.Pixel(-101,-674)}]},br:{offset:new OpenLayers.Pixel(-44,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(0,null,null,0),position:new OpenLayers.Pixel(-311,-674)}]}},minSize:new OpenLayers.Size(105,10),maxSize:new OpenLayers.Size(1200,660),initialize:function(a,b,c,d,e,f,g){this.imageSrc=OpenLayers.Util.getImageLocation("cloud-popup-relative.png"),OpenLayers.Popup.Framed.prototype.initialize.apply(this,arguments),this.contentDiv.className=this.contentDisplayClass},CLASS_NAME:"OpenLayers.Popup.FramedCloud"}),OpenLayers.Tile.Image.IFrame={useIFrame:null,blankImageUrl:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7",draw:function(){if(OpenLayers.Tile.Image.prototype.shouldDraw.call(this)){var a=this.layer.getURL(this.bounds),b=this.useIFrame;this.useIFrame=null!==this.maxGetUrlLength&&!this.layer.async&&a.length>this.maxGetUrlLength,a=b&&!this.useIFrame,b=!b&&this.useIFrame,(a||b)&&(this.imgDiv&&this.imgDiv.parentNode===this.frame&&this.frame.removeChild(this.imgDiv),this.imgDiv=null,a&&this.frame.removeChild(this.frame.firstChild))}return OpenLayers.Tile.Image.prototype.draw.apply(this,arguments)},getImage:function(){if(!0===this.useIFrame){if(!this.frame.childNodes.length){var a=document.createElement("div"),b=a.style;b.position="absolute",b.width="100%",b.height="100%",b.zIndex=1,b.backgroundImage="url("+this.blankImageUrl+")",this.frame.appendChild(a)}return a=this.id+"_iFrame",9>parseFloat(navigator.appVersion.split("MSIE")[1])?(b=document.createElement('<iframe name="'+a+'">'),b.style.backgroundColor="#FFFFFF",b.style.filter="chroma(color=#FFFFFF)"):(b=document.createElement("iframe"),b.style.backgroundColor="transparent",b.name=a),b.scrolling="no",b.marginWidth="0px",b.marginHeight="0px",b.frameBorder="0",b.style.position="absolute",b.style.width="100%",b.style.height="100%",1>this.layer.opacity&&OpenLayers.Util.modifyDOMElement(b,null,null,null,null,null,null,this.layer.opacity),this.frame.appendChild(b),this.imgDiv=b}return OpenLayers.Tile.Image.prototype.getImage.apply(this,arguments)},createRequestForm:function(){var a=document.createElement("form");a.method="POST";var b=this.layer.params._OLSALT,b=(b?b+"_":"")+this.bounds.toBBOX();a.action=OpenLayers.Util.urlAppend(this.layer.url,b),a.target=this.id+"_iFrame",this.layer.getImageSize();var c,d,b=OpenLayers.Util.getParameters(this.url);for(d in b)c=document.createElement("input"),c.type="hidden",c.name=d,c.value=b[d],a.appendChild(c);return a},setImgSrc:function(a){if(!0===this.useIFrame)if(a){var b=this.createRequestForm();this.frame.appendChild(b),b.submit(),this.frame.removeChild(b)}else this.imgDiv.parentNode===this.frame&&(this.frame.removeChild(this.imgDiv),this.imgDiv=null);else OpenLayers.Tile.Image.prototype.setImgSrc.apply(this,arguments)},onImageLoad:function(){OpenLayers.Tile.Image.prototype.onImageLoad.apply(this,arguments),!0===this.useIFrame&&(this.imgDiv.style.opacity=1,this.frame.style.opacity=this.layer.opacity)},createBackBuffer:function(){var a;return!1===this.useIFrame&&(a=OpenLayers.Tile.Image.prototype.createBackBuffer.call(this)),a}},OpenLayers.Format.SOSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.SOSCapabilities"}),OpenLayers.Format.SOSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.SOSCapabilities,{namespaces:{ows:"http://www.opengis.net/ows/1.1",sos:"http://www.opengis.net/sos/1.0",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]),this.options=a},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b={};return this.readNode(a,b),b},readers:{gml:OpenLayers.Util.applyDefaults({name:function(a,b){b.name=this.getChildValue(a)},TimePeriod:function(a,b){b.timePeriod={},this.readChildNodes(a,b.timePeriod)},beginPosition:function(a,b){b.beginPosition=this.getChildValue(a)},endPosition:function(a,b){b.endPosition=this.getChildValue(a)}},OpenLayers.Format.GML.v3.prototype.readers.gml),sos:{Capabilities:function(a,b){this.readChildNodes(a,b)},Contents:function(a,b){b.contents={},this.readChildNodes(a,b.contents)},ObservationOfferingList:function(a,b){b.offeringList={},this.readChildNodes(a,b.offeringList)},ObservationOffering:function(a,b){var c=this.getAttributeNS(a,this.namespaces.gml,"id");b[c]={procedures:[],observedProperties:[],featureOfInterestIds:[],responseFormats:[],resultModels:[],responseModes:[]},this.readChildNodes(a,b[c])},time:function(a,b){b.time={},this.readChildNodes(a,b.time)},procedure:function(a,b){b.procedures.push(this.getAttributeNS(a,this.namespaces.xlink,"href"))},observedProperty:function(a,b){b.observedProperties.push(this.getAttributeNS(a,this.namespaces.xlink,"href"))},featureOfInterest:function(a,b){b.featureOfInterestIds.push(this.getAttributeNS(a,this.namespaces.xlink,"href"))},responseFormat:function(a,b){b.responseFormats.push(this.getChildValue(a))},resultModel:function(a,b){b.resultModels.push(this.getChildValue(a))},responseMode:function(a,b){b.responseModes.push(this.getChildValue(a))}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.SOSCapabilities.v1_0_0"}),OpenLayers.Handler.Pinch=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!1,pinching:!1,last:null,start:null,touchstart:function(a){var b=!0;if(this.pinching=!1,OpenLayers.Event.isMultiTouch(a))this.started=!0,this.last=this.start={distance:this.getDistance(a.touches),delta:0,scale:1},this.callback("start",[a,this.start]),b=!this.stopDown;else{if(this.started)return!1;this.started=!1,this.last=this.start=null}return OpenLayers.Event.preventDefault(a),b},touchmove:function(a){if(this.started&&OpenLayers.Event.isMultiTouch(a)){this.pinching=!0;var b=this.getPinchData(a);this.callback("move",[a,b]),this.last=b,OpenLayers.Event.stop(a)}else if(this.started)return!1;return!0},touchend:function(a){return this.started&&!OpenLayers.Event.isMultiTouch(a)?(this.pinching=this.started=!1,this.callback("done",[a,this.start,this.last]),this.last=this.start=null,!1):!0},activate:function(){var a=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.pinching=!1,a=!0),a},deactivate:function(){var a=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.pinching=this.started=!1,this.last=this.start=null,a=!0),a},getDistance:function(a){var b=a[0];return a=a[1],Math.sqrt(Math.pow(b.olClientX-a.olClientX,2)+Math.pow(b.olClientY-a.olClientY,2))},getPinchData:function(a){return a=this.getDistance(a.touches),{distance:a,delta:this.last.distance-a,scale:a/this.start.distance}},CLASS_NAME:"OpenLayers.Handler.Pinch"}),OpenLayers.Control.NavToolbar=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(a){OpenLayers.Control.Panel.prototype.initialize.apply(this,[a]),this.addControls([new OpenLayers.Control.Navigation,new OpenLayers.Control.ZoomBox])},draw:function(){var a=OpenLayers.Control.Panel.prototype.draw.apply(this,arguments);return null===this.defaultControl&&(this.defaultControl=this.controls[0]),a},CLASS_NAME:"OpenLayers.Control.NavToolbar"}),OpenLayers.Strategy.Refresh=OpenLayers.Class(OpenLayers.Strategy,{force:!1,interval:0,timer:null,activate:function(){var a=OpenLayers.Strategy.prototype.activate.call(this);return a&&(!0===this.layer.visibility&&this.start(),this.layer.events.on({visibilitychanged:this.reset,scope:this})),a},deactivate:function(){var a=OpenLayers.Strategy.prototype.deactivate.call(this);return a&&(this.stop(),this.layer.events.un({visibilitychanged:this.reset,scope:this})),a},reset:function(){!0===this.layer.visibility?this.start():this.stop()},start:function(){this.interval&&"number"==typeof this.interval&&0<this.interval&&(this.timer=window.setInterval(OpenLayers.Function.bind(this.refresh,this),this.interval))},refresh:function(){this.layer&&this.layer.refresh&&"function"==typeof this.layer.refresh&&this.layer.refresh({force:this.force})},stop:function(){null!==this.timer&&(window.clearInterval(this.timer),this.timer=null)},CLASS_NAME:"OpenLayers.Strategy.Refresh"}),OpenLayers.Layer.ArcGIS93Rest=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{format:"png"},isBaseLayer:!0,initialize:function(a,b,c,d){var e=[];c=OpenLayers.Util.upperCaseObject(c),e.push(a,b,c,d),OpenLayers.Layer.Grid.prototype.initialize.apply(this,e),OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)),this.params.TRANSPARENT&&"true"==this.params.TRANSPARENT.toString().toLowerCase()&&(null!=d&&d.isBaseLayer||(this.isBaseLayer=!1),"jpg"==this.params.FORMAT&&(this.params.FORMAT=OpenLayers.Util.alphaHack()?"gif":"png"))},clone:function(a){return null==a&&(a=new OpenLayers.Layer.ArcGIS93Rest(this.name,this.url,this.params,this.getOptions())),a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){a=this.adjustBounds(a);var b=this.projection.getCode().split(":"),b=b[b.length-1],c=this.getImageSize();if(a={BBOX:a.toBBOX(),SIZE:c.w+","+c.h,F:"image",BBOXSR:b,IMAGESR:b},this.layerDefs){var d,b=[];for(d in this.layerDefs)this.layerDefs.hasOwnProperty(d)&&this.layerDefs[d]&&(b.push(d),b.push(":"),b.push(this.layerDefs[d]),b.push(";"));0<b.length&&(a.LAYERDEFS=b.join(""))}return this.getFullRequestString(a)},setLayerFilter:function(a,b){this.layerDefs||(this.layerDefs={}),b?this.layerDefs[a]=b:delete this.layerDefs[a]},clearLayerFilter:function(a){a?delete this.layerDefs[a]:delete this.layerDefs},mergeNewParams:function(a){return a=[OpenLayers.Util.upperCaseObject(a)],OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,a)},CLASS_NAME:"OpenLayers.Layer.ArcGIS93Rest"}),OpenLayers.Handler.Hover=OpenLayers.Class(OpenLayers.Handler,{delay:500,pixelTolerance:null,stopMove:!1,px:null,timerId:null,mousemove:function(a){return this.passesTolerance(a.xy)&&(this.clearTimer(),this.callback("move",[a]),this.px=a.xy,a=OpenLayers.Util.extend({},a),this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,a),this.delay)),!this.stopMove},mouseout:function(a){return OpenLayers.Util.mouseLeft(a,this.map.viewPortDiv)&&(this.clearTimer(),this.callback("move",[a])),!0},passesTolerance:function(a){var b=!0;return this.pixelTolerance&&this.px&&Math.sqrt(Math.pow(this.px.x-a.x,2)+Math.pow(this.px.y-a.y,2))<this.pixelTolerance&&(b=!1),b},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null)},delayedCall:function(a){this.callback("pause",[a])},deactivate:function(){var a=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),a=!0),a},CLASS_NAME:"OpenLayers.Handler.Hover"}),OpenLayers.Control.GetFeature=OpenLayers.Class(OpenLayers.Control,{protocol:null,multipleKey:null,toggleKey:null,modifiers:null,multiple:!1,click:!0,single:!0,clickout:!0,toggle:!1,clickTolerance:5,hover:!1,box:!1,maxFeatures:10,features:null,hoverFeature:null,handlers:null,hoverResponse:null,filterType:OpenLayers.Filter.Spatial.BBOX,initialize:function(a){a.handlerOptions=a.handlerOptions||{},OpenLayers.Control.prototype.initialize.apply(this,[a]),this.features={},this.handlers={},this.click&&(this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.selectClick},this.handlerOptions.click||{})),this.box&&(this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},OpenLayers.Util.extend(this.handlerOptions.box,{boxDivClassName:"olHandlerBoxSelectFeature"}))),this.hover&&(this.handlers.hover=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.selectHover},OpenLayers.Util.extend(this.handlerOptions.hover,{delay:250,pixelTolerance:2})))},activate:function(){if(!this.active)for(var a in this.handlers)this.handlers[a].activate();return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){if(this.active)for(var a in this.handlers)this.handlers[a].deactivate();return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},selectClick:function(a){var b=this.pixelToBounds(a.xy);this.setModifiers(a),this.request(b,{single:this.single})},selectBox:function(a){var b;if(a instanceof OpenLayers.Bounds)b=this.map.getLonLatFromPixel({x:a.left,y:a.bottom}),a=this.map.getLonLatFromPixel({x:a.right,y:a.top}),b=new OpenLayers.Bounds(b.lon,b.lat,a.lon,a.lat);else{if(this.click)return;b=this.pixelToBounds(a)}this.setModifiers(this.handlers.box.dragHandler.evt),this.request(b)},selectHover:function(a){a=this.pixelToBounds(a.xy),this.request(a,{single:!0,hover:!0})},cancelHover:function(){this.hoverResponse&&(this.protocol.abort(this.hoverResponse),this.hoverResponse=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"))},request:function(a,b){b=b||{};var c=new OpenLayers.Filter.Spatial({type:this.filterType,value:a});OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait"),c=this.protocol.read({maxFeatures:1==b.single?this.maxFeatures:void 0,filter:c,callback:function(c){c.success()&&(c.features.length?1==b.single?this.selectBestFeature(c.features,a.getCenterLonLat(),b):this.select(c.features):b.hover?this.hoverSelect():(this.events.triggerEvent("clickout"),this.clickout&&this.unselectAll())),OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait")},scope:this}),1==b.hover&&(this.hoverResponse=c)},selectBestFeature:function(a,b,c){if(c=c||{},a.length){b=new OpenLayers.Geometry.Point(b.lon,b.lat);for(var d,e,f,g=Number.MAX_VALUE,h=0;h<a.length&&(d=a[h],!(d.geometry&&(f=b.distanceTo(d.geometry,{edge:!1}),g>f&&(g=f,e=d,0==g))));++h);1==c.hover?this.hoverSelect(e):this.select(e||a)}},setModifiers:function(a){this.modifiers={multiple:this.multiple||this.multipleKey&&a[this.multipleKey],toggle:this.toggle||this.toggleKey&&a[this.toggleKey]}},select:function(a){this.modifiers.multiple||this.modifiers.toggle||this.unselectAll(),OpenLayers.Util.isArray(a)||(a=[a]);var b=this.events.triggerEvent("beforefeaturesselected",{features:a});if(!1!==b){for(var c,d=[],e=0,f=a.length;f>e;++e)c=a[e],this.features[c.fid||c.id]?this.modifiers.toggle&&this.unselect(this.features[c.fid||c.id]):(b=this.events.triggerEvent("beforefeatureselected",{feature:c}),!1!==b&&(this.features[c.fid||c.id]=c,d.push(c),this.events.triggerEvent("featureselected",{feature:c})));this.events.triggerEvent("featuresselected",{features:d})}},hoverSelect:function(a){var b=a?a.fid||a.id:null,c=this.hoverFeature?this.hoverFeature.fid||this.hoverFeature.id:null;c&&c!=b&&(this.events.triggerEvent("outfeature",{feature:this.hoverFeature}),this.hoverFeature=null),b&&b!=c&&(this.events.triggerEvent("hoverfeature",{feature:a}),this.hoverFeature=a)},unselect:function(a){delete this.features[a.fid||a.id],this.events.triggerEvent("featureunselected",{feature:a})},unselectAll:function(){for(var a in this.features)this.unselect(this.features[a])},setMap:function(a){for(var b in this.handlers)this.handlers[b].setMap(a);OpenLayers.Control.prototype.setMap.apply(this,arguments)},pixelToBounds:function(a){var b=a.add(-this.clickTolerance/2,this.clickTolerance/2);return a=a.add(this.clickTolerance/2,-this.clickTolerance/2),b=this.map.getLonLatFromPixel(b),a=this.map.getLonLatFromPixel(a),new OpenLayers.Bounds(b.lon,b.lat,a.lon,a.lat)},CLASS_NAME:"OpenLayers.Control.GetFeature"}),OpenLayers.Format.QueryStringFilter=function(){function a(a){return a=a.replace(/%/g,"\\%"),a=a.replace(/\\\\\.(\*)?/g,function(a,b){return b?a:"\\\\_"}),a=a.replace(/\\\\\.\*/g,"\\\\%"),a=a.replace(/(\\)?\.(\*)?/g,function(a,b,c){return b||c?a:"_"}),a=a.replace(/(\\)?\.\*/g,function(a,b){return b?a:"%"}),a=a.replace(/\\\./g,"."),a=a.replace(/(\\)?\\\*/g,function(a,b){return b?a:"*"})}var b={};return b[OpenLayers.Filter.Comparison.EQUAL_TO]="eq",b[OpenLayers.Filter.Comparison.NOT_EQUAL_TO]="ne",b[OpenLayers.Filter.Comparison.LESS_THAN]="lt",b[OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO]="lte",b[OpenLayers.Filter.Comparison.GREATER_THAN]="gt",b[OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO]="gte",b[OpenLayers.Filter.Comparison.LIKE]="ilike",OpenLayers.Class(OpenLayers.Format,{wildcarded:!1,srsInBBOX:!1,write:function(c,d){d=d||{};var e=c.CLASS_NAME,e=e.substring(e.lastIndexOf(".")+1);switch(e){case"Spatial":switch(c.type){case OpenLayers.Filter.Spatial.BBOX:d.bbox=c.value.toArray(),this.srsInBBOX&&c.projection&&d.bbox.push(c.projection.getCode());break;case OpenLayers.Filter.Spatial.DWITHIN:d.tolerance=c.distance;case OpenLayers.Filter.Spatial.WITHIN:d.lon=c.value.x,d.lat=c.value.y;break;default:OpenLayers.Console.warn("Unknown spatial filter type "+c.type)}break;case"Comparison":if(e=b[c.type],void 0!==e){var f=c.value;c.type==OpenLayers.Filter.Comparison.LIKE&&(f=a(f),this.wildcarded&&(f="%"+f+"%")),d[c.property+"__"+e]=f,d.queryable=d.queryable||[],d.queryable.push(c.property)}else OpenLayers.Console.warn("Unknown comparison filter type "+c.type);break;case"Logical":if(c.type===OpenLayers.Filter.Logical.AND)for(e=0,f=c.filters.length;f>e;e++)d=this.write(c.filters[e],d);else OpenLayers.Console.warn("Unsupported logical filter type "+c.type);break;default:OpenLayers.Console.warn("Unknown filter type "+e)}return d},CLASS_NAME:"OpenLayers.Format.QueryStringFilter"})}(),OpenLayers.Control.MousePosition=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,element:null,prefix:"",separator:", ",suffix:"",numDigits:5,granularity:10,emptyString:null,lastXy:null,displayProjection:null,destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.map.events.register("mousemove",this,this.redraw),this.map.events.register("mouseout",this,this.reset),this.redraw(),!0):!1},deactivate:function(){return OpenLayers.Control.prototype.deactivate.apply(this,arguments)?(this.map.events.unregister("mousemove",this,this.redraw),this.map.events.unregister("mouseout",this,this.reset),this.element.innerHTML="",!0):!1},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||(this.div.left="",this.div.top="",this.element=this.div),this.div},redraw:function(a){var b;null==a?this.reset():null==this.lastXy||Math.abs(a.xy.x-this.lastXy.x)>this.granularity||Math.abs(a.xy.y-this.lastXy.y)>this.granularity?this.lastXy=a.xy:(b=this.map.getLonLatFromPixel(a.xy))&&(this.displayProjection&&b.transform(this.map.getProjectionObject(),this.displayProjection),this.lastXy=a.xy,a=this.formatOutput(b),a!=this.element.innerHTML&&(this.element.innerHTML=a))},reset:function(a){null!=this.emptyString&&(this.element.innerHTML=this.emptyString)},formatOutput:function(a){var b=parseInt(this.numDigits);return this.prefix+a.lon.toFixed(b)+this.separator+a.lat.toFixed(b)+this.suffix},CLASS_NAME:"OpenLayers.Control.MousePosition"}),OpenLayers.Control.Geolocate=OpenLayers.Class(OpenLayers.Control,{geolocation:null,available:"geolocation"in navigator,bind:!0,watch:!1,geolocationOptions:null,destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.available&&!this.geolocation&&(this.geolocation=navigator.geolocation),this.geolocation?OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.watch?this.watchId=this.geolocation.watchPosition(OpenLayers.Function.bind(this.geolocate,this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions):this.getCurrentLocation(),!0):!1:(this.events.triggerEvent("locationuncapable"),!1)},deactivate:function(){return this.active&&null!==this.watchId&&this.geolocation.clearWatch(this.watchId),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},geolocate:function(a){var b=new OpenLayers.LonLat(a.coords.longitude,a.coords.latitude).transform(new OpenLayers.Projection("EPSG:4326"),this.map.getProjectionObject());this.bind&&this.map.setCenter(b),this.events.triggerEvent("locationupdated",{position:a,point:new OpenLayers.Geometry.Point(b.lon,b.lat)})},getCurrentLocation:function(){return!this.active||this.watch?!1:(this.geolocation.getCurrentPosition(OpenLayers.Function.bind(this.geolocate,this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions),!0)},failure:function(a){this.events.triggerEvent("locationfailed",{error:a})},CLASS_NAME:"OpenLayers.Control.Geolocate"}),OpenLayers.Tile.UTFGrid=OpenLayers.Class(OpenLayers.Tile,{url:null,utfgridResolution:2,json:null,format:null,destroy:function(){this.clear(),OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var a=OpenLayers.Tile.prototype.draw.apply(this,arguments);if(a)if(this.isLoading?(this.abortLoading(),this.events.triggerEvent("reload")):(this.isLoading=!0,this.events.triggerEvent("loadstart")),this.url=this.layer.getURL(this.bounds),this.layer.useJSONP){var b=new OpenLayers.Protocol.Script({url:this.url,callback:function(a){this.isLoading=!1,this.events.triggerEvent("loadend"),this.json=a.data},scope:this});b.read(),this.request=b}else this.request=OpenLayers.Request.GET({url:this.url,callback:function(a){this.isLoading=!1,this.events.triggerEvent("loadend"),200===a.status&&this.parseData(a.responseText)},scope:this});else this.unload();return a},abortLoading:function(){this.request&&(this.request.abort(),delete this.request),this.isLoading=!1},getFeatureInfo:function(a,b){var c=null;if(this.json){var d=this.getFeatureId(a,b);null!==d&&(c={id:d,data:this.json.data[d]})}return c},getFeatureId:function(a,b){var c=null;if(this.json){var d=this.utfgridResolution,d=this.json.grid[Math.floor(b/d)].charCodeAt(Math.floor(a/d)),d=this.indexFromCharCode(d),e=this.json.keys;!isNaN(d)&&d in e&&(c=e[d])}return c},indexFromCharCode:function(a){return a>=93&&a--,a>=35&&a--,a-32},parseData:function(a){this.format||(this.format=new OpenLayers.Format.JSON),this.json=this.format.read(a)},clear:function(){this.json=null},CLASS_NAME:"OpenLayers.Tile.UTFGrid"}),OpenLayers.Protocol.HTTP=OpenLayers.Class(OpenLayers.Protocol,{url:null,headers:null,params:null,callback:null,scope:null,readWithPOST:!1,updateWithPOST:!1,deleteWithPOST:!1,wildcarded:!1,srsInBBOX:!1,initialize:function(a){if(a=a||{},this.params={},this.headers={},OpenLayers.Protocol.prototype.initialize.apply(this,arguments),!this.filterToParams&&OpenLayers.Format.QueryStringFilter){var b=new OpenLayers.Format.QueryStringFilter({wildcarded:this.wildcarded,srsInBBOX:this.srsInBBOX});this.filterToParams=function(a,c){return b.write(a,c)}}},destroy:function(){this.headers=this.params=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(a){OpenLayers.Protocol.prototype.read.apply(this,arguments),a=a||{},a.params=OpenLayers.Util.applyDefaults(a.params,this.options.params),a=OpenLayers.Util.applyDefaults(a,this.options),a.filter&&this.filterToParams&&(a.params=this.filterToParams(a.filter,a.params));var b=void 0!==a.readWithPOST?a.readWithPOST:this.readWithPOST,c=new OpenLayers.Protocol.Response({requestType:"read"});return b?(b=a.headers||{},b["Content-Type"]="application/x-www-form-urlencoded",c.priv=OpenLayers.Request.POST({url:a.url,callback:this.createCallback(this.handleRead,c,a),data:OpenLayers.Util.getParameterString(a.params),headers:b})):c.priv=OpenLayers.Request.GET({url:a.url,callback:this.createCallback(this.handleRead,c,a),params:a.params,headers:a.headers}),c},handleRead:function(a,b){this.handleResponse(a,b)},create:function(a,b){b=OpenLayers.Util.applyDefaults(b,this.options);var c=new OpenLayers.Protocol.Response({reqFeatures:a,requestType:"create"});return c.priv=OpenLayers.Request.POST({url:b.url,callback:this.createCallback(this.handleCreate,c,b),headers:b.headers,data:this.format.write(a)}),c},handleCreate:function(a,b){this.handleResponse(a,b)},update:function(a,b){b=b||{};var c=b.url||a.url||this.options.url+"/"+a.fid;b=OpenLayers.Util.applyDefaults(b,this.options);var d=new OpenLayers.Protocol.Response({reqFeatures:a,requestType:"update"});return d.priv=OpenLayers.Request[this.updateWithPOST?"POST":"PUT"]({url:c,callback:this.createCallback(this.handleUpdate,d,b),headers:b.headers,data:this.format.write(a)}),d},handleUpdate:function(a,b){this.handleResponse(a,b)},"delete":function(a,b){b=b||{};var c=b.url||a.url||this.options.url+"/"+a.fid;b=OpenLayers.Util.applyDefaults(b,this.options);var d=new OpenLayers.Protocol.Response({reqFeatures:a,requestType:"delete"}),e=this.deleteWithPOST?"POST":"DELETE",c={url:c,callback:this.createCallback(this.handleDelete,d,b),headers:b.headers};return this.deleteWithPOST&&(c.data=this.format.write(a)),d.priv=OpenLayers.Request[e](c),d},handleDelete:function(a,b){this.handleResponse(a,b)},handleResponse:function(a,b){var c=a.priv;b.callback&&(200<=c.status&&300>c.status?("delete"!=a.requestType&&(a.features=this.parseFeatures(c)),a.code=OpenLayers.Protocol.Response.SUCCESS):a.code=OpenLayers.Protocol.Response.FAILURE,b.callback.call(b.scope,a))},parseFeatures:function(a){var b=a.responseXML;return b&&b.documentElement||(b=a.responseText),!b||0>=b.length?null:this.format.read(b)},commit:function(a,b){function c(a){for(var b=a.features?a.features.length:0,c=Array(b),e=0;b>e;++e)c[e]=a.features[e].fid;o.insertIds=c,d.apply(this,[a])}function d(a){this.callUserCallback(a,b),n=n&&a.success(),f++,f>=m&&b.callback&&(o.code=n?OpenLayers.Protocol.Response.SUCCESS:OpenLayers.Protocol.Response.FAILURE,b.callback.apply(b.scope,[o]))}b=OpenLayers.Util.applyDefaults(b,this.options);var e=[],f=0,g={};g[OpenLayers.State.INSERT]=[],g[OpenLayers.State.UPDATE]=[],g[OpenLayers.State.DELETE]=[];for(var h,i,j=[],k=0,l=a.length;l>k;++k)h=a[k],(i=g[h.state])&&(i.push(h),j.push(h));var m=(0<g[OpenLayers.State.INSERT].length?1:0)+g[OpenLayers.State.UPDATE].length+g[OpenLayers.State.DELETE].length,n=!0,o=new OpenLayers.Protocol.Response({reqFeatures:j});for(h=g[OpenLayers.State.INSERT],0<h.length&&e.push(this.create(h,OpenLayers.Util.applyDefaults({callback:c,scope:this},b.create))),h=g[OpenLayers.State.UPDATE],k=h.length-1;k>=0;--k)e.push(this.update(h[k],OpenLayers.Util.applyDefaults({callback:d,scope:this},b.update)));for(h=g[OpenLayers.State.DELETE],k=h.length-1;k>=0;--k)e.push(this["delete"](h[k],OpenLayers.Util.applyDefaults({callback:d,scope:this},b["delete"])));return e},abort:function(a){a&&a.priv.abort()},callUserCallback:function(a,b){var c=b[a.requestType];c&&c.callback&&c.callback.call(c.scope,a)},CLASS_NAME:"OpenLayers.Protocol.HTTP"}),OpenLayers.Strategy.Cluster=OpenLayers.Class(OpenLayers.Strategy,{distance:20,threshold:null,features:null,clusters:null,clustering:!1,resolution:null,activate:function(){var a=OpenLayers.Strategy.prototype.activate.call(this);return a&&this.layer.events.on({beforefeaturesadded:this.cacheFeatures,featuresremoved:this.clearCache,moveend:this.cluster,scope:this}),a},deactivate:function(){var a=OpenLayers.Strategy.prototype.deactivate.call(this);return a&&(this.clearCache(),this.layer.events.un({beforefeaturesadded:this.cacheFeatures,featuresremoved:this.clearCache,moveend:this.cluster,scope:this})),a},cacheFeatures:function(a){var b=!0;return this.clustering||(this.clearCache(),this.features=a.features,this.cluster(),b=!1),b},clearCache:function(){this.clustering||(this.features=null)},cluster:function(a){if((!a||a.zoomChanged)&&this.features&&(a=this.layer.map.getResolution(),a!=this.resolution||!this.clustersExist())){this.resolution=a,a=[];for(var b,c,d,e=0;e<this.features.length;++e)if(b=this.features[e],b.geometry){c=!1;for(var f=a.length-1;f>=0;--f)if(d=a[f],this.shouldCluster(d,b)){this.addToCluster(d,b),c=!0;break}c||a.push(this.createCluster(this.features[e]))}if(this.clustering=!0,this.layer.removeAllFeatures(),this.clustering=!1,0<a.length){if(1<this.threshold)for(b=a.slice(),a=[],e=0,d=b.length;d>e;++e)c=b[e],c.attributes.count<this.threshold?Array.prototype.push.apply(a,c.cluster):a.push(c);this.clustering=!0,this.layer.addFeatures(a),this.clustering=!1}this.clusters=a}},clustersExist:function(){var a=!1;if(this.clusters&&0<this.clusters.length&&this.clusters.length==this.layer.features.length)for(var a=!0,b=0;b<this.clusters.length;++b)if(this.clusters[b]!=this.layer.features[b]){a=!1;break}return a},shouldCluster:function(a,b){var c=a.geometry.getBounds().getCenterLonLat(),d=b.geometry.getBounds().getCenterLonLat();
return Math.sqrt(Math.pow(c.lon-d.lon,2)+Math.pow(c.lat-d.lat,2))/this.resolution<=this.distance},addToCluster:function(a,b){a.cluster.push(b),a.attributes.count+=1},createCluster:function(a){var b=a.geometry.getBounds().getCenterLonLat(),b=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(b.lon,b.lat),{count:1});return b.cluster=[a],b},CLASS_NAME:"OpenLayers.Strategy.Cluster"}),OpenLayers.Strategy.Filter=OpenLayers.Class(OpenLayers.Strategy,{filter:null,cache:null,caching:!1,activate:function(){var a=OpenLayers.Strategy.prototype.activate.apply(this,arguments);return a&&(this.cache=[],this.layer.events.on({beforefeaturesadded:this.handleAdd,beforefeaturesremoved:this.handleRemove,scope:this})),a},deactivate:function(){return this.cache=null,this.layer&&this.layer.events&&this.layer.events.un({beforefeaturesadded:this.handleAdd,beforefeaturesremoved:this.handleRemove,scope:this}),OpenLayers.Strategy.prototype.deactivate.apply(this,arguments)},handleAdd:function(a){if(!this.caching&&this.filter){var b=a.features;a.features=[];for(var c,d=0,e=b.length;e>d;++d)c=b[d],this.filter.evaluate(c)?a.features.push(c):this.cache.push(c)}},handleRemove:function(a){this.caching||(this.cache=[])},setFilter:function(a){this.filter=a,a=this.cache,this.cache=[],this.handleAdd({features:this.layer.features}),0<this.cache.length&&(this.caching=!0,this.layer.removeFeatures(this.cache.slice()),this.caching=!1),0<a.length&&(a={features:a},this.handleAdd(a),0<a.features.length&&(this.caching=!0,this.layer.addFeatures(a.features),this.caching=!1))},CLASS_NAME:"OpenLayers.Strategy.Filter"}),OpenLayers.Protocol.SOS=function(a){a=OpenLayers.Util.applyDefaults(a,OpenLayers.Protocol.SOS.DEFAULTS);var b=OpenLayers.Protocol.SOS["v"+a.version.replace(/\./g,"_")];if(!b)throw"Unsupported SOS version: "+a.version;return new b(a)},OpenLayers.Protocol.SOS.DEFAULTS={version:"1.0.0"},OpenLayers.Format.WFSDescribeFeatureType=OpenLayers.Class(OpenLayers.Format.XML,{regExes:{trimSpace:/^\s*|\s*$/g},namespaces:{xsd:"http://www.w3.org/2001/XMLSchema"},readers:{xsd:{schema:function(a,b){var c,d,e=[],f={};this.readChildNodes(a,{complexTypes:e,customTypes:f});var g,h,i=a.attributes;for(c=0,d=i.length;d>c;++c)g=i[c],h=g.name,0===h.indexOf("xmlns")?this.setNamespace(h.split(":")[1]||"",g.value):b[h]=g.value;for(b.featureTypes=e,b.targetPrefix=this.namespaceAlias[b.targetNamespace],c=0,d=e.length;d>c;++c)i=e[c],g=f[i.typeName],f[i.typeName]&&(i.typeName=g.name)},complexType:function(a,b){var c={typeName:a.getAttribute("name")};this.readChildNodes(a,c),b.complexTypes.push(c)},complexContent:function(a,b){this.readChildNodes(a,b)},extension:function(a,b){this.readChildNodes(a,b)},sequence:function(a,b){var c={elements:[]};this.readChildNodes(a,c),b.properties=c.elements},element:function(a,b){var c;if(b.elements){var d={};c=a.attributes;for(var e,f=0,g=c.length;g>f;++f)e=c[f],d[e.name]=e.value;c=d.type,c||(c={},this.readChildNodes(a,c),d.restriction=c,d.type=c.base),d.localType=(c.base||c).split(":").pop(),b.elements.push(d),this.readChildNodes(a,d)}b.complexTypes&&(c=a.getAttribute("type"),d=c.split(":").pop(),b.customTypes[d]={name:a.getAttribute("name"),type:c})},annotation:function(a,b){b.annotation={},this.readChildNodes(a,b.annotation)},appinfo:function(a,b){b.appinfo||(b.appinfo=[]),b.appinfo.push(this.getChildValue(a))},documentation:function(a,b){b.documentation||(b.documentation=[]);var c=this.getChildValue(a);b.documentation.push({lang:a.getAttribute("xml:lang"),textContent:c.replace(this.regExes.trimSpace,"")})},simpleType:function(a,b){this.readChildNodes(a,b)},restriction:function(a,b){b.base=a.getAttribute("base"),this.readRestriction(a,b)}}},readRestriction:function(a,b){for(var c,d,e=a.childNodes,f=0,g=e.length;g>f;++f)c=e[f],1==c.nodeType&&(d=c.nodeName.split(":").pop(),c=c.getAttribute("value"),b[d]?("string"==typeof b[d]&&(b[d]=[b[d]]),b[d].push(c)):b[d]=c)},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b={};if("ExceptionReport"===a.nodeName.split(":").pop()){var c=new OpenLayers.Format.OGCExceptionReport;b.error=c.read(a)}else this.readNode(a,b);return b},CLASS_NAME:"OpenLayers.Format.WFSDescribeFeatureType"}),OpenLayers.Format.GeoRSS=OpenLayers.Class(OpenLayers.Format.XML,{rssns:"http://backend.userland.com/rss2",featureNS:"http://mapserver.gis.umn.edu/mapserver",georssns:"http://www.georss.org/georss",geons:"http://www.w3.org/2003/01/geo/wgs84_pos#",featureTitle:"Untitled",featureDescription:"No Description",gmlParser:null,xy:!1,createGeometryFromItem:function(a){var b=this.getElementsByTagNameNS(a,this.georssns,"point"),c=this.getElementsByTagNameNS(a,this.geons,"lat"),d=this.getElementsByTagNameNS(a,this.geons,"long"),e=this.getElementsByTagNameNS(a,this.georssns,"line"),f=this.getElementsByTagNameNS(a,this.georssns,"polygon"),g=this.getElementsByTagNameNS(a,this.georssns,"where");if(a=this.getElementsByTagNameNS(a,this.georssns,"box"),0<b.length||0<c.length&&0<d.length){0<b.length?(c=OpenLayers.String.trim(b[0].firstChild.nodeValue).split(/\s+/),2!=c.length&&(c=OpenLayers.String.trim(b[0].firstChild.nodeValue).split(/\s*,\s*/))):c=[parseFloat(c[0].firstChild.nodeValue),parseFloat(d[0].firstChild.nodeValue)];var h=new OpenLayers.Geometry.Point(c[1],c[0])}else if(0<e.length){for(c=OpenLayers.String.trim(this.getChildValue(e[0])).split(/\s+/),d=[],e=0,f=c.length;f>e;e+=2)b=new OpenLayers.Geometry.Point(c[e+1],c[e]),d.push(b);h=new OpenLayers.Geometry.LineString(d)}else if(0<f.length){for(c=OpenLayers.String.trim(this.getChildValue(f[0])).split(/\s+/),d=[],e=0,f=c.length;f>e;e+=2)b=new OpenLayers.Geometry.Point(c[e+1],c[e]),d.push(b);h=new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(d)])}else 0<g.length?(this.gmlParser||(this.gmlParser=new OpenLayers.Format.GML({xy:this.xy})),h=this.gmlParser.parseFeature(g[0]).geometry):0<a.length&&(c=OpenLayers.String.trim(a[0].firstChild.nodeValue).split(/\s+/),d=[],3<c.length&&(b=new OpenLayers.Geometry.Point(c[1],c[0]),d.push(b),b=new OpenLayers.Geometry.Point(c[1],c[2]),d.push(b),b=new OpenLayers.Geometry.Point(c[3],c[2]),d.push(b),b=new OpenLayers.Geometry.Point(c[3],c[0]),d.push(b),b=new OpenLayers.Geometry.Point(c[1],c[0]),d.push(b)),h=new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(d)]));return h&&this.internalProjection&&this.externalProjection&&h.transform(this.externalProjection,this.internalProjection),h},createFeatureFromItem:function(a){var b=this.createGeometryFromItem(a),c=this._getChildValue(a,"*","title",this.featureTitle),d=this._getChildValue(a,"*","description",this._getChildValue(a,"*","content",this._getChildValue(a,"*","summary",this.featureDescription))),e=this._getChildValue(a,"*","link");if(!e)try{e=this.getElementsByTagNameNS(a,"*","link")[0].getAttribute("href")}catch(f){e=null}return a=this._getChildValue(a,"*","id",null),b=new OpenLayers.Feature.Vector(b,{title:c,description:d,link:e}),b.fid=a,b},_getChildValue:function(a,b,c,d){return(a=this.getElementsByTagNameNS(a,b,c))&&a[0]&&a[0].firstChild&&a[0].firstChild.nodeValue?this.getChildValue(a[0]):void 0==d?"":d},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b=null,b=this.getElementsByTagNameNS(a,"*","item");0==b.length&&(b=this.getElementsByTagNameNS(a,"*","entry")),a=b.length;for(var c=Array(a),d=0;a>d;d++)c[d]=this.createFeatureFromItem(b[d]);return c},write:function(a){var b;if(OpenLayers.Util.isArray(a)){b=this.createElementNS(this.rssns,"rss");for(var c=0,d=a.length;d>c;c++)b.appendChild(this.createFeatureXML(a[c]))}else b=this.createFeatureXML(a);return OpenLayers.Format.XML.prototype.write.apply(this,[b])},createFeatureXML:function(a){var b=this.buildGeometryNode(a.geometry),c=this.createElementNS(this.rssns,"item"),d=this.createElementNS(this.rssns,"title");d.appendChild(this.createTextNode(a.attributes.title?a.attributes.title:""));var e=this.createElementNS(this.rssns,"description");e.appendChild(this.createTextNode(a.attributes.description?a.attributes.description:"")),c.appendChild(d),c.appendChild(e),a.attributes.link&&(d=this.createElementNS(this.rssns,"link"),d.appendChild(this.createTextNode(a.attributes.link)),c.appendChild(d));for(var f in a.attributes)"link"!=f&&"title"!=f&&"description"!=f&&(d=this.createTextNode(a.attributes[f]),e=f,-1!=f.search(":")&&(e=f.split(":")[1]),e=this.createElementNS(this.featureNS,"feature:"+e),e.appendChild(d),c.appendChild(e));return c.appendChild(b),c},buildGeometryNode:function(a){this.internalProjection&&this.externalProjection&&(a=a.clone(),a.transform(this.internalProjection,this.externalProjection));var b;if("OpenLayers.Geometry.Polygon"==a.CLASS_NAME)b=this.createElementNS(this.georssns,"georss:polygon"),b.appendChild(this.buildCoordinatesNode(a.components[0]));else if("OpenLayers.Geometry.LineString"==a.CLASS_NAME)b=this.createElementNS(this.georssns,"georss:line"),b.appendChild(this.buildCoordinatesNode(a));else{if("OpenLayers.Geometry.Point"!=a.CLASS_NAME)throw"Couldn't parse "+a.CLASS_NAME;b=this.createElementNS(this.georssns,"georss:point"),b.appendChild(this.buildCoordinatesNode(a))}return b},buildCoordinatesNode:function(a){var b=null;if(a.components&&(b=a.components),b){a=b.length;for(var c=Array(a),d=0;a>d;d++)c[d]=b[d].y+" "+b[d].x;b=c.join(" ")}else b=a.y+" "+a.x;return this.createTextNode(b)},CLASS_NAME:"OpenLayers.Format.GeoRSS"}),OpenLayers.Format.WPSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.WPSCapabilities"}),OpenLayers.Format.WPSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows/1.1",wps:"http://www.opengis.net/wps/1.0.0",xlink:"http://www.w3.org/1999/xlink"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b={};return this.readNode(a,b),b},readers:{wps:{Capabilities:function(a,b){this.readChildNodes(a,b)},ProcessOfferings:function(a,b){b.processOfferings={},this.readChildNodes(a,b.processOfferings)},Process:function(a,b){var c={processVersion:this.getAttributeNS(a,this.namespaces.wps,"processVersion")};this.readChildNodes(a,c),b[c.identifier]=c},Languages:function(a,b){b.languages=[],this.readChildNodes(a,b.languages)},Default:function(a,b){var c={isDefault:!0};this.readChildNodes(a,c),b.push(c)},Supported:function(a,b){var c={};this.readChildNodes(a,c),b.push(c)}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WPSCapabilities.v1_0_0"}),OpenLayers.Control.PinchZoom=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,pinchOrigin:null,currentCenter:null,autoActivate:!0,preserveCenter:!1,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,arguments),this.handler=new OpenLayers.Handler.Pinch(this,{start:this.pinchStart,move:this.pinchMove,done:this.pinchDone},this.handlerOptions)},pinchStart:function(a,b){var c=this.preserveCenter?this.map.getPixelFromLonLat(this.map.getCenter()):a.xy;this.currentCenter=this.pinchOrigin=c},pinchMove:function(a,b){var c=b.scale,d=this.map.layerContainerOriginPx,e=this.pinchOrigin,f=this.preserveCenter?this.map.getPixelFromLonLat(this.map.getCenter()):a.xy,g=Math.round(d.x+f.x-e.x+(c-1)*(d.x-e.x)),d=Math.round(d.y+f.y-e.y+(c-1)*(d.y-e.y));this.map.applyTransform(g,d,c),this.currentCenter=f},pinchDone:function(a,b,c){if(this.map.applyTransform(),a=this.map.getZoomForResolution(this.map.getResolution()/c.scale,!0),a!==this.map.getZoom()||!this.currentCenter.equals(this.pinchOrigin)){b=this.map.getResolutionForZoom(a),c=this.map.getLonLatFromPixel(this.pinchOrigin);var d=this.currentCenter,e=this.map.getSize();c.lon+=b*(e.w/2-d.x),c.lat-=b*(e.h/2-d.y),this.map.div.clientWidth=this.map.div.clientWidth,this.map.setCenter(c,a)}},CLASS_NAME:"OpenLayers.Control.PinchZoom"}),OpenLayers.Control.TouchNavigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,clickHandlerOptions:null,documentDrag:!1,autoActivate:!0,initialize:function(a){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.pinchZoom&&(this.pinchZoom.destroy(),delete this.pinchZoom),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.dragPan.activate(),this.handlers.click.activate(),this.pinchZoom.activate(),!0):!1},deactivate:function(){return OpenLayers.Control.prototype.deactivate.apply(this,arguments)?(this.dragPan.deactivate(),this.handlers.click.deactivate(),this.pinchZoom.deactivate(),!0):!1},draw:function(){var a={click:this.defaultClick,dblclick:this.defaultDblClick},b=OpenLayers.Util.extend({"double":!0,stopDouble:!0,pixelTolerance:2},this.clickHandlerOptions);this.handlers.click=new OpenLayers.Handler.Click(this,a,b),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.dragPan.draw(),this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions))},defaultClick:function(a){a.lastTouches&&2==a.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(a){this.map.zoomTo(this.map.zoom+1,a.xy)},CLASS_NAME:"OpenLayers.Control.TouchNavigation"}),OpenLayers.Console.warn("OpenLayers.Rico is deprecated"),OpenLayers.Rico=OpenLayers.Rico||{},OpenLayers.Rico.Color=OpenLayers.Class({initialize:function(a,b,c){this.rgb={r:a,g:b,b:c}},setRed:function(a){this.rgb.r=a},setGreen:function(a){this.rgb.g=a},setBlue:function(a){this.rgb.b=a},setHue:function(a){var b=this.asHSB();b.h=a,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(b.h,b.s,b.b)},setSaturation:function(a){var b=this.asHSB();b.s=a,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(b.h,b.s,b.b)},setBrightness:function(a){var b=this.asHSB();b.b=a,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(b.h,b.s,b.b)},darken:function(a){var b=this.asHSB();this.rgb=OpenLayers.Rico.Color.HSBtoRGB(b.h,b.s,Math.max(b.b-a,0))},brighten:function(a){var b=this.asHSB();this.rgb=OpenLayers.Rico.Color.HSBtoRGB(b.h,b.s,Math.min(b.b+a,1))},blend:function(a){this.rgb.r=Math.floor((this.rgb.r+a.rgb.r)/2),this.rgb.g=Math.floor((this.rgb.g+a.rgb.g)/2),this.rgb.b=Math.floor((this.rgb.b+a.rgb.b)/2)},isBright:function(){return this.asHSB(),.5<this.asHSB().b},isDark:function(){return!this.isBright()},asRGB:function(){return"rgb("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+")"},asHex:function(){return"#"+this.rgb.r.toColorPart()+this.rgb.g.toColorPart()+this.rgb.b.toColorPart()},asHSB:function(){return OpenLayers.Rico.Color.RGBtoHSB(this.rgb.r,this.rgb.g,this.rgb.b)},toString:function(){return this.asHex()}}),OpenLayers.Rico.Color.createFromHex=function(a){if(4==a.length){var b=a;a="#";for(var c=1;4>c;c++)a+=b.charAt(c)+b.charAt(c)}return 0==a.indexOf("#")&&(a=a.substring(1)),b=a.substring(0,2),c=a.substring(2,4),a=a.substring(4,6),new OpenLayers.Rico.Color(parseInt(b,16),parseInt(c,16),parseInt(a,16))},OpenLayers.Rico.Color.createColorFromBackground=function(a){var b=OpenLayers.Element.getStyle(OpenLayers.Util.getElement(a),"backgroundColor");return"transparent"==b&&a.parentNode?OpenLayers.Rico.Color.createColorFromBackground(a.parentNode):null==b?new OpenLayers.Rico.Color(255,255,255):0==b.indexOf("rgb(")?(a=b.substring(4,b.length-1).split(","),new OpenLayers.Rico.Color(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]))):0==b.indexOf("#")?OpenLayers.Rico.Color.createFromHex(b):new OpenLayers.Rico.Color(255,255,255)},OpenLayers.Rico.Color.HSBtoRGB=function(a,b,c){var d=0,e=0,f=0;if(0==b)f=e=d=parseInt(255*c+.5);else{a=6*(a-Math.floor(a));var g=a-Math.floor(a),h=c*(1-b),i=c*(1-b*g);switch(b=c*(1-b*(1-g)),parseInt(a)){case 0:d=255*c+.5,e=255*b+.5,f=255*h+.5;break;case 1:d=255*i+.5,e=255*c+.5,f=255*h+.5;break;case 2:d=255*h+.5,e=255*c+.5,f=255*b+.5;break;case 3:d=255*h+.5,e=255*i+.5,f=255*c+.5;break;case 4:d=255*b+.5,e=255*h+.5,f=255*c+.5;break;case 5:d=255*c+.5,e=255*h+.5,f=255*i+.5}}return{r:parseInt(d),g:parseInt(e),b:parseInt(f)}},OpenLayers.Rico.Color.RGBtoHSB=function(a,b,c){var d,e=a>b?a:b;c>e&&(e=c);var f=b>a?a:b;if(f>c&&(f=c),d=0!=e?(e-f)/e:0,0==d)a=0;else{var g=(e-a)/(e-f),h=(e-b)/(e-f);c=(e-c)/(e-f),a=(a==e?c-h:b==e?2+g-c:4+h-g)/6,0>a&&(a+=1)}return{h:a,s:d,b:e/255}},OpenLayers.Style2=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:!1,rules:null,initialize:function(a){OpenLayers.Util.extend(this,a),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var a=0,b=this.rules.length;b>a;a++)this.rules[a].destroy();delete this.rules},clone:function(){var a=OpenLayers.Util.extend({},this);if(this.rules){a.rules=[];for(var b=0,c=this.rules.length;c>b;++b)a.rules.push(this.rules[b].clone())}return new OpenLayers.Style2(a)},CLASS_NAME:"OpenLayers.Style2"}),OpenLayers.Format.WFS=OpenLayers.Class(OpenLayers.Format.GML,{layer:null,wfsns:"http://www.opengis.net/wfs",ogcns:"http://www.opengis.net/ogc",initialize:function(a,b){OpenLayers.Format.GML.prototype.initialize.apply(this,[a]),this.layer=b,this.layer.featureNS&&(this.featureNS=this.layer.featureNS),this.layer.options.geometry_column&&(this.geometryName=this.layer.options.geometry_column),this.layer.options.typename&&(this.featureName=this.layer.options.typename)},write:function(a){var b=this.createElementNS(this.wfsns,"wfs:Transaction");b.setAttribute("version","1.0.0"),b.setAttribute("service","WFS");for(var c=0;c<a.length;c++)switch(a[c].state){case OpenLayers.State.INSERT:b.appendChild(this.insert(a[c]));break;case OpenLayers.State.UPDATE:b.appendChild(this.update(a[c]));break;case OpenLayers.State.DELETE:b.appendChild(this.remove(a[c]))}return OpenLayers.Format.XML.prototype.write.apply(this,[b])},createFeatureXML:function(a){var b=this.buildGeometryNode(a.geometry),c=this.createElementNS(this.featureNS,"feature:"+this.geometryName);c.appendChild(b),b=this.createElementNS(this.featureNS,"feature:"+this.featureName),b.appendChild(c);for(var d in a.attributes){var c=this.createTextNode(a.attributes[d]),e=d;-1!=d.search(":")&&(e=d.split(":")[1]),e=this.createElementNS(this.featureNS,"feature:"+e),e.appendChild(c),b.appendChild(e)}return b},insert:function(a){var b=this.createElementNS(this.wfsns,"wfs:Insert");return b.appendChild(this.createFeatureXML(a)),b},update:function(a){a.fid||OpenLayers.Console.userError(OpenLayers.i18n("noFID"));var b=this.createElementNS(this.wfsns,"wfs:Update");b.setAttribute("typeName",this.featurePrefix+":"+this.featureName),b.setAttribute("xmlns:"+this.featurePrefix,this.featureNS);var c=this.createElementNS(this.wfsns,"wfs:Property"),d=this.createElementNS(this.wfsns,"wfs:Name"),e=this.createTextNode(this.geometryName);d.appendChild(e),c.appendChild(d),d=this.createElementNS(this.wfsns,"wfs:Value"),e=this.buildGeometryNode(a.geometry),a.layer&&e.setAttribute("srsName",a.layer.projection.getCode()),d.appendChild(e),c.appendChild(d),b.appendChild(c);for(var f in a.attributes)c=this.createElementNS(this.wfsns,"wfs:Property"),d=this.createElementNS(this.wfsns,"wfs:Name"),d.appendChild(this.createTextNode(f)),c.appendChild(d),d=this.createElementNS(this.wfsns,"wfs:Value"),d.appendChild(this.createTextNode(a.attributes[f])),c.appendChild(d),b.appendChild(c);return c=this.createElementNS(this.ogcns,"ogc:Filter"),f=this.createElementNS(this.ogcns,"ogc:FeatureId"),f.setAttribute("fid",a.fid),c.appendChild(f),b.appendChild(c),b},remove:function(a){if(!a.fid)return OpenLayers.Console.userError(OpenLayers.i18n("noFID")),!1;var b=this.createElementNS(this.wfsns,"wfs:Delete");b.setAttribute("typeName",this.featurePrefix+":"+this.featureName),b.setAttribute("xmlns:"+this.featurePrefix,this.featureNS);var c=this.createElementNS(this.ogcns,"ogc:Filter"),d=this.createElementNS(this.ogcns,"ogc:FeatureId");return d.setAttribute("fid",a.fid),c.appendChild(d),b.appendChild(c),b},destroy:function(){this.layer=null},CLASS_NAME:"OpenLayers.Format.WFS"}),OpenLayers.Format.SLD.v1_0_0_GeoServer=OpenLayers.Class(OpenLayers.Format.SLD.v1_0_0,{version:"1.0.0",profile:"GeoServer",readers:OpenLayers.Util.applyDefaults({sld:OpenLayers.Util.applyDefaults({Priority:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.priority=c)},VendorOption:function(a,b){b.vendorOptions||(b.vendorOptions={}),b.vendorOptions[a.getAttribute("name")]=this.getChildValue(a)},TextSymbolizer:function(a,b){OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld.TextSymbolizer.apply(this,arguments);var c=this.multipleSymbolizers?b.symbolizers[b.symbolizers.length-1]:b.symbolizer.Text;void 0===c.graphic&&(c.graphic=!1)}},OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld)},OpenLayers.Format.SLD.v1_0_0.prototype.readers),writers:OpenLayers.Util.applyDefaults({sld:OpenLayers.Util.applyDefaults({Priority:function(a){return this.writers.sld._OGCExpression.call(this,"sld:Priority",a)},VendorOption:function(a){return this.createElementNSPlus("sld:VendorOption",{attributes:{name:a.name},value:a.value})},TextSymbolizer:function(a){var b=OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.TextSymbolizer.apply(this,arguments);return!1!==a.graphic&&(a.externalGraphic||a.graphicName)&&this.writeNode("Graphic",a,b),"priority"in a&&this.writeNode("Priority",a.priority,b),this.addVendorOptions(b,a)},PointSymbolizer:function(a){var b=OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PointSymbolizer.apply(this,arguments);return this.addVendorOptions(b,a)},LineSymbolizer:function(a){var b=OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.LineSymbolizer.apply(this,arguments);return this.addVendorOptions(b,a)},PolygonSymbolizer:function(a){var b=OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PolygonSymbolizer.apply(this,arguments);return this.addVendorOptions(b,a)}},OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld)},OpenLayers.Format.SLD.v1_0_0.prototype.writers),addVendorOptions:function(a,b){if(b.vendorOptions)for(var c in b.vendorOptions)this.writeNode("VendorOption",{name:c,value:b.vendorOptions[c]},a);return a},CLASS_NAME:"OpenLayers.Format.SLD.v1_0_0_GeoServer"}),OpenLayers.Layer.Boxes=OpenLayers.Class(OpenLayers.Layer.Markers,{drawMarker:function(a){var b=this.map.getLayerPxFromLonLat({lon:a.bounds.left,lat:a.bounds.top}),c=this.map.getLayerPxFromLonLat({lon:a.bounds.right,lat:a.bounds.bottom});null==c||null==b?a.display(!1):(b=a.draw(b,{w:Math.max(1,c.x-b.x),h:Math.max(1,c.y-b.y)}),a.drawn||(this.div.appendChild(b),a.drawn=!0))},removeMarker:function(a){OpenLayers.Util.removeItem(this.markers,a),null!=a.div&&a.div.parentNode==this.div&&this.div.removeChild(a.div)},CLASS_NAME:"OpenLayers.Layer.Boxes"}),OpenLayers.Format.WFSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1,{readers:{wfs:OpenLayers.Util.applyDefaults({Service:function(a,b){b.service={},this.readChildNodes(a,b.service)},Fees:function(a,b){var c=this.getChildValue(a);c&&"none"!=c.toLowerCase()&&(b.fees=c)},AccessConstraints:function(a,b){var c=this.getChildValue(a);c&&"none"!=c.toLowerCase()&&(b.accessConstraints=c)},OnlineResource:function(a,b){var c=this.getChildValue(a);c&&"none"!=c.toLowerCase()&&(b.onlineResource=c)},Keywords:function(a,b){var c=this.getChildValue(a);c&&"none"!=c.toLowerCase()&&(b.keywords=c.split(", "))},Capability:function(a,b){b.capability={},this.readChildNodes(a,b.capability)},Request:function(a,b){b.request={},this.readChildNodes(a,b.request)},GetFeature:function(a,b){b.getfeature={href:{},formats:[]},this.readChildNodes(a,b.getfeature)},ResultFormat:function(a,b){for(var c,d=a.childNodes,e=0;e<d.length;e++)c=d[e],1==c.nodeType&&b.formats.push(c.nodeName)},DCPType:function(a,b){this.readChildNodes(a,b)},HTTP:function(a,b){this.readChildNodes(a,b.href)},Get:function(a,b){b.get=a.getAttribute("onlineResource")},Post:function(a,b){b.post=a.getAttribute("onlineResource")},SRS:function(a,b){var c=this.getChildValue(a);c&&(b.srs=c)}},OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs)},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1_0_0"}),OpenLayers.Format.WMSCapabilities.v1_3=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1,{readers:{wms:OpenLayers.Util.applyDefaults({WMS_Capabilities:function(a,b){this.readChildNodes(a,b)},LayerLimit:function(a,b){b.layerLimit=parseInt(this.getChildValue(a))},MaxWidth:function(a,b){b.maxWidth=parseInt(this.getChildValue(a))},MaxHeight:function(a,b){b.maxHeight=parseInt(this.getChildValue(a))},BoundingBox:function(a,b){var c=OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this,[a,b]);c.srs=a.getAttribute("CRS"),b.bbox[c.srs]=c},CRS:function(a,b){this.readers.wms.SRS.apply(this,[a,b])},EX_GeographicBoundingBox:function(a,b){b.llbbox=[],this.readChildNodes(a,b.llbbox)},westBoundLongitude:function(a,b){b[0]=this.getChildValue(a)},eastBoundLongitude:function(a,b){b[2]=this.getChildValue(a)},southBoundLatitude:function(a,b){b[1]=this.getChildValue(a)},northBoundLatitude:function(a,b){b[3]=this.getChildValue(a)},MinScaleDenominator:function(a,b){b.maxScale=parseFloat(this.getChildValue(a)).toPrecision(16)},MaxScaleDenominator:function(a,b){b.minScale=parseFloat(this.getChildValue(a)).toPrecision(16)},Dimension:function(a,b){var c={name:a.getAttribute("name").toLowerCase(),units:a.getAttribute("units"),unitsymbol:a.getAttribute("unitSymbol"),nearestVal:"1"===a.getAttribute("nearestValue"),multipleVal:"1"===a.getAttribute("multipleValues"),"default":a.getAttribute("default")||"",current:"1"===a.getAttribute("current"),values:this.getChildValue(a).split(",")};b.dimensions[c.name]=c},Keyword:function(a,b){var c={value:this.getChildValue(a),vocabulary:a.getAttribute("vocabulary")};b.keywords&&b.keywords.push(c)}},OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms),sld:{UserDefinedSymbolization:function(a,b){this.readers.wms.UserDefinedSymbolization.apply(this,[a,b]),b.userSymbols.inlineFeature=1==parseInt(a.getAttribute("InlineFeature")),b.userSymbols.remoteWCS=1==parseInt(a.getAttribute("RemoteWCS"))},DescribeLayer:function(a,b){this.readers.wms.DescribeLayer.apply(this,[a,b])},GetLegendGraphic:function(a,b){this.readers.wms.GetLegendGraphic.apply(this,[a,b])}}},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_3"}),OpenLayers.Layer.Zoomify=OpenLayers.Class(OpenLayers.Layer.Grid,{size:null,isBaseLayer:!0,standardTileSize:256,tileOriginCorner:"tl",numberOfTiers:0,tileCountUpToTier:null,tierSizeInTiles:null,tierImageSize:null,initialize:function(a,b,c,d){this.initializeZoomify(c),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a,b,c,{},d])},initializeZoomify:function(a){var b=a.clone();for(this.size=a.clone(),a=new OpenLayers.Size(Math.ceil(b.w/this.standardTileSize),Math.ceil(b.h/this.standardTileSize)),this.tierSizeInTiles=[a],this.tierImageSize=[b];b.w>this.standardTileSize||b.h>this.standardTileSize;)b=new OpenLayers.Size(Math.floor(b.w/2),Math.floor(b.h/2)),a=new OpenLayers.Size(Math.ceil(b.w/this.standardTileSize),Math.ceil(b.h/this.standardTileSize)),this.tierSizeInTiles.push(a),this.tierImageSize.push(b);for(this.tierSizeInTiles.reverse(),this.tierImageSize.reverse(),this.numberOfTiers=this.tierSizeInTiles.length,b=[1],this.tileCountUpToTier=[0],a=1;a<this.numberOfTiers;a++)b.unshift(Math.pow(2,a)),this.tileCountUpToTier.push(this.tierSizeInTiles[a-1].w*this.tierSizeInTiles[a-1].h+this.tileCountUpToTier[a-1]);this.serverResolutions||(this.serverResolutions=b)},destroy:function(){OpenLayers.Layer.Grid.prototype.destroy.apply(this,arguments),this.tileCountUpToTier.length=0,this.tierSizeInTiles.length=0,this.tierImageSize.length=0},clone:function(a){return null==a&&(a=new OpenLayers.Layer.Zoomify(this.name,this.url,this.size,this.options)),a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){a=this.adjustBounds(a);var b=this.getServerResolution(),c=Math.round((a.left-this.tileOrigin.lon)/(b*this.tileSize.w));return a=Math.round((this.tileOrigin.lat-a.top)/(b*this.tileSize.h)),b=this.getZoomForResolution(b),c="TileGroup"+Math.floor((c+a*this.tierSizeInTiles[b].w+this.tileCountUpToTier[b])/256)+"/"+b+"-"+c+"-"+a+".jpg",b=this.url,OpenLayers.Util.isArray(b)&&(b=this.selectUrl(c,b)),b+c},getImageSize:function(){if(0<arguments.length){var a=this.adjustBounds(arguments[0]),b=this.getServerResolution(),c=Math.round((a.left-this.tileOrigin.lon)/(b*this.tileSize.w)),a=Math.round((this.tileOrigin.lat-a.top)/(b*this.tileSize.h)),b=this.getZoomForResolution(b),d=this.standardTileSize,e=this.standardTileSize;return c==this.tierSizeInTiles[b].w-1&&(d=this.tierImageSize[b].w%this.standardTileSize),a==this.tierSizeInTiles[b].h-1&&(e=this.tierImageSize[b].h%this.standardTileSize),new OpenLayers.Size(d,e)}return this.tileSize},setMap:function(a){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.top)},CLASS_NAME:"OpenLayers.Layer.Zoomify"}),OpenLayers.Layer.MapServer=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{mode:"map",map_imagetype:"png"},initialize:function(a,b,c,d){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments),this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS),(null==d||null==d.isBaseLayer)&&(this.isBaseLayer="true"!=this.params.transparent&&1!=this.params.transparent)},clone:function(a){return null==a&&(a=new OpenLayers.Layer.MapServer(this.name,this.url,this.params,this.getOptions())),a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){a=this.adjustBounds(a),a=[a.left,a.bottom,a.right,a.top];var b=this.getImageSize();return this.getFullRequestString({mapext:a,imgext:a,map_size:[b.w,b.h],imgx:b.w/2,imgy:b.h/2,imgxy:[b.w,b.h]})},getFullRequestString:function(a,b){var c=null==b?this.url:b,d=OpenLayers.Util.extend({},this.params),d=OpenLayers.Util.extend(d,a),e=OpenLayers.Util.getParameterString(d);OpenLayers.Util.isArray(c)&&(c=this.selectUrl(e,c));var f,e=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(c));for(f in d)f.toUpperCase()in e&&delete d[f];return e=OpenLayers.Util.getParameterString(d),d=c,e=e.replace(/,/g,"+"),""!=e&&(f=c.charAt(c.length-1),d="&"==f||"?"==f?d+e:-1==c.indexOf("?")?d+("?"+e):d+("&"+e)),d},CLASS_NAME:"OpenLayers.Layer.MapServer"}),OpenLayers.Renderer.VML=OpenLayers.Class(OpenLayers.Renderer.Elements,{xmlns:"urn:schemas-microsoft-com:vml",symbolCache:{},offset:null,initialize:function(a){if(this.supported()){if(!document.namespaces.olv){document.namespaces.add("olv",this.xmlns);for(var b=document.createStyleSheet(),c="shape rect oval fill stroke imagedata group textbox".split(" "),d=0,e=c.length;e>d;d++)b.addRule("olv\\:"+c[d],"behavior: url(#default#VML); position: absolute; display: inline-block;")}OpenLayers.Renderer.Elements.prototype.initialize.apply(this,arguments)}},supported:function(){return!!document.namespaces},setExtent:function(a,b){var c=OpenLayers.Renderer.Elements.prototype.setExtent.apply(this,arguments),d=this.getResolution(),e=a.left/d|0,d=a.top/d-this.size.h|0;b||!this.offset?(this.offset={x:e,y:d},d=e=0):(e-=this.offset.x,d-=this.offset.y),this.root.coordorigin=e-this.xOffset+" "+d;for(var e=[this.root,this.vectorRoot,this.textRoot],f=0,g=e.length;g>f;++f)d=e[f],d.coordsize=this.size.w+" "+this.size.h;return this.root.style.flip="y",c},setSize:function(a){OpenLayers.Renderer.prototype.setSize.apply(this,arguments);for(var b,c=[this.rendererRoot,this.root,this.vectorRoot,this.textRoot],d=this.size.w+"px",e=this.size.h+"px",f=0,g=c.length;g>f;++f)b=c[f],b.style.width=d,b.style.height=e},getNodeType:function(a,b){var c=null;switch(a.CLASS_NAME){case"OpenLayers.Geometry.Point":
c=b.externalGraphic?"olv:rect":this.isComplexSymbol(b.graphicName)?"olv:shape":"olv:oval";break;case"OpenLayers.Geometry.Rectangle":c="olv:rect";break;case"OpenLayers.Geometry.LineString":case"OpenLayers.Geometry.LinearRing":case"OpenLayers.Geometry.Polygon":case"OpenLayers.Geometry.Curve":c="olv:shape"}return c},setStyle:function(a,b,c,d){b=b||a._style,c=c||a._options;var e=b.fillColor,f=b.title||b.graphicTitle;if(f&&(a.title=f),"OpenLayers.Geometry.Point"===a._geometryClass)if(b.externalGraphic){c.isFilled=!0;var e=b.graphicWidth||b.graphicHeight,f=b.graphicHeight||b.graphicWidth,e=e?e:2*b.pointRadius,f=f?f:2*b.pointRadius,g=this.getResolution(),h=void 0!=b.graphicXOffset?b.graphicXOffset:-(.5*e),i=void 0!=b.graphicYOffset?b.graphicYOffset:-(.5*f);a.style.left=((d.x-this.featureDx)/g-this.offset.x+h|0)+"px",a.style.top=(d.y/g-this.offset.y-(i+f)|0)+"px",a.style.width=e+"px",a.style.height=f+"px",a.style.flip="y",e="none",c.isStroked=!1}else this.isComplexSymbol(b.graphicName)?(f=this.importSymbol(b.graphicName),a.path=f.path,a.coordorigin=f.left+","+f.bottom,f=f.size,a.coordsize=f+","+f,this.drawCircle(a,d,b.pointRadius),a.style.flip="y"):this.drawCircle(a,d,b.pointRadius);return c.isFilled?a.fillcolor=e:a.filled="false",d=a.getElementsByTagName("fill"),d=0==d.length?null:d[0],c.isFilled?(d||(d=this.createNode("olv:fill",a.id+"_fill")),d.opacity=b.fillOpacity,"OpenLayers.Geometry.Point"===a._geometryClass&&b.externalGraphic&&(b.graphicOpacity&&(d.opacity=b.graphicOpacity),d.src=b.externalGraphic,d.type="frame",b.graphicWidth&&b.graphicHeight||(d.aspect="atmost")),d.parentNode!=a&&a.appendChild(d)):d&&a.removeChild(d),e=b.rotation,(void 0!==e||void 0!==a._rotation)&&(a._rotation=e,b.externalGraphic?(this.graphicRotate(a,h,i,b),d.opacity=0):"OpenLayers.Geometry.Point"===a._geometryClass&&(a.style.rotation=e||0)),h=a.getElementsByTagName("stroke"),h=0==h.length?null:h[0],c.isStroked?(h||(h=this.createNode("olv:stroke",a.id+"_stroke"),a.appendChild(h)),h.on=!0,h.color=b.strokeColor,h.weight=b.strokeWidth+"px",h.opacity=b.strokeOpacity,h.endcap="butt"==b.strokeLinecap?"flat":b.strokeLinecap||"round",b.strokeDashstyle&&(h.dashstyle=this.dashStyle(b))):(a.stroked=!1,h&&(h.on=!1)),"inherit"!=b.cursor&&null!=b.cursor&&(a.style.cursor=b.cursor),a},graphicRotate:function(a,b,c,d){d=d||a._style;var e,f,g=d.rotation||0;if(d.graphicWidth&&d.graphicHeight){f=Math.max(d.graphicWidth,d.graphicHeight),e=d.graphicWidth/d.graphicHeight;var h=Math.round(d.graphicWidth||f*e),i=Math.round(d.graphicHeight||f);a.style.width=h+"px",a.style.height=i+"px";var j=document.getElementById(a.id+"_image");j||(j=this.createNode("olv:imagedata",a.id+"_image"),a.appendChild(j)),j.style.width=h+"px",j.style.height=i+"px",j.src=d.externalGraphic,j.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='', sizingMethod='scale')",j=g*Math.PI/180,g=Math.sin(j),j=Math.cos(j),g="progid:DXImageTransform.Microsoft.Matrix(M11="+j+",M12="+-g+",M21="+g+",M22="+j+",SizingMethod='auto expand')\n",(j=d.graphicOpacity||d.fillOpacity)&&1!=j&&(g+="progid:DXImageTransform.Microsoft.BasicImage(opacity="+j+")\n"),a.style.filter=g,g=new OpenLayers.Geometry.Point(-b,-c),h=new OpenLayers.Bounds(0,0,h,i).toGeometry(),h.rotate(d.rotation,g),h=h.getBounds(),a.style.left=Math.round(parseInt(a.style.left)+h.left)+"px",a.style.top=Math.round(parseInt(a.style.top)-h.bottom)+"px"}else{var k=new Image;k.onreadystatechange=OpenLayers.Function.bind(function(){("complete"==k.readyState||"interactive"==k.readyState)&&(e=k.width/k.height,f=Math.max(2*d.pointRadius,d.graphicWidth||0,d.graphicHeight||0),b*=e,d.graphicWidth=f*e,d.graphicHeight=f,this.graphicRotate(a,b,c,d))},this),k.src=d.externalGraphic}},postDraw:function(a){a.style.visibility="visible";var b=a._style.fillColor,c=a._style.strokeColor;"none"==b&&a.fillcolor!=b&&(a.fillcolor=b),"none"==c&&a.strokecolor!=c&&(a.strokecolor=c)},setNodeDimension:function(a,b){var c=b.getBounds();if(c){var d=this.getResolution(),c=new OpenLayers.Bounds((c.left-this.featureDx)/d-this.offset.x|0,c.bottom/d-this.offset.y|0,(c.right-this.featureDx)/d-this.offset.x|0,c.top/d-this.offset.y|0);a.style.left=c.left+"px",a.style.top=c.top+"px",a.style.width=c.getWidth()+"px",a.style.height=c.getHeight()+"px",a.coordorigin=c.left+" "+c.top,a.coordsize=c.getWidth()+" "+c.getHeight()}},dashStyle:function(a){switch(a=a.strokeDashstyle){case"solid":case"dot":case"dash":case"dashdot":case"longdash":case"longdashdot":return a;default:return a=a.split(/[ ,]/),2==a.length?1*a[0]>=2*a[1]?"longdash":1==a[0]||1==a[1]?"dot":"dash":4==a.length?1*a[0]>=2*a[1]?"longdashdot":"dashdot":"solid"}},createNode:function(a,b){var c=document.createElement(a);return b&&(c.id=b),c.unselectable="on",c.onselectstart=OpenLayers.Function.False,c},nodeTypeCompare:function(a,b){var c=b,d=c.indexOf(":");-1!=d&&(c=c.substr(d+1));var e=a.nodeName,d=e.indexOf(":");return-1!=d&&(e=e.substr(d+1)),c==e},createRenderRoot:function(){return this.nodeFactory(this.container.id+"_vmlRoot","div")},createRoot:function(a){return this.nodeFactory(this.container.id+a,"olv:group")},drawPoint:function(a,b){return this.drawCircle(a,b,1)},drawCircle:function(a,b,c){if(!isNaN(b.x)&&!isNaN(b.y)){var d=this.getResolution();return a.style.left=((b.x-this.featureDx)/d-this.offset.x|0)-c+"px",a.style.top=(b.y/d-this.offset.y|0)-c+"px",b=2*c,a.style.width=b+"px",a.style.height=b+"px",a}return!1},drawLineString:function(a,b){return this.drawLine(a,b,!1)},drawLinearRing:function(a,b){return this.drawLine(a,b,!0)},drawLine:function(a,b,c){this.setNodeDimension(a,b);for(var d,e,f=this.getResolution(),g=b.components.length,h=Array(g),i=0;g>i;i++)d=b.components[i],e=(d.x-this.featureDx)/f-this.offset.x|0,d=d.y/f-this.offset.y|0,h[i]=" "+e+","+d+" l ";return b=c?" x e":" e",a.path="m"+h.join("")+b,a},drawPolygon:function(a,b){this.setNodeDimension(a,b);var c,d,e,f,g,h,i,j,k,l,m=this.getResolution(),n=[];for(c=0,d=b.components.length;d>c;c++){for(n.push("m"),e=b.components[c].components,f=0===c,h=g=null,i=0,j=e.length;j>i;i++)k=e[i],l=(k.x-this.featureDx)/m-this.offset.x|0,k=k.y/m-this.offset.y|0,l=" "+l+","+k,n.push(l),0==i&&n.push(" l"),f||(g?g!=l&&(h?h!=l&&(f=!0):h=l):g=l);n.push(f?" x ":" ")}return n.push("e"),a.path=n.join(""),a},drawRectangle:function(a,b){var c=this.getResolution();return a.style.left=((b.x-this.featureDx)/c-this.offset.x|0)+"px",a.style.top=(b.y/c-this.offset.y|0)+"px",a.style.width=(b.width/c|0)+"px",a.style.height=(b.height/c|0)+"px",a},drawText:function(a,b,c){var d=this.nodeFactory(a+this.LABEL_ID_SUFFIX,"olv:rect"),e=this.nodeFactory(a+this.LABEL_ID_SUFFIX+"_textbox","olv:textbox"),f=this.getResolution();d.style.left=((c.x-this.featureDx)/f-this.offset.x|0)+"px",d.style.top=(c.y/f-this.offset.y|0)+"px",d.style.flip="y",e.innerText=b.label,"inherit"!=b.cursor&&null!=b.cursor&&(e.style.cursor=b.cursor),b.fontColor&&(e.style.color=b.fontColor),b.fontOpacity&&(e.style.filter="alpha(opacity="+100*b.fontOpacity+")"),b.fontFamily&&(e.style.fontFamily=b.fontFamily),b.fontSize&&(e.style.fontSize=b.fontSize),b.fontWeight&&(e.style.fontWeight=b.fontWeight),b.fontStyle&&(e.style.fontStyle=b.fontStyle),!0===b.labelSelect&&(d._featureId=a,e._featureId=a,e._geometry=c,e._geometryClass=c.CLASS_NAME),e.style.whiteSpace="nowrap",e.inset="1px,0px,0px,0px",d.parentNode||(d.appendChild(e),this.textRoot.appendChild(d)),b=b.labelAlign||"cm",1==b.length&&(b+="m"),a=e.clientWidth*OpenLayers.Renderer.VML.LABEL_SHIFT[b.substr(0,1)],e=e.clientHeight*OpenLayers.Renderer.VML.LABEL_SHIFT[b.substr(1,1)],d.style.left=parseInt(d.style.left)-a-1+"px",d.style.top=parseInt(d.style.top)+e+"px"},moveRoot:function(a){var b=this.map.getLayer(a.container.id);b instanceof OpenLayers.Layer.Vector.RootContainer&&(b=this.map.getLayer(this.container.id)),b&&b.renderer.clear(),OpenLayers.Renderer.Elements.prototype.moveRoot.apply(this,arguments),b&&b.redraw()},importSymbol:function(a){var b=this.container.id+"-"+a,c=this.symbolCache[b];if(c)return c;if(c=OpenLayers.Renderer.symbol[a],!c)throw Error(a+" is not a valid symbol name");a=new OpenLayers.Bounds(Number.MAX_VALUE,Number.MAX_VALUE,0,0);for(var d=["m"],e=0;e<c.length;e+=2){var f=c[e],g=c[e+1];a.left=Math.min(a.left,f),a.bottom=Math.min(a.bottom,g),a.right=Math.max(a.right,f),a.top=Math.max(a.top,g),d.push(f),d.push(g),0==e&&d.push("l")}return d.push("x e"),c=d.join(" "),d=(a.getWidth()-a.getHeight())/2,d>0?(a.bottom-=d,a.top+=d):(a.left+=d,a.right-=d),c={path:c,size:a.getWidth(),left:a.left,bottom:a.bottom},this.symbolCache[b]=c},CLASS_NAME:"OpenLayers.Renderer.VML"}),OpenLayers.Renderer.VML.LABEL_SHIFT={l:0,c:.5,r:1,t:0,m:.5,b:1},OpenLayers.Control.CacheRead=OpenLayers.Class(OpenLayers.Control,{fetchEvent:"tileloadstart",layers:null,autoActivate:!0,setMap:function(a){OpenLayers.Control.prototype.setMap.apply(this,arguments);var b,c=this.layers||a.layers;for(b=c.length-1;b>=0;--b)this.addLayer({layer:c[b]});this.layers||a.events.on({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this})},addLayer:function(a){a.layer.events.register(this.fetchEvent,this,this.fetch)},removeLayer:function(a){a.layer.events.unregister(this.fetchEvent,this,this.fetch)},fetch:function(a){if(this.active&&window.localStorage&&a.tile instanceof OpenLayers.Tile.Image){var b=a.tile,c=b.url;!b.layer.crossOriginKeyword&&OpenLayers.ProxyHost&&0===c.indexOf(OpenLayers.ProxyHost)&&(c=OpenLayers.Control.CacheWrite.urlMap[c]),(c=window.localStorage.getItem("olCache_"+c))&&(b.url=c,"tileerror"===a.type&&b.setImgSrc(c))}},destroy:function(){if(this.layers||this.map){var a,b=this.layers||this.map.layers;for(a=b.length-1;a>=0;--a)this.removeLayer({layer:b[a]})}this.map&&this.map.events.un({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.CacheRead"}),OpenLayers.Protocol.WFS.v1_0_0=OpenLayers.Class(OpenLayers.Protocol.WFS.v1,{version:"1.0.0",CLASS_NAME:"OpenLayers.Protocol.WFS.v1_0_0"}),OpenLayers.Format.WMSGetFeatureInfo=OpenLayers.Class(OpenLayers.Format.XML,{layerIdentifier:"_layer",featureIdentifier:"_feature",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},gmlFormat:null,read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b=a.documentElement;if(b){var c=this["read_"+b.nodeName];a=c?c.call(this,b):new OpenLayers.Format.GML(this.options?this.options:{}).read(a)}return a},read_msGMLOutput:function(a){var b=[];if(a=this.getSiblingNodesByTagCriteria(a,this.layerIdentifier))for(var c=0,d=a.length;d>c;++c){var e=a[c],f=e.nodeName;if(e.prefix&&(f=f.split(":")[1]),f=f.replace(this.layerIdentifier,""),e=this.getSiblingNodesByTagCriteria(e,this.featureIdentifier))for(var g=0;g<e.length;g++){var h=e[g],i=this.parseGeometry(h),h=this.parseAttributes(h),h=new OpenLayers.Feature.Vector(i.geometry,h,null);h.bounds=i.bounds,h.type=f,b.push(h)}}return b},read_FeatureInfoResponse:function(a){var b=[];a=this.getElementsByTagNameNS(a,"*","FIELDS");for(var c=0,d=a.length;d>c;c++){var e,f=a[c],g={},h=f.attributes.length;if(h>0)for(e=0;h>e;e++){var i=f.attributes[e];g[i.nodeName]=i.nodeValue}else for(f=f.childNodes,e=0,h=f.length;h>e;++e)i=f[e],3!=i.nodeType&&(g[i.getAttribute("name")]=i.getAttribute("value"));b.push(new OpenLayers.Feature.Vector(null,g,null))}return b},getSiblingNodesByTagCriteria:function(a,b){var c,d,e,f,g=[];if(a&&a.hasChildNodes()){c=a.childNodes,e=c.length;for(var h=0;e>h;h++){for(f=c[h];f&&1!=f.nodeType;)f=f.nextSibling,h++;d=f?f.nodeName:"",0<d.length&&-1<d.indexOf(b)?g.push(f):(d=this.getSiblingNodesByTagCriteria(f,b),0<d.length&&(0==g.length?g=d:g.push(d)))}}return g},parseAttributes:function(a){var b={};if(1==a.nodeType){a=a.childNodes;for(var c=a.length,d=0;c>d;++d){var e=a[d];if(1==e.nodeType){var f=e.childNodes,e=e.prefix?e.nodeName.split(":")[1]:e.nodeName;0==f.length?b[e]=null:1==f.length&&(f=f[0],3==f.nodeType||4==f.nodeType)&&(f=f.nodeValue.replace(this.regExes.trimSpace,""),b[e]=f)}}}return b},parseGeometry:function(a){this.gmlFormat||(this.gmlFormat=new OpenLayers.Format.GML),a=this.gmlFormat.parseFeature(a);var b,c=null;return a&&(b=a.geometry&&a.geometry.clone(),c=a.bounds&&a.bounds.clone(),a.destroy()),{geometry:b,bounds:c}},CLASS_NAME:"OpenLayers.Format.WMSGetFeatureInfo"}),OpenLayers.Control.WMTSGetFeatureInfo=OpenLayers.Class(OpenLayers.Control,{hover:!1,requestEncoding:"KVP",drillDown:!1,maxFeatures:10,clickCallback:"click",layers:null,queryVisible:!0,infoFormat:"text/html",vendorParams:{},format:null,formatOptions:null,handler:null,hoverRequest:null,pending:0,initialize:function(a){a=a||{},a.handlerOptions=a.handlerOptions||{},OpenLayers.Control.prototype.initialize.apply(this,[a]),this.format||(this.format=new OpenLayers.Format.WMSGetFeatureInfo(a.formatOptions)),!0===this.drillDown&&(this.hover=!1),this.hover?this.handler=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.getInfoForHover},OpenLayers.Util.extend(this.handlerOptions.hover||{},{delay:250})):(a={},a[this.clickCallback]=this.getInfoForClick,this.handler=new OpenLayers.Handler.Click(this,a,this.handlerOptions.click||{}))},getInfoForClick:function(a){this.request(a.xy,{})},getInfoForHover:function(a){this.request(a.xy,{hover:!0})},cancelHover:function(){this.hoverRequest&&(--this.pending,0>=this.pending&&(OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"),this.pending=0),this.hoverRequest.abort(),this.hoverRequest=null)},findLayers:function(){for(var a,b=this.layers||this.map.layers,c=[],d=b.length-1;d>=0&&(a=b[d],!(a instanceof OpenLayers.Layer.WMTS)||a.requestEncoding!==this.requestEncoding||this.queryVisible&&!a.getVisibility()||(c.push(a),this.drillDown&&!this.hover));--d);return c},buildRequestOptions:function(a,b){var c=this.map.getLonLatFromPixel(b),d=a.getURL(new OpenLayers.Bounds(c.lon,c.lat,c.lon,c.lat)),d=OpenLayers.Util.getParameters(d),c=a.getTileInfo(c);return OpenLayers.Util.extend(d,{service:"WMTS",version:a.version,request:"GetFeatureInfo",infoFormat:this.infoFormat,i:c.i,j:c.j}),OpenLayers.Util.applyDefaults(d,this.vendorParams),{url:OpenLayers.Util.isArray(a.url)?a.url[0]:a.url,params:OpenLayers.Util.upperCaseObject(d),callback:function(c){this.handleResponse(b,c,a)},scope:this}},request:function(a,b){b=b||{};var c=this.findLayers();if(0<c.length){for(var d,e,f=0,g=c.length;g>f;f++)e=c[f],d=this.events.triggerEvent("beforegetfeatureinfo",{xy:a,layer:e}),!1!==d&&(++this.pending,d=this.buildRequestOptions(e,a),d=OpenLayers.Request.GET(d),!0===b.hover&&(this.hoverRequest=d));0<this.pending&&OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait")}},handleResponse:function(a,b,c){if(--this.pending,0>=this.pending&&(OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"),this.pending=0),b.status&&(200>b.status||300<=b.status))this.events.triggerEvent("exception",{xy:a,request:b,layer:c});else{var d=b.responseXML;d&&d.documentElement||(d=b.responseText);var e,f;try{e=this.format.read(d)}catch(g){f=!0,this.events.triggerEvent("exception",{xy:a,request:b,error:g,layer:c})}f||this.events.triggerEvent("getfeatureinfo",{text:b.responseText,features:e,request:b,xy:a,layer:c})}},CLASS_NAME:"OpenLayers.Control.WMTSGetFeatureInfo"}),OpenLayers.Protocol.CSW.v2_0_2=OpenLayers.Class(OpenLayers.Protocol,{formatOptions:null,initialize:function(a){OpenLayers.Protocol.prototype.initialize.apply(this,[a]),a.format||(this.format=new OpenLayers.Format.CSWGetRecords.v2_0_2(OpenLayers.Util.extend({},this.formatOptions)))},destroy:function(){this.options&&!this.options.format&&this.format.destroy(),this.format=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(a){a=OpenLayers.Util.extend({},a),OpenLayers.Util.applyDefaults(a,this.options||{});var b=new OpenLayers.Protocol.Response({requestType:"read"}),c=this.format.write(a.params||a);return b.priv=OpenLayers.Request.POST({url:a.url,callback:this.createCallback(this.handleRead,b,a),params:a.params,headers:a.headers,data:c}),b},handleRead:function(a,b){if(b.callback){var c=a.priv;200<=c.status&&300>c.status?(a.data=this.parseData(c),a.code=OpenLayers.Protocol.Response.SUCCESS):a.code=OpenLayers.Protocol.Response.FAILURE,b.callback.call(b.scope,a)}},parseData:function(a){var b=a.responseXML;return b&&b.documentElement||(b=a.responseText),!b||0>=b.length?null:this.format.read(b)},CLASS_NAME:"OpenLayers.Protocol.CSW.v2_0_2"}),OpenLayers.Format.WCSCapabilities.v1_1_0=OpenLayers.Class(OpenLayers.Format.WCSCapabilities.v1,{namespaces:{wcs:"http://www.opengis.net/wcs/1.1",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",ows:"http://www.opengis.net/ows/1.1"},errorProperty:"operationsMetadata",readers:{wcs:OpenLayers.Util.applyDefaults({Capabilities:function(a,b){this.readChildNodes(a,b)},Contents:function(a,b){b.contentMetadata=[],this.readChildNodes(a,b.contentMetadata)},CoverageSummary:function(a,b){var c={};this.readChildNodes(a,c),b.push(c)},Identifier:function(a,b){b.identifier=this.getChildValue(a)},Title:function(a,b){b.title=this.getChildValue(a)},Abstract:function(a,b){b["abstract"]=this.getChildValue(a)},SupportedCRS:function(a,b){var c=this.getChildValue(a);c&&(b.supportedCRS||(b.supportedCRS=[]),b.supportedCRS.push(c))},SupportedFormat:function(a,b){var c=this.getChildValue(a);c&&(b.supportedFormat||(b.supportedFormat=[]),b.supportedFormat.push(c))}},OpenLayers.Format.WCSCapabilities.v1.prototype.readers.wcs),ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WCSCapabilities.v1_1_0"}),OpenLayers.Control.Graticule=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,intervals:[45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],displayInLayerSwitcher:!0,visible:!0,numPoints:50,targetSize:200,layerName:null,labelled:!0,labelFormat:"dm",lineSymbolizer:{strokeColor:"#333",strokeWidth:1,strokeOpacity:.5},labelSymbolizer:{},gratLayer:null,initialize:function(a){a=a||{},a.layerName=a.layerName||OpenLayers.i18n("Graticule"),OpenLayers.Control.prototype.initialize.apply(this,[a]),this.labelSymbolizer.stroke=!1,this.labelSymbolizer.fill=!1,this.labelSymbolizer.label="${label}",this.labelSymbolizer.labelAlign="${labelAlign}",this.labelSymbolizer.labelXOffset="${xOffset}",this.labelSymbolizer.labelYOffset="${yOffset}"},destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments),this.gratLayer&&(this.gratLayer.destroy(),this.gratLayer=null)},draw:function(){if(OpenLayers.Control.prototype.draw.apply(this,arguments),!this.gratLayer){var a=new OpenLayers.Style({},{rules:[new OpenLayers.Rule({symbolizer:{Point:this.labelSymbolizer,Line:this.lineSymbolizer}})]});this.gratLayer=new OpenLayers.Layer.Vector(this.layerName,{styleMap:new OpenLayers.StyleMap({"default":a}),visibility:this.visible,displayInLayerSwitcher:this.displayInLayerSwitcher})}return this.div},activate:function(){return OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.map.addLayer(this.gratLayer),this.map.events.register("moveend",this,this.update),this.update(),!0):!1},deactivate:function(){return OpenLayers.Control.prototype.deactivate.apply(this,arguments)?(this.map.events.unregister("moveend",this,this.update),this.map.removeLayer(this.gratLayer),!0):!1},update:function(){var a=this.map.getExtent();if(a){this.gratLayer.destroyFeatures();var b=new OpenLayers.Projection("EPSG:4326"),c=this.map.getProjectionObject(),d=this.map.getResolution();c.proj&&"longlat"==c.proj.projName&&(this.numPoints=1);var e=this.map.getCenter(),f=new OpenLayers.Pixel(e.lon,e.lat);OpenLayers.Projection.transform(f,c,b);for(var g,e=this.targetSize*d,e=e*e,d=0;d<this.intervals.length;++d){g=this.intervals[d];var h=g/2,i=f.offset({x:-h,y:-h}),h=f.offset({x:h,y:h});if(OpenLayers.Projection.transform(i,b,c),OpenLayers.Projection.transform(h,b,c),(i.x-h.x)*(i.x-h.x)+(i.y-h.y)*(i.y-h.y)<=e)break}f.x=Math.floor(f.x/g)*g,f.y=Math.floor(f.y/g)*g;var j,d=0,e=[f.clone()],h=f.clone();do h=h.offset({x:0,y:g}),j=OpenLayers.Projection.transform(h.clone(),b,c),e.unshift(h);while(a.containsPixel(j)&&1e3>++d);h=f.clone();do h=h.offset({x:0,y:-g}),j=OpenLayers.Projection.transform(h.clone(),b,c),e.push(h);while(a.containsPixel(j)&&1e3>++d);d=0,i=[f.clone()],h=f.clone();do h=h.offset({x:-g,y:0}),j=OpenLayers.Projection.transform(h.clone(),b,c),i.unshift(h);while(a.containsPixel(j)&&1e3>++d);h=f.clone();do h=h.offset({x:g,y:0}),j=OpenLayers.Projection.transform(h.clone(),b,c),i.push(h);while(a.containsPixel(j)&&1e3>++d);for(g=[],d=0;d<i.length;++d){j=i[d].x;for(var f=[],k=null,l=Math.min(e[0].y,90),h=Math.max(e[e.length-1].y,-90),m=(l-h)/this.numPoints,l=h,h=0;h<=this.numPoints;++h){var n=new OpenLayers.Geometry.Point(j,l);n.transform(b,c),f.push(n),l+=m,n.y>=a.bottom&&!k&&(k=n)}this.labelled&&(k=new OpenLayers.Geometry.Point(k.x,a.bottom),j={value:j,label:this.labelled?OpenLayers.Util.getFormattedLonLat(j,"lon",this.labelFormat):"",labelAlign:"cb",xOffset:0,yOffset:2},this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(k,j))),f=new OpenLayers.Geometry.LineString(f),g.push(new OpenLayers.Feature.Vector(f))}for(h=0;h<e.length;++h)if(l=e[h].y,!(-90>l||l>90)){for(f=[],d=i[0].x,m=(i[i.length-1].x-d)/this.numPoints,j=d,k=null,d=0;d<=this.numPoints;++d)n=new OpenLayers.Geometry.Point(j,l),n.transform(b,c),f.push(n),j+=m,n.x<a.right&&(k=n);this.labelled&&(k=new OpenLayers.Geometry.Point(a.right,k.y),j={value:l,label:this.labelled?OpenLayers.Util.getFormattedLonLat(l,"lat",this.labelFormat):"",labelAlign:"rb",xOffset:-2,yOffset:2},this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(k,j))),f=new OpenLayers.Geometry.LineString(f),g.push(new OpenLayers.Feature.Vector(f))}this.gratLayer.addFeatures(g)}},CLASS_NAME:"OpenLayers.Control.Graticule"}),OpenLayers.Console.warn("OpenLayers.Rico is deprecated"),OpenLayers.Rico=OpenLayers.Rico||{},OpenLayers.Rico.Corner={round:function(a,b){a=OpenLayers.Util.getElement(a),this._setOptions(b);var c=this.options.color;"fromElement"==this.options.color&&(c=this._background(a));var d=this.options.bgColor;"fromParent"==this.options.bgColor&&(d=this._background(a.offsetParent)),this._roundCornersImpl(a,c,d)},changeColor:function(a,b){a.style.backgroundColor=b;for(var c=a.parentNode.getElementsByTagName("span"),d=0;d<c.length;d++)c[d].style.backgroundColor=b},changeOpacity:function(a,b){var c="alpha(opacity="+100*b+")";a.style.opacity=b,a.style.filter=c;for(var d=a.parentNode.getElementsByTagName("span"),e=0;e<d.length;e++)d[e].style.opacity=b,d[e].style.filter=c},reRound:function(a,b){var c=a.parentNode.childNodes[2];a.parentNode.removeChild(a.parentNode.childNodes[0]),a.parentNode.removeChild(c),this.round(a.parentNode,b)},_roundCornersImpl:function(a,b,c){this.options.border&&this._renderBorder(a,c),this._isTopRounded()&&this._roundTopCorners(a,b,c),this._isBottomRounded()&&this._roundBottomCorners(a,b,c)},_renderBorder:function(a,b){var c="1px solid "+this._borderColor(b);a.innerHTML="<div "+("style='border-left: "+c+";border-right: "+c+"'")+">"+a.innerHTML+"</div>"},_roundTopCorners:function(a,b,c){for(var d=this._createCorner(c),e=0;e<this.options.numSlices;e++)d.appendChild(this._createCornerSlice(b,c,e,"top"));a.style.paddingTop=0,a.insertBefore(d,a.firstChild)},_roundBottomCorners:function(a,b,c){for(var d=this._createCorner(c),e=this.options.numSlices-1;e>=0;e--)d.appendChild(this._createCornerSlice(b,c,e,"bottom"));a.style.paddingBottom=0,a.appendChild(d)},_createCorner:function(a){var b=document.createElement("div");return b.style.backgroundColor=this._isTransparent()?"transparent":a,b},_createCornerSlice:function(a,b,c,d){var e=document.createElement("span"),f=e.style;return f.backgroundColor=a,f.display="block",f.height="1px",f.overflow="hidden",f.fontSize="1px",a=this._borderColor(a,b),this.options.border&&0==c?(f.borderTopStyle="solid",f.borderTopWidth="1px",f.borderLeftWidth="0px",f.borderRightWidth="0px",f.borderBottomWidth="0px",f.height="0px",f.borderColor=a):a&&(f.borderColor=a,f.borderStyle="solid",f.borderWidth="0px 1px"),this.options.compact||c!=this.options.numSlices-1||(f.height="2px"),this._setMargin(e,c,d),this._setBorder(e,c,d),e},_setOptions:function(a){this.options={corners:"all",color:"fromElement",bgColor:"fromParent",blend:!0,border:!1,compact:!1},OpenLayers.Util.extend(this.options,a||{}),this.options.numSlices=this.options.compact?2:4,this._isTransparent()&&(this.options.blend=!1)},_whichSideTop:function(){return this._hasString(this.options.corners,"all","top")||0<=this.options.corners.indexOf("tl")&&0<=this.options.corners.indexOf("tr")?"":0<=this.options.corners.indexOf("tl")?"left":0<=this.options.corners.indexOf("tr")?"right":""},_whichSideBottom:function(){return this._hasString(this.options.corners,"all","bottom")||0<=this.options.corners.indexOf("bl")&&0<=this.options.corners.indexOf("br")?"":0<=this.options.corners.indexOf("bl")?"left":0<=this.options.corners.indexOf("br")?"right":""},_borderColor:function(a,b){return"transparent"==a?b:this.options.border?this.options.border:this.options.blend?this._blend(b,a):""},_setMargin:function(a,b,c){b=this._marginSize(b),c="top"==c?this._whichSideTop():this._whichSideBottom(),"left"==c?(a.style.marginLeft=b+"px",a.style.marginRight="0px"):"right"==c?(a.style.marginRight=b+"px",a.style.marginLeft="0px"):(a.style.marginLeft=b+"px",a.style.marginRight=b+"px")},_setBorder:function(a,b,c){b=this._borderSize(b),c="top"==c?this._whichSideTop():this._whichSideBottom(),"left"==c?(a.style.borderLeftWidth=b+"px",a.style.borderRightWidth="0px"):"right"==c?(a.style.borderRightWidth=b+"px",a.style.borderLeftWidth="0px"):(a.style.borderLeftWidth=b+"px",a.style.borderRightWidth=b+"px"),0!=this.options.border&&(a.style.borderLeftWidth=b+"px",a.style.borderRightWidth=b+"px")},_marginSize:function(a){if(this._isTransparent())return 0;var b=[5,3,2,1],c=[3,2,1,0],d=[2,1],e=[1,0];return this.options.compact&&this.options.blend?e[a]:this.options.compact?d[a]:this.options.blend?c[a]:b[a]},_borderSize:function(a){var b=[5,3,2,1],c=[2,1,1,1],d=[1,0],e=[0,2,0,0];return this.options.compact&&(this.options.blend||this._isTransparent())?1:this.options.compact?d[a]:this.options.blend?c[a]:this.options.border?e[a]:this._isTransparent()?b[a]:0},_hasString:function(a){for(var b=1;b<arguments.length;b++)if(0<=a.indexOf(arguments[b]))return!0;return!1},_blend:function(a,b){var c=OpenLayers.Rico.Color.createFromHex(a);return c.blend(OpenLayers.Rico.Color.createFromHex(b)),c},_background:function(a){try{return OpenLayers.Rico.Color.createColorFromBackground(a).asHex()}catch(b){return"#ffffff"}},_isTransparent:function(){return"transparent"==this.options.color},_isTopRounded:function(){return this._hasString(this.options.corners,"all","top","tl","tr")},_isBottomRounded:function(){return this._hasString(this.options.corners,"all","bottom","bl","br")},_hasSingleTextChild:function(a){return 1==a.childNodes.length&&3==a.childNodes[0].nodeType}},OpenLayers.Control.NavigationHistory=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOGGLE,previous:null,previousOptions:null,next:null,nextOptions:null,limit:50,autoActivate:!0,clearOnDeactivate:!1,registry:null,nextStack:null,previousStack:null,listeners:null,restoring:!1,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,[a]),this.registry=OpenLayers.Util.extend({moveend:this.getState},this.registry),a={trigger:OpenLayers.Function.bind(this.previousTrigger,this),displayClass:this.displayClass+" "+this.displayClass+"Previous"},OpenLayers.Util.extend(a,this.previousOptions),this.previous=new OpenLayers.Control.Button(a),a={trigger:OpenLayers.Function.bind(this.nextTrigger,this),displayClass:this.displayClass+" "+this.displayClass+"Next"},OpenLayers.Util.extend(a,this.nextOptions),this.next=new OpenLayers.Control.Button(a),this.clear()},onPreviousChange:function(a,b){a&&!this.previous.active?this.previous.activate():!a&&this.previous.active&&this.previous.deactivate()},onNextChange:function(a,b){a&&!this.next.active?this.next.activate():!a&&this.next.active&&this.next.deactivate()},destroy:function(){OpenLayers.Control.prototype.destroy.apply(this),this.previous.destroy(),this.next.destroy(),this.deactivate();for(var a in this)this[a]=null},setMap:function(a){this.map=a,this.next.setMap(a),this.previous.setMap(a)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments),this.next.draw(),this.previous.draw()},previousTrigger:function(){var a=this.previousStack.shift(),b=this.previousStack.shift();return void 0!=b?(this.nextStack.unshift(a),this.previousStack.unshift(b),this.restoring=!0,this.restore(b),this.restoring=!1,this.onNextChange(this.nextStack[0],this.nextStack.length),this.onPreviousChange(this.previousStack[1],this.previousStack.length-1)):this.previousStack.unshift(a),b},nextTrigger:function(){var a=this.nextStack.shift();return void 0!=a&&(this.previousStack.unshift(a),this.restoring=!0,this.restore(a),this.restoring=!1,this.onNextChange(this.nextStack[0],this.nextStack.length),this.onPreviousChange(this.previousStack[1],this.previousStack.length-1)),a},clear:function(){this.previousStack=[],this.previous.deactivate(),this.nextStack=[],this.next.deactivate()},getState:function(){return{center:this.map.getCenter(),resolution:this.map.getResolution(),projection:this.map.getProjectionObject(),units:this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units}},restore:function(a){var b,c;if(this.map.getProjectionObject()==a.projection)c=this.map.getZoomForResolution(a.resolution),b=a.center;else{b=a.center.clone(),b.transform(a.projection,this.map.getProjectionObject()),c=a.units;var d=this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units;c=this.map.getZoomForResolution((c&&d?OpenLayers.INCHES_PER_UNIT[c]/OpenLayers.INCHES_PER_UNIT[d]:1)*a.resolution)}this.map.setCenter(b,c)},setListeners:function(){this.listeners={};for(var a in this.registry)this.listeners[a]=OpenLayers.Function.bind(function(){if(!this.restoring){var b=this.registry[a].apply(this,arguments);this.previousStack.unshift(b),1<this.previousStack.length&&this.onPreviousChange(this.previousStack[1],this.previousStack.length-1),this.previousStack.length>this.limit+1&&this.previousStack.pop(),0<this.nextStack.length&&(this.nextStack=[],this.onNextChange(null,0))}return!0},this)},activate:function(){var a=!1;if(this.map&&OpenLayers.Control.prototype.activate.apply(this)){null==this.listeners&&this.setListeners();for(var b in this.listeners)this.map.events.register(b,this,this.listeners[b]);a=!0,0==this.previousStack.length&&this.initStack()}return a},initStack:function(){this.map.getCenter()&&this.listeners.moveend()},deactivate:function(){var a=!1;if(this.map&&OpenLayers.Control.prototype.deactivate.apply(this)){for(var b in this.listeners)this.map.events.unregister(b,this,this.listeners[b]);this.clearOnDeactivate&&this.clear(),a=!0}return a},CLASS_NAME:"OpenLayers.Control.NavigationHistory"}),OpenLayers.Layer.UTFGrid=OpenLayers.Class(OpenLayers.Layer.XYZ,{isBaseLayer:!1,projection:new OpenLayers.Projection("EPSG:900913"),useJSONP:!1,tileClass:OpenLayers.Tile.UTFGrid,initialize:function(a){OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a.name,a.url,{},a]),this.tileOptions=OpenLayers.Util.extend({utfgridResolution:this.utfgridResolution},this.tileOptions)},createBackBuffer:function(){},clone:function(a){return null==a&&(a=new OpenLayers.Layer.UTFGrid(this.getOptions())),a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getFeatureInfo:function(a){var b=null;return(a=this.getTileData(a))&&a.tile&&(b=a.tile.getFeatureInfo(a.i,a.j)),b},getFeatureId:function(a){var b=null;return a=this.getTileData(a),a.tile&&(b=a.tile.getFeatureId(a.i,a.j)),b},CLASS_NAME:"OpenLayers.Layer.UTFGrid"}),OpenLayers.TileManager=OpenLayers.Class({cacheSize:256,tilesPerFrame:2,frameDelay:16,moveDelay:100,zoomDelay:200,maps:null,tileQueueId:null,tileQueue:null,tileCache:null,
tileCacheIndex:null,initialize:function(a){OpenLayers.Util.extend(this,a),this.maps=[],this.tileQueueId={},this.tileQueue={},this.tileCache={},this.tileCacheIndex=[]},addMap:function(a){if(!this._destroyed&&OpenLayers.Layer.Grid){this.maps.push(a),this.tileQueue[a.id]=[];for(var b=0,c=a.layers.length;c>b;++b)this.addLayer({layer:a.layers[b]});a.events.on({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this})}},removeMap:function(a){if(!this._destroyed&&OpenLayers.Layer.Grid){if(window.clearTimeout(this.tileQueueId[a.id]),a.layers)for(var b=0,c=a.layers.length;c>b;++b)this.removeLayer({layer:a.layers[b]});a.events&&a.events.un({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this}),delete this.tileQueue[a.id],delete this.tileQueueId[a.id],OpenLayers.Util.removeItem(this.maps,a)}},move:function(a){this.updateTimeout(a.object,this.moveDelay,!0)},zoomEnd:function(a){this.updateTimeout(a.object,this.zoomDelay)},changeLayer:function(a){"visibility"!==a.property&&"params"!==a.property||this.updateTimeout(a.object,0)},addLayer:function(a){if(a=a.layer,a instanceof OpenLayers.Layer.Grid){a.events.on({addtile:this.addTile,retile:this.clearTileQueue,scope:this});var b,c,d;for(b=a.grid.length-1;b>=0;--b)for(c=a.grid[b].length-1;c>=0;--c)d=a.grid[b][c],this.addTile({tile:d}),d.url&&!d.imgDiv&&this.manageTileCache({object:d})}},removeLayer:function(a){if(a=a.layer,a instanceof OpenLayers.Layer.Grid&&(this.clearTileQueue({object:a}),a.events&&a.events.un({addtile:this.addTile,retile:this.clearTileQueue,scope:this}),a.grid)){var b,c,d;for(b=a.grid.length-1;b>=0;--b)for(c=a.grid[b].length-1;c>=0;--c)d=a.grid[b][c],this.unloadTile({object:d})}},updateTimeout:function(a,b,c){window.clearTimeout(this.tileQueueId[a.id]);var d=this.tileQueue[a.id];(!c||d.length)&&(this.tileQueueId[a.id]=window.setTimeout(OpenLayers.Function.bind(function(){this.drawTilesFromQueue(a),d.length&&this.updateTimeout(a,this.frameDelay)},this),b))},addTile:function(a){a.tile instanceof OpenLayers.Tile.Image?a.tile.events.on({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this}):this.removeLayer({layer:a.tile.layer})},unloadTile:function(a){a=a.object,a.events.un({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this}),OpenLayers.Util.removeItem(this.tileQueue[a.layer.map.id],a)},queueTileDraw:function(a){a=a.object;var b=!1,c=a.layer,d=c.getURL(a.bounds),e=this.tileCache[d];return e&&"olTileImage"!==e.className&&(delete this.tileCache[d],OpenLayers.Util.removeItem(this.tileCacheIndex,d),e=null),!c.url||!c.async&&e||(b=this.tileQueue[c.map.id],~OpenLayers.Util.indexOf(b,a)||b.push(a),b=!0),!b},drawTilesFromQueue:function(a){var b=this.tileQueue[a.id],c=this.tilesPerFrame;for(a=a.zoomTween&&a.zoomTween.playing;!a&&b.length&&c;)b.shift().draw(!0),--c},manageTileCache:function(a){a=a.object;var b=this.tileCache[a.url];b&&(b.parentNode&&OpenLayers.Element.hasClass(b.parentNode,"olBackBuffer")&&(b.parentNode.removeChild(b),b.id=null),b.parentNode||(b.style.visibility="hidden",b.style.opacity=0,a.setImage(b),OpenLayers.Util.removeItem(this.tileCacheIndex,a.url),this.tileCacheIndex.push(a.url)))},addToCache:function(a){a=a.object,this.tileCache[a.url]||OpenLayers.Element.hasClass(a.imgDiv,"olImageLoadError")||(this.tileCacheIndex.length>=this.cacheSize&&(delete this.tileCache[this.tileCacheIndex[0]],this.tileCacheIndex.shift()),this.tileCache[a.url]=a.imgDiv,this.tileCacheIndex.push(a.url))},clearTileQueue:function(a){a=a.object;for(var b=this.tileQueue[a.map.id],c=b.length-1;c>=0;--c)b[c].layer===a&&b.splice(c,1)},destroy:function(){for(var a=this.maps.length-1;a>=0;--a)this.removeMap(this.maps[a]);this.tileCacheIndex=this.tileCache=this.tileQueueId=this.tileQueue=this.maps=null,this._destroyed=!0}}),OpenLayers.Layer.ArcGISCache=OpenLayers.Class(OpenLayers.Layer.XYZ,{url:null,tileOrigin:null,tileSize:new OpenLayers.Size(256,256),useArcGISServer:!0,type:"png",useScales:!1,overrideDPI:!1,initialize:function(a,b,c){if(OpenLayers.Layer.XYZ.prototype.initialize.apply(this,arguments),this.resolutions&&(this.serverResolutions=this.resolutions,this.maxExtent=this.getMaxExtentForResolution(this.resolutions[0])),this.layerInfo){var d=this.layerInfo,e=new OpenLayers.Bounds(d.fullExtent.xmin,d.fullExtent.ymin,d.fullExtent.xmax,d.fullExtent.ymax);if(this.projection="EPSG:"+d.spatialReference.wkid,this.sphericalMercator=102100==d.spatialReference.wkid,this.units="esriFeet"==d.units?"ft":"m",d.tileInfo){this.tileSize=new OpenLayers.Size(d.tileInfo.width||d.tileInfo.cols,d.tileInfo.height||d.tileInfo.rows),this.tileOrigin=new OpenLayers.LonLat(d.tileInfo.origin.x,d.tileInfo.origin.y);var f=new OpenLayers.Geometry.Point(e.left,e.top),e=new OpenLayers.Geometry.Point(e.right,e.bottom);this.useScales?this.scales=[]:this.resolutions=[],this.lods=[];for(var g in d.tileInfo.lods)if(d.tileInfo.lods.hasOwnProperty(g)){var h=d.tileInfo.lods[g];this.useScales?this.scales.push(h.scale):this.resolutions.push(h.resolution);var i=this.getContainingTileCoords(f,h.resolution);h.startTileCol=i.x,h.startTileRow=i.y,i=this.getContainingTileCoords(e,h.resolution),h.endTileCol=i.x,h.endTileRow=i.y,this.lods.push(h)}this.maxExtent=this.calculateMaxExtentWithLOD(this.lods[0]),this.serverResolutions=this.resolutions,this.overrideDPI&&d.tileInfo.dpi&&(OpenLayers.DOTS_PER_INCH=d.tileInfo.dpi)}}},getContainingTileCoords:function(a,b){return new OpenLayers.Pixel(Math.max(Math.floor((a.x-this.tileOrigin.lon)/(this.tileSize.w*b)),0),Math.max(Math.floor((this.tileOrigin.lat-a.y)/(this.tileSize.h*b)),0))},calculateMaxExtentWithLOD:function(a){var b=this.tileOrigin.lon+a.startTileCol*this.tileSize.w*a.resolution,c=this.tileOrigin.lat-a.startTileRow*this.tileSize.h*a.resolution;return new OpenLayers.Bounds(b,c-(a.endTileRow-a.startTileRow+1)*this.tileSize.h*a.resolution,b+(a.endTileCol-a.startTileCol+1)*this.tileSize.w*a.resolution,c)},calculateMaxExtentWithExtent:function(a,b){var c=new OpenLayers.Geometry.Point(a.left,a.top),d=new OpenLayers.Geometry.Point(a.right,a.bottom),c=this.getContainingTileCoords(c,b),d=this.getContainingTileCoords(d,b);return this.calculateMaxExtentWithLOD({resolution:b,startTileCol:c.x,startTileRow:c.y,endTileCol:d.x,endTileRow:d.y})},getUpperLeftTileCoord:function(a){var b=new OpenLayers.Geometry.Point(this.maxExtent.left,this.maxExtent.top);return this.getContainingTileCoords(b,a)},getLowerRightTileCoord:function(a){var b=new OpenLayers.Geometry.Point(this.maxExtent.right,this.maxExtent.bottom);return this.getContainingTileCoords(b,a)},getMaxExtentForResolution:function(a){var b=this.getUpperLeftTileCoord(a),c=this.getLowerRightTileCoord(a),d=this.tileOrigin.lon+b.x*this.tileSize.w*a,e=this.tileOrigin.lat-b.y*this.tileSize.h*a;return new OpenLayers.Bounds(d,e-(c.y-b.y+1)*this.tileSize.h*a,d+(c.x-b.x+1)*this.tileSize.w*a,e)},clone:function(a){return null==a&&(a=new OpenLayers.Layer.ArcGISCache(this.name,this.url,this.options)),OpenLayers.Layer.XYZ.prototype.clone.apply(this,[a])},initGriddedTiles:function(a){delete this._tileOrigin,OpenLayers.Layer.XYZ.prototype.initGriddedTiles.apply(this,arguments)},getMaxExtent:function(){var a=this.map.getResolution();return this.maxExtent=this.getMaxExtentForResolution(a)},getTileOrigin:function(){if(!this._tileOrigin){var a=this.getMaxExtent();this._tileOrigin=new OpenLayers.LonLat(a.left,a.bottom)}return this._tileOrigin},getURL:function(a){var b=this.getResolution(),c=this.tileOrigin.lon+b*this.tileSize.w/2,d=this.tileOrigin.lat-b*this.tileSize.h/2;if(a=a.getCenterLonLat(),c=Math.round(Math.abs((a.lon-c)/(b*this.tileSize.w))),d=Math.round(Math.abs((d-a.lat)/(b*this.tileSize.h))),a=this.map.getZoom(),this.lods){if(b=this.lods[this.map.getZoom()],c<b.startTileCol||c>b.endTileCol||d<b.startTileRow||d>b.endTileRow)return null}else{var e=this.getUpperLeftTileCoord(b),b=this.getLowerRightTileCoord(b);if(c<e.x||c>=b.x||d<e.y||d>=b.y)return null}return b=this.url,e=""+c+d+a,OpenLayers.Util.isArray(b)&&(b=this.selectUrl(e,b)),this.useArcGISServer?b+="/tile/${z}/${y}/${x}":(c="C"+OpenLayers.Number.zeroPad(c,8,16),d="R"+OpenLayers.Number.zeroPad(d,8,16),a="L"+OpenLayers.Number.zeroPad(a,2,10),b=b+"/${z}/${y}/${x}."+this.type),b=OpenLayers.String.format(b,{x:c,y:d,z:a}),OpenLayers.Util.urlAppend(b,OpenLayers.Util.getParameterString(this.params))},CLASS_NAME:"OpenLayers.Layer.ArcGISCache"}),OpenLayers.Control.WMSGetFeatureInfo=OpenLayers.Class(OpenLayers.Control,{hover:!1,drillDown:!1,maxFeatures:10,clickCallback:"click",output:"features",layers:null,queryVisible:!1,url:null,layerUrls:null,infoFormat:"text/html",vendorParams:{},format:null,formatOptions:null,handler:null,hoverRequest:null,initialize:function(a){a=a||{},a.handlerOptions=a.handlerOptions||{},OpenLayers.Control.prototype.initialize.apply(this,[a]),this.format||(this.format=new OpenLayers.Format.WMSGetFeatureInfo(a.formatOptions)),!0===this.drillDown&&(this.hover=!1),this.hover?this.handler=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.getInfoForHover},OpenLayers.Util.extend(this.handlerOptions.hover||{},{delay:250})):(a={},a[this.clickCallback]=this.getInfoForClick,this.handler=new OpenLayers.Handler.Click(this,a,this.handlerOptions.click||{}))},getInfoForClick:function(a){this.events.triggerEvent("beforegetfeatureinfo",{xy:a.xy}),OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait"),this.request(a.xy,{})},getInfoForHover:function(a){this.events.triggerEvent("beforegetfeatureinfo",{xy:a.xy}),this.request(a.xy,{hover:!0})},cancelHover:function(){this.hoverRequest&&(this.hoverRequest.abort(),this.hoverRequest=null)},findLayers:function(){for(var a,b,c=this.layers||this.map.layers,d=[],e=c.length-1;e>=0;--e)a=c[e],a instanceof OpenLayers.Layer.WMS&&(!this.queryVisible||a.getVisibility())&&(b=OpenLayers.Util.isArray(a.url)?a.url[0]:a.url,!1!==this.drillDown||this.url||(this.url=b),(!0===this.drillDown||this.urlMatches(b))&&d.push(a));return d},urlMatches:function(a){var b=OpenLayers.Util.isEquivalentUrl(this.url,a);if(!b&&this.layerUrls)for(var c=0,d=this.layerUrls.length;d>c;++c)if(OpenLayers.Util.isEquivalentUrl(this.layerUrls[c],a)){b=!0;break}return b},buildWMSOptions:function(a,b,c,d){for(var e=[],f=[],g=0,h=b.length;h>g;g++)null!=b[g].params.LAYERS&&(e=e.concat(b[g].params.LAYERS),f=f.concat(this.getStyleNames(b[g])));return b=b[0],g=this.map.getProjection(),(h=b.projection)&&h.equals(this.map.getProjectionObject())&&(g=h.getCode()),d=OpenLayers.Util.extend({service:"WMS",version:b.params.VERSION,request:"GetFeatureInfo",exceptions:b.params.EXCEPTIONS,bbox:this.map.getExtent().toBBOX(null,b.reverseAxisOrder()),feature_count:this.maxFeatures,height:this.map.getSize().h,width:this.map.getSize().w,format:d,info_format:b.params.INFO_FORMAT||this.infoFormat},1.3<=parseFloat(b.params.VERSION)?{crs:g,i:parseInt(c.x),j:parseInt(c.y)}:{srs:g,x:parseInt(c.x),y:parseInt(c.y)}),0!=e.length&&(d=OpenLayers.Util.extend({layers:e,query_layers:e,styles:f},d)),OpenLayers.Util.applyDefaults(d,this.vendorParams),{url:a,params:OpenLayers.Util.upperCaseObject(d),callback:function(b){this.handleResponse(c,b,a)},scope:this}},getStyleNames:function(a){return a.params.STYLES?a.params.STYLES:OpenLayers.Util.isArray(a.params.LAYERS)?Array(a.params.LAYERS.length):a.params.LAYERS.replace(/[^,]/g,"")},request:function(a,b){var c=this.findLayers();if(0==c.length)this.events.triggerEvent("nogetfeatureinfo"),OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait");else if(b=b||{},!1===this.drillDown){var c=this.buildWMSOptions(this.url,c,a,c[0].params.FORMAT),d=OpenLayers.Request.GET(c);!0===b.hover&&(this.hoverRequest=d)}else{this._numRequests=this._requestCount=0,this.features=[];for(var e,d={},f=0,g=c.length;g>f;f++){var h=c[f];e=OpenLayers.Util.isArray(h.url)?h.url[0]:h.url,e in d?d[e].push(h):(this._numRequests++,d[e]=[h])}for(e in d)c=d[e],c=this.buildWMSOptions(e,c,a,c[0].params.FORMAT),OpenLayers.Request.GET(c)}},triggerGetFeatureInfo:function(a,b,c){this.events.triggerEvent("getfeatureinfo",{text:a.responseText,features:c,request:a,xy:b}),OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait")},handleResponse:function(a,b,c){var d=b.responseXML;d&&d.documentElement||(d=b.responseText),d=this.format.read(d),!1===this.drillDown?this.triggerGetFeatureInfo(b,a,d):(this._requestCount++,this._features=(this._features||[]).concat("object"===this.output?{url:c,features:d}:d),this._requestCount===this._numRequests&&(this.triggerGetFeatureInfo(b,a,this._features.concat()),delete this._features,delete this._requestCount,delete this._numRequests))},CLASS_NAME:"OpenLayers.Control.WMSGetFeatureInfo"}),OpenLayers.Format.WMSCapabilities.v1_3_0=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_3,{version:"1.3.0",CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_3_0"}),OpenLayers.Format.SOSGetFeatureOfInterest=OpenLayers.Class(OpenLayers.Format.XML,{VERSION:"1.0.0",namespaces:{sos:"http://www.opengis.net/sos/1.0",gml:"http://www.opengis.net/gml",sa:"http://www.opengis.net/sampling/1.0",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd",defaultPrefix:"sos",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b={features:[]};this.readNode(a,b),a=[];for(var c=0,d=b.features.length;d>c;c++){var e=b.features[c];this.internalProjection&&this.externalProjection&&e.components[0]&&e.components[0].transform(this.externalProjection,this.internalProjection),e=new OpenLayers.Feature.Vector(e.components[0],e.attributes),a.push(e)}return a},readers:{sa:{SamplingPoint:function(a,b){if(!b.attributes){var c={attributes:{}};b.features.push(c),b=c}b.attributes.id=this.getAttributeNS(a,this.namespaces.gml,"id"),this.readChildNodes(a,b)},position:function(a,b){this.readChildNodes(a,b)}},gml:OpenLayers.Util.applyDefaults({FeatureCollection:function(a,b){this.readChildNodes(a,b)},featureMember:function(a,b){var c={attributes:{}};b.features.push(c),this.readChildNodes(a,c)},name:function(a,b){b.attributes.name=this.getChildValue(a)},pos:function(a,b){this.externalProjection||(this.externalProjection=new OpenLayers.Projection(a.getAttribute("srsName"))),OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this,[a,b])}},OpenLayers.Format.GML.v3.prototype.readers.gml)},writers:{sos:{GetFeatureOfInterest:function(a){for(var b=this.createElementNSPlus("GetFeatureOfInterest",{attributes:{version:this.VERSION,service:"SOS","xsi:schemaLocation":this.schemaLocation}}),c=0,d=a.fois.length;d>c;c++)this.writeNode("FeatureOfInterestId",{foi:a.fois[c]},b);return b},FeatureOfInterestId:function(a){return this.createElementNSPlus("FeatureOfInterestId",{value:a.foi})}}},CLASS_NAME:"OpenLayers.Format.SOSGetFeatureOfInterest"}),OpenLayers.Format.SOSGetObservation=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows",gml:"http://www.opengis.net/gml",sos:"http://www.opengis.net/sos/1.0",ogc:"http://www.opengis.net/ogc",om:"http://www.opengis.net/om/1.0",sa:"http://www.opengis.net/sampling/1.0",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosGetObservation.xsd",defaultPrefix:"sos",read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b={measurements:[],observations:[]};return this.readNode(a,b),b},write:function(a){return a=this.writeNode("sos:GetObservation",a),a.setAttribute("xmlns:om",this.namespaces.om),a.setAttribute("xmlns:ogc",this.namespaces.ogc),this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[a])},readers:{om:{ObservationCollection:function(a,b){b.id=this.getAttributeNS(a,this.namespaces.gml,"id"),this.readChildNodes(a,b)},member:function(a,b){this.readChildNodes(a,b)},Measurement:function(a,b){var c={};b.measurements.push(c),this.readChildNodes(a,c)},Observation:function(a,b){var c={};b.observations.push(c),this.readChildNodes(a,c)},samplingTime:function(a,b){var c={};b.samplingTime=c,this.readChildNodes(a,c)},observedProperty:function(a,b){b.observedProperty=this.getAttributeNS(a,this.namespaces.xlink,"href"),this.readChildNodes(a,b)},procedure:function(a,b){b.procedure=this.getAttributeNS(a,this.namespaces.xlink,"href"),this.readChildNodes(a,b)},featureOfInterest:function(a,b){var c={features:[]};b.fois=[],b.fois.push(c),this.readChildNodes(a,c);for(var d=[],e=0,f=c.features.length;f>e;e++){var g=c.features[e];d.push(new OpenLayers.Feature.Vector(g.components[0],g.attributes))}c.features=d},result:function(a,b){var c={};b.result=c,""!==this.getChildValue(a)?(c.value=this.getChildValue(a),c.uom=a.getAttribute("uom")):this.readChildNodes(a,c)}},sa:OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.sa,gml:OpenLayers.Util.applyDefaults({TimeInstant:function(a,b){var c={};b.timeInstant=c,this.readChildNodes(a,c)},timePosition:function(a,b){b.timePosition=this.getChildValue(a)}},OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.gml)},writers:{sos:{GetObservation:function(a){var b=this.createElementNSPlus("GetObservation",{attributes:{version:this.VERSION,service:"SOS"}});this.writeNode("offering",a,b),a.eventTime&&this.writeNode("eventTime",a,b);for(var c in a.procedures)this.writeNode("procedure",a.procedures[c],b);for(var d in a.observedProperties)this.writeNode("observedProperty",a.observedProperties[d],b);return a.foi&&this.writeNode("featureOfInterest",a.foi,b),this.writeNode("responseFormat",a,b),a.resultModel&&this.writeNode("resultModel",a,b),a.responseMode&&this.writeNode("responseMode",a,b),b},featureOfInterest:function(a){var b=this.createElementNSPlus("featureOfInterest");return this.writeNode("ObjectID",a.objectId,b),b},ObjectID:function(a){return this.createElementNSPlus("ObjectID",{value:a})},responseFormat:function(a){return this.createElementNSPlus("responseFormat",{value:a.responseFormat})},procedure:function(a){return this.createElementNSPlus("procedure",{value:a})},offering:function(a){return this.createElementNSPlus("offering",{value:a.offering})},observedProperty:function(a){return this.createElementNSPlus("observedProperty",{value:a})},eventTime:function(a){var b=this.createElementNSPlus("eventTime");return"latest"===a.eventTime&&this.writeNode("ogc:TM_Equals",a,b),b},resultModel:function(a){return this.createElementNSPlus("resultModel",{value:a.resultModel})},responseMode:function(a){return this.createElementNSPlus("responseMode",{value:a.responseMode})}},ogc:{TM_Equals:function(a){var b=this.createElementNSPlus("ogc:TM_Equals");return this.writeNode("ogc:PropertyName",{property:"urn:ogc:data:time:iso8601"},b),"latest"===a.eventTime&&this.writeNode("gml:TimeInstant",{value:"latest"},b),b},PropertyName:function(a){return this.createElementNSPlus("ogc:PropertyName",{value:a.property})}},gml:{TimeInstant:function(a){var b=this.createElementNSPlus("gml:TimeInstant");return this.writeNode("gml:timePosition",a,b),b},timePosition:function(a){return this.createElementNSPlus("gml:timePosition",{value:a.value})}}},CLASS_NAME:"OpenLayers.Format.SOSGetObservation"}),OpenLayers.Control.UTFGrid=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,layers:null,defaultHandlerOptions:{delay:300,pixelTolerance:4,stopMove:!1,single:!0,"double":!1,stopSingle:!1,stopDouble:!1},handlerMode:"click",setHandler:function(a){this.handlerMode=a,this.resetHandler()},resetHandler:function(){return this.handler&&(this.handler.deactivate(),this.handler.destroy(),this.handler=null),"hover"==this.handlerMode?this.handler=new OpenLayers.Handler.Hover(this,{pause:this.handleEvent,move:this.reset},this.handlerOptions):"click"==this.handlerMode?this.handler=new OpenLayers.Handler.Click(this,{click:this.handleEvent},this.handlerOptions):"move"==this.handlerMode&&(this.handler=new OpenLayers.Handler.Hover(this,{pause:this.handleEvent,move:this.handleEvent},this.handlerOptions)),this.handler?!0:!1},initialize:function(a){a=a||{},a.handlerOptions=a.handlerOptions||this.defaultHandlerOptions,OpenLayers.Control.prototype.initialize.apply(this,[a]),this.resetHandler()},handleEvent:function(a){if(null==a)this.reset();else{var b=this.map.getLonLatFromPixel(a.xy);if(b){var c=this.findLayers();if(0<c.length){for(var d,e,f={},g=0,h=c.length;h>g;g++)d=c[g],e=OpenLayers.Util.indexOf(this.map.layers,d),f[e]=d.getFeatureInfo(b);this.callback(f,b,a.xy)}}}},callback:function(a){},reset:function(a){this.callback(null)},findLayers:function(){for(var a,b=this.layers||this.map.layers,c=[],d=b.length-1;d>=0;--d)a=b[d],a instanceof OpenLayers.Layer.UTFGrid&&c.push(a);return c},CLASS_NAME:"OpenLayers.Control.UTFGrid"}),OpenLayers.Format.CQL=function(){function a(a){function b(){var a=d.pop();switch(a.type){case"LOGICAL":var c=b(),f=b();return new OpenLayers.Filter.Logical({filters:[f,c],type:g[a.text.toUpperCase()]});case"NOT":return a=b(),new OpenLayers.Filter.Logical({filters:[a],type:OpenLayers.Filter.Logical.NOT});case"BETWEEN":return d.pop(),f=b(),a=b(),c=b(),new OpenLayers.Filter.Comparison({property:c,lowerBoundary:a,upperBoundary:f,type:OpenLayers.Filter.Comparison.BETWEEN});case"COMPARISON":return f=b(),c=b(),new OpenLayers.Filter.Comparison({property:c,value:f,type:e[a.text.toUpperCase()]});case"IS_NULL":return c=b(),new OpenLayers.Filter.Comparison({property:c,type:e[a.text.toUpperCase()]});case"VALUE":return(c=a.text.match(/^'(.*)'$/))?c[1].replace(/''/g,"'"):Number(a.text);case"SPATIAL":switch(a.text.toUpperCase()){case"BBOX":var a=b(),c=b(),f=b(),h=b(),i=b();return new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,property:i,value:OpenLayers.Bounds.fromArray([h,f,c,a])});case"INTERSECTS":return f=b(),c=b(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:c,value:f});case"WITHIN":return f=b(),c=b(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.WITHIN,property:c,value:f});case"CONTAINS":return f=b(),c=b(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.CONTAINS,property:c,value:f});case"DWITHIN":return a=b(),f=b(),c=b(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.DWITHIN,value:f,property:c,distance:Number(a)})}case"GEOMETRY":return OpenLayers.Geometry.fromWKT(a.text);default:return a.text}}for(var c=[],d=[];a.length;){var f=a.shift();switch(f.type){case"PROPERTY":case"GEOMETRY":case"VALUE":d.push(f);break;case"COMPARISON":case"BETWEEN":case"IS_NULL":case"LOGICAL":for(var h=i[f.type];0<c.length&&i[c[c.length-1].type]<=h;)d.push(c.pop());c.push(f);break;case"SPATIAL":case"NOT":case"LPAREN":c.push(f);break;case"RPAREN":for(;0<c.length&&"LPAREN"!=c[c.length-1].type;)d.push(c.pop());c.pop(),0<c.length&&"SPATIAL"==c[c.length-1].type&&d.push(c.pop());case"COMMA":case"END":break;default:throw Error("Unknown token type "+f.type)}}for(;0<c.length;)d.push(c.pop());if(a=b(),0<d.length){for(a="Remaining tokens after building AST: \n",c=d.length-1;c>=0;c--)a+=d[c].type+": "+d[c].text+"\n";throw Error(a)}return a}var b,c={PROPERTY:/^[_a-zA-Z]\w*/,COMPARISON:/^(=|<>|<=|<|>=|>|LIKE)/i,IS_NULL:/^IS NULL/i,COMMA:/^,/,LOGICAL:/^(AND|OR)/i,VALUE:/^('([^']|'')*'|\d+(\.\d*)?|\.\d+)/,LPAREN:/^\(/,RPAREN:/^\)/,SPATIAL:/^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,NOT:/^NOT/i,BETWEEN:/^BETWEEN/i,GEOMETRY:function(a){var b=/^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(a);if(b){var c=a.length,b=a.indexOf("(",b[0].length);if(b>-1)for(var d=1;c>b&&d>0;)switch(b++,a.charAt(b)){case"(":d++;break;case")":d--}return[a.substr(0,b+1)]}},END:/^$/},d={LPAREN:["GEOMETRY","SPATIAL","PROPERTY","VALUE","LPAREN"],RPAREN:["NOT","LOGICAL","END","RPAREN"],PROPERTY:["COMPARISON","BETWEEN","COMMA","IS_NULL"],BETWEEN:["VALUE"],IS_NULL:["END"],COMPARISON:["VALUE"],COMMA:["GEOMETRY","VALUE","PROPERTY"],VALUE:["LOGICAL","COMMA","RPAREN","END"],SPATIAL:["LPAREN"],LOGICAL:["NOT","VALUE","SPATIAL","PROPERTY","LPAREN"],NOT:["PROPERTY","LPAREN"],GEOMETRY:["COMMA","RPAREN"]},e={"=":OpenLayers.Filter.Comparison.EQUAL_TO,"<>":OpenLayers.Filter.Comparison.NOT_EQUAL_TO,"<":OpenLayers.Filter.Comparison.LESS_THAN,"<=":OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO,">":OpenLayers.Filter.Comparison.GREATER_THAN,">=":OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO,LIKE:OpenLayers.Filter.Comparison.LIKE,BETWEEN:OpenLayers.Filter.Comparison.BETWEEN,"IS NULL":OpenLayers.Filter.Comparison.IS_NULL},f={},g={AND:OpenLayers.Filter.Logical.AND,OR:OpenLayers.Filter.Logical.OR},h={},i={RPAREN:3,LOGICAL:2,COMPARISON:1};for(b in e)e.hasOwnProperty(b)&&(f[e[b]]=b);for(b in g)g.hasOwnProperty(b)&&(h[g[b]]=b);return OpenLayers.Class(OpenLayers.Format,{read:function(b){var e=b;b=[];var f,g=["NOT","GEOMETRY","SPATIAL","PROPERTY","LPAREN"];do{a:{f=g;for(var h=void 0,g=void 0,i=f.length,h=0;i>h;h++){var g=f[h],j=c[g]instanceof RegExp?c[g].exec(e):c[g](e);if(j){f=j[0],e=e.substr(f.length).replace(/^\s*/,""),f={type:g,text:f,remainder:e};break a}}for(b="ERROR: In parsing: ["+e+"], expected one of: ",h=0;i>h;h++)g=f[h],b+="\n    "+g+": "+c[g];throw Error(b)}if(e=f.remainder,g=d[f.type],"END"!=f.type&&!g)throw Error("No follows list for "+f.type);b.push(f)}while("END"!=f.type);return b=a(b),this.keepData&&(this.data=b),b},write:function(a){if(a instanceof OpenLayers.Geometry)return a.toString();switch(a.CLASS_NAME){case"OpenLayers.Filter.Spatial":switch(a.type){case OpenLayers.Filter.Spatial.BBOX:return"BBOX("+a.property+","+a.value.toBBOX()+")";case OpenLayers.Filter.Spatial.DWITHIN:return"DWITHIN("+a.property+", "+this.write(a.value)+", "+a.distance+")";case OpenLayers.Filter.Spatial.WITHIN:return"WITHIN("+a.property+", "+this.write(a.value)+")";case OpenLayers.Filter.Spatial.INTERSECTS:return"INTERSECTS("+a.property+", "+this.write(a.value)+")";case OpenLayers.Filter.Spatial.CONTAINS:return"CONTAINS("+a.property+", "+this.write(a.value)+")";default:throw Error("Unknown spatial filter type: "+a.type)}case"OpenLayers.Filter.Logical":if(a.type==OpenLayers.Filter.Logical.NOT)return"NOT ("+this.write(a.filters[0])+")";for(var b="(",c=!0,d=0;d<a.filters.length;d++)c?c=!1:b+=") "+h[a.type]+" (",b+=this.write(a.filters[d]);return b+")";case"OpenLayers.Filter.Comparison":return a.type==OpenLayers.Filter.Comparison.BETWEEN?a.property+" BETWEEN "+this.write(a.lowerBoundary)+" AND "+this.write(a.upperBoundary):null!==a.value?a.property+" "+f[a.type]+" "+this.write(a.value):a.property+" "+f[a.type];case void 0:if("string"==typeof a)return"'"+a.replace(/'/g,"''")+"'";if("number"==typeof a)return String(a);default:throw Error("Can't encode: "+a.CLASS_NAME+" "+a)}},CLASS_NAME:"OpenLayers.Format.CQL"})}(),OpenLayers.Control.Split=OpenLayers.Class(OpenLayers.Control,{layer:null,source:null,sourceOptions:null,tolerance:null,edge:!0,deferDelete:!1,mutual:!0,targetFilter:null,sourceFilter:null,handler:null,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,[a]),this.options=a||{},this.options.source&&this.setSource(this.options.source)},setSource:function(a){this.active?(this.deactivate(),this.handler&&(this.handler.destroy(),delete this.handler),this.source=a,this.activate()):this.source=a},activate:function(){var a=OpenLayers.Control.prototype.activate.call(this);return a&&(this.source?this.source.events&&this.source.events.on({sketchcomplete:this.onSketchComplete,afterfeaturemodified:this.afterFeatureModified,scope:this}):(this.handler||(this.handler=new OpenLayers.Handler.Path(this,{done:function(a){this.onSketchComplete({feature:new OpenLayers.Feature.Vector(a)})}},{layerOptions:this.sourceOptions})),this.handler.activate())),a},deactivate:function(){var a=OpenLayers.Control.prototype.deactivate.call(this);return a&&this.source&&this.source.events&&this.source.events.un({sketchcomplete:this.onSketchComplete,afterfeaturemodified:this.afterFeatureModified,scope:this}),a},onSketchComplete:function(a){return this.feature=null,!this.considerSplit(a.feature)},afterFeatureModified:function(a){a.modified&&"function"==typeof a.feature.geometry.split&&(this.feature=a.feature,this.considerSplit(a.feature))},removeByGeometry:function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c].geometry===b){a.splice(c,1);break}},isEligible:function(a){return a.geometry?a.state!==OpenLayers.State.DELETE&&"function"==typeof a.geometry.split&&this.feature!==a&&(!this.targetFilter||this.targetFilter.evaluate(a.attributes)):!1},considerSplit:function(a){var b=!1,c=!1;if(!this.sourceFilter||this.sourceFilter.evaluate(a.attributes)){for(var d,e,f,g,h,i=this.layer&&this.layer.features||[],j=[],k=[],l=this.layer===this.source&&this.mutual,m={edge:this.edge,tolerance:this.tolerance,mutual:l},n=[a.geometry],o=0,p=i.length;p>o;++o)if(f=i[o],this.isEligible(f)){g=[f.geometry];for(var q=0;q<n.length;++q){h=n[q];for(var r=0;r<g.length;++r)d=g[r],h.getBounds().intersectsBounds(d.getBounds())&&(d=h.split(d,m))&&(e=this.events.triggerEvent("beforesplit",{source:a,target:f}),!1!==e&&(l&&(e=d[0],1<e.length&&(e.unshift(q,1),Array.prototype.splice.apply(n,e),q+=e.length-3),d=d[1]),1<d.length&&(d.unshift(r,1),Array.prototype.splice.apply(g,d),r+=d.length-3)))}g&&1<g.length&&(this.geomsToFeatures(f,g),this.events.triggerEvent("split",{original:f,features:g}),Array.prototype.push.apply(j,g),k.push(f),c=!0)}if(n&&1<n.length&&(this.geomsToFeatures(a,n),this.events.triggerEvent("split",{original:a,features:n}),Array.prototype.push.apply(j,n),k.push(a),b=!0),b||c){if(this.deferDelete){for(i=[],o=0,p=k.length;p>o;++o)c=k[o],c.state===OpenLayers.State.INSERT?i.push(c):(c.state=OpenLayers.State.DELETE,this.layer.drawFeature(c));for(this.layer.destroyFeatures(i,{silent:!0}),o=0,p=j.length;p>o;++o)j[o].state=OpenLayers.State.INSERT}else this.layer.destroyFeatures(k,{silent:!0});this.layer.addFeatures(j,{silent:!0}),this.events.triggerEvent("aftersplit",{source:a,features:j})}}return b},geomsToFeatures:function(a,b){var c=a.clone();delete c.geometry;for(var d,e=0,f=b.length;f>e;++e)d=c.clone(),d.geometry=b[e],d.state=OpenLayers.State.INSERT,b[e]=d},destroy:function(){this.active&&this.deactivate(),OpenLayers.Control.prototype.destroy.call(this)},CLASS_NAME:"OpenLayers.Control.Split"}),OpenLayers.Layer.WMTS=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,version:"1.0.0",requestEncoding:"KVP",url:null,layer:null,matrixSet:null,style:null,format:"image/jpeg",tileOrigin:null,tileFullExtent:null,formatSuffix:null,matrixIds:null,dimensions:null,params:null,zoomOffset:0,serverResolutions:null,formatSuffixMap:{"image/png":"png","image/png8":"png","image/png24":"png","image/png32":"png",png:"png","image/jpeg":"jpg","image/jpg":"jpg",jpeg:"jpg",jpg:"jpg"},matrix:null,initialize:function(a){var b,c={url:!0,layer:!0,style:!0,matrixSet:!0};for(b in c)if(!(b in a))throw Error("Missing property '"+b+"' in layer configuration.");if(a.params=OpenLayers.Util.upperCaseObject(a.params),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a.name,a.url,a.params,a]),this.formatSuffix||(this.formatSuffix=this.formatSuffixMap[this.format]||this.format.split("/").pop()),this.matrixIds&&(a=this.matrixIds.length)&&"string"==typeof this.matrixIds[0])for(c=this.matrixIds,this.matrixIds=Array(a),b=0;a>b;++b)this.matrixIds[b]={identifier:c[b]}},setMap:function(){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments)},updateMatrixProperties:function(){(this.matrix=this.getMatrix())&&(this.matrix.topLeftCorner&&(this.tileOrigin=this.matrix.topLeftCorner),
this.matrix.tileWidth&&this.matrix.tileHeight&&(this.tileSize=new OpenLayers.Size(this.matrix.tileWidth,this.matrix.tileHeight)),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.maxExtent.left,this.maxExtent.top)),this.tileFullExtent||(this.tileFullExtent=this.maxExtent))},moveTo:function(a,b,c){return!b&&this.matrix||this.updateMatrixProperties(),OpenLayers.Layer.Grid.prototype.moveTo.apply(this,arguments)},clone:function(a){return null==a&&(a=new OpenLayers.Layer.WMTS(this.options)),a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getIdentifier:function(){return this.getServerZoom()},getMatrix:function(){var a;if(this.matrixIds&&0!==this.matrixIds.length)if("scaleDenominator"in this.matrixIds[0])for(var b,c=OpenLayers.METERS_PER_INCH*OpenLayers.INCHES_PER_UNIT[this.units]*this.getServerResolution()/28e-5,d=Number.POSITIVE_INFINITY,e=0,f=this.matrixIds.length;f>e;++e)b=Math.abs(1-this.matrixIds[e].scaleDenominator/c),d>b&&(d=b,a=this.matrixIds[e]);else a=this.matrixIds[this.getIdentifier()];else a={identifier:this.getIdentifier()};return a},getTileInfo:function(a){var b=this.getServerResolution(),c=(a.lon-this.tileOrigin.lon)/(b*this.tileSize.w);a=(this.tileOrigin.lat-a.lat)/(b*this.tileSize.h);var b=Math.floor(c),d=Math.floor(a);return{col:b,row:d,i:Math.floor((c-b)*this.tileSize.w),j:Math.floor((a-d)*this.tileSize.h)}},getURL:function(a){a=this.adjustBounds(a);var b="";if(!this.tileFullExtent||this.tileFullExtent.intersectsBounds(a)){a=a.getCenterLonLat();var c=this.getTileInfo(a);a=this.dimensions;var d,b=OpenLayers.Util.isArray(this.url)?this.selectUrl([this.version,this.style,this.matrixSet,this.matrix.identifier,c.row,c.col].join(),this.url):this.url;if("REST"===this.requestEncoding.toUpperCase())if(d=this.params,-1!==b.indexOf("{")){if(b=b.replace(/\{/g,"${"),c={style:this.style,Style:this.style,TileMatrixSet:this.matrixSet,TileMatrix:this.matrix.identifier,TileRow:c.row,TileCol:c.col},a){var e,f;for(f=a.length-1;f>=0;--f)e=a[f],c[e]=d[e.toUpperCase()]}b=OpenLayers.String.format(b,c)}else{if(e=this.version+"/"+this.layer+"/"+this.style+"/",a)for(f=0;f<a.length;f++)d[a[f]]&&(e=e+d[a[f]]+"/");e=e+this.matrixSet+"/"+this.matrix.identifier+"/"+c.row+"/"+c.col+"."+this.formatSuffix,b.match(/\/$/)||(b+="/"),b+=e}else"KVP"===this.requestEncoding.toUpperCase()&&(d={SERVICE:"WMTS",REQUEST:"GetTile",VERSION:this.version,LAYER:this.layer,STYLE:this.style,TILEMATRIXSET:this.matrixSet,TILEMATRIX:this.matrix.identifier,TILEROW:c.row,TILECOL:c.col,FORMAT:this.format},b=OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,[d]))}return b},mergeNewParams:function(a){return"KVP"===this.requestEncoding.toUpperCase()?OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,[OpenLayers.Util.upperCaseObject(a)]):void 0},CLASS_NAME:"OpenLayers.Layer.WMTS"}),OpenLayers.Protocol.SOS.v1_0_0=OpenLayers.Class(OpenLayers.Protocol,{fois:null,formatOptions:null,initialize:function(a){OpenLayers.Protocol.prototype.initialize.apply(this,[a]),a.format||(this.format=new OpenLayers.Format.SOSGetFeatureOfInterest(this.formatOptions))},destroy:function(){this.options&&!this.options.format&&this.format.destroy(),this.format=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(a){a=OpenLayers.Util.extend({},a),OpenLayers.Util.applyDefaults(a,this.options||{});var b=new OpenLayers.Protocol.Response({requestType:"read"}),c=this.format,c=OpenLayers.Format.XML.prototype.write.apply(c,[c.writeNode("sos:GetFeatureOfInterest",{fois:this.fois})]);return b.priv=OpenLayers.Request.POST({url:a.url,callback:this.createCallback(this.handleRead,b,a),data:c}),b},handleRead:function(a,b){if(b.callback){var c=a.priv;200<=c.status&&300>c.status?(a.features=this.parseFeatures(c),a.code=OpenLayers.Protocol.Response.SUCCESS):a.code=OpenLayers.Protocol.Response.FAILURE,b.callback.call(b.scope,a)}},parseFeatures:function(a){var b=a.responseXML;return b&&b.documentElement||(b=a.responseText),!b||0>=b.length?null:this.format.read(b)},CLASS_NAME:"OpenLayers.Protocol.SOS.v1_0_0"}),OpenLayers.Layer.KaMapCache=OpenLayers.Class(OpenLayers.Layer.KaMap,{IMAGE_EXTENSIONS:{jpeg:"jpg",gif:"gif",png:"png",png8:"png",png24:"png",dithered:"png"},DEFAULT_FORMAT:"jpeg",initialize:function(a,b,c,d){OpenLayers.Layer.KaMap.prototype.initialize.apply(this,arguments),this.extension=this.IMAGE_EXTENSIONS[this.params.i.toLowerCase()||this.DEFAULT_FORMAT]},getURL:function(a){a=this.adjustBounds(a);var b=this.map.getResolution(),c=Math.round(1e4*this.map.getScale())/1e4,d=Math.round(a.left/b);a=-Math.round(a.top/b);var b=Math.floor(d/this.tileSize.w/this.params.metaTileSize.w)*this.tileSize.w*this.params.metaTileSize.w,e=Math.floor(a/this.tileSize.h/this.params.metaTileSize.h)*this.tileSize.h*this.params.metaTileSize.h,c=["/",this.params.map,"/",c,"/",this.params.g.replace(/\s/g,"_"),"/def/t",e,"/l",b,"/t",a,"l",d,".",this.extension],d=this.url;return OpenLayers.Util.isArray(d)&&(d=this.selectUrl(c.join(""),d)),d+c.join("")},CLASS_NAME:"OpenLayers.Layer.KaMapCache"}),OpenLayers.Protocol.WFS.v1_1_0=OpenLayers.Class(OpenLayers.Protocol.WFS.v1,{version:"1.1.0",initialize:function(a){OpenLayers.Protocol.WFS.v1.prototype.initialize.apply(this,arguments),this.outputFormat&&!this.readFormat&&("gml2"==this.outputFormat.toLowerCase()?this.readFormat=new OpenLayers.Format.GML.v2({featureType:this.featureType,featureNS:this.featureNS,geometryName:this.geometryName}):"json"==this.outputFormat.toLowerCase()&&(this.readFormat=new OpenLayers.Format.GeoJSON))},CLASS_NAME:"OpenLayers.Protocol.WFS.v1_1_0"}),OpenLayers.Format.WMSCapabilities.v1_1_1=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1,{version:"1.1.1",readers:{wms:OpenLayers.Util.applyDefaults({SRS:function(a,b){b.srs[this.getChildValue(a)]=!0}},OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_1"}),OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1_1,{version:"1.1.1",profile:"WMSC",readers:{wms:OpenLayers.Util.applyDefaults({VendorSpecificCapabilities:function(a,b){b.vendorSpecific={tileSets:[]},this.readChildNodes(a,b.vendorSpecific)},TileSet:function(a,b){var c={srs:{},bbox:{},resolutions:[]};this.readChildNodes(a,c),b.tileSets.push(c)},Resolutions:function(a,b){for(var c=this.getChildValue(a).split(" "),d=0,e=c.length;e>d;d++)""!=c[d]&&b.resolutions.push(parseFloat(c[d]))},Width:function(a,b){b.width=parseInt(this.getChildValue(a))},Height:function(a,b){b.height=parseInt(this.getChildValue(a))},Layers:function(a,b){b.layers=this.getChildValue(a)},Styles:function(a,b){b.styles=this.getChildValue(a)}},OpenLayers.Format.WMSCapabilities.v1_1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC"}),OpenLayers.Control.LayerSwitcher=OpenLayers.Class(OpenLayers.Control,{layerStates:null,layersDiv:null,baseLayersDiv:null,baseLayers:null,dataLbl:null,dataLayersDiv:null,dataLayers:null,minimizeDiv:null,maximizeDiv:null,ascending:!0,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,arguments),this.layerStates=[]},destroy:function(){this.clearLayersArray("base"),this.clearLayersArray("data"),this.map.events.un({buttonclick:this.onButtonClick,addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,scope:this}),this.events.unregister("buttonclick",this,this.onButtonClick),OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(a){OpenLayers.Control.prototype.setMap.apply(this,arguments),this.map.events.on({addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,scope:this}),this.outsideViewport?(this.events.attachToElement(this.div),this.events.register("buttonclick",this,this.onButtonClick)):this.map.events.register("buttonclick",this,this.onButtonClick)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this),this.loadContents(),this.outsideViewport||this.minimizeControl(),this.redraw(),this.div},onButtonClick:function(a){a=a.buttonElement,a===this.minimizeDiv?this.minimizeControl():a===this.maximizeDiv?this.maximizeControl():a._layerSwitcher===this.id&&(a["for"]&&(a=document.getElementById(a["for"])),a.disabled||("radio"==a.type?(a.checked=!0,this.map.setBaseLayer(this.map.getLayer(a._layer))):(a.checked=!a.checked,this.updateMap())))},clearLayersArray:function(a){this[a+"LayersDiv"].innerHTML="",this[a+"Layers"]=[]},checkRedraw:function(){if(!this.layerStates.length||this.map.layers.length!=this.layerStates.length)return!0;for(var a=0,b=this.layerStates.length;b>a;a++){var c=this.layerStates[a],d=this.map.layers[a];if(c.name!=d.name||c.inRange!=d.inRange||c.id!=d.id||c.visibility!=d.visibility)return!0}return!1},redraw:function(){if(!this.checkRedraw())return this.div;this.clearLayersArray("base"),this.clearLayersArray("data");var a=!1,b=!1,c=this.map.layers.length;this.layerStates=Array(c);for(var d=0;c>d;d++){var e=this.map.layers[d];this.layerStates[d]={name:e.name,visibility:e.visibility,inRange:e.inRange,id:e.id}}var f=this.map.layers.slice();for(this.ascending||f.reverse(),d=0,c=f.length;c>d;d++){var e=f[d],g=e.isBaseLayer;if(e.displayInLayerSwitcher){g?b=!0:a=!0;var h=g?e==this.map.baseLayer:e.getVisibility(),i=document.createElement("input"),j=OpenLayers.Util.createUniqueID(this.id+"_input_");i.id=j,i.name=g?this.id+"_baseLayers":e.name,i.type=g?"radio":"checkbox",i.value=e.name,i.checked=h,i.defaultChecked=h,i.className="olButton",i._layer=e.id,i._layerSwitcher=this.id,g||e.inRange||(i.disabled=!0),h=document.createElement("label"),h["for"]=i.id,OpenLayers.Element.addClass(h,"labelSpan olButton"),h._layer=e.id,h._layerSwitcher=this.id,g||e.inRange||(h.style.color="gray"),h.innerHTML=e.name,h.style.verticalAlign=g?"bottom":"baseline",j=document.createElement("br"),(g?this.baseLayers:this.dataLayers).push({layer:e,inputElem:i,labelSpan:h}),e=g?this.baseLayersDiv:this.dataLayersDiv,e.appendChild(i),e.appendChild(h),e.appendChild(j)}}return this.dataLbl.style.display=a?"":"none",this.baseLbl.style.display=b?"":"none",this.div},updateMap:function(){for(var a=0,b=this.baseLayers.length;b>a;a++){var c=this.baseLayers[a];c.inputElem.checked&&this.map.setBaseLayer(c.layer,!1)}for(a=0,b=this.dataLayers.length;b>a;a++)c=this.dataLayers[a],c.layer.setVisibility(c.inputElem.checked)},maximizeControl:function(a){this.div.style.width="",this.div.style.height="",this.showControls(!1),null!=a&&OpenLayers.Event.stop(a)},minimizeControl:function(a){this.div.style.width="0px",this.div.style.height="0px",this.showControls(!0),null!=a&&OpenLayers.Event.stop(a)},showControls:function(a){this.maximizeDiv.style.display=a?"":"none",this.minimizeDiv.style.display=a?"none":"",this.layersDiv.style.display=a?"none":""},loadContents:function(){this.layersDiv=document.createElement("div"),this.layersDiv.id=this.id+"_layersDiv",OpenLayers.Element.addClass(this.layersDiv,"layersDiv"),this.baseLbl=document.createElement("div"),this.baseLbl.innerHTML=OpenLayers.i18n("Base Layer"),OpenLayers.Element.addClass(this.baseLbl,"baseLbl"),this.baseLayersDiv=document.createElement("div"),OpenLayers.Element.addClass(this.baseLayersDiv,"baseLayersDiv"),this.dataLbl=document.createElement("div"),this.dataLbl.innerHTML=OpenLayers.i18n("Overlays"),OpenLayers.Element.addClass(this.dataLbl,"dataLbl"),this.dataLayersDiv=document.createElement("div"),OpenLayers.Element.addClass(this.dataLayersDiv,"dataLayersDiv"),this.ascending?(this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv),this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv)):(this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv),this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv)),this.div.appendChild(this.layersDiv);var a=OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MaximizeDiv",null,null,a,"absolute"),OpenLayers.Element.addClass(this.maximizeDiv,"maximizeDiv olButton"),this.maximizeDiv.style.display="none",this.div.appendChild(this.maximizeDiv),a=OpenLayers.Util.getImageLocation("layer-switcher-minimize.png"),this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MinimizeDiv",null,null,a,"absolute"),OpenLayers.Element.addClass(this.minimizeDiv,"minimizeDiv olButton"),this.minimizeDiv.style.display="none",this.div.appendChild(this.minimizeDiv)},CLASS_NAME:"OpenLayers.Control.LayerSwitcher"}),OpenLayers.Format.Atom=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{atom:"http://www.w3.org/2005/Atom",georss:"http://www.georss.org/georss"},feedTitle:"untitled",defaultEntryTitle:"untitled",gmlParser:null,xy:!1,read:function(a){return"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),this.parseFeatures(a)},write:function(a){var b;if(OpenLayers.Util.isArray(a)){b=this.createElementNSPlus("atom:feed"),b.appendChild(this.createElementNSPlus("atom:title",{value:this.feedTitle}));for(var c=0,d=a.length;d>c;c++)b.appendChild(this.buildEntryNode(a[c]))}else b=this.buildEntryNode(a);return OpenLayers.Format.XML.prototype.write.apply(this,[b])},buildContentNode:function(a){var b=this.createElementNSPlus("atom:content",{attributes:{type:a.type||null}});if(a.src)b.setAttribute("src",a.src);else if("text"==a.type||null==a.type)b.appendChild(this.createTextNode(a.value));else if("html"==a.type){if("string"!=typeof a.value)throw"HTML content must be in form of an escaped string";b.appendChild(this.createTextNode(a.value))}else b.appendChild("xhtml"==a.type?a.value:"xhtml"==a.type||a.type.match(/(\+|\/)xml$/)?a.value:this.createTextNode(a.value));return b},buildEntryNode:function(a){var b=a.attributes,c=b.atom||{},d=this.createElementNSPlus("atom:entry");if(c.authors)for(var e=OpenLayers.Util.isArray(c.authors)?c.authors:[c.authors],f=0,g=e.length;g>f;f++)d.appendChild(this.buildPersonConstructNode("author",e[f]));if(c.categories)for(var h,e=OpenLayers.Util.isArray(c.categories)?c.categories:[c.categories],f=0,g=e.length;g>f;f++)h=e[f],d.appendChild(this.createElementNSPlus("atom:category",{attributes:{term:h.term,scheme:h.scheme||null,label:h.label||null}}));if(c.content&&d.appendChild(this.buildContentNode(c.content)),c.contributors)for(e=OpenLayers.Util.isArray(c.contributors)?c.contributors:[c.contributors],f=0,g=e.length;g>f;f++)d.appendChild(this.buildPersonConstructNode("contributor",e[f]));if(a.fid&&d.appendChild(this.createElementNSPlus("atom:id",{value:a.fid})),c.links)for(e=OpenLayers.Util.isArray(c.links)?c.links:[c.links],f=0,g=e.length;g>f;f++)h=e[f],d.appendChild(this.createElementNSPlus("atom:link",{attributes:{href:h.href,rel:h.rel||null,type:h.type||null,hreflang:h.hreflang||null,title:h.title||null,length:h.length||null}}));return c.published&&d.appendChild(this.createElementNSPlus("atom:published",{value:c.published})),c.rights&&d.appendChild(this.createElementNSPlus("atom:rights",{value:c.rights})),(c.summary||b.description)&&d.appendChild(this.createElementNSPlus("atom:summary",{value:c.summary||b.description})),d.appendChild(this.createElementNSPlus("atom:title",{value:c.title||b.title||this.defaultEntryTitle})),c.updated&&d.appendChild(this.createElementNSPlus("atom:updated",{value:c.updated})),a.geometry&&(b=this.createElementNSPlus("georss:where"),b.appendChild(this.buildGeometryNode(a.geometry)),d.appendChild(b)),d},initGmlParser:function(){this.gmlParser=new OpenLayers.Format.GML.v3({xy:this.xy,featureNS:"http://example.com#feature",internalProjection:this.internalProjection,externalProjection:this.externalProjection})},buildGeometryNode:function(a){return this.gmlParser||this.initGmlParser(),this.gmlParser.writeNode("feature:_geometry",a).firstChild},buildPersonConstructNode:function(a,b){var c=["uri","email"],d=this.createElementNSPlus("atom:"+a);d.appendChild(this.createElementNSPlus("atom:name",{value:b.name}));for(var e=0,f=c.length;f>e;e++)b[c[e]]&&d.appendChild(this.createElementNSPlus("atom:"+c[e],{value:b[c[e]]}));return d},getFirstChildValue:function(a,b,c,d){return(a=this.getElementsByTagNameNS(a,b,c))&&0<a.length?this.getChildValue(a[0],d):d},parseFeature:function(a){var b={},c=null,d=null,e=null,f=this.namespaces.atom;this.parsePersonConstructs(a,"author",b),d=this.getElementsByTagNameNS(a,f,"category"),0<d.length&&(b.categories=[]);for(var g=0,h=d.length;h>g;g++)c={},c.term=d[g].getAttribute("term"),(e=d[g].getAttribute("scheme"))&&(c.scheme=e),(e=d[g].getAttribute("label"))&&(c.label=e),b.categories.push(c);d=this.getElementsByTagNameNS(a,f,"content"),0<d.length&&(c={},(e=d[0].getAttribute("type"))&&(c.type=e),(e=d[0].getAttribute("src"))?c.src=e:("text"==c.type||"html"==c.type||null==c.type?c.value=this.getFirstChildValue(a,f,"content",null):"xhtml"==c.type||c.type.match(/(\+|\/)xml$/)?c.value=this.getChildEl(d[0]):c.value=this.getFirstChildValue(a,f,"content",null),b.content=c)),this.parsePersonConstructs(a,"contributor",b),b.id=this.getFirstChildValue(a,f,"id",null),d=this.getElementsByTagNameNS(a,f,"link"),0<d.length&&(b.links=Array(d.length));for(var i=["rel","type","hreflang","title","length"],g=0,h=d.length;h>g;g++){c={},c.href=d[g].getAttribute("href");for(var j=0,k=i.length;k>j;j++)(e=d[g].getAttribute(i[j]))&&(c[i[j]]=e);b.links[g]=c}return(c=this.getFirstChildValue(a,f,"published",null))&&(b.published=c),(c=this.getFirstChildValue(a,f,"rights",null))&&(b.rights=c),(c=this.getFirstChildValue(a,f,"summary",null))&&(b.summary=c),b.title=this.getFirstChildValue(a,f,"title",null),b.updated=this.getFirstChildValue(a,f,"updated",null),c={title:b.title,description:b.summary,atom:b},a=this.parseLocations(a)[0],a=new OpenLayers.Feature.Vector(a,c),a.fid=b.id,a},parseFeatures:function(a){var b=[],c=this.getElementsByTagNameNS(a,this.namespaces.atom,"entry");0==c.length&&(c=[a]),a=0;for(var d=c.length;d>a;a++)b.push(this.parseFeature(c[a]));return b},parseLocations:function(a){var b=this.namespaces.georss,c={components:[]},d=this.getElementsByTagNameNS(a,b,"where");if(d&&0<d.length){this.gmlParser||this.initGmlParser();for(var e=0,f=d.length;f>e;e++)this.gmlParser.readChildNodes(d[e],c)}if(c=c.components,(d=this.getElementsByTagNameNS(a,b,"point"))&&0<d.length)for(e=0,f=d.length;f>e;e++){var g=OpenLayers.String.trim(d[e].firstChild.nodeValue).split(/\s+/);2!=g.length&&(g=OpenLayers.String.trim(d[e].firstChild.nodeValue).split(/\s*,\s*/)),c.push(new OpenLayers.Geometry.Point(g[1],g[0]))}var h=this.getElementsByTagNameNS(a,b,"line");if(h&&0<h.length)for(var i,e=0,f=h.length;f>e;e++){d=OpenLayers.String.trim(h[e].firstChild.nodeValue).split(/\s+/),i=[];for(var j=0,k=d.length;k>j;j+=2)g=new OpenLayers.Geometry.Point(d[j+1],d[j]),i.push(g);c.push(new OpenLayers.Geometry.LineString(i))}if((a=this.getElementsByTagNameNS(a,b,"polygon"))&&0<a.length)for(e=0,f=a.length;f>e;e++){for(d=OpenLayers.String.trim(a[e].firstChild.nodeValue).split(/\s+/),i=[],j=0,k=d.length;k>j;j+=2)g=new OpenLayers.Geometry.Point(d[j+1],d[j]),i.push(g);c.push(new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(i)]))}if(this.internalProjection&&this.externalProjection)for(e=0,f=c.length;f>e;e++)c[e]&&c[e].transform(this.externalProjection,this.internalProjection);return c},parsePersonConstructs:function(a,b,c){var d=[],e=this.namespaces.atom;a=this.getElementsByTagNameNS(a,e,b);for(var f=["uri","email"],g=0,h=a.length;h>g;g++){var i={};i.name=this.getFirstChildValue(a[g],e,"name",null);for(var j=0,k=f.length;k>j;j++){var l=this.getFirstChildValue(a[g],e,f[j],null);l&&(i[f[j]]=l)}d.push(i)}0<d.length&&(c[b+"s"]=d)},CLASS_NAME:"OpenLayers.Format.Atom"}),OpenLayers.Control.KeyboardDefaults=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,slideFactor:75,observeElement:null,draw:function(){this.handler=new OpenLayers.Handler.Keyboard(this,{keydown:this.defaultKeyPress},{observeElement:this.observeElement||document})},defaultKeyPress:function(a){var b,c=!0;if(b=OpenLayers.Event.element(a),!b||"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&"SELECT"!=b.tagName){switch(a.keyCode){case OpenLayers.Event.KEY_LEFT:this.map.pan(-this.slideFactor,0);break;case OpenLayers.Event.KEY_RIGHT:this.map.pan(this.slideFactor,0);break;case OpenLayers.Event.KEY_UP:this.map.pan(0,-this.slideFactor);break;case OpenLayers.Event.KEY_DOWN:this.map.pan(0,this.slideFactor);break;case 33:b=this.map.getSize(),this.map.pan(0,-.75*b.h);break;case 34:b=this.map.getSize(),this.map.pan(0,.75*b.h);break;case 35:b=this.map.getSize(),this.map.pan(.75*b.w,0);break;case 36:b=this.map.getSize(),this.map.pan(-.75*b.w,0);break;case 43:case 61:case 187:case 107:this.map.zoomIn();break;case 45:case 109:case 189:case 95:this.map.zoomOut();break;default:c=!1}c&&OpenLayers.Event.stop(a)}},CLASS_NAME:"OpenLayers.Control.KeyboardDefaults"}),OpenLayers.Format.WMTSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1_1_0,{version:"1.0.0",namespaces:{ows:"http://www.opengis.net/ows/1.1",wmts:"http://www.opengis.net/wmts/1.0",xlink:"http://www.w3.org/1999/xlink"},yx:null,defaultPrefix:"wmts",initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]),this.options=a,a=OpenLayers.Util.extend({},OpenLayers.Format.WMTSCapabilities.prototype.yx),this.yx=OpenLayers.Util.extend(a,this.yx)},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a])),a&&9==a.nodeType&&(a=a.documentElement);var b={};return this.readNode(a,b),b.version=this.version,b},readers:{wmts:{Capabilities:function(a,b){this.readChildNodes(a,b)},Contents:function(a,b){b.contents={},b.contents.layers=[],b.contents.tileMatrixSets={},this.readChildNodes(a,b.contents)},Layer:function(a,b){var c={styles:[],formats:[],dimensions:[],tileMatrixSetLinks:[],layers:[]};this.readChildNodes(a,c),b.layers.push(c)},Style:function(a,b){var c={};c.isDefault="true"===a.getAttribute("isDefault"),this.readChildNodes(a,c),b.styles.push(c)},Format:function(a,b){b.formats.push(this.getChildValue(a))},TileMatrixSetLink:function(a,b){var c={};this.readChildNodes(a,c),b.tileMatrixSetLinks.push(c)},TileMatrixSet:function(a,b){if(b.layers){var c={matrixIds:[]};this.readChildNodes(a,c),b.tileMatrixSets[c.identifier]=c}else b.tileMatrixSet=this.getChildValue(a)},TileMatrix:function(a,b){var c={supportedCRS:b.supportedCRS};this.readChildNodes(a,c),b.matrixIds.push(c)},ScaleDenominator:function(a,b){b.scaleDenominator=parseFloat(this.getChildValue(a))},TopLeftCorner:function(a,b){var c,d=this.getChildValue(a).split(" ");b.supportedCRS&&(c=b.supportedCRS.replace(/urn:ogc:def:crs:(\w+):.+:(\w+)$/,"urn:ogc:def:crs:$1::$2"),c=!!this.yx[c]),b.topLeftCorner=c?new OpenLayers.LonLat(d[1],d[0]):new OpenLayers.LonLat(d[0],d[1])},TileWidth:function(a,b){b.tileWidth=parseInt(this.getChildValue(a))},TileHeight:function(a,b){b.tileHeight=parseInt(this.getChildValue(a))},MatrixWidth:function(a,b){b.matrixWidth=parseInt(this.getChildValue(a))},MatrixHeight:function(a,b){b.matrixHeight=parseInt(this.getChildValue(a))},ResourceURL:function(a,b){b.resourceUrl=b.resourceUrl||{};var c=a.getAttribute("resourceType");b.resourceUrls||(b.resourceUrls=[]),c=b.resourceUrl[c]={format:a.getAttribute("format"),template:a.getAttribute("template"),resourceType:c},b.resourceUrls.push(c)},WSDL:function(a,b){b.wsdl={},b.wsdl.href=a.getAttribute("xlink:href")},ServiceMetadataURL:function(a,b){b.serviceMetadataUrl={},b.serviceMetadataUrl.href=a.getAttribute("xlink:href")},LegendURL:function(a,b){b.legend={},b.legend.href=a.getAttribute("xlink:href"),b.legend.format=a.getAttribute("format")},Dimension:function(a,b){var c={values:[]};this.readChildNodes(a,c),b.dimensions.push(c)},Default:function(a,b){b["default"]=this.getChildValue(a)},Value:function(a,b){b.values.push(this.getChildValue(a))}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WMTSCapabilities.v1_0_0"}),browserify_shim__define__module__export__("undefined"!=typeof OpenLayers?OpenLayers:window.OpenLayers)}).call(global,void 0,void 0,void 0,void 0,function(a){module.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(a,b,c){!function(a,c,d){var e=a.L,f={};f.version="0.7.2","object"==typeof b&&"object"==typeof b.exports?b.exports=f:"function"==typeof define&&define.amd&&define(f),f.noConflict=function(){return a.L=e,this},a.L=f,f.Util={extend:function(a){var b,c,d,e,f=Array.prototype.slice.call(arguments,1);for(c=0,d=f.length;d>c;c++){e=f[c]||{};for(b in e)e.hasOwnProperty(b)&&(a[b]=e[b])}return a},bind:function(a,b){var c=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return a.apply(b,c||arguments)}},stamp:function(){var a=0,b="_leaflet_id";return function(c){return c[b]=c[b]||++a,c[b]}}(),invokeEach:function(a,b,c){var d,e;if("object"==typeof a){e=Array.prototype.slice.call(arguments,3);for(d in a)b.apply(c,[d,a[d]].concat(e));return!0}return!1},limitExecByInterval:function(a,b,c){var d,e;return function f(){var g=arguments;return d?void(e=!0):(d=!0,setTimeout(function(){d=!1,e&&(f.apply(c,g),e=!1)},b),void a.apply(c,g))}},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return f.Util.trim(a).split(/\s+/)},setOptions:function(a,b){return a.options=f.extend({},a.options,b),a.options},getParamString:function(a,b,c){var d=[];for(var e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&-1!==b.indexOf("?")?"&":"?")+d.join("&")},template:function(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,c){var e=b[c];if(e===d)throw new Error("No value provided for variable "+a);return"function"==typeof e&&(e=e(b)),e})},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function b(b){var c,d,e=["webkit","moz","o","ms"];for(c=0;c<e.length&&!d;c++)d=a[e[c]+b];return d}function c(b){var c=+new Date,e=Math.max(0,16-(c-d));return d=c+e,a.setTimeout(b,e)}var d=0,e=a.requestAnimationFrame||b("RequestAnimationFrame")||c,g=a.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};f.Util.requestAnimFrame=function(b,d,g,h){return b=f.bind(b,d),g&&e===c?void b():e.call(a,b,h)},f.Util.cancelAnimFrame=function(b){b&&g.call(a,b)}}(),f.extend=f.Util.extend,f.bind=f.Util.bind,f.stamp=f.Util.stamp,f.setOptions=f.Util.setOptions,f.Class=function(){},f.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},c=function(){};c.prototype=this.prototype;var d=new c;d.constructor=b,b.prototype=d;for(var e in this)this.hasOwnProperty(e)&&"prototype"!==e&&(b[e]=this[e]);a.statics&&(f.extend(b,a.statics),delete a.statics),a.includes&&(f.Util.extend.apply(null,[d].concat(a.includes)),delete a.includes),a.options&&d.options&&(a.options=f.extend({},d.options,a.options)),f.extend(d,a),d._initHooks=[];var g=this;return b.__super__=g.prototype,d.callInitHooks=function(){if(!this._initHooksCalled){g.prototype.callInitHooks&&g.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=d._initHooks.length;b>a;a++)d._initHooks[a].call(this)}},b},f.Class.include=function(a){f.extend(this.prototype,a)},f.Class.mergeOptions=function(a){f.extend(this.prototype.options,a)},f.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c)};var g="_leaflet_events";f.Mixin={},f.Mixin.Events={addEventListener:function(a,b,c){if(f.Util.invokeEach(a,this.addEventListener,this,b,c))return this;var d,e,h,i,j,k,l,m=this[g]=this[g]||{},n=c&&c!==this&&f.stamp(c);for(a=f.Util.splitWords(a),d=0,e=a.length;e>d;d++)h={action:b,context:c||this},i=a[d],n?(j=i+"_idx",k=j+"_len",l=m[j]=m[j]||{},l[n]||(l[n]=[],m[k]=(m[k]||0)+1),l[n].push(h)):(m[i]=m[i]||[],m[i].push(h));return this},hasEventListeners:function(a){var b=this[g];return!!b&&(a in b&&b[a].length>0||a+"_idx"in b&&b[a+"_idx_len"]>0)},removeEventListener:function(a,b,c){if(!this[g])return this;if(!a)return this.clearAllEventListeners();if(f.Util.invokeEach(a,this.removeEventListener,this,b,c))return this;var d,e,h,i,j,k,l,m,n,o=this[g],p=c&&c!==this&&f.stamp(c);for(a=f.Util.splitWords(a),d=0,e=a.length;e>d;d++)if(h=a[d],k=h+"_idx",l=k+"_len",m=o[k],b){if(i=p&&m?m[p]:o[h]){for(j=i.length-1;j>=0;j--)i[j].action!==b||c&&i[j].context!==c||(n=i.splice(j,1),n[0].action=f.Util.falseFn);c&&m&&0===i.length&&(delete m[p],o[l]--)}}else delete o[h],delete o[k],delete o[l];return this},clearAllEventListeners:function(){return delete this[g],this},fireEvent:function(a,b){if(!this.hasEventListeners(a))return this;var c,d,e,h,i,j=f.Util.extend({},b,{type:a,target:this}),k=this[g];if(k[a])for(c=k[a].slice(),d=0,e=c.length;e>d;d++)c[d].action.call(c[d].context,j);h=k[a+"_idx"];for(i in h)if(c=h[i].slice())for(d=0,e=c.length;e>d;d++)c[d].action.call(c[d].context,j);return this},addOneTimeEventListener:function(a,b,c){if(f.Util.invokeEach(a,this.addOneTimeEventListener,this,b,c))return this;var d=f.bind(function(){this.removeEventListener(a,b,c).removeEventListener(a,d,c)},this);return this.addEventListener(a,b,c).addEventListener(a,d,c)}},f.Mixin.Events.on=f.Mixin.Events.addEventListener,f.Mixin.Events.off=f.Mixin.Events.removeEventListener,f.Mixin.Events.once=f.Mixin.Events.addOneTimeEventListener,f.Mixin.Events.fire=f.Mixin.Events.fireEvent,function(){var b="ActiveXObject"in a,e=b&&!c.addEventListener,g=navigator.userAgent.toLowerCase(),h=-1!==g.indexOf("webkit"),i=-1!==g.indexOf("chrome"),j=-1!==g.indexOf("phantom"),k=-1!==g.indexOf("android"),l=-1!==g.search("android [23]"),m=-1!==g.indexOf("gecko"),n=typeof orientation!=d+"",o=a.navigator&&a.navigator.msPointerEnabled&&a.navigator.msMaxTouchPoints&&!a.PointerEvent,p=a.PointerEvent&&a.navigator.pointerEnabled&&a.navigator.maxTouchPoints||o,q="devicePixelRatio"in a&&a.devicePixelRatio>1||"matchMedia"in a&&a.matchMedia("(min-resolution:144dpi)")&&a.matchMedia("(min-resolution:144dpi)").matches,r=c.documentElement,s=b&&"transition"in r.style,t="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!l,u="MozPerspective"in r.style,v="OTransition"in r.style,w=!a.L_DISABLE_3D&&(s||t||u||v)&&!j,x=!a.L_NO_TOUCH&&!j&&function(){var a="ontouchstart";if(p||a in r)return!0;var b=c.createElement("div"),d=!1;return b.setAttribute?(b.setAttribute(a,"return;"),"function"==typeof b[a]&&(d=!0),b.removeAttribute(a),b=null,d):!1}();f.Browser={ie:b,ielt9:e,webkit:h,gecko:m&&!h&&!a.opera&&!b,android:k,android23:l,chrome:i,ie3d:s,webkit3d:t,gecko3d:u,opera3d:v,any3d:w,mobile:n,mobileWebkit:n&&h,mobileWebkit3d:n&&t,mobileOpera:n&&a.opera,touch:x,msPointer:o,pointer:p,retina:q}}(),f.Point=function(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b},f.Point.prototype={clone:function(){return new f.Point(this.x,this.y)},add:function(a){return this.clone()._add(f.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(f.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(a){a=f.point(a);
var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a=f.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=f.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+f.Util.formatNum(this.x)+", "+f.Util.formatNum(this.y)+")"}},f.point=function(a,b,c){return a instanceof f.Point?a:f.Util.isArray(a)?new f.Point(a[0],a[1]):a===d||null===a?a:new f.Point(a,b,c)},f.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},f.Bounds.prototype={extend:function(a){return a=f.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new f.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new f.Point(this.min.x,this.max.y)},getTopRight:function(){return new f.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof f.Point?f.point(a):f.bounds(a),a instanceof f.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=f.bounds(a);var b=this.min,c=this.max,d=a.min,e=a.max,g=e.x>=b.x&&d.x<=c.x,h=e.y>=b.y&&d.y<=c.y;return g&&h},isValid:function(){return!(!this.min||!this.max)}},f.bounds=function(a,b){return!a||a instanceof f.Bounds?a:new f.Bounds(a,b)},f.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},f.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new f.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}},f.DomUtil={get:function(a){return"string"==typeof a?c.getElementById(a):a},getStyle:function(a,b){var d=a.style[b];if(!d&&a.currentStyle&&(d=a.currentStyle[b]),(!d||"auto"===d)&&c.defaultView){var e=c.defaultView.getComputedStyle(a,null);d=e?e[b]:null}return"auto"===d?null:d},getViewportOffset:function(a){var b,d=0,e=0,g=a,h=c.body,i=c.documentElement;do{if(d+=g.offsetTop||0,e+=g.offsetLeft||0,d+=parseInt(f.DomUtil.getStyle(g,"borderTopWidth"),10)||0,e+=parseInt(f.DomUtil.getStyle(g,"borderLeftWidth"),10)||0,b=f.DomUtil.getStyle(g,"position"),g.offsetParent===h&&"absolute"===b)break;if("fixed"===b){d+=h.scrollTop||i.scrollTop||0,e+=h.scrollLeft||i.scrollLeft||0;break}if("relative"===b&&!g.offsetLeft){var j=f.DomUtil.getStyle(g,"width"),k=f.DomUtil.getStyle(g,"max-width"),l=g.getBoundingClientRect();("none"!==j||"none"!==k)&&(e+=l.left+g.clientLeft),d+=l.top+(h.scrollTop||i.scrollTop||0);break}g=g.offsetParent}while(g);g=a;do{if(g===h)break;d-=g.scrollTop||0,e-=g.scrollLeft||0,g=g.parentNode}while(g);return new f.Point(e,d)},documentIsLtr:function(){return f.DomUtil._docIsLtrCached||(f.DomUtil._docIsLtrCached=!0,f.DomUtil._docIsLtr="ltr"===f.DomUtil.getStyle(c.body,"direction")),f.DomUtil._docIsLtr},create:function(a,b,d){var e=c.createElement(a);return e.className=b,d&&d.appendChild(e),e},hasClass:function(a,b){if(a.classList!==d)return a.classList.contains(b);var c=f.DomUtil._getClass(a);return c.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(c)},addClass:function(a,b){if(a.classList!==d)for(var c=f.Util.splitWords(b),e=0,g=c.length;g>e;e++)a.classList.add(c[e]);else if(!f.DomUtil.hasClass(a,b)){var h=f.DomUtil._getClass(a);f.DomUtil._setClass(a,(h?h+" ":"")+b)}},removeClass:function(a,b){a.classList!==d?a.classList.remove(b):f.DomUtil._setClass(a,f.Util.trim((" "+f.DomUtil._getClass(a)+" ").replace(" "+b+" "," ")))},_setClass:function(a,b){a.className.baseVal===d?a.className=b:a.className.baseVal=b},_getClass:function(a){return a.className.baseVal===d?a.className:a.className.baseVal},setOpacity:function(a,b){if("opacity"in a.style)a.style.opacity=b;else if("filter"in a.style){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)}catch(e){if(1===b)return}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"}},testProp:function(a){for(var b=c.documentElement.style,d=0;d<a.length;d++)if(a[d]in b)return a[d];return!1},getTranslateString:function(a){var b=f.Browser.webkit3d,c="translate"+(b?"3d":"")+"(",d=(b?",0":"")+")";return c+a.x+"px,"+a.y+"px"+d},getScaleString:function(a,b){var c=f.DomUtil.getTranslateString(b.add(b.multiplyBy(-1*a))),d=" scale("+a+") ";return c+d},setPosition:function(a,b,c){a._leaflet_pos=b,!c&&f.Browser.any3d?a.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos}},f.DomUtil.TRANSFORM=f.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),f.DomUtil.TRANSITION=f.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),f.DomUtil.TRANSITION_END="webkitTransition"===f.DomUtil.TRANSITION||"OTransition"===f.DomUtil.TRANSITION?f.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in c)f.extend(f.DomUtil,{disableTextSelection:function(){f.DomEvent.on(a,"selectstart",f.DomEvent.preventDefault)},enableTextSelection:function(){f.DomEvent.off(a,"selectstart",f.DomEvent.preventDefault)}});else{var b=f.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);f.extend(f.DomUtil,{disableTextSelection:function(){if(b){var a=c.documentElement.style;this._userSelect=a[b],a[b]="none"}},enableTextSelection:function(){b&&(c.documentElement.style[b]=this._userSelect,delete this._userSelect)}})}f.extend(f.DomUtil,{disableImageDrag:function(){f.DomEvent.on(a,"dragstart",f.DomEvent.preventDefault)},enableImageDrag:function(){f.DomEvent.off(a,"dragstart",f.DomEvent.preventDefault)}})}(),f.LatLng=function(a,b,c){if(a=parseFloat(a),b=parseFloat(b),isNaN(a)||isNaN(b))throw new Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=a,this.lng=b,c!==d&&(this.alt=parseFloat(c))},f.extend(f.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),f.LatLng.prototype={equals:function(a){if(!a)return!1;a=f.latLng(a);var b=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return b<=f.LatLng.MAX_MARGIN},toString:function(a){return"LatLng("+f.Util.formatNum(this.lat,a)+", "+f.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){a=f.latLng(a);var b=6378137,c=f.LatLng.DEG_TO_RAD,d=(a.lat-this.lat)*c,e=(a.lng-this.lng)*c,g=this.lat*c,h=a.lat*c,i=Math.sin(d/2),j=Math.sin(e/2),k=i*i+j*j*Math.cos(g)*Math.cos(h);return 2*b*Math.atan2(Math.sqrt(k),Math.sqrt(1-k))},wrap:function(a,b){var c=this.lng;return a=a||-180,b=b||180,c=(c+b)%(b-a)+(a>c||c===b?b:a),new f.LatLng(this.lat,c)}},f.latLng=function(a,b){return a instanceof f.LatLng?a:f.Util.isArray(a)?"number"==typeof a[0]||"string"==typeof a[0]?new f.LatLng(a[0],a[1],a[2]):null:a===d||null===a?a:"object"==typeof a&&"lat"in a?new f.LatLng(a.lat,"lng"in a?a.lng:a.lon):b===d?null:new f.LatLng(a,b)},f.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},f.LatLngBounds.prototype={extend:function(a){if(!a)return this;var b=f.latLng(a);return a=null!==b?b:f.latLngBounds(a),a instanceof f.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(a.lat,this._southWest.lat),this._southWest.lng=Math.min(a.lng,this._southWest.lng),this._northEast.lat=Math.max(a.lat,this._northEast.lat),this._northEast.lng=Math.max(a.lng,this._northEast.lng)):(this._southWest=new f.LatLng(a.lat,a.lng),this._northEast=new f.LatLng(a.lat,a.lng)):a instanceof f.LatLngBounds&&(this.extend(a._southWest),this.extend(a._northEast)),this},pad:function(a){var b=this._southWest,c=this._northEast,d=Math.abs(b.lat-c.lat)*a,e=Math.abs(b.lng-c.lng)*a;return new f.LatLngBounds(new f.LatLng(b.lat-d,b.lng-e),new f.LatLng(c.lat+d,c.lng+e))},getCenter:function(){return new f.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new f.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new f.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof f.LatLng?f.latLng(a):f.latLngBounds(a);var b,c,d=this._southWest,e=this._northEast;return a instanceof f.LatLngBounds?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=d.lat&&c.lat<=e.lat&&b.lng>=d.lng&&c.lng<=e.lng},intersects:function(a){a=f.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),e=a.getNorthEast(),g=e.lat>=b.lat&&d.lat<=c.lat,h=e.lng>=b.lng&&d.lng<=c.lng;return g&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return a?(a=f.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},f.latLngBounds=function(a,b){return!a||a instanceof f.LatLngBounds?a:new f.LatLngBounds(a,b)},f.Projection={},f.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var b=f.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),e=a.lng*b,g=d*b;return g=Math.log(Math.tan(Math.PI/4+g/2)),new f.Point(e,g)},unproject:function(a){var b=f.LatLng.RAD_TO_DEG,c=a.x*b,d=(2*Math.atan(Math.exp(a.y))-Math.PI/2)*b;return new f.LatLng(d,c)}},f.Projection.LonLat={project:function(a){return new f.Point(a.lng,a.lat)},unproject:function(a){return new f.LatLng(a.y,a.x)}},f.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},scale:function(a){return 256*Math.pow(2,a)},getSize:function(a){var b=this.scale(a);return f.point(b,b)}},f.CRS.Simple=f.extend({},f.CRS,{projection:f.Projection.LonLat,transformation:new f.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)}}),f.CRS.EPSG3857=f.extend({},f.CRS,{code:"EPSG:3857",projection:f.Projection.SphericalMercator,transformation:new f.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(a){var b=this.projection.project(a),c=6378137;return b.multiplyBy(c)}}),f.CRS.EPSG900913=f.extend({},f.CRS.EPSG3857,{code:"EPSG:900913"}),f.CRS.EPSG4326=f.extend({},f.CRS,{code:"EPSG:4326",projection:f.Projection.LonLat,transformation:new f.Transformation(1/360,.5,-1/360,.5)}),f.Map=f.Class.extend({includes:f.Mixin.Events,options:{crs:f.CRS.EPSG3857,fadeAnimation:f.DomUtil.TRANSITION&&!f.Browser.android23,trackResize:!0,markerZoomAnimation:f.DomUtil.TRANSITION&&f.Browser.any3d},initialize:function(a,b){b=f.setOptions(this,b),this._initContainer(a),this._initLayout(),this._onResize=f.bind(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.center&&b.zoom!==d&&this.setView(f.latLng(b.center),b.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(b.layers)},setView:function(a,b){return b=b===d?this.getZoom():b,this._resetView(f.latLng(a),this._limitZoom(b)),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=this._limitZoom(a),this)},zoomIn:function(a,b){return this.setZoom(this._zoom+(a||1),b)},zoomOut:function(a,b){return this.setZoom(this._zoom-(a||1),b)},setZoomAround:function(a,b,c){var d=this.getZoomScale(b),e=this.getSize().divideBy(2),g=a instanceof f.Point?a:this.latLngToContainerPoint(a),h=g.subtract(e).multiplyBy(1-1/d),i=this.containerPointToLatLng(e.add(h));return this.setView(i,b,{zoom:c})},fitBounds:function(a,b){b=b||{},a=a.getBounds?a.getBounds():f.latLngBounds(a);var c=f.point(b.paddingTopLeft||b.padding||[0,0]),d=f.point(b.paddingBottomRight||b.padding||[0,0]),e=this.getBoundsZoom(a,!1,c.add(d)),g=d.subtract(c).divideBy(2),h=this.project(a.getSouthWest(),e),i=this.project(a.getNorthEast(),e),j=this.unproject(h.add(i).divideBy(2).add(g),e);return e=b&&b.maxZoom?Math.min(b.maxZoom,e):e,this.setView(j,e,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(f.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){return a=f.latLngBounds(a),this.options.maxBounds=a,a?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(a,b){var c=this.getCenter(),d=this._limitCenter(c,this._zoom,a);return c.equals(d)?this:this.panTo(d,b)},addLayer:function(a){var b=f.stamp(a);return this._layers[b]?this:(this._layers[b]=a,!a.options||isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[b]=a,this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&a instanceof f.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,a.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(a),this)},removeLayer:function(a){var b=f.stamp(a);return this._layers[b]?(this._loaded&&a.onRemove(this),delete this._layers[b],this._loaded&&this.fire("layerremove",{layer:a}),this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&a instanceof f.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,a.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(a){return a?f.stamp(a)in this._layers:!1},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},invalidateSize:function(a){if(!this._loaded)return this;a=f.extend({animate:!1,pan:!0},a===!0?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var c=this.getSize(),d=b.divideBy(2).round(),e=c.divideBy(2).round(),g=d.subtract(e);return g.x||g.y?(a.animate&&a.pan?this.panBy(g):(a.pan&&this._rawPanBy(g),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:c})):this},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(a){this._container._leaflet=d}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new f.LatLngBounds(b,c)},getMinZoom:function(){return this.options.minZoom===d?this._layersMinZoom===d?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===d?this._layersMaxZoom===d?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,c){a=f.latLngBounds(a);var d,e=this.getMinZoom()-(b?1:0),g=this.getMaxZoom(),h=this.getSize(),i=a.getNorthWest(),j=a.getSouthEast(),k=!0;c=f.point(c||[0,0]);do e++,d=this.project(j,e).subtract(this.project(i,e)).add(c),k=b?d.x<h.x||d.y<h.y:h.contains(d);while(k&&g>=e);return k&&b?null:b?e:e-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new f.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new f.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a){var b=this.options.crs;return b.scale(a)/b.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,b){return b=b===d?this._zoom:b,this.options.crs.latLngToPoint(f.latLng(a),b)},unproject:function(a,b){return b=b===d?this._zoom:b,this.options.crs.pointToLatLng(f.point(a),b)},layerPointToLatLng:function(a){var b=f.point(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(f.latLng(a))._round();return b._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(a){return f.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return f.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(f.point(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(f.latLng(a)))},mouseEventToContainerPoint:function(a){return f.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=f.DomUtil.get(a);if(!b)throw new Error("Map container not found.");if(b._leaflet)throw new Error("Map container is already initialized.");b._leaflet=!0},_initLayout:function(){var a=this._container;f.DomUtil.addClass(a,"leaflet-container"+(f.Browser.touch?" leaflet-touch":"")+(f.Browser.retina?" leaflet-retina":"")+(f.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var b=f.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=a.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=a.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),a.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),a.shadowPane=this._createPane("leaflet-shadow-pane"),a.overlayPane=this._createPane("leaflet-overlay-pane"),a.markerPane=this._createPane("leaflet-marker-pane"),a.popupPane=this._createPane("leaflet-popup-pane");var b=" leaflet-zoom-hide";this.options.markerZoomAnimation||(f.DomUtil.addClass(a.markerPane,b),f.DomUtil.addClass(a.shadowPane,b),f.DomUtil.addClass(a.popupPane,b))},_createPane:function(a,b){return f.DomUtil.create("div",a,b||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(a){a=a?f.Util.isArray(a)?a:[a]:[];for(var b=0,c=a.length;c>b;b++)this.addLayer(a[b])},_resetView:function(a,b,c,d){var e=this._zoom!==b;d||(this.fire("movestart"),e&&this.fire("zoomstart")),this._zoom=b,this._initialCenter=a,this._initialTopLeftPoint=this._getNewTopLeftPoint(a),c?this._initialTopLeftPoint._add(this._getMapPanePos()):f.DomUtil.setPosition(this._mapPane,new f.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var g=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!c}),g&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(e||d)&&this.fire("zoomend"),this.fire("moveend",{hard:!c})},_rawPanBy:function(a){f.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var a,b=1/0,c=-(1/0),e=this._getZoomSpan();for(a in this._zoomBoundLayers){var f=this._zoomBoundLayers[a];isNaN(f.options.minZoom)||(b=Math.min(b,f.options.minZoom)),isNaN(f.options.maxZoom)||(c=Math.max(c,f.options.maxZoom))}a===d?this._layersMaxZoom=this._layersMinZoom=d:(this._layersMaxZoom=c,this._layersMinZoom=b),e!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){if(f.DomEvent){b=b||"on",f.DomEvent[b](this._container,"click",this._onMouseClick,this);var c,d,e=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(c=0,d=e.length;d>c;c++)f.DomEvent[b](this._container,e[c],this._fireMouseEvent,this);this.options.trackResize&&f.DomEvent[b](a,"resize",this._onResize,this)}},_onResize:function(){f.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=f.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(a){!this._loaded||!a._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||f.DomEvent._skipped(a)||(this.fire("preclick"),this._fireMouseEvent(a))},_fireMouseEvent:function(a){if(this._loaded&&!f.DomEvent._skipped(a)){var b=a.type;if(b="mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,this.hasEventListeners(b)){"contextmenu"===b&&f.DomEvent.preventDefault(a);var c=this.mouseEventToContainerPoint(a),d=this.containerPointToLayerPoint(c),e=this.layerPointToLatLng(d);this.fire(b,{latlng:e,layerPoint:d,containerPoint:c,originalEvent:a})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var a=0,b=this._handlers.length;b>a;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,this):this.on("load",a,b),this},_layerAdd:function(a){a.onAdd(this),this.fire("layeradd",{layer:a})},_getMapPanePos:function(){return f.DomUtil.getPosition(this._mapPane)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewTopLeftPoint(c,b).add(this._getMapPanePos());return this.project(a,b)._subtract(d)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,c){if(!c)return a;var d=this.project(a,b),e=this.getSize().divideBy(2),g=new f.Bounds(d.subtract(e),d.add(e)),h=this._getBoundsOffset(g,c,b);return this.unproject(d.add(h),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),d=new f.Bounds(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(d,b))},_getBoundsOffset:function(a,b,c){var d=this.project(b.getNorthWest(),c).subtract(a.min),e=this.project(b.getSouthEast(),c).subtract(a.max),g=this._rebound(d.x,-e.x),h=this._rebound(d.y,-e.y);return new f.Point(g,h)},_rebound:function(a,b){return a+b>0?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();return Math.max(b,Math.min(c,a))}}),f.map=function(a,b){return new f.Map(a,b)},f.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(a){var b=f.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),e=this.R_MAJOR,g=this.R_MINOR,h=a.lng*b*e,i=d*b,j=g/e,k=Math.sqrt(1-j*j),l=k*Math.sin(i);l=Math.pow((1-l)/(1+l),.5*k);var m=Math.tan(.5*(.5*Math.PI-i))/l;return i=-e*Math.log(m),new f.Point(h,i)},unproject:function(a){for(var b,c=f.LatLng.RAD_TO_DEG,d=this.R_MAJOR,e=this.R_MINOR,g=a.x*c/d,h=e/d,i=Math.sqrt(1-h*h),j=Math.exp(-a.y/d),k=Math.PI/2-2*Math.atan(j),l=15,m=1e-7,n=l,o=.1;Math.abs(o)>m&&--n>0;)b=i*Math.sin(k),o=Math.PI/2-2*Math.atan(j*Math.pow((1-b)/(1+b),.5*i))-k,k+=o;return new f.LatLng(k*c,g)}},f.CRS.EPSG3395=f.extend({},f.CRS,{code:"EPSG:3395",projection:f.Projection.Mercator,transformation:function(){var a=f.Projection.Mercator,b=a.R_MAJOR,c=.5/(Math.PI*b);return new f.Transformation(c,.5,-c,.5)}()}),f.TileLayer=f.Class.extend({includes:f.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:f.Browser.mobile,updateWhenIdle:f.Browser.mobile},initialize:function(a,b){b=f.setOptions(this,b),b.detectRetina&&f.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,b.minZoom>0&&b.minZoom--,this.options.maxZoom--),b.bounds&&(b.bounds=f.latLngBounds(b.bounds)),this._url=a;var c=this.options.subdomains;"string"==typeof c&&(this.options.subdomains=c.split(""))},onAdd:function(a){this._map=a,this._animated=a._zoomAnimated,this._initContainer(),a.on({viewreset:this._reset,moveend:this._update},this),this._animated&&a.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=f.Util.limitExecByInterval(this._update,150,this),a.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this._container.parentNode.removeChild(this._container),a.off({viewreset:this._reset,moveend:this._update},this),this._animated&&a.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||a.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var a=this._map._panes.tilePane;return this._container&&(a.appendChild(this._container),this._setAutoZIndex(a,Math.max)),this},bringToBack:function(){var a=this._map._panes.tilePane;return this._container&&(a.insertBefore(this._container,a.firstChild),this._setAutoZIndex(a,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==d&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a,b){var c,d,e,f=a.children,g=-b(1/0,-(1/0));for(d=0,e=f.length;e>d;d++)f[d]!==this._container&&(c=parseInt(f[d].style.zIndex,10),isNaN(c)||(g=b(g,c)));this.options.zIndex=this._container.style.zIndex=(isFinite(g)?g:0)+b(1,-1)},_updateOpacity:function(){var a,b=this._tiles;if(f.Browser.ielt9)for(a in b)f.DomUtil.setOpacity(b[a],this.options.opacity);else f.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var a=this._map._panes.tilePane;if(!this._container){if(this._container=f.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var b="leaflet-tile-container";this._bgBuffer=f.DomUtil.create("div",b,this._container),this._tileContainer=f.DomUtil.create("div",b,this._container)}else this._tileContainer=this._container;a.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(a){for(var b in this._tiles)this.fire("tileunload",{tile:this._tiles[b]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&a&&a.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var a=this._map,b=a.getZoom()+this.options.zoomOffset,c=this.options.maxNativeZoom,d=this.options.tileSize;return c&&b>c&&(d=Math.round(a.getZoomScale(b)/a.getZoomScale(c)*d)),d},_update:function(){if(this._map){var a=this._map,b=a.getPixelBounds(),c=a.getZoom(),d=this._getTileSize();if(!(c>this.options.maxZoom||c<this.options.minZoom)){var e=f.bounds(b.min.divideBy(d)._floor(),b.max.divideBy(d)._floor());this._addTilesFromCenterOut(e),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(e)}}},_addTilesFromCenterOut:function(a){var b,d,e,g=[],h=a.getCenter();for(b=a.min.y;b<=a.max.y;b++)for(d=a.min.x;d<=a.max.x;d++)e=new f.Point(d,b),this._tileShouldBeLoaded(e)&&g.push(e);var i=g.length;if(0!==i){g.sort(function(a,b){return a.distanceTo(h)-b.distanceTo(h)});var j=c.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=i,d=0;i>d;d++)this._addTile(g[d],j);this._tileContainer.appendChild(j)}},_tileShouldBeLoaded:function(a){if(a.x+":"+a.y in this._tiles)return!1;var b=this.options;if(!b.continuousWorld){var c=this._getWrapTileNum();if(b.noWrap&&(a.x<0||a.x>=c.x)||a.y<0||a.y>=c.y)return!1}if(b.bounds){var d=b.tileSize,e=a.multiplyBy(d),f=e.add([d,d]),g=this._map.unproject(e),h=this._map.unproject(f);if(b.continuousWorld||b.noWrap||(g=g.wrap(),h=h.wrap()),!b.bounds.intersects([g,h]))return!1}return!0},_removeOtherTiles:function(a){var b,c,d,e;for(e in this._tiles)b=e.split(":"),c=parseInt(b[0],10),d=parseInt(b[1],10),(c<a.min.x||c>a.max.x||d<a.min.y||d>a.max.y)&&this._removeTile(e)},_removeTile:function(a){var b=this._tiles[a];this.fire("tileunload",{tile:b,url:b.src}),this.options.reuseTiles?(f.DomUtil.removeClass(b,"leaflet-tile-loaded"),this._unusedTiles.push(b)):b.parentNode===this._tileContainer&&this._tileContainer.removeChild(b),f.Browser.android||(b.onload=null,b.src=f.Util.emptyImageUrl),delete this._tiles[a]},_addTile:function(a,b){var c=this._getTilePos(a),d=this._getTile();f.DomUtil.setPosition(d,c,f.Browser.chrome),this._tiles[a.x+":"+a.y]=d,this._loadTile(d,a),d.parentNode!==this._tileContainer&&b.appendChild(d)},_getZoomForUrl:function(){var a=this.options,b=this._map.getZoom();return a.zoomReverse&&(b=a.maxZoom-b),b+=a.zoomOffset,a.maxNativeZoom?Math.min(b,a.maxNativeZoom):b},_getTilePos:function(a){var b=this._map.getPixelOrigin(),c=this._getTileSize();return a.multiplyBy(c).subtract(b)},getTileUrl:function(a){return f.Util.template(this._url,f.extend({s:this._getSubdomain(a),z:a.z,x:a.x,y:a.y},this.options))},_getWrapTileNum:function(){var a=this._map.options.crs,b=a.getSize(this._map.getZoom());return b.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(a){var b=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(a.x=(a.x%b.x+b.x)%b.x),this.options.tms&&(a.y=b.y-a.y-1),a.z=this._getZoomForUrl()},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var a=this._unusedTiles.pop();return this._resetTile(a),a}return this._createTile()},_resetTile:function(){},_createTile:function(){var a=f.DomUtil.create("img","leaflet-tile");return a.style.width=a.style.height=this._getTileSize()+"px",a.galleryimg="no",a.onselectstart=a.onmousemove=f.Util.falseFn,f.Browser.ielt9&&this.options.opacity!==d&&f.DomUtil.setOpacity(a,this.options.opacity),f.Browser.mobileWebkit3d&&(a.style.WebkitBackfaceVisibility="hidden"),a},_loadTile:function(a,b){a._layer=this,a.onload=this._tileOnLoad,a.onerror=this._tileOnError,this._adjustTilePoint(b),a.src=this.getTileUrl(b),this.fire("tileloadstart",{tile:a,url:a.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&f.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(f.bind(this._clearBgBuffer,this),500)))},
_tileOnLoad:function(){var a=this._layer;this.src!==f.Util.emptyImageUrl&&(f.DomUtil.addClass(this,"leaflet-tile-loaded"),a.fire("tileload",{tile:this,url:this.src})),a._tileLoaded()},_tileOnError:function(){var a=this._layer;a.fire("tileerror",{tile:this,url:this.src});var b=a.options.errorTileUrl;b&&(this.src=b),a._tileLoaded()}}),f.tileLayer=function(a,b){return new f.TileLayer(a,b)},f.TileLayer.WMS=f.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._url=a;var c=f.extend({},this.defaultWmsParams),d=b.tileSize||this.options.tileSize;b.detectRetina&&f.Browser.retina?c.width=c.height=2*d:c.width=c.height=d;for(var e in b)this.options.hasOwnProperty(e)||"crs"===e||(c[e]=b[e]);this.wmsParams=c,f.setOptions(this,b)},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,f.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._map,c=this.options.tileSize,d=a.multiplyBy(c),e=d.add([c,c]),g=this._crs.project(b.unproject(d,a.z)),h=this._crs.project(b.unproject(e,a.z)),i=this._wmsVersion>=1.3&&this._crs===f.CRS.EPSG4326?[h.y,g.x,g.y,h.x].join(","):[g.x,h.y,h.x,g.y].join(","),j=f.Util.template(this._url,{s:this._getSubdomain(a)});return j+f.Util.getParamString(this.wmsParams,j,!0)+"&BBOX="+i},setParams:function(a,b){return f.extend(this.wmsParams,a),b||this.redraw(),this}}),f.tileLayer.wms=function(a,b){return new f.TileLayer.WMS(a,b)},f.TileLayer.Canvas=f.TileLayer.extend({options:{async:!1},initialize:function(a){f.setOptions(this,a)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var a in this._tiles)this._redrawTile(this._tiles[a]);return this},_redrawTile:function(a){this.drawTile(a,a._tilePoint,this._map._zoom)},_createTile:function(){var a=f.DomUtil.create("canvas","leaflet-tile");return a.width=a.height=this.options.tileSize,a.onselectstart=a.onmousemove=f.Util.falseFn,a},_loadTile:function(a,b){a._layer=this,a._tilePoint=b,this._redrawTile(a),this.options.async||this.tileDrawn(a)},drawTile:function(){},tileDrawn:function(a){this._tileOnLoad.call(a)}}),f.tileLayer.canvas=function(a){return new f.TileLayer.Canvas(a)},f.ImageOverlay=f.Class.extend({includes:f.Mixin.Events,options:{opacity:1},initialize:function(a,b,c){this._url=a,this._bounds=f.latLngBounds(b),f.setOptions(this,c)},onAdd:function(a){this._map=a,this._image||this._initImage(),a._panes.overlayPane.appendChild(this._image),a.on("viewreset",this._reset,this),a.options.zoomAnimation&&f.Browser.any3d&&a.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._image),a.off("viewreset",this._reset,this),a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var a=this._map._panes.overlayPane;return this._image&&a.insertBefore(this._image,a.firstChild),this},setUrl:function(a){this._url=a,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=f.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&f.Browser.any3d?f.DomUtil.addClass(this._image,"leaflet-zoom-animated"):f.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),f.extend(this._image,{galleryimg:"no",onselectstart:f.Util.falseFn,onmousemove:f.Util.falseFn,onload:f.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(a){var b=this._map,c=this._image,d=b.getZoomScale(a.zoom),e=this._bounds.getNorthWest(),g=this._bounds.getSouthEast(),h=b._latLngToNewLayerPoint(e,a.zoom,a.center),i=b._latLngToNewLayerPoint(g,a.zoom,a.center)._subtract(h),j=h._add(i._multiplyBy(.5*(1-1/d)));c.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(j)+" scale("+d+") "},_reset:function(){var a=this._image,b=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),c=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(b);f.DomUtil.setPosition(a,b),a.style.width=c.x+"px",a.style.height=c.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){f.DomUtil.setOpacity(this._image,this.options.opacity)}}),f.imageOverlay=function(a,b,c){return new f.ImageOverlay(a,b,c)},f.Icon=f.Class.extend({options:{className:""},initialize:function(a){f.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d;return d=b&&"IMG"===b.tagName?this._createImg(c,b):this._createImg(c),this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var c,d=this.options,e=f.point(d[b+"Size"]);c=f.point("shadow"===b?d.shadowAnchor||d.iconAnchor:d.iconAnchor),!c&&e&&(c=e.divideBy(2,!0)),a.className="leaflet-marker-"+b+" "+d.className,c&&(a.style.marginLeft=-c.x+"px",a.style.marginTop=-c.y+"px"),e&&(a.style.width=e.x+"px",a.style.height=e.y+"px")},_createImg:function(a,b){return b=b||c.createElement("img"),b.src=a,b},_getIconUrl:function(a){return f.Browser.retina&&this.options[a+"RetinaUrl"]?this.options[a+"RetinaUrl"]:this.options[a+"Url"]}}),f.icon=function(a){return new f.Icon(a)},f.Icon.Default=f.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];f.Browser.retina&&"icon"===a&&(a+="-2x");var c=f.Icon.Default.imagePath;if(!c)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return c+"/marker-"+a+".png"}}),f.Icon.Default.imagePath=function(){var a,b,d,e,f,g=c.getElementsByTagName("script"),h=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(a=0,b=g.length;b>a;a++)if(d=g[a].src,e=d.match(h))return f=d.split(h)[0],(f?f+"/":"")+"images"}(),f.Marker=f.Class.extend({includes:f.Mixin.Events,options:{icon:new f.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(a,b){f.setOptions(this,b),this._latlng=f.latLng(a)},onAdd:function(a){this._map=a,a.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),a.options.zoomAnimation&&a.options.markerZoomAnimation&&a.on("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),a.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=f.latLng(a),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update(),this},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,b=this._map,c=b.options.zoomAnimation&&b.options.markerZoomAnimation,d=c?"leaflet-zoom-animated":"leaflet-zoom-hide",e=a.icon.createIcon(this._icon),g=!1;e!==this._icon&&(this._icon&&this._removeIcon(),g=!0,a.title&&(e.title=a.title),a.alt&&(e.alt=a.alt)),f.DomUtil.addClass(e,d),a.keyboard&&(e.tabIndex="0"),this._icon=e,this._initInteraction(),a.riseOnHover&&f.DomEvent.on(e,"mouseover",this._bringToFront,this).on(e,"mouseout",this._resetZIndex,this);var h=a.icon.createShadow(this._shadow),i=!1;h!==this._shadow&&(this._removeShadow(),i=!0),h&&f.DomUtil.addClass(h,d),this._shadow=h,a.opacity<1&&this._updateOpacity();var j=this._map._panes;g&&j.markerPane.appendChild(this._icon),h&&i&&j.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&f.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(a){f.DomUtil.setPosition(this._icon,a),this._shadow&&f.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.clickable){var a=this._icon,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];f.DomUtil.addClass(a,"leaflet-clickable"),f.DomEvent.on(a,"click",this._onMouseClick,this),f.DomEvent.on(a,"keypress",this._onKeyPress,this);for(var c=0;c<b.length;c++)f.DomEvent.on(a,b[c],this._fireMouseEvent,this);f.Handler.MarkerDrag&&(this.dragging=new f.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(a){var b=this.dragging&&this.dragging.moved();(this.hasEventListeners(a.type)||b)&&f.DomEvent.stopPropagation(a),b||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(a.type,{originalEvent:a,latlng:this._latlng})},_onKeyPress:function(a){13===a.keyCode&&this.fire("click",{originalEvent:a,latlng:this._latlng})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a,latlng:this._latlng}),"contextmenu"===a.type&&this.hasEventListeners(a.type)&&f.DomEvent.preventDefault(a),"mousedown"!==a.type?f.DomEvent.stopPropagation(a):f.DomEvent.preventDefault(a)},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){f.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&f.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),f.marker=function(a,b){return new f.Marker(a,b)},f.DivIcon=f.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){var b=a&&"DIV"===a.tagName?a:c.createElement("div"),d=this.options;return d.html!==!1?b.innerHTML=d.html:b.innerHTML="",d.bgPos&&(b.style.backgroundPosition=-d.bgPos.x+"px "+-d.bgPos.y+"px"),this._setIconStyles(b,"icon"),b},createShadow:function(){return null}}),f.divIcon=function(a){return new f.DivIcon(a)},f.Map.mergeOptions({closePopupOnClick:!0}),f.Popup=f.Class.extend({includes:f.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(a,b){f.setOptions(this,a),this._source=b,this._animated=f.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(a){this._map=a,this._container||this._initLayout();var b=a.options.fadeAnimation;b&&f.DomUtil.setOpacity(this._container,0),a._panes.popupPane.appendChild(this._container),a.on(this._getEvents(),this),this.update(),b&&f.DomUtil.setOpacity(this._container,1),this.fire("open"),a.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(a){return a.addLayer(this),this},openOn:function(a){return a.openPopup(this),this},onRemove:function(a){a._panes.popupPane.removeChild(this._container),f.Util.falseFn(this._container.offsetWidth),a.off(this._getEvents(),this),a.options.fadeAnimation&&f.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),a.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=f.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var a={viewreset:this._updatePosition};return this._animated&&(a.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a,b="leaflet-popup",c=b+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),d=this._container=f.DomUtil.create("div",c);this.options.closeButton&&(a=this._closeButton=f.DomUtil.create("a",b+"-close-button",d),a.href="#close",a.innerHTML="&#215;",f.DomEvent.disableClickPropagation(a),f.DomEvent.on(a,"click",this._onCloseButtonClick,this));var e=this._wrapper=f.DomUtil.create("div",b+"-content-wrapper",d);f.DomEvent.disableClickPropagation(e),this._contentNode=f.DomUtil.create("div",b+"-content",e),f.DomEvent.disableScrollPropagation(this._contentNode),f.DomEvent.on(e,"contextmenu",f.DomEvent.stopPropagation),this._tipContainer=f.DomUtil.create("div",b+"-tip-container",d),this._tip=f.DomUtil.create("div",b+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var c=a.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+"px",b.whiteSpace="",b.height="";var d=a.offsetHeight,e=this.options.maxHeight,g="leaflet-popup-scrolled";e&&d>e?(b.height=e+"px",f.DomUtil.addClass(a,g)):f.DomUtil.removeClass(a,g),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=this._animated,c=f.point(this.options.offset);b&&f.DomUtil.setPosition(this._container,a),this._containerBottom=-c.y-(b?0:a.y),this._containerLeft=-Math.round(this._containerWidth/2)+c.x+(b?0:a.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);f.DomUtil.setPosition(this._container,b)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,b=this._container.offsetHeight,c=this._containerWidth,d=new f.Point(this._containerLeft,-b-this._containerBottom);this._animated&&d._add(f.DomUtil.getPosition(this._container));var e=a.layerPointToContainerPoint(d),g=f.point(this.options.autoPanPadding),h=f.point(this.options.autoPanPaddingTopLeft||g),i=f.point(this.options.autoPanPaddingBottomRight||g),j=a.getSize(),k=0,l=0;e.x+c+i.x>j.x&&(k=e.x+c-j.x+i.x),e.x-k-h.x<0&&(k=e.x-h.x),e.y+b+i.y>j.y&&(l=e.y+b-j.y+i.y),e.y-l-h.y<0&&(l=e.y-h.y),(k||l)&&a.fire("autopanstart").panBy([k,l])}},_onCloseButtonClick:function(a){this._close(),f.DomEvent.stop(a)}}),f.popup=function(a,b){return new f.Popup(a,b)},f.Map.include({openPopup:function(a,b,c){if(this.closePopup(),!(a instanceof f.Popup)){var d=a;a=new f.Popup(c).setLatLng(b).setContent(d)}return a._isOpen=!0,this._popup=a,this.addLayer(a)},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&(this.removeLayer(a),a._isOpen=!1),this}}),f.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(a,b){var c=f.point(this.options.icon.options.popupAnchor||[0,0]);return c=c.add(f.Popup.prototype.options.offset),b&&b.offset&&(c=c.add(b.offset)),b=f.extend({offset:c},b),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),a instanceof f.Popup?(f.setOptions(a,b),this._popup=a):this._popup=new f.Popup(b,this).setContent(a),this},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),f.LayerGroup=f.Class.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;c>b;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){return a?a in this._layers||this.getLayerId(a)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)c=this._layers[b],c[a]&&c[a].apply(c,d);return this},onAdd:function(a){this._map=a,this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a),this._map=null},addTo:function(a){return a.addLayer(this),this},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return f.stamp(a)}}),f.layerGroup=function(a){return new f.LayerGroup(a)},f.FeatureGroup=f.LayerGroup.extend({includes:f.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(a){return this.hasLayer(a)?this:("on"in a&&a.on(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.addLayer.call(this,a),this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.off(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.removeLayer.call(this,a),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:a})):this},bindPopup:function(a,b){return this._popupContent=a,this._popupOptions=b,this.invoke("bindPopup",a,b)},openPopup:function(a){for(var b in this._layers){this._layers[b].openPopup(a);break}return this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new f.LatLngBounds;return this.eachLayer(function(b){a.extend(b instanceof f.Marker?b.getLatLng():b.getBounds())}),a},_propagateEvent:function(a){a=f.extend({layer:a.target,target:this},a),this.fire(a.type,a)}}),f.featureGroup=function(a){return new f.FeatureGroup(a)},f.Path=f.Class.extend({includes:[f.Mixin.Events],statics:{CLIP_PADDING:function(){var b=f.Browser.mobile?1280:2e3,c=(b/Math.max(a.outerWidth,a.outerHeight)-1)/2;return Math.max(0,Math.min(.5,c))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(a){f.setOptions(this,a)},onAdd:function(a){this._map=a,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),a.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){a._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,f.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),a.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(a){return f.setOptions(this,a),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),f.Map.include({_updatePathViewport:function(){var a=f.Path.CLIP_PADDING,b=this.getSize(),c=f.DomUtil.getPosition(this._mapPane),d=c.multiplyBy(-1)._subtract(b.multiplyBy(a)._round()),e=d.add(b.multiplyBy(1+2*a)._round());this._pathViewport=new f.Bounds(d,e)}}),f.Path.SVG_NS="http://www.w3.org/2000/svg",f.Browser.svg=!(!c.createElementNS||!c.createElementNS(f.Path.SVG_NS,"svg").createSVGRect),f.Path=f.Path.extend({statics:{SVG:f.Browser.svg},bringToFront:function(){var a=this._map._pathRoot,b=this._container;return b&&a.lastChild!==b&&a.appendChild(b),this},bringToBack:function(){var a=this._map._pathRoot,b=this._container,c=a.firstChild;return b&&c!==b&&a.insertBefore(b,c),this},getPathString:function(){},_createElement:function(a){return c.createElementNS(f.Path.SVG_NS,a)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&f.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var a=this.getPathString();a||(a="M0 0"),this._path.setAttribute("d",a)},_initEvents:function(){if(this.options.clickable){(f.Browser.svg||!f.Browser.vml)&&f.DomUtil.addClass(this._path,"leaflet-clickable"),f.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var a=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],b=0;b<a.length;b++)f.DomEvent.on(this._container,a[b],this._fireMouseEvent,this)}},_onMouseClick:function(a){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(a)},_fireMouseEvent:function(a){if(this.hasEventListeners(a.type)){var b=this._map,c=b.mouseEventToContainerPoint(a),d=b.containerPointToLayerPoint(c),e=b.layerPointToLatLng(d);this.fire(a.type,{latlng:e,layerPoint:d,containerPoint:c,originalEvent:a}),"contextmenu"===a.type&&f.DomEvent.preventDefault(a),"mousemove"!==a.type&&f.DomEvent.stopPropagation(a)}}}),f.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=f.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&f.Browser.any3d?(f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(a){var b=this.getZoomScale(a.zoom),c=this._getCenterOffset(a.center)._multiplyBy(-b)._add(this._pathViewport.min);this._pathRoot.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(c)+" scale("+b+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max,d=c.x-b.x,e=c.y-b.y,g=this._pathRoot,h=this._panes.overlayPane;f.Browser.mobileWebkit&&h.removeChild(g),f.DomUtil.setPosition(g,b),g.setAttribute("width",d),g.setAttribute("height",e),g.setAttribute("viewBox",[b.x,b.y,d,e].join(" ")),f.Browser.mobileWebkit&&h.appendChild(g)}}}),f.Path.include({bindPopup:function(a,b){return a instanceof f.Popup?this._popup=a:((!this._popup||b)&&(this._popup=new f.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(a){return this._popup&&(a=a||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:a})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(a){this._popup.setLatLng(a.latlng),this._map.openPopup(this._popup)}}),f.Browser.vml=!f.Browser.svg&&function(){try{var a=c.createElement("div");a.innerHTML='<v:shape adj="1"/>';var b=a.firstChild;return b.style.behavior="url(#default#VML)",b&&"object"==typeof b.adj}catch(d){return!1}}(),f.Path=f.Browser.svg||!f.Browser.vml?f.Path:f.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return c.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return c.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return c.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var a=this._container=this._createElement("shape");f.DomUtil.addClass(a,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&f.DomUtil.addClass(a,"leaflet-clickable"),a.coordsize="1 1",this._path=this._createElement("path"),a.appendChild(this._path),this._map._pathRoot.appendChild(a)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var a=this._stroke,b=this._fill,c=this.options,d=this._container;d.stroked=c.stroke,d.filled=c.fill,c.stroke?(a||(a=this._stroke=this._createElement("stroke"),a.endcap="round",d.appendChild(a)),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,c.dashArray?a.dashStyle=f.Util.isArray(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):a.dashStyle="",c.lineCap&&(a.endcap=c.lineCap.replace("butt","flat")),c.lineJoin&&(a.joinstyle=c.lineJoin)):a&&(d.removeChild(a),this._stroke=null),c.fill?(b||(b=this._fill=this._createElement("fill"),d.appendChild(b)),b.color=c.fillColor||c.color,b.opacity=c.fillOpacity):b&&(d.removeChild(b),this._fill=null)},_updatePath:function(){var a=this._container.style;a.display="none",this._path.v=this.getPathString()+" ",a.display=""}}),f.Map.include(f.Browser.svg||!f.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var a=this._pathRoot=c.createElement("div");a.className="leaflet-vml-container",this._panes.overlayPane.appendChild(a),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),f.Browser.canvas=function(){return!!c.createElement("canvas").getContext}(),f.Path=f.Path.SVG&&!a.L_PREFER_CANVAS||!f.Browser.canvas?f.Path:f.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(a){return f.setOptions(this,a),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(a){a.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!f.Path._updateRequest&&(f.Path._updateRequest=f.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){f.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var a=this.options;a.stroke&&(this._ctx.lineWidth=a.weight,this._ctx.strokeStyle=a.color),a.fill&&(this._ctx.fillStyle=a.fillColor||a.color)},_drawPath:function(){var a,b,c,d,e,g;for(this._ctx.beginPath(),a=0,c=this._parts.length;c>a;a++){for(b=0,d=this._parts[a].length;d>b;b++)e=this._parts[a][b],g=(0===b?"move":"line")+"To",this._ctx[g](e.x,e.y);this instanceof f.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var a=this._ctx,b=this.options;this._drawPath(),a.save(),this._updateStyle(),b.fill&&(a.globalAlpha=b.fillOpacity,a.fill()),b.stroke&&(a.globalAlpha=b.opacity,a.stroke()),a.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(a){this._containsPoint(a.layerPoint)&&this.fire("click",a)},_onMouseMove:function(a){this._map&&!this._map._animatingZoom&&(this._containsPoint(a.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",a)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",a)))}}),f.Map.include(f.Path.SVG&&!a.L_PREFER_CANVAS||!f.Browser.canvas?{}:{_initPathRoot:function(){var a,b=this._pathRoot;b||(b=this._pathRoot=c.createElement("canvas"),b.style.position="absolute",a=this._canvasCtx=b.getContext("2d"),a.lineCap="round",a.lineJoin="round",this._panes.overlayPane.appendChild(b),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max.subtract(b),d=this._pathRoot;f.DomUtil.setPosition(d,b),d.width=c.x,d.height=c.y,d.getContext("2d").translate(-b.x,-b.y)}}}),f.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var c=a.length,e=typeof Uint8Array!=d+""?Uint8Array:Array,f=new e(c);f[0]=f[c-1]=1,this._simplifyDPStep(a,f,b,0,c-1);var g,h=[];for(g=0;c>g;g++)f[g]&&h.push(a[g]);return h},_simplifyDPStep:function(a,b,c,d,e){var f,g,h,i=0;for(g=d+1;e-1>=g;g++)h=this._sqClosestPointOnSegment(a[g],a[d],a[e],!0),h>i&&(f=g,i=h);i>c&&(b[f]=1,this._simplifyDPStep(a,b,c,d,f),this._simplifyDPStep(a,b,c,f,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;f>d;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),
e=d);return f-1>e&&c.push(a[f-1]),c},clipSegment:function(a,b,c,d){var e,f,g,h=d?this._lastCode:this._getBitCode(a,c),i=this._getBitCode(b,c);for(this._lastCode=i;;){if(!(h|i))return[a,b];if(h&i)return!1;e=h||i,f=this._getEdgeIntersection(a,b,e,c),g=this._getBitCode(f,c),e===h?(a=f,h=g):(b=f,i=g)}},_getEdgeIntersection:function(a,b,c,d){var e=b.x-a.x,g=b.y-a.y,h=d.min,i=d.max;return 8&c?new f.Point(a.x+e*(i.y-a.y)/g,i.y):4&c?new f.Point(a.x+e*(h.y-a.y)/g,h.y):2&c?new f.Point(i.x,a.y+g*(i.x-a.x)/e):1&c?new f.Point(h.x,a.y+g*(h.x-a.x)/e):void 0},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,d){var e,g=b.x,h=b.y,i=c.x-g,j=c.y-h,k=i*i+j*j;return k>0&&(e=((a.x-g)*i+(a.y-h)*j)/k,e>1?(g=c.x,h=c.y):e>0&&(g+=i*e,h+=j*e)),i=a.x-g,j=a.y-h,d?i*i+j*j:new f.Point(g,h)}},f.Polyline=f.Path.extend({initialize:function(a,b){f.Path.prototype.initialize.call(this,b),this._latlngs=this._convertLatLngs(a)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var a=0,b=this._latlngs.length;b>a;a++)this._originalPoints[a]=this._map.latLngToLayerPoint(this._latlngs[a])},getPathString:function(){for(var a=0,b=this._parts.length,c="";b>a;a++)c+=this._getPathPartStr(this._parts[a]);return c},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._latlngs=this._convertLatLngs(a),this.redraw()},addLatLng:function(a){return this._latlngs.push(f.latLng(a)),this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),a},closestLayerPoint:function(a){for(var b,c,d=1/0,e=this._parts,g=null,h=0,i=e.length;i>h;h++)for(var j=e[h],k=1,l=j.length;l>k;k++){b=j[k-1],c=j[k];var m=f.LineUtil._sqClosestPointOnSegment(a,b,c,!0);d>m&&(d=m,g=f.LineUtil._sqClosestPointOnSegment(a,b,c))}return g&&(g.distance=Math.sqrt(d)),g},getBounds:function(){return new f.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(a,b){var c,d,e=b?a:[];for(c=0,d=a.length;d>c;c++){if(f.Util.isArray(a[c])&&"number"!=typeof a[c][0])return;e[c]=f.latLng(a[c])}return e},_initEvents:function(){f.Path.prototype._initEvents.call(this)},_getPathPartStr:function(a){for(var b,c=f.Path.VML,d=0,e=a.length,g="";e>d;d++)b=a[d],c&&b._round(),g+=(d?"L":"M")+b.x+" "+b.y;return g},_clipPoints:function(){var a,b,c,d=this._originalPoints,e=d.length;if(this.options.noClip)return void(this._parts=[d]);this._parts=[];var g=this._parts,h=this._map._pathViewport,i=f.LineUtil;for(a=0,b=0;e-1>a;a++)c=i.clipSegment(d[a],d[a+1],h,a),c&&(g[b]=g[b]||[],g[b].push(c[0]),(c[1]!==d[a+1]||a===e-2)&&(g[b].push(c[1]),b++))},_simplifyPoints:function(){for(var a=this._parts,b=f.LineUtil,c=0,d=a.length;d>c;c++)a[c]=b.simplify(a[c],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),f.Path.prototype._updatePath.call(this))}}),f.polyline=function(a,b){return new f.Polyline(a,b)},f.PolyUtil={},f.PolyUtil.clipPolygon=function(a,b){var c,d,e,g,h,i,j,k,l,m=[1,4,2,8],n=f.LineUtil;for(d=0,j=a.length;j>d;d++)a[d]._code=n._getBitCode(a[d],b);for(g=0;4>g;g++){for(k=m[g],c=[],d=0,j=a.length,e=j-1;j>d;e=d++)h=a[d],i=a[e],h._code&k?i._code&k||(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)):(i._code&k&&(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)),c.push(h));a=c}return a},f.Polygon=f.Polyline.extend({options:{fill:!0},initialize:function(a,b){f.Polyline.prototype.initialize.call(this,a,b),this._initWithHoles(a)},_initWithHoles:function(a){var b,c,d;if(a&&f.Util.isArray(a[0])&&"number"!=typeof a[0][0])for(this._latlngs=this._convertLatLngs(a[0]),this._holes=a.slice(1),b=0,c=this._holes.length;c>b;b++)d=this._holes[b]=this._convertLatLngs(this._holes[b]),d[0].equals(d[d.length-1])&&d.pop();a=this._latlngs,a.length>=2&&a[0].equals(a[a.length-1])&&a.pop()},projectLatlngs:function(){if(f.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var a,b,c,d;for(a=0,c=this._holes.length;c>a;a++)for(this._holePoints[a]=[],b=0,d=this._holes[a].length;d>b;b++)this._holePoints[a][b]=this._map.latLngToLayerPoint(this._holes[a][b])}},setLatLngs:function(a){return a&&f.Util.isArray(a[0])&&"number"!=typeof a[0][0]?(this._initWithHoles(a),this.redraw()):f.Polyline.prototype.setLatLngs.call(this,a)},_clipPoints:function(){var a=this._originalPoints,b=[];if(this._parts=[a].concat(this._holePoints),!this.options.noClip){for(var c=0,d=this._parts.length;d>c;c++){var e=f.PolyUtil.clipPolygon(this._parts[c],this._map._pathViewport);e.length&&b.push(e)}this._parts=b}},_getPathPartStr:function(a){var b=f.Polyline.prototype._getPathPartStr.call(this,a);return b+(f.Browser.svg?"z":"x")}}),f.polygon=function(a,b){return new f.Polygon(a,b)},function(){function a(a){return f.FeatureGroup.extend({initialize:function(a,b){this._layers={},this._options=b,this.setLatLngs(a)},setLatLngs:function(b){var c=0,d=b.length;for(this.eachLayer(function(a){d>c?a.setLatLngs(b[c++]):this.removeLayer(a)},this);d>c;)this.addLayer(new a(b[c++],this._options));return this},getLatLngs:function(){var a=[];return this.eachLayer(function(b){a.push(b.getLatLngs())}),a}})}f.MultiPolyline=a(f.Polyline),f.MultiPolygon=a(f.Polygon),f.multiPolyline=function(a,b){return new f.MultiPolyline(a,b)},f.multiPolygon=function(a,b){return new f.MultiPolygon(a,b)}}(),f.Rectangle=f.Polygon.extend({initialize:function(a,b){f.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=f.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),f.rectangle=function(a,b){return new f.Rectangle(a,b)},f.Circle=f.Path.extend({initialize:function(a,b,c){f.Path.prototype.initialize.call(this,c),this._latlng=f.latLng(a),this._mRadius=b},options:{fill:!0},setLatLng:function(a){return this._latlng=f.latLng(a),this.redraw()},setRadius:function(a){return this._mRadius=a,this.redraw()},projectLatlngs:function(){var a=this._getLngRadius(),b=this._latlng,c=this._map.latLngToLayerPoint([b.lat,b.lng-a]);this._point=this._map.latLngToLayerPoint(b),this._radius=Math.max(this._point.x-c.x,1)},getBounds:function(){var a=this._getLngRadius(),b=this._mRadius/40075017*360,c=this._latlng;return new f.LatLngBounds([c.lat-b,c.lng-a],[c.lat+b,c.lng+a])},getLatLng:function(){return this._latlng},getPathString:function(){var a=this._point,b=this._radius;return this._checkIfEmpty()?"":f.Browser.svg?"M"+a.x+","+(a.y-b)+"A"+b+","+b+",0,1,1,"+(a.x-.1)+","+(a.y-b)+" z":(a._round(),b=Math.round(b),"AL "+a.x+","+a.y+" "+b+","+b+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(f.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var a=this._map._pathViewport,b=this._radius,c=this._point;return c.x-b>a.max.x||c.y-b>a.max.y||c.x+b<a.min.x||c.y+b<a.min.y}}),f.circle=function(a,b,c){return new f.Circle(a,b,c)},f.CircleMarker=f.Circle.extend({options:{radius:10,weight:2},initialize:function(a,b){f.Circle.prototype.initialize.call(this,a,null,b),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){f.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(a){return f.Circle.prototype.setLatLng.call(this,a),this._popup&&this._popup._isOpen&&this._popup.setLatLng(a),this},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius}}),f.circleMarker=function(a,b){return new f.CircleMarker(a,b)},f.Polyline.include(f.Path.CANVAS?{_containsPoint:function(a,b){var c,d,e,g,h,i,j,k=this.options.weight/2;for(f.Browser.touch&&(k+=10),c=0,g=this._parts.length;g>c;c++)for(j=this._parts[c],d=0,h=j.length,e=h-1;h>d;e=d++)if((b||0!==d)&&(i=f.LineUtil.pointToSegmentDistance(a,j[e],j[d]),k>=i))return!0;return!1}}:{}),f.Polygon.include(f.Path.CANVAS?{_containsPoint:function(a){var b,c,d,e,g,h,i,j,k=!1;if(f.Polyline.prototype._containsPoint.call(this,a,!0))return!0;for(e=0,i=this._parts.length;i>e;e++)for(b=this._parts[e],g=0,j=b.length,h=j-1;j>g;h=g++)c=b[g],d=b[h],c.y>a.y!=d.y>a.y&&a.x<(d.x-c.x)*(a.y-c.y)/(d.y-c.y)+c.x&&(k=!k);return k}}:{}),f.Circle.include(f.Path.CANVAS?{_drawPath:function(){var a=this._point;this._ctx.beginPath(),this._ctx.arc(a.x,a.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(a){var b=this._point,c=this.options.stroke?this.options.weight/2:0;return a.distanceTo(b)<=this._radius+c}}:{}),f.CircleMarker.include(f.Path.CANVAS?{_updateStyle:function(){f.Path.prototype._updateStyle.call(this)}}:{}),f.GeoJSON=f.FeatureGroup.extend({initialize:function(a,b){f.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var b,c,d,e=f.Util.isArray(a)?a:a.features;if(e){for(b=0,c=e.length;c>b;b++)d=e[b],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(e[b]);return this}var g=this.options;if(!g.filter||g.filter(a)){var h=f.GeoJSON.geometryToLayer(a,g.pointToLayer,g.coordsToLatLng,g);return h.feature=f.GeoJSON.asFeature(a),h.defaultOptions=h.options,this.resetStyle(h),g.onEachFeature&&g.onEachFeature(a,h),this.addLayer(h)}},resetStyle:function(a){var b=this.options.style;b&&(f.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,b))},setStyle:function(a){this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),f.extend(f.GeoJSON,{geometryToLayer:function(a,b,c,d){var e,g,h,i,j="Feature"===a.type?a.geometry:a,k=j.coordinates,l=[];switch(c=c||this.coordsToLatLng,j.type){case"Point":return e=c(k),b?b(a,e):new f.Marker(e);case"MultiPoint":for(h=0,i=k.length;i>h;h++)e=c(k[h]),l.push(b?b(a,e):new f.Marker(e));return new f.FeatureGroup(l);case"LineString":return g=this.coordsToLatLngs(k,0,c),new f.Polyline(g,d);case"Polygon":if(2===k.length&&!k[1].length)throw new Error("Invalid GeoJSON object.");return g=this.coordsToLatLngs(k,1,c),new f.Polygon(g,d);case"MultiLineString":return g=this.coordsToLatLngs(k,1,c),new f.MultiPolyline(g,d);case"MultiPolygon":return g=this.coordsToLatLngs(k,2,c),new f.MultiPolygon(g,d);case"GeometryCollection":for(h=0,i=j.geometries.length;i>h;h++)l.push(this.geometryToLayer({geometry:j.geometries[h],type:"Feature",properties:a.properties},b,c,d));return new f.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new f.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){var d,e,f,g=[];for(e=0,f=a.length;f>e;e++)d=b?this.coordsToLatLngs(a[e],b-1,c):(c||this.coordsToLatLng)(a[e]),g.push(d);return g},latLngToCoords:function(a){var b=[a.lng,a.lat];return a.alt!==d&&b.push(a.alt),b},latLngsToCoords:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(f.GeoJSON.latLngToCoords(a[c]));return b},getFeature:function(a,b){return a.feature?f.extend({},a.feature,{geometry:b}):f.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var h={toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"Point",coordinates:f.GeoJSON.latLngToCoords(this.getLatLng())})}};f.Marker.include(h),f.Circle.include(h),f.CircleMarker.include(h),f.Polyline.include({toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"LineString",coordinates:f.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),f.Polygon.include({toGeoJSON:function(){var a,b,c,d=[f.GeoJSON.latLngsToCoords(this.getLatLngs())];if(d[0].push(d[0][0]),this._holes)for(a=0,b=this._holes.length;b>a;a++)c=f.GeoJSON.latLngsToCoords(this._holes[a]),c.push(c[0]),d.push(c);return f.GeoJSON.getFeature(this,{type:"Polygon",coordinates:d})}}),function(){function a(a){return function(){var b=[];return this.eachLayer(function(a){b.push(a.toGeoJSON().geometry.coordinates)}),f.GeoJSON.getFeature(this,{type:a,coordinates:b})}}f.MultiPolyline.include({toGeoJSON:a("MultiLineString")}),f.MultiPolygon.include({toGeoJSON:a("MultiPolygon")}),f.LayerGroup.include({toGeoJSON:function(){var b,c=this.feature&&this.feature.geometry,d=[];if(c&&"MultiPoint"===c.type)return a("MultiPoint").call(this);var e=c&&"GeometryCollection"===c.type;return this.eachLayer(function(a){a.toGeoJSON&&(b=a.toGeoJSON(),d.push(e?b.geometry:f.GeoJSON.asFeature(b)))}),e?f.GeoJSON.getFeature(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}})}(),f.geoJson=function(a,b){return new f.GeoJSON(a,b)},f.DomEvent={addListener:function(a,b,c,d){var e,g,h,i=f.stamp(c),j="_leaflet_"+b+i;return a[j]?this:(e=function(b){return c.call(d||a,b||f.DomEvent._getEvent())},f.Browser.pointer&&0===b.indexOf("touch")?this.addPointerListener(a,b,e,i):(f.Browser.touch&&"dblclick"===b&&this.addDoubleTapListener&&this.addDoubleTapListener(a,e,i),"addEventListener"in a?"mousewheel"===b?(a.addEventListener("DOMMouseScroll",e,!1),a.addEventListener(b,e,!1)):"mouseenter"===b||"mouseleave"===b?(g=e,h="mouseenter"===b?"mouseover":"mouseout",e=function(b){return f.DomEvent._checkMouse(a,b)?g(b):void 0},a.addEventListener(h,e,!1)):"click"===b&&f.Browser.android?(g=e,e=function(a){return f.DomEvent._filterClick(a,g)},a.addEventListener(b,e,!1)):a.addEventListener(b,e,!1):"attachEvent"in a&&a.attachEvent("on"+b,e),a[j]=e,this))},removeListener:function(a,b,c){var d=f.stamp(c),e="_leaflet_"+b+d,g=a[e];return g?(f.Browser.pointer&&0===b.indexOf("touch")?this.removePointerListener(a,b,d):f.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,d):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?a.removeEventListener("mouseenter"===b?"mouseover":"mouseout",g,!1):a.removeEventListener(b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[e]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,f.DomEvent._skipped(a),this},disableScrollPropagation:function(a){var b=f.DomEvent.stopPropagation;return f.DomEvent.on(a,"mousewheel",b).on(a,"MozMousePixelScroll",b)},disableClickPropagation:function(a){for(var b=f.DomEvent.stopPropagation,c=f.Draggable.START.length-1;c>=0;c--)f.DomEvent.on(a,f.Draggable.START[c],b);return f.DomEvent.on(a,"click",f.DomEvent._fakeStop).on(a,"dblclick",b)},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return f.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){if(!b)return new f.Point(a.clientX,a.clientY);var c=b.getBoundingClientRect();return new f.Point(a.clientX-c.left-b.clientLeft,a.clientY-c.top-b.clientTop)},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/120),a.detail&&(b=-a.detail/3),b},_skipEvents:{},_fakeStop:function(a){f.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_checkMouse:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(d){return!1}return c!==a},_getEvent:function(){var b=a.event;if(!b)for(var c=arguments.callee.caller;c&&(b=c.arguments[0],!b||a.Event!==b.constructor);)c=c.caller;return b},_filterClick:function(a,b){var c=a.timeStamp||a.originalEvent.timeStamp,d=f.DomEvent._lastClick&&c-f.DomEvent._lastClick;return d&&d>100&&500>d||a.target._simulatedClick&&!a._simulated?void f.DomEvent.stop(a):(f.DomEvent._lastClick=c,b(a))}},f.DomEvent.on=f.DomEvent.addListener,f.DomEvent.off=f.DomEvent.removeListener,f.Draggable=f.Class.extend({includes:f.Mixin.Events,statics:{START:f.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b){this._element=a,this._dragStartTarget=b||a},enable:function(){if(!this._enabled){for(var a=f.Draggable.START.length-1;a>=0;a--)f.DomEvent.on(this._dragStartTarget,f.Draggable.START[a],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var a=f.Draggable.START.length-1;a>=0;a--)f.DomEvent.off(this._dragStartTarget,f.Draggable.START[a],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(a){if(this._moved=!1,!(a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||(f.DomEvent.stopPropagation(a),f.Draggable._disabled||(f.DomUtil.disableImageDrag(),f.DomUtil.disableTextSelection(),this._moving)))){var b=a.touches?a.touches[0]:a;this._startPoint=new f.Point(b.clientX,b.clientY),this._startPos=this._newPos=f.DomUtil.getPosition(this._element),f.DomEvent.on(c,f.Draggable.MOVE[a.type],this._onMove,this).on(c,f.Draggable.END[a.type],this._onUp,this)}},_onMove:function(a){if(a.touches&&a.touches.length>1)return void(this._moved=!0);var b=a.touches&&1===a.touches.length?a.touches[0]:a,d=new f.Point(b.clientX,b.clientY),e=d.subtract(this._startPoint);(e.x||e.y)&&(f.Browser.touch&&Math.abs(e.x)+Math.abs(e.y)<3||(f.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=f.DomUtil.getPosition(this._element).subtract(e),f.DomUtil.addClass(c.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,f.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(e),this._moving=!0,f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),f.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){f.DomUtil.removeClass(c.body,"leaflet-dragging"),this._lastTarget&&(f.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var a in f.Draggable.MOVE)f.DomEvent.off(c,f.Draggable.MOVE[a],this._onMove).off(c,f.Draggable.END[a],this._onUp);f.DomUtil.enableImageDrag(),f.DomUtil.enableTextSelection(),this._moved&&this._moving&&(f.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),f.Handler=f.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),f.Map.mergeOptions({dragging:!0,inertia:!f.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:f.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),f.Map.Drag=f.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new f.Draggable(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,this),a.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var a=this._map;a._panAnim&&a._panAnim.stop(),a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=this._lastTime=+new Date,b=this._lastPos=this._draggable._newPos;this._positions.push(b),this._times.push(a),a-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize()._divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._newPos.x=g},_onDragEnd:function(a){var b=this._map,c=b.options,d=+new Date-this._lastTime,e=!c.inertia||d>c.inertiaThreshold||!this._positions[0];if(b.fire("dragend",a),e)b.fire("moveend");else{var g=this._lastPos.subtract(this._positions[0]),h=(this._lastTime+d-this._times[0])/1e3,i=c.easeLinearity,j=g.multiplyBy(i/h),k=j.distanceTo([0,0]),l=Math.min(c.inertiaMaxSpeed,k),m=j.multiplyBy(l/k),n=l/(c.inertiaDeceleration*i),o=m.multiplyBy(-n/2).round();o.x&&o.y?(o=b._limitOffset(o,b.options.maxBounds),f.Util.requestAnimFrame(function(){b.panBy(o,{duration:n,easeLinearity:i,noMoveStart:!0})})):b.fire("moveend")}}}),f.Map.addInitHook("addHandler","dragging",f.Map.Drag),f.Map.mergeOptions({doubleClickZoom:!0}),f.Map.DoubleClickZoom=f.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom()+(a.originalEvent.shiftKey?-1:1);"center"===b.options.doubleClickZoom?b.setZoom(c):b.setZoomAround(a.containerPoint,c)}}),f.Map.addInitHook("addHandler","doubleClickZoom",f.Map.DoubleClickZoom),f.Map.mergeOptions({scrollWheelZoom:!0}),f.Map.ScrollWheelZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),f.DomEvent.on(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault),this._delta=0},removeHooks:function(){f.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),f.DomEvent.off(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault)},_onWheelScroll:function(a){var b=f.DomEvent.getWheelDelta(a);this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var c=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f.bind(this._performZoom,this),c),f.DomEvent.preventDefault(a),f.DomEvent.stopPropagation(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom();b=b>0?Math.ceil(b):Math.floor(b),b=Math.max(Math.min(b,4),-4),b=a._limitZoom(c+b)-c,this._delta=0,this._startTime=null,b&&("center"===a.options.scrollWheelZoom?a.setZoom(c+b):a.setZoomAround(this._lastMousePos,c+b))}}),f.Map.addInitHook("addHandler","scrollWheelZoom",f.Map.ScrollWheelZoom),f.extend(f.DomEvent,{_touchstart:f.Browser.msPointer?"MSPointerDown":f.Browser.pointer?"pointerdown":"touchstart",_touchend:f.Browser.msPointer?"MSPointerUp":f.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,b,d){function e(a){var b;if(f.Browser.pointer?(o.push(a.pointerId),b=o.length):b=a.touches.length,!(b>1)){var c=Date.now(),d=c-(h||c);i=a.touches?a.touches[0]:a,j=d>0&&k>=d,h=c}}function g(a){if(f.Browser.pointer){var c=o.indexOf(a.pointerId);if(-1===c)return;o.splice(c,1)}if(j){if(f.Browser.pointer){var d,e={};for(var g in i)d=i[g],"function"==typeof d?e[g]=d.bind(i):e[g]=d;i=e}i.type="dblclick",b(i),h=null}}var h,i,j=!1,k=250,l="_leaflet_",m=this._touchstart,n=this._touchend,o=[];a[l+m+d]=e,a[l+n+d]=g;var p=f.Browser.pointer?c.documentElement:a;return a.addEventListener(m,e,!1),p.addEventListener(n,g,!1),f.Browser.pointer&&p.addEventListener(f.DomEvent.POINTER_CANCEL,g,!1),this},removeDoubleTapListener:function(a,b){var d="_leaflet_";return a.removeEventListener(this._touchstart,a[d+this._touchstart+b],!1),(f.Browser.pointer?c.documentElement:a).removeEventListener(this._touchend,a[d+this._touchend+b],!1),f.Browser.pointer&&c.documentElement.removeEventListener(f.DomEvent.POINTER_CANCEL,a[d+this._touchend+b],!1),this}}),f.extend(f.DomEvent,{POINTER_DOWN:f.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:f.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:f.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:f.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(a,b,c,d){switch(b){case"touchstart":return this.addPointerListenerStart(a,b,c,d);case"touchend":return this.addPointerListenerEnd(a,b,c,d);case"touchmove":return this.addPointerListenerMove(a,b,c,d);default:throw"Unknown touch event type"}},addPointerListenerStart:function(a,b,d,e){var g="_leaflet_",h=this._pointers,i=function(a){f.DomEvent.preventDefault(a);for(var b=!1,c=0;c<h.length;c++)if(h[c].pointerId===a.pointerId){b=!0;break}b||h.push(a),a.touches=h.slice(),a.changedTouches=[a],d(a)};if(a[g+"touchstart"+e]=i,a.addEventListener(this.POINTER_DOWN,i,!1),!this._pointerDocumentListener){var j=function(a){for(var b=0;b<h.length;b++)if(h[b].pointerId===a.pointerId){h.splice(b,1);break}};c.documentElement.addEventListener(this.POINTER_UP,j,!1),c.documentElement.addEventListener(this.POINTER_CANCEL,j,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(a,b,c,d){function e(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons){for(var b=0;b<g.length;b++)if(g[b].pointerId===a.pointerId){g[b]=a;break}a.touches=g.slice(),a.changedTouches=[a],c(a)}}var f="_leaflet_",g=this._pointers;return a[f+"touchmove"+d]=e,a.addEventListener(this.POINTER_MOVE,e,!1),this},addPointerListenerEnd:function(a,b,c,d){var e="_leaflet_",f=this._pointers,g=function(a){for(var b=0;b<f.length;b++)if(f[b].pointerId===a.pointerId){f.splice(b,1);break}a.touches=f.slice(),a.changedTouches=[a],c(a)};return a[e+"touchend"+d]=g,a.addEventListener(this.POINTER_UP,g,!1),a.addEventListener(this.POINTER_CANCEL,g,!1),this},removePointerListener:function(a,b,c){var d="_leaflet_",e=a[d+b+c];switch(b){case"touchstart":a.removeEventListener(this.POINTER_DOWN,e,!1);break;case"touchmove":a.removeEventListener(this.POINTER_MOVE,e,!1);break;case"touchend":a.removeEventListener(this.POINTER_UP,e,!1),a.removeEventListener(this.POINTER_CANCEL,e,!1)}return this}}),f.Map.mergeOptions({touchZoom:f.Browser.touch&&!f.Browser.android23,bounceAtZoomLimits:!0}),f.Map.TouchZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&!b._animatingZoom&&!this._zooming){var d=b.mouseEventToLayerPoint(a.touches[0]),e=b.mouseEventToLayerPoint(a.touches[1]),g=b._getCenterLayerPoint();this._startCenter=d.add(e)._divideBy(2),this._startDist=d.distanceTo(e),this._moved=!1,this._zooming=!0,this._centerOffset=g.subtract(this._startCenter),b._panAnim&&b._panAnim.stop(),f.DomEvent.on(c,"touchmove",this._onTouchMove,this).on(c,"touchend",this._onTouchEnd,this),f.DomEvent.preventDefault(a)}},_onTouchMove:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&this._zooming){var c=b.mouseEventToLayerPoint(a.touches[0]),d=b.mouseEventToLayerPoint(a.touches[1]);this._scale=c.distanceTo(d)/this._startDist,this._delta=c._add(d)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(b.options.bounceAtZoomLimits||!(b.getZoom()===b.getMinZoom()&&this._scale<1||b.getZoom()===b.getMaxZoom()&&this._scale>1))&&(this._moved||(f.DomUtil.addClass(b._mapPane,"leaflet-touching"),b.fire("movestart").fire("zoomstart"),this._moved=!0),f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),f.DomEvent.preventDefault(a))}},_updateOnMove:function(){var a=this._map,b=this._getScaleOrigin(),c=a.layerPointToLatLng(b),d=a.getScaleZoom(this._scale);a._animateZoom(c,d,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var a=this._map;this._zooming=!1,f.DomUtil.removeClass(a._mapPane,"leaflet-touching"),f.Util.cancelAnimFrame(this._animRequest),f.DomEvent.off(c,"touchmove",this._onTouchMove).off(c,"touchend",this._onTouchEnd);var b=this._getScaleOrigin(),d=a.layerPointToLatLng(b),e=a.getZoom(),g=a.getScaleZoom(this._scale)-e,h=g>0?Math.ceil(g):Math.floor(g),i=a._limitZoom(e+h),j=a.getZoomScale(i)/this._scale;a._animateZoom(d,i,b,j)},_getScaleOrigin:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(a)}}),f.Map.addInitHook("addHandler","touchZoom",f.Map.TouchZoom),f.Map.mergeOptions({tap:!0,tapTolerance:15}),f.Map.Tap=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(f.DomEvent.preventDefault(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var b=a.touches[0],d=b.target;this._startPos=this._newPos=new f.Point(b.clientX,b.clientY),d.tagName&&"a"===d.tagName.toLowerCase()&&f.DomUtil.addClass(d,"leaflet-active"),this._holdTimeout=setTimeout(f.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",b))},this),1e3),f.DomEvent.on(c,"touchmove",this._onMove,this).on(c,"touchend",this._onUp,this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),f.DomEvent.off(c,"touchmove",this._onMove,this).off(c,"touchend",this._onUp,this),this._fireClick&&a&&a.changedTouches){var b=a.changedTouches[0],d=b.target;d&&d.tagName&&"a"===d.tagName.toLowerCase()&&f.DomUtil.removeClass(d,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",b)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var b=a.touches[0];this._newPos=new f.Point(b.clientX,b.clientY)},_simulateEvent:function(b,d){var e=c.createEvent("MouseEvents");e._simulated=!0,d.target._simulatedClick=!0,e.initMouseEvent(b,!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(e)}}),f.Browser.touch&&!f.Browser.pointer&&f.Map.addInitHook("addHandler","tap",f.Map.Tap),f.Map.mergeOptions({boxZoom:!0}),f.Map.BoxZoom=f.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._moved=!1},addHooks:function(){f.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){f.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(a){return this._moved=!1,!a.shiftKey||1!==a.which&&1!==a.button?!1:(f.DomUtil.disableTextSelection(),f.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(a),void f.DomEvent.on(c,"mousemove",this._onMouseMove,this).on(c,"mouseup",this._onMouseUp,this).on(c,"keydown",this._onKeyDown,this))},_onMouseMove:function(a){this._moved||(this._box=f.DomUtil.create("div","leaflet-zoom-box",this._pane),f.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var b=this._startLayerPoint,c=this._box,d=this._map.mouseEventToLayerPoint(a),e=d.subtract(b),g=new f.Point(Math.min(d.x,b.x),Math.min(d.y,b.y));f.DomUtil.setPosition(c,g),this._moved=!0,c.style.width=Math.max(0,Math.abs(e.x)-4)+"px",c.style.height=Math.max(0,Math.abs(e.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),f.DomUtil.enableTextSelection(),f.DomUtil.enableImageDrag(),f.DomEvent.off(c,"mousemove",this._onMouseMove).off(c,"mouseup",this._onMouseUp).off(c,"keydown",this._onKeyDown)},_onMouseUp:function(a){this._finish();var b=this._map,c=b.mouseEventToLayerPoint(a);if(!this._startLayerPoint.equals(c)){var d=new f.LatLngBounds(b.layerPointToLatLng(this._startLayerPoint),b.layerPointToLatLng(c));
b.fitBounds(d),b.fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),f.Map.addInitHook("addHandler","boxZoom",f.Map.BoxZoom),f.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),f.Map.Keyboard=f.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(a){this._map=a,this._setPanOffset(a.options.keyboardPanOffset),this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;-1===a.tabIndex&&(a.tabIndex="0"),f.DomEvent.on(a,"focus",this._onFocus,this).on(a,"blur",this._onBlur,this).on(a,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var a=this._map._container;f.DomEvent.off(a,"focus",this._onFocus,this).off(a,"blur",this._onBlur,this).off(a,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var b=c.body,d=c.documentElement,e=b.scrollTop||d.scrollTop,f=b.scrollLeft||d.scrollLeft;this._map._container.focus(),a.scrollTo(f,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(a){var b,c,d=this._panKeys={},e=this.keyCodes;for(b=0,c=e.left.length;c>b;b++)d[e.left[b]]=[-1*a,0];for(b=0,c=e.right.length;c>b;b++)d[e.right[b]]=[a,0];for(b=0,c=e.down.length;c>b;b++)d[e.down[b]]=[0,a];for(b=0,c=e.up.length;c>b;b++)d[e.up[b]]=[0,-1*a]},_setZoomOffset:function(a){var b,c,d=this._zoomKeys={},e=this.keyCodes;for(b=0,c=e.zoomIn.length;c>b;b++)d[e.zoomIn[b]]=a;for(b=0,c=e.zoomOut.length;c>b;b++)d[e.zoomOut[b]]=-a},_addHooks:function(){f.DomEvent.on(c,"keydown",this._onKeyDown,this)},_removeHooks:function(){f.DomEvent.off(c,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){var b=a.keyCode,c=this._map;if(b in this._panKeys){if(c._panAnim&&c._panAnim._inProgress)return;c.panBy(this._panKeys[b]),c.options.maxBounds&&c.panInsideBounds(c.options.maxBounds)}else{if(!(b in this._zoomKeys))return;c.setZoom(c.getZoom()+this._zoomKeys[b])}f.DomEvent.stop(a)}}),f.Map.addInitHook("addHandler","keyboard",f.Map.Keyboard),f.Handler.MarkerDrag=f.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new f.Draggable(a,a)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),f.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),f.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,b=a._shadow,c=f.DomUtil.getPosition(a._icon),d=a._map.layerPointToLatLng(c);b&&f.DomUtil.setPosition(b,c),a._latlng=d,a.fire("move",{latlng:d}).fire("drag")},_onDragEnd:function(a){this._marker.fire("moveend").fire("dragend",a)}}),f.Control=f.Class.extend({options:{position:"topright"},initialize:function(a){f.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition(),d=a._controlCorners[c];return f.DomUtil.addClass(b,"leaflet-control"),-1!==c.indexOf("bottom")?d.insertBefore(b,d.firstChild):d.appendChild(b),this},removeFrom:function(a){var b=this.getPosition(),c=a._controlCorners[b];return c.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(a),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),f.control=function(a){return new f.Control(a)},f.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.removeFrom(this),this},_initControlPos:function(){function a(a,e){var g=c+a+" "+c+e;b[a+e]=f.DomUtil.create("div",g,d)}var b=this._controlCorners={},c="leaflet-",d=this._controlContainer=f.DomUtil.create("div",c+"control-container",this._container);a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),f.Control.Zoom=f.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b="leaflet-control-zoom",c=f.DomUtil.create("div",b+" leaflet-bar");return this._map=a,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,b+"-in",c,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,b+"-out",c,this._zoomOut,this),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,c,d,e,g){var h=f.DomUtil.create("a",c,d);h.innerHTML=a,h.href="#",h.title=b;var i=f.DomEvent.stopPropagation;return f.DomEvent.on(h,"click",i).on(h,"mousedown",i).on(h,"dblclick",i).on(h,"click",f.DomEvent.preventDefault).on(h,"click",e,g).on(h,"click",this._refocusOnMap,g),h},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";f.DomUtil.removeClass(this._zoomInButton,b),f.DomUtil.removeClass(this._zoomOutButton,b),a._zoom===a.getMinZoom()&&f.DomUtil.addClass(this._zoomOutButton,b),a._zoom===a.getMaxZoom()&&f.DomUtil.addClass(this._zoomInButton,b)}}),f.Map.mergeOptions({zoomControl:!0}),f.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new f.Control.Zoom,this.addControl(this.zoomControl))}),f.control.zoom=function(a){return new f.Control.Zoom(a)},f.Control.Attribution=f.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){f.setOptions(this,a),this._attributions={}},onAdd:function(a){this._container=f.DomUtil.create("div","leaflet-control-attribution"),f.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&this.addAttribution(a._layers[b].getAttribution());return a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):void 0},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):void 0},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions[b]&&a.push(b);var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" | ")}},_onLayerAdd:function(a){a.layer.getAttribution&&this.addAttribution(a.layer.getAttribution())},_onLayerRemove:function(a){a.layer.getAttribution&&this.removeAttribution(a.layer.getAttribution())}}),f.Map.mergeOptions({attributionControl:!0}),f.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new f.Control.Attribution).addTo(this))}),f.control.attribution=function(a){return new f.Control.Attribution(a)},f.Control.Scale=f.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(a){this._map=a;var b="leaflet-control-scale",c=f.DomUtil.create("div",b),d=this.options;return this._addScales(d,b,c),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=f.DomUtil.create("div",b+"-line",c)),a.imperial&&(this._iScale=f.DomUtil.create("div",b+"-line",c))},_update:function(){var a=this._map.getBounds(),b=a.getCenter().lat,c=6378137*Math.PI*Math.cos(b*Math.PI/180),d=c*(a.getNorthEast().lng-a.getSouthWest().lng)/180,e=this._map.getSize(),f=this.options,g=0;e.x>0&&(g=d*(f.maxWidth/e.x)),this._updateScales(f,g)},_updateScales:function(a,b){a.metric&&b&&this._updateMetric(b),a.imperial&&b&&this._updateImperial(b)},_updateMetric:function(a){var b=this._getRoundNum(a);this._mScale.style.width=this._getScaleWidth(b/a)+"px",this._mScale.innerHTML=1e3>b?b+" m":b/1e3+" km"},_updateImperial:function(a){var b,c,d,e=3.2808399*a,f=this._iScale;e>5280?(b=e/5280,c=this._getRoundNum(b),f.style.width=this._getScaleWidth(c/b)+"px",f.innerHTML=c+" mi"):(d=this._getRoundNum(e),f.style.width=this._getScaleWidth(d/e)+"px",f.innerHTML=d+" ft")},_getScaleWidth:function(a){return Math.round(this.options.maxWidth*a)-10},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),f.control.scale=function(a){return new f.Control.Scale(a)},f.Control.Layers=f.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,b,c){f.setOptions(this,c),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var d in a)this._addLayer(a[d],d);for(d in b)this._addLayer(b[d],d,!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update(),this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._update(),this},removeLayer:function(a){var b=f.stamp(a);return delete this._layers[b],this._update(),this},_initLayout:function(){var a="leaflet-control-layers",b=this._container=f.DomUtil.create("div",a);b.setAttribute("aria-haspopup",!0),f.Browser.touch?f.DomEvent.on(b,"click",f.DomEvent.stopPropagation):f.DomEvent.disableClickPropagation(b).disableScrollPropagation(b);var c=this._form=f.DomUtil.create("form",a+"-list");if(this.options.collapsed){f.Browser.android||f.DomEvent.on(b,"mouseover",this._expand,this).on(b,"mouseout",this._collapse,this);var d=this._layersLink=f.DomUtil.create("a",a+"-toggle",b);d.href="#",d.title="Layers",f.Browser.touch?f.DomEvent.on(d,"click",f.DomEvent.stop).on(d,"click",this._expand,this):f.DomEvent.on(d,"focus",this._expand,this),f.DomEvent.on(c,"click",function(){setTimeout(f.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=f.DomUtil.create("div",a+"-base",c),this._separator=f.DomUtil.create("div",a+"-separator",c),this._overlaysList=f.DomUtil.create("div",a+"-overlays",c),b.appendChild(c)},_addLayer:function(a,b,c){var d=f.stamp(a);this._layers[d]={layer:a,name:b,overlay:c},this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var a,b,c=!1,d=!1;for(a in this._layers)b=this._layers[a],this._addItem(b),d=d||b.overlay,c=c||!b.overlay;this._separator.style.display=d&&c?"":"none"}},_onLayerChange:function(a){var b=this._layers[f.stamp(a.layer)];if(b){this._handlingClick||this._update();var c=b.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null;c&&this._map.fire(c,b)}},_createRadioElement:function(a,b){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';b&&(d+=' checked="checked"'),d+="/>";var e=c.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var b,d=c.createElement("label"),e=this._map.hasLayer(a.layer);a.overlay?(b=c.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=e):b=this._createRadioElement("leaflet-base-layers",e),b.layerId=f.stamp(a.layer),f.DomEvent.on(b,"click",this._onInputClick,this);var g=c.createElement("span");g.innerHTML=" "+a.name,d.appendChild(b),d.appendChild(g);var h=a.overlay?this._overlaysList:this._baseLayersList;return h.appendChild(d),d},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=d.length;for(this._handlingClick=!0,a=0;e>a;a++)b=d[a],c=this._layers[b.layerId],b.checked&&!this._map.hasLayer(c.layer)?this._map.addLayer(c.layer):!b.checked&&this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){f.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),f.control.layers=function(a,b,c){return new f.Control.Layers(a,b,c)},f.PosAnimation=f.Class.extend({includes:f.Mixin.Events,run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._newPos=b,this.fire("start"),a.style[f.DomUtil.TRANSITION]="all "+(c||.25)+"s cubic-bezier(0,0,"+(d||.5)+",1)",f.DomEvent.on(a,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),f.DomUtil.setPosition(a,b),f.Util.falseFn(a.offsetWidth),this._stepTimer=setInterval(f.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(f.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),f.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var a=this._getPos();return a?(this._el._leaflet_pos=a,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var b,c,d,e=this._el,g=a.getComputedStyle(e);if(f.Browser.any3d){if(d=g[f.DomUtil.TRANSFORM].match(this._transformRe),!d)return;b=parseFloat(d[1]),c=parseFloat(d[2])}else b=parseFloat(g.left),c=parseFloat(g.top);return new f.Point(b,c,!0)},_onTransitionEnd:function(){f.DomEvent.off(this._el,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[f.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),f.Map.include({setView:function(a,b,c){if(b=b===d?this._zoom:this._limitZoom(b),a=this._limitCenter(f.latLng(a),b,this.options.maxBounds),c=c||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==d&&(c.zoom=f.extend({animate:c.animate},c.zoom),c.pan=f.extend({animate:c.animate},c.pan));var e=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,c.zoom):this._tryAnimatedPan(a,c.pan);if(e)return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},panBy:function(a,b){if(a=f.point(a).round(),b=b||{},!a.x&&!a.y)return this;if(this._panAnim||(this._panAnim=new f.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){f.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a);this._panAnim.run(this._mapPane,c,b.duration||.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){f.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return(b&&b.animate)===!0||this.getSize().contains(c)?(this.panBy(c,b),!0):!1}}),f.PosAnimation=f.DomUtil.TRANSITION?f.PosAnimation:f.PosAnimation.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=f.DomUtil.getPosition(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=f.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var a=+new Date-this._startTime,b=1e3*this._duration;b>a?this._runFrame(this._easeOut(a/b)):(this._runFrame(1),this._complete())},_runFrame:function(a){var b=this._startPos.add(this._offset.multiplyBy(a));f.DomUtil.setPosition(this._el,b),this.fire("step")},_complete:function(){f.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),f.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),f.DomUtil.TRANSITION&&f.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&f.DomUtil.TRANSITION&&f.Browser.any3d&&!f.Browser.android23&&!f.Browser.mobileOpera,this._zoomAnimated&&f.DomEvent.on(this._mapPane,f.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),f.Map.include(f.DomUtil.TRANSITION?{_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),e=this._getCenterOffset(a)._divideBy(1-1/d),f=this._getCenterLayerPoint()._add(e);return c.animate===!0||this.getSize().contains(e)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(a,b,f,d,null,!0),!0):!1},_animateZoom:function(a,b,c,d,e,g,h){h||(this._animatingZoom=!0),f.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=a,this._animateToZoom=b,f.Draggable&&(f.Draggable._disabled=!0),f.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:a,zoom:b,origin:c,scale:d,delta:e,backwards:g})},this)},_onZoomTransitionEnd:function(){this._animatingZoom=!1,f.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),f.Draggable&&(f.Draggable._disabled=!1)}}:{}),f.TileLayer.include({_animateZoom:function(a){this._animating||(this._animating=!0,this._prepareBgBuffer());var b=this._bgBuffer,c=f.DomUtil.TRANSFORM,d=a.delta?f.DomUtil.getTranslateString(a.delta):b.style[c],e=f.DomUtil.getScaleString(a.scale,a.origin);b.style[c]=a.backwards?e+" "+d:d+" "+e},_endZoomAnim:function(){var a=this._tileContainer,b=this._bgBuffer;a.style.visibility="",a.parentNode.appendChild(a),f.Util.falseFn(b.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var a=this._map;!a||a._animatingZoom||a.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[f.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var a=this._tileContainer,b=this._bgBuffer,c=this._getLoadedTilesPercentage(b),d=this._getLoadedTilesPercentage(a);return b&&c>.5&&.5>d?(a.style.visibility="hidden",void this._stopLoadingImages(a)):(b.style.visibility="hidden",b.style[f.DomUtil.TRANSFORM]="",this._tileContainer=b,b=this._bgBuffer=a,this._stopLoadingImages(b),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(a){var b,c,d=a.getElementsByTagName("img"),e=0;for(b=0,c=d.length;c>b;b++)d[b].complete&&e++;return e/c},_stopLoadingImages:function(a){var b,c,d,e=Array.prototype.slice.call(a.getElementsByTagName("img"));for(b=0,c=e.length;c>b;b++)d=e[b],d.complete||(d.onload=f.Util.falseFn,d.onerror=f.Util.falseFn,d.src=f.Util.emptyImageUrl,d.parentNode.removeChild(d))}}),f.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(a){if(a=this._locateOptions=f.extend(this._defaultLocateOptions,a),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=f.bind(this._handleGeolocationResponse,this),c=f.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,c=a.coords.longitude,d=new f.LatLng(b,c),e=180*a.coords.accuracy/40075017,g=e/Math.cos(f.LatLng.DEG_TO_RAD*b),h=f.latLngBounds([b-e,c-g],[b+e,c+g]),i=this._locateOptions;if(i.setView){var j=Math.min(this.getBoundsZoom(h),i.maxZoom);this.setView(d,j)}var k={latlng:d,bounds:h,timestamp:a.timestamp};for(var l in a.coords)"number"==typeof a.coords[l]&&(k[l]=a.coords[l]);this.fire("locationfound",k)}})}(window,document)},{}],33:[function(a,b,c){(function(a){(function(){function d(a,b){if(a!==b){var c=a===a,d=b===b;if(a>b||!c||"undefined"==typeof a&&d)return 1;if(b>a||!d||"undefined"==typeof b&&c)return-1}return 0}function e(a,b,c){if(b!==b)return p(a,c);for(var d=(c||0)-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function f(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function g(a){return"string"==typeof a?a:null==a?"":a+""}function h(a){return a.charCodeAt(0)}function i(a,b){for(var c=-1,d=a.length;++c<d&&b.indexOf(a.charAt(c))>-1;);return c}function j(a,b){for(var c=a.length;c--&&b.indexOf(a.charAt(c))>-1;);return c}function k(a,b){return d(a.criteria,b.criteria)||a.index-b.index}function l(a,b){for(var c=-1,e=a.criteria,f=b.criteria,g=e.length;++c<g;){var h=d(e[c],f[c]);if(h)return h}return a.index-b.index}function m(a){return Pa[a]}function n(a){return Qa[a]}function o(a){return"\\"+Ta[a]}function p(a,b,c){for(var d=a.length,e=c?b||d:(b||0)-1;c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function q(a){return a&&"object"==typeof a||!1}function r(a){return 160>=a&&a>=9&&13>=a||32==a||160==a||5760==a||6158==a||a>=8192&&(8202>=a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function s(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=R,f[++e]=c);return f}function t(a,b){for(var c,d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d],i=b?b(h,d,a):h;d&&c===i||(c=i,g[++f]=h)}return g}function u(a){for(var b=-1,c=a.length;++b<c&&r(a.charCodeAt(b)););return b}function v(a){for(var b=a.length;b--&&r(a.charCodeAt(b)););return b}function w(a){return Ra[a]}function x(a){function b(a){if(q(a)&&!Pg(a)){if(a instanceof c)return a;if(Tf.call(a,"__wrapped__"))return new c(a.__wrapped__,a.__chain__,Ya(a.__actions__))}return new c(a)}function c(a,b,c){this.__actions__=c||[],this.__chain__=!!b,this.__wrapped__=a}function r(a){this.actions=null,this.dir=1,this.dropCount=0,this.filtered=!1,this.iteratees=null,this.takeCount=vg,this.views=null,this.wrapped=a}function Y(){var a=this.actions,b=this.iteratees,c=this.views,d=new r(this.wrapped);return d.actions=a?Ya(a):null,d.dir=this.dir,d.dropCount=this.dropCount,d.filtered=this.filtered,d.iteratees=b?Ya(b):null,d.takeCount=this.takeCount,d.views=c?Ya(c):null,d}function aa(){var a=this.filtered,b=a?new r(this):this.clone();return b.dir=-1*this.dir,b.filtered=a,b}function ca(){var a=this.wrapped.value();if(!Pg(a))return Ub(a,this.actions);var b=this.dir,c=0>b,d=a.length,e=pc(0,d,this.views),f=e.start,g=e.end,h=this.dropCount,i=pg(g-f,this.takeCount-h),j=c?g:f-1,k=this.iteratees,l=k?k.length:0,m=0,n=[];a:for(;d--&&i>m;){j+=b;for(var o=-1,p=a[j];++o<l;){var q=k[o],r=q.iteratee,s=r(p,j,a),t=q.type;if(t==O)p=s;else if(!s){if(t==N)continue a;break a}}h?h--:n[m++]=p}return c?n.reverse():n}function Pa(){this.__data__={}}function Qa(a){return this.has(a)&&delete this.__data__[a]}function Ra(a){return"__proto__"==a?y:this.__data__[a]}function Sa(a){return"__proto__"!=a&&Tf.call(this.__data__,a)}function Ta(a,b){return"__proto__"!=a&&(this.__data__[a]=b),this}function Va(a){var b=a?a.length:0;for(this.data={hash:lg(null),set:new eg};b--;)this.push(a[b])}function Wa(a,b){var c=a.data,d="string"==typeof b||te(b)?c.set.has(b):c.hash[b];return d?0:-1}function Xa(a){var b=this.data;"string"==typeof a||te(a)?b.set.add(a):b.hash[a]=!0}function Ya(a,b){var c=-1,d=a.length;for(b||(b=Ef(d));++c<d;)b[c]=a[c];return b}function $a(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function _a(a,b){for(var c=a.length;c--&&b(a[c],c,a)!==!1;);return a}function ab(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function bb(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function cb(a,b){for(var c=-1,d=a.length,e=Ef(d);++c<d;)e[c]=b(a[c],c,a);return e}function db(a){for(var b=-1,c=a.length,d=ug;++b<c;){var e=a[b];e>d&&(d=e)}return d}function eb(a){for(var b=-1,c=a.length,d=vg;++b<c;){var e=a[b];d>e&&(d=e)}return d}function fb(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function gb(a,b,c,d){var e=a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function hb(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function ib(a,b){return"undefined"==typeof a?b:a}function jb(a,b,c,d){return"undefined"!=typeof a&&Tf.call(d,c)?a:b}function kb(a,b,c){var d=Tg(b);if(!c)return mb(b,a,d);for(var e=-1,f=d.length;++e<f;){var g=d[e],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&&("undefined"!=typeof h||g in a)||(a[g]=i)}return a}function lb(a,b){for(var c=-1,d=a.length,e=wc(d),f=b.length,g=Ef(f);++c<f;){var h=b[c];e?(h=parseFloat(h),g[c]=uc(h,d)?a[h]:y):g[c]=a[h]}return g}function mb(a,b,c){c||(c=b,b={});for(var d=-1,e=c.length;++d<e;){var f=c[d];b[f]=a[f]}return b}function nb(a,b){for(var c=-1,d=b.length;++c<d;){var e=b[c];a[e]=ic(a[e],A,a)}return a}function ob(a,b,c){var d=typeof a;return"function"==d?"undefined"!=typeof b&&tc(a)?Xb(a,b,c):a:null==a?uf:"object"==d?Jb(a,!c):Mb(c?g(a):a)}function pb(a,b,c,d,e,f,g){var h;if(c&&(h=e?c(a,d,e):c(a)),"undefined"!=typeof h)return h;if(!te(a))return a;var i=Pg(a);if(i){if(h=qc(a),!b)return Ya(a,h)}else{var j=Vf.call(a),k=j==X;if(j!=$&&j!=S&&(!k||e))return Na[j]?sc(a,j,b):e?a:{};if(h=rc(k?{}:a),!b)return mb(a,h,Tg(a))}f||(f=[]),g||(g=[]);for(var l=f.length;l--;)if(f[l]==a)return g[l];return f.push(a),g.push(h),(i?$a:Bb)(a,function(d,e){h[e]=pb(d,b,c,e,a,f,g)}),h}function qb(a,b,c,d){if(!se(a))throw new Nf(Q);return fg(function(){a.apply(y,Qb(c,d))},b)}function rb(a,b){var c=a?a.length:0,d=[];if(!c)return d;var f=-1,g=oc(),h=g==e,i=h&&b.length>=200&&Fg(b),j=b.length;i&&(g=Wa,h=!1,b=i);a:for(;++f<c;){var k=a[f];if(h&&k===k){for(var l=j;l--;)if(b[l]===k)continue a;d.push(k)}else g(b,k)<0&&d.push(k)}return d}function sb(a,b){var c=a?a.length:0;if(!wc(c))return Bb(a,b);for(var d=-1,e=Fc(a);++d<c&&b(e[d],d,e)!==!1;);return a}function tb(a,b){var c=a?a.length:0;if(!wc(c))return Cb(a,b);for(var d=Fc(a);c--&&b(d[c],c,d)!==!1;);return a}function ub(a,b){var c=!0;return sb(a,function(a,d,e){return c=!!b(a,d,e)}),c}function vb(a,b){var c=[];return sb(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function wb(a,b,c,d){var e;return c(a,function(a,c,f){return b(a,c,f)?(e=d?c:a,!1):void 0}),e}function xb(a,b,c,d){for(var e=(d||0)-1,f=a.length,g=-1,h=[];++e<f;){var i=a[e];if(q(i)&&wc(i.length)&&(Pg(i)||le(i))){b&&(i=xb(i,b,c));var j=-1,k=i.length;for(h.length+=k;++j<k;)h[++g]=i[j]}else c||(h[++g]=i)}return h}function yb(a,b,c){for(var d=-1,e=Fc(a),f=c(a),g=f.length;++d<g;){var h=f[d];if(b(e[h],h,e)===!1)break}return a}function zb(a,b,c){for(var d=Fc(a),e=c(a),f=e.length;f--;){var g=e[f];if(b(d[g],g,d)===!1)break}return a}function Ab(a,b){return yb(a,b,Qe)}function Bb(a,b){return yb(a,b,Tg)}function Cb(a,b){return zb(a,b,Tg)}function Db(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var g=b[c];se(a[g])&&(f[++e]=g)}return f}function Eb(a,b,c){var d=-1,e="function"==typeof b,f=a?a.length:0,g=wc(f)?Ef(f):[];return sb(a,function(a){var f=e?b:null!=a&&a[b];g[++d]=f?f.apply(a,c):y}),g}function Fb(a,b,c,d,e,f){if(a===b)return 0!==a||1/a==1/b;var g=typeof a,h=typeof b;return"function"!=g&&"object"!=g&&"function"!=h&&"object"!=h||null==a||null==b?a!==a&&b!==b:Gb(a,b,Fb,c,d,e,f)}function Gb(a,b,c,d,e,f,g){var h=Pg(a),i=Pg(b),j=T,k=T;h||(j=Vf.call(a),j==S?j=$:j!=$&&(h=Be(a))),i||(k=Vf.call(b),k==S?k=$:k!=$&&(i=Be(b)));var l=j==$,m=k==$,n=j==k;if(n&&!h&&!l)return kc(a,b,j);var o=l&&Tf.call(a,"__wrapped__"),p=m&&Tf.call(b,"__wrapped__");if(o||p)return c(o?a.value():a,p?b.value():b,d,e,f,g);if(!n)return!1;f||(f=[]),g||(g=[]);for(var q=f.length;q--;)if(f[q]==a)return g[q]==b;f.push(a),g.push(b);var r=(h?jc:lc)(a,b,c,d,e,f,g);return f.pop(),g.pop(),r}function Hb(a,b,c,d,e){var f=b.length;if(null==a)return!f;for(var g=-1,h=!e;++g<f;)if(h&&d[g]?c[g]!==a[b[g]]:!Tf.call(a,b[g]))return!1;for(g=-1;++g<f;){var i=b[g];if(h&&d[g])var j=Tf.call(a,i);else{var k=a[i],l=c[g];j=e?e(k,l,i):y,"undefined"==typeof j&&(j=Fb(l,k,e,!0))}if(!j)return!1}return!0}function Ib(a,b){var c=[];return sb(a,function(a,d,e){c.push(b(a,d,e))}),c}function Jb(a,b){var c=Tg(a),d=c.length;if(1==d){var e=c[0],f=a[e];if(xc(f))return function(a){return null!=a&&f===a[e]&&Tf.call(a,e)}}b&&(a=pb(a,!0));for(var g=Ef(d),h=Ef(d);d--;)f=a[c[d]],g[d]=f,h[d]=xc(f);return function(a){return Hb(a,c,g,h)}}function Kb(a,b,c,d,e){var f=wc(b.length)&&(Pg(b)||Be(b));return(f?$a:Bb)(b,function(b,g,h){if(q(b))return d||(d=[]),e||(e=[]),Lb(a,h,g,Kb,c,d,e);var i=a[g],j=c?c(i,b,g,a,h):y,k="undefined"==typeof j;k&&(j=b),!f&&"undefined"==typeof j||!k&&(j===j?j===i:i!==i)||(a[g]=j)}),a}function Lb(a,b,c,d,e,f,g){for(var h=f.length,i=b[c];h--;)if(f[h]==i)return void(a[c]=g[h]);var j=a[c],k=e?e(j,i,c,a,b):y,l="undefined"==typeof k;l&&(k=i,wc(i.length)&&(Pg(i)||Be(i))?k=Pg(j)?j:j?Ya(j):[]:(Rg(i)||le(i))&&(k=le(j)?Ee(j):Rg(j)?j:{})),f.push(i),g.push(k),l?a[c]=d(k,i,e,f,g):(k===k?k!==j:j===j)&&(a[c]=k)}function Mb(a){return function(b){return null==b?y:b[a]}}function Nb(a,b){var c=b.length,e=lb(a,b);for(b.sort(d);c--;){var f=parseFloat(b[c]);if(f!=g&&uc(f)){var g=f;gg.call(a,f,1)}}return e}function Ob(a,b){return a+ag(tg()*(b-a+1))}function Pb(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function Qb(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c="undefined"==typeof c||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b;for(var f=Ef(e);++d<e;)f[d]=a[d+b];return f}function Rb(a,b){var c;return sb(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function Sb(a,b){var c=-1,d=oc(),f=a.length,g=d==e,h=g&&f>=200,i=h&&Fg(),j=[];i?(d=Wa,g=!1):(h=!1,i=b?[]:j);a:for(;++c<f;){var k=a[c],l=b?b(k,c,a):k;if(g&&k===k){for(var m=i.length;m--;)if(i[m]===l)continue a;b&&i.push(l),j.push(k)}else d(i,l)<0&&((b||h)&&i.push(l),j.push(k))}return j}function Tb(a,b){for(var c=-1,d=b.length,e=Ef(d);++c<d;)e[c]=a[b[c]];return e}function Ub(a,b){var c=a;c instanceof r&&(c=c.value());for(var d=-1,e=b.length;++d<e;){var f=[c],g=b[d];cg.apply(f,g.args),c=g.func.apply(g.thisArg,f)}return c}function Vb(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&yg>=e){for(;e>d;){var f=d+e>>>1,g=a[f];(c?b>=g:b>g)?d=f+1:e=f}return e}return Wb(a,b,uf,c)}function Wb(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h="undefined"==typeof b;f>e;){var i=ag((e+f)/2),j=c(a[i]),k=j===j;if(g)var l=k||d;else l=h?k&&(d||"undefined"!=typeof j):d?b>=j:b>j;l?e=i+1:f=i}return pg(f,xg)}function Xb(a,b,c){if("function"!=typeof a)return uf;if("undefined"==typeof b)return a;
switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function Yb(a){return Zf.call(a,0)}function Zb(a,b,c){for(var d=c.length,e=-1,f=og(a.length-d,0),g=-1,h=b.length,i=Ef(f+h);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function $b(a,b,c){for(var d=-1,e=c.length,f=-1,g=og(a.length-e,0),h=-1,i=b.length,j=Ef(g+i);++f<g;)j[f]=a[f];for(var k=f;++h<i;)j[k+h]=b[h];for(;++d<e;)j[k+c[d]]=a[f++];return j}function _b(a,b){return function(c,d,e){var f=b?b():{};if(d=nc(d,e,3),Pg(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else sb(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function ac(a){return function(){var b=arguments.length,c=arguments[0];if(2>b||null==c)return c;if(b>3&&vc(arguments[1],arguments[2],arguments[3])&&(b=2),b>3&&"function"==typeof arguments[b-2])var d=Xb(arguments[--b-1],arguments[b--],5);else b>2&&"function"==typeof arguments[b-1]&&(d=arguments[--b]);for(var e=0;++e<b;){var f=arguments[e];f&&a(c,f,d)}return c}}function bc(a,b){function c(){return(this instanceof c?d:a).apply(b,arguments)}var d=dc(a);return c}function cc(a){return function(b){for(var c=-1,d=qf(_e(b)),e=d.length,f="";++c<e;)f=a(f,d[c],c);return f}}function dc(a){return function(){var b=Dg(a.prototype),c=a.apply(b,arguments);return te(c)?c:b}}function ec(a,b){return function(c,d,e){e&&vc(c,d,e)&&(d=null);var f=nc(),g=null==d;if(f===ob&&g||(g=!1,d=f(d,e,3)),g){var i=Pg(c);if(i||!Ae(c))return a(i?c:Ec(c));d=h}return mc(c,d,b)}}function fc(a,b,c,d,e,f,g,h,i,j){function k(){for(var u=arguments.length,v=u,w=Ef(u);v--;)w[v]=arguments[v];if(d&&(w=Zb(w,d,e)),f&&(w=$b(w,f,g)),o||q){var x=k.placeholder,y=s(w,x);if(u-=y.length,j>u){var z=h?Ya(h):null,C=og(j-u,0),D=o?y:null,E=o?null:y,H=o?w:null,I=o?null:w;b|=o?F:G,b&=~(o?G:F),p||(b&=~(A|B));var J=fc(a,b,c,H,D,I,E,z,i,C);return J.placeholder=x,J}}var K=m?c:this;return n&&(a=K[t]),h&&(w=Bc(w,h)),l&&i<w.length&&(w.length=i),(this instanceof k?r||dc(a):a).apply(K,w)}var l=b&I,m=b&A,n=b&B,o=b&D,p=b&C,q=b&E,r=!n&&dc(a),t=a;return k}function gc(a,b,c){var d=a.length;if(b=+b,d>=b||!mg(b))return"";var e=b-d;return c=null==c?" ":g(c),hf(c,$f(e/c.length)).slice(0,e)}function hc(a,b,c,d){function e(){for(var b=-1,h=arguments.length,i=-1,j=d.length,k=Ef(h+j);++i<j;)k[i]=d[i];for(;h--;)k[i++]=arguments[++b];return(this instanceof e?g:a).apply(f?c:this,k)}var f=b&A,g=dc(a);return e}function ic(a,b,c,d,e,f,g,h){var i=b&B;if(!i&&!se(a))throw new Nf(Q);var j=d?d.length:0;if(j||(b&=~(F|G),d=e=null),j-=e?e.length:0,b&G){var k=d,l=e;d=e=null}var m=!i&&Gg(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&m!==!0&&(yc(n,m),b=n[1],h=n[9]),n[9]=null==h?i?0:a.length:og(h-j,0)||0,b==A)var o=bc(n[0],n[2]);else o=b!=F&&b!=(A|F)||n[4].length?fc.apply(null,n):hc.apply(null,n);var p=m?Eg:Hg;return p(o,n)}function jc(a,b,c,d,e,f,g){var h=-1,i=a.length,j=b.length,k=!0;if(i!=j&&!(e&&j>i))return!1;for(;k&&++h<i;){var l=a[h],m=b[h];if(k=y,d&&(k=e?d(m,l,h):d(l,m,h)),"undefined"==typeof k)if(e)for(var n=j;n--&&(m=b[n],!(k=l&&l===m||c(l,m,d,e,f,g))););else k=l&&l===m||c(l,m,d,e,f,g)}return!!k}function kc(a,b,c){switch(c){case U:case V:return+a==+b;case W:return a.name==b.name&&a.message==b.message;case Z:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case _:case ba:return a==g(b)}return!1}function lc(a,b,c,d,e,f,g){var h=Tg(a),i=h.length,j=Tg(b),k=j.length;if(i!=k&&!e)return!1;for(var l,m=-1;++m<i;){var n=h[m],o=Tf.call(b,n);if(o){var p=a[n],q=b[n];o=y,d&&(o=e?d(q,p,n):d(p,q,n)),"undefined"==typeof o&&(o=p&&p===q||c(p,q,d,e,f,g))}if(!o)return!1;l||(l="constructor"==n)}if(!l){var r=a.constructor,s=b.constructor;if(r!=s&&"constructor"in a&&"constructor"in b&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s))return!1}return!0}function mc(a,b,c){var d=c?vg:ug,e=d,f=e;return sb(a,function(a,g,h){var i=b(a,g,h);((c?e>i:i>e)||i===d&&i===f)&&(e=i,f=a)}),f}function nc(a,c,d){var e=b.callback||sf;return e=e===sf?ob:e,d?e(a,c,d):e}function oc(a,c,d){var f=b.indexOf||Sc;return f=f===Sc?e:f,a?f(a,c,d):f}function pc(a,b,c){for(var d=-1,e=c?c.length:0;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=pg(b,a+g);break;case"takeRight":a=og(a,b-g)}}return{start:a,end:b}}function qc(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&Tf.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function rc(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=Kf),new b}function sc(a,b,c){var d=a.constructor;switch(b){case da:return Yb(a);case U:case V:return new d(+a);case ea:case fa:case ga:case ha:case ia:case ja:case ka:case la:case ma:var e=a.buffer;return new d(c?Yb(e):e,a.byteOffset,a.length);case Z:case ba:return new d(a);case _:var f=new d(a.source,ya.exec(a));f.lastIndex=a.lastIndex}return f}function tc(a){var c=b.support,d=!(c.funcNames?a.name:c.funcDecomp);if(!d){var e=Rf.call(a);c.funcNames||(d=!za.test(e)),d||(d=Ga.test(e)||we(a),Eg(a,d))}return d}function uc(a,b){return a=+a,b=null==b?Ag:b,a>-1&&a%1==0&&b>a}function vc(a,b,c){if(!te(c))return!1;var d=typeof b;if("number"==d)var e=c.length,f=wc(e)&&uc(b,e);else f="string"==d&&b in a;return f&&c[b]===a}function wc(a){return"number"==typeof a&&a>-1&&a%1==0&&Ag>=a}function xc(a){return a===a&&(0===a?1/a>0:!te(a))}function yc(a,b){var c=a[1],d=b[1],e=c|d,f=I|H,g=A|B,h=f|g|C|E,i=c&I&&!(d&I),j=c&H&&!(d&H),k=(j?a:b)[7],l=(i?a:b)[8],m=!(c>=H&&d>g||c>g&&d>=H),n=e>=f&&h>=e&&(H>c||(j||i)&&k.length<=l);if(!m&&!n)return a;d&A&&(a[2]=b[2],e|=c&A?0:C);var o=b[3];if(o){var p=a[3];a[3]=p?Zb(p,o,b[4]):Ya(o),a[4]=p?s(a[3],R):Ya(b[4])}return o=b[5],o&&(p=a[5],a[5]=p?$b(p,o,b[6]):Ya(o),a[6]=p?s(a[5],R):Ya(b[6])),o=b[7],o&&(a[7]=Ya(o)),d&I&&(a[8]=null==a[8]?b[8]:pg(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function zc(a,b){a=Fc(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}function Ac(a,b){var c={};return Ab(a,function(a,d,e){b(a,d,e)&&(c[d]=a)}),c}function Bc(a,b){for(var c=a.length,d=pg(b.length,c),e=Ya(a);d--;){var f=b[d];a[d]=uc(f,c)?e[f]:y}return a}function Cc(a){var c;b.support;if(!q(a)||Vf.call(a)!=$||!Tf.call(a,"constructor")&&(c=a.constructor,"function"==typeof c&&!(c instanceof c)))return!1;var d;return Ab(a,function(a,b){d=b}),"undefined"==typeof d||Tf.call(a,d)}function Dc(a){for(var c=Qe(a),d=c.length,e=d&&a.length,f=b.support,g=e&&wc(e)&&(Pg(a)||f.nonEnumArgs&&le(a)),h=-1,i=[];++h<d;){var j=c[h];(g&&uc(j,e)||Tf.call(a,j))&&i.push(j)}return i}function Ec(a){return null==a?[]:wc(a.length)?te(a)?a:Kf(a):Xe(a)}function Fc(a){return te(a)?a:Kf(a)}function Gc(a,b,c){b=(c?vc(a,b,c):null==b)?1:og(+b||1,1);for(var d=0,e=a?a.length:0,f=-1,g=Ef($f(e/b));e>d;)g[++f]=Qb(a,d,d+=b);return g}function Hc(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e}function Ic(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Pg(c)||le(c))break}return rb(c,xb(arguments,!1,!0,++a))}function Jc(a,b,c){var d=a?a.length:0;return d?((c?vc(a,b,c):null==b)&&(b=1),Qb(a,0>b?0:b)):[]}function Kc(a,b,c){var d=a?a.length:0;return d?((c?vc(a,b,c):null==b)&&(b=1),b=d-(+b||0),Qb(a,0,0>b?0:b)):[]}function Lc(a,b,c){var d=a?a.length:0;if(!d)return[];for(b=nc(b,c,3);d--&&b(a[d],d,a););return Qb(a,0,d+1)}function Mc(a,b,c){var d=a?a.length:0;if(!d)return[];var e=-1;for(b=nc(b,c,3);++e<d&&b(a[e],e,a););return Qb(a,e)}function Nc(a,b,c){var d=-1,e=a?a.length:0;for(b=nc(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1}function Oc(a,b,c){var d=a?a.length:0;for(b=nc(b,c,3);d--;)if(b(a[d],d,a))return d;return-1}function Pc(a){return a?a[0]:y}function Qc(a,b,c){var d=a?a.length:0;return c&&vc(a,b,c)&&(b=!1),d?xb(a,b):[]}function Rc(a){var b=a?a.length:0;return b?xb(a,!0):[]}function Sc(a,b,c){var d=a?a.length:0;if(!d)return-1;if("number"==typeof c)c=0>c?og(d+c,0):c||0;else if(c){var f=Vb(a,b),g=a[f];return(b===b?b===g:g!==g)?f:-1}return e(a,b,c)}function Tc(a){return Kc(a,1)}function Uc(){for(var a=[],b=-1,c=arguments.length,d=[],f=oc(),g=f==e;++b<c;){var h=arguments[b];(Pg(h)||le(h))&&(a.push(h),d.push(g&&h.length>=120&&Fg(b&&h)))}c=a.length;var i=a[0],j=-1,k=i?i.length:0,l=[],m=d[0];a:for(;++j<k;)if(h=i[j],(m?Wa(m,h):f(l,h))<0){for(b=c;--b;){var n=d[b];if((n?Wa(n,h):f(a[b],h))<0)continue a}m&&m.push(h),l.push(h)}return l}function Vc(a){var b=a?a.length:0;return b?a[b-1]:y}function Wc(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(0>c?og(d+c,0):pg(c||0,d-1))+1;else if(c){e=Vb(a,b,!0)-1;var f=a[e];return(b===b?b===f:f!==f)?e:-1}if(b!==b)return p(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1}function Xc(){var a=arguments[0];if(!a||!a.length)return a;for(var b=0,c=oc(),d=arguments.length;++b<d;)for(var e=0,f=arguments[b];(e=c(a,f,e))>-1;)gg.call(a,e,1);return a}function Yc(a){return Nb(a||[],xb(arguments,!1,!1,1))}function Zc(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=nc(b,c,3);++d<e;){var g=a[d];b(g,d,a)&&(f.push(g),gg.call(a,d--,1),e--)}return f}function $c(a){return Jc(a,1)}function _c(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&vc(a,b,c)&&(b=0,c=d),Qb(a,b,c)):[]}function ad(a,b,c,d){var e=nc(c);return e===ob&&null==c?Vb(a,b):Wb(a,b,e(c,d,1))}function bd(a,b,c,d){var e=nc(c);return e===ob&&null==c?Vb(a,b,!0):Wb(a,b,e(c,d,1),!0)}function cd(a,b,c){var d=a?a.length:0;return d?((c?vc(a,b,c):null==b)&&(b=1),Qb(a,0,0>b?0:b)):[]}function dd(a,b,c){var d=a?a.length:0;return d?((c?vc(a,b,c):null==b)&&(b=1),b=d-(+b||0),Qb(a,0>b?0:b)):[]}function ed(a,b,c){var d=a?a.length:0;if(!d)return[];for(b=nc(b,c,3);d--&&b(a[d],d,a););return Qb(a,d+1)}function fd(a,b,c){var d=a?a.length:0;if(!d)return[];var e=-1;for(b=nc(b,c,3);++e<d&&b(a[e],e,a););return Qb(a,0,e)}function gd(){return Sb(xb(arguments,!1,!0))}function hd(a,b,c,d){var f=a?a.length:0;if(!f)return[];"boolean"!=typeof b&&null!=b&&(d=c,c=vc(a,b,d)?null:b,b=!1);var g=nc();return(g!==ob||null!=c)&&(c=g(c,d,3)),b&&oc()==e?t(a,c):Sb(a,c)}function id(a){for(var b=-1,c=(a&&a.length&&db(cb(a,Sf)))>>>0,d=Ef(c);++b<c;)d[b]=cb(a,Mb(b));return d}function jd(a){return rb(a,Qb(arguments,1))}function kd(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Pg(c)||le(c))var d=d?rb(d,c).concat(rb(c,d)):c}return d?Sb(d):[]}function ld(){for(var a=arguments.length,b=Ef(a);a--;)b[a]=arguments[a];return id(b)}function md(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||Pg(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function nd(a){var c=b(a);return c.__chain__=!0,c}function od(a,b,c){return b.call(c,a),a}function pd(a,b,c){return b.call(c,a)}function qd(){return nd(this)}function rd(){var a=this.__wrapped__;return a instanceof r?new c(a.reverse()):this.thru(function(a){return a.reverse()})}function sd(){return this.value()+""}function td(){return Ub(this.__wrapped__,this.__actions__)}function ud(a){var b=a?a.length:0;return wc(b)&&(a=Ec(a)),lb(a,xb(arguments,!1,!1,1))}function vd(a,b,c){var d=a?a.length:0;return wc(d)||(a=Xe(a),d=a.length),d?(c="number"==typeof c?0>c?og(d+c,0):c||0:0,"string"==typeof a||!Pg(a)&&Ae(a)?d>c&&a.indexOf(b,c)>-1:oc(a,b,c)>-1):!1}function wd(a,b,c){var d=Pg(a)?ab:ub;return("function"!=typeof b||"undefined"!=typeof c)&&(b=nc(b,c,3)),d(a,b)}function xd(a,b,c){var d=Pg(a)?bb:vb;return b=nc(b,c,3),d(a,b)}function yd(a,b,c){if(Pg(a)){var d=Nc(a,b,c);return d>-1?a[d]:y}return b=nc(b,c,3),wb(a,b,sb)}function zd(a,b,c){return b=nc(b,c,3),wb(a,b,tb)}function Ad(a,b){return yd(a,vf(b))}function Bd(a,b,c){return"function"==typeof b&&"undefined"==typeof c&&Pg(a)?$a(a,b):sb(a,Xb(b,c,3))}function Cd(a,b,c){return"function"==typeof b&&"undefined"==typeof c&&Pg(a)?_a(a,b):tb(a,Xb(b,c,3))}function Dd(a,b){return Eb(a,b,Qb(arguments,2))}function Ed(a,b,c){var d=Pg(a)?cb:Ib;return b=nc(b,c,3),d(a,b)}function Fd(a,b){return Ed(a,zf(b))}function Gd(a,b,c,d){var e=Pg(a)?fb:Pb;return e(a,nc(b,d,4),c,arguments.length<3,sb)}function Hd(a,b,c,d){var e=Pg(a)?gb:Pb;return e(a,nc(b,d,4),c,arguments.length<3,tb)}function Id(a,b,c){var d=Pg(a)?bb:vb;return b=nc(b,c,3),d(a,function(a,c,d){return!b(a,c,d)})}function Jd(a,b,c){if(c?vc(a,b,c):null==b){a=Ec(a);var d=a.length;return d>0?a[Ob(0,d-1)]:y}var e=Kd(a);return e.length=pg(0>b?0:+b||0,e.length),e}function Kd(a){a=Ec(a);for(var b=-1,c=a.length,d=Ef(c);++b<c;){var e=Ob(0,b);b!=e&&(d[b]=d[e]),d[e]=a[b]}return d}function Ld(a){var b=a?a.length:0;return wc(b)?b:Tg(a).length}function Md(a,b,c){var d=Pg(a)?hb:Rb;return("function"!=typeof b||"undefined"!=typeof c)&&(b=nc(b,c,3)),d(a,b)}function Nd(a,b,c){var d=-1,e=a?a.length:0,g=wc(e)?Ef(e):[];return c&&vc(a,b,c)&&(b=null),b=nc(b,c,3),sb(a,function(a,c,e){g[++d]={criteria:b(a,c,e),index:d,value:a}}),f(g,k)}function Od(a){var b=arguments;b.length>3&&vc(b[1],b[2],b[3])&&(b=[a,b[1]]);var c=-1,d=a?a.length:0,e=xb(b,!1,!1,1),g=wc(d)?Ef(d):[];return sb(a,function(a,b,d){for(var f=e.length,h=Ef(f);f--;)h[f]=null==a?y:a[e[f]];g[++c]={criteria:h,index:c,value:a}}),f(g,l)}function Pd(a,b){return xd(a,vf(b))}function Qd(a,b){if(!se(b)){if(!se(a))throw new Nf(Q);var c=a;a=b,b=c}return a=mg(a=+a)?a:0,function(){return--a<1?b.apply(this,arguments):void 0}}function Rd(a,b,c){return c&&vc(a,b,c)&&(b=null),b=a&&null==b?a.length:og(+b||0,0),ic(a,I,null,null,null,null,b)}function Sd(a,b){var c;if(!se(b)){if(!se(a))throw new Nf(Q);var d=a;a=b,b=d}return function(){return--a>0?c=b.apply(this,arguments):b=null,c}}function Td(a,b){var c=A;if(arguments.length>2){var d=Qb(arguments,2),e=s(d,Td.placeholder);c|=F}return ic(a,c,b,d,e)}function Ud(a){return nb(a,arguments.length>1?xb(arguments,!1,!1,1):Ne(a))}function Vd(a,b){var c=A|B;if(arguments.length>2){var d=Qb(arguments,2),e=s(d,Vd.placeholder);c|=F}return ic(b,c,a,d,e)}function Wd(a,b,c){c&&vc(a,b,c)&&(b=null);var d=ic(a,D,null,null,null,null,null,b);return d.placeholder=Wd.placeholder,d}function Xd(a,b,c){c&&vc(a,b,c)&&(b=null);var d=ic(a,E,null,null,null,null,null,b);return d.placeholder=Xd.placeholder,d}function Yd(a,b,c){function d(){m&&_f(m),i&&_f(i),i=m=n=y}function e(){var c=b-(Og()-k);if(0>=c||c>b){i&&_f(i);var d=n;i=m=n=y,d&&(o=Og(),j=a.apply(l,h),m||i||(h=l=null))}else m=fg(e,c)}function f(){m&&_f(m),i=m=n=y,(q||p!==b)&&(o=Og(),j=a.apply(l,h),m||i||(h=l=null))}function g(){if(h=arguments,k=Og(),l=this,n=q&&(m||!r),p===!1)var c=r&&!m;else{i||r||(o=k);var d=p-(k-o),g=0>=d||d>p;g?(i&&(i=_f(i)),o=k,j=a.apply(l,h)):i||(i=fg(f,d))}return g&&m?m=_f(m):m||b===p||(m=fg(e,b)),c&&(g=!0,j=a.apply(l,h)),!g||m||i||(h=l=null),j}var h,i,j,k,l,m,n,o=0,p=!1,q=!0;if(!se(a))throw new Nf(Q);if(b=0>b?0:b,c===!0){var r=!0;q=!1}else te(c)&&(r=c.leading,p="maxWait"in c&&og(+c.maxWait||0,b),q="trailing"in c?c.trailing:q);return g.cancel=d,g}function Zd(a){return qb(a,1,arguments,1)}function $d(a,b){return qb(a,b,arguments,2)}function _d(){var a=arguments,b=a.length;if(!b)return function(){};if(!ab(a,se))throw new Nf(Q);return function(){for(var c=0,d=a[c].apply(this,arguments);++c<b;)d=a[c].call(this,d);return d}}function ae(){var a=arguments,b=a.length-1;if(0>b)return function(){};if(!ab(a,se))throw new Nf(Q);return function(){for(var c=b,d=a[c].apply(this,arguments);c--;)d=a[c].call(this,d);return d}}function be(a,b){if(!se(a)||b&&!se(b))throw new Nf(Q);var c=function(){var d=c.cache,e=b?b.apply(this,arguments):arguments[0];if(d.has(e))return d.get(e);var f=a.apply(this,arguments);return d.set(e,f),f};return c.cache=new be.Cache,c}function ce(a){if(!se(a))throw new Nf(Q);return function(){return!a.apply(this,arguments)}}function de(a){return Sd(a,2)}function ee(a){var b=Qb(arguments,1),c=s(b,ee.placeholder);return ic(a,F,null,b,c)}function fe(a){var b=Qb(arguments,1),c=s(b,fe.placeholder);return ic(a,G,null,b,c)}function ge(a){var b=xb(arguments,!1,!1,1);return ic(a,H,null,null,null,b)}function he(a,b,c){var d=!0,e=!0;if(!se(a))throw new Nf(Q);return c===!1?d=!1:te(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),Oa.leading=d,Oa.maxWait=+b,Oa.trailing=e,Yd(a,b,Oa)}function ie(a,b){return b=null==b?uf:b,ic(b,F,null,[a],[])}function je(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=vc(a,b,d)?null:b,b=!1),c="function"==typeof c&&Xb(c,d,1),pb(a,b,c)}function ke(a,b,c){return b="function"==typeof b&&Xb(b,c,1),pb(a,!0,b)}function le(a){var b=q(a)?a.length:y;return wc(b)&&Vf.call(a)==S||!1}function me(a){return a===!0||a===!1||q(a)&&Vf.call(a)==U||!1}function ne(a){return q(a)&&Vf.call(a)==V||!1}function oe(a){return a&&1===a.nodeType&&q(a)&&Vf.call(a).indexOf("Element")>-1||!1}function pe(a){if(null==a)return!0;var b=a.length;return wc(b)&&(Pg(a)||Ae(a)||le(a)||q(a)&&se(a.splice))?!b:!Tg(a).length}function qe(a,b,c,d){if(c="function"==typeof c&&Xb(c,d,3),!c&&xc(a)&&xc(b))return a===b;var e=c?c(a,b):y;return"undefined"==typeof e?Fb(a,b,c):!!e}function re(a){return q(a)&&"string"==typeof a.message&&Vf.call(a)==W||!1}function se(a){return"function"==typeof a||!1}function te(a){var b=typeof a;return"function"==b||a&&"object"==b||!1}function ue(a,b,c,d){var e=Tg(b),f=e.length;if(c="function"==typeof c&&Xb(c,d,3),!c&&1==f){var g=e[0],h=b[g];if(xc(h))return null!=a&&h===a[g]&&Tf.call(a,g)}for(var i=Ef(f),j=Ef(f);f--;)h=i[f]=b[e[f]],j[f]=xc(h);return Hb(a,e,i,j,c)}function ve(a){return ye(a)&&a!=+a}function we(a){return null==a?!1:Vf.call(a)==X?Xf.test(Rf.call(a)):q(a)&&Ba.test(a)||!1}function xe(a){return null===a}function ye(a){return"number"==typeof a||q(a)&&Vf.call(a)==Z||!1}function ze(a){return q(a)&&Vf.call(a)==_||!1}function Ae(a){return"string"==typeof a||q(a)&&Vf.call(a)==ba||!1}function Be(a){return q(a)&&wc(a.length)&&Ma[Vf.call(a)]||!1}function Ce(a){return"undefined"==typeof a}function De(a){var b=a?a.length:0;return wc(b)?b?Ya(a):[]:Xe(a)}function Ee(a){return mb(a,Qe(a))}function Fe(a,b,c){var d=Dg(a);return c&&vc(a,b,c)&&(b=null),b?mb(b,d,Tg(b)):d}function Ge(a){if(null==a)return a;var b=Ya(arguments);return b.push(ib),Sg.apply(y,b)}function He(a,b,c){return b=nc(b,c,3),wb(a,b,Bb,!0)}function Ie(a,b,c){return b=nc(b,c,3),wb(a,b,Cb,!0)}function Je(a,b,c){return("function"!=typeof b||"undefined"!=typeof c)&&(b=Xb(b,c,3)),yb(a,b,Qe)}function Ke(a,b,c){return b=Xb(b,c,3),zb(a,b,Qe)}function Le(a,b,c){return("function"!=typeof b||"undefined"!=typeof c)&&(b=Xb(b,c,3)),Bb(a,b)}function Me(a,b,c){return b=Xb(b,c,3),zb(a,b,Tg)}function Ne(a){return Db(a,Qe(a))}function Oe(a,b){return a?Tf.call(a,b):!1}function Pe(a,b,c){c&&vc(a,b,c)&&(b=null);for(var d=-1,e=Tg(a),f=e.length,g={};++d<f;){var h=e[d],i=a[h];b?Tf.call(g,i)?g[i].push(h):g[i]=[h]:g[i]=h}return g}function Qe(a){if(null==a)return[];te(a)||(a=Kf(a));var b=a.length;b=b&&wc(b)&&(Pg(a)||Cg.nonEnumArgs&&le(a))&&b||0;for(var c=a.constructor,d=-1,e="function"==typeof c&&c.prototype==a,f=Ef(b),g=b>0;++d<b;)f[d]=d+"";for(var h in a)g&&uc(h,b)||"constructor"==h&&(e||!Tf.call(a,h))||f.push(h);return f}function Re(a,b,c){var d={};return b=nc(b,c,3),Bb(a,function(a,c,e){d[c]=b(a,c,e)}),d}function Se(a,b,c){if(null==a)return{};if("function"!=typeof b){var d=cb(xb(arguments,!1,!1,1),Mf);return zc(a,rb(Qe(a),d))}return b=Xb(b,c,3),Ac(a,function(a,c,d){return!b(a,c,d)})}function Te(a){for(var b=-1,c=Tg(a),d=c.length,e=Ef(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Ue(a,b,c){return null==a?{}:"function"==typeof b?Ac(a,Xb(b,c,3)):zc(a,xb(arguments,!1,!1,1))}function Ve(a,b,c){var d=null==a?y:a[b];return"undefined"==typeof d&&(d=c),se(d)?d.call(a):d}function We(a,b,c,d){var e=Pg(a)||Be(a);if(b=nc(b,d,4),null==c)if(e||te(a)){var f=a.constructor;c=e?Pg(a)?new f:[]:Dg("function"==typeof f&&f.prototype)}else c={};return(e?$a:Bb)(a,function(a,d,e){return b(c,a,d,e)}),c}function Xe(a){return Tb(a,Tg(a))}function Ye(a){return Tb(a,Qe(a))}function Ze(a,b,c){c&&vc(a,b,c)&&(b=c=null);var d=null==a,e=null==b;if(null==c&&(e&&"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&&(c=b,e=!0)),d&&e&&(b=1,e=!1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=tg();return pg(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return Ob(a,b)}function $e(a){return a=g(a),a&&a.charAt(0).toUpperCase()+a.slice(1)}function _e(a){return a=g(a),a&&a.replace(Ca,m)}function af(a,b,c){a=g(a),b+="";var d=a.length;return c=("undefined"==typeof c?d:pg(0>c?0:+c||0,d))-b.length,c>=0&&a.indexOf(b,c)==c}function bf(a){return a=g(a),a&&ta.test(a)?a.replace(ra,n):a}function cf(a){return a=g(a),a&&Fa.test(a)?a.replace(Ea,"\\$&"):a}function df(a,b,c){a=g(a),b=+b;var d=a.length;if(d>=b||!mg(b))return a;var e=(b-d)/2,f=ag(e),h=$f(e);return c=gc("",h,c),c.slice(0,f)+a+c}function ef(a,b,c){return a=g(a),a&&gc(a,b,c)+a}function ff(a,b,c){return a=g(a),a&&a+gc(a,b,c)}function gf(a,b,c){return c&&vc(a,b,c)&&(b=0),sg(a,b)}function hf(a,b){var c="";if(a=g(a),b=+b,1>b||!a||!mg(b))return c;do b%2&&(c+=a),b=ag(b/2),a+=a;while(b);return c}function jf(a,b,c){return a=g(a),c=null==c?0:pg(0>c?0:+c||0,a.length),a.lastIndexOf(b,c)==c}function kf(a,c,d){var e=b.templateSettings;d&&vc(a,c,d)&&(c=d=null),a=g(a),c=kb(kb({},d||c),e,jb);var f,h,i=kb(kb({},c.imports),e.imports,jb),j=Tg(i),k=Tb(i,j),l=0,m=c.interpolate||Da,n="__p += '",p=Lf((c.escape||Da).source+"|"+m.source+"|"+(m===wa?xa:Da).source+"|"+(c.evaluate||Da).source+"|$","g"),q="//# sourceURL="+("sourceURL"in c?c.sourceURL:"lodash.templateSources["+ ++La+"]")+"\n";a.replace(p,function(b,c,d,e,g,i){return d||(d=e),n+=a.slice(l,i).replace(Ha,o),c&&(f=!0,n+="' +\n__e("+c+") +\n'"),g&&(h=!0,n+="';\n"+g+";\n__p += '"),d&&(n+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),l=i+b.length,b}),n+="';\n";var r=c.variable;r||(n="with (obj) {\n"+n+"\n}\n"),n=(h?n.replace(na,""):n).replace(oa,"$1").replace(pa,"$1;"),n="function("+(r||"obj")+") {\n"+(r?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(f?", __e = _.escape":"")+(h?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+n+"return __p\n}";var s=rf(function(){return Hf(j,q+"return "+n).apply(y,k)});if(s.source=n,re(s))throw s;return s}function lf(a,b,c){var d=a;return(a=g(a))?(c?vc(d,b,c):null==b)?a.slice(u(a),v(a)+1):(b=g(b),a.slice(i(a,b),j(a,b)+1)):a}function mf(a,b,c){var d=a;return a=g(a),a?a.slice((c?vc(d,b,c):null==b)?u(a):i(a,g(b))):a}function nf(a,b,c){var d=a;return a=g(a),a?(c?vc(d,b,c):null==b)?a.slice(0,v(a)+1):a.slice(0,j(a,g(b))+1):a}function of(a,b,c){c&&vc(a,b,c)&&(b=null);var d=J,e=K;if(null!=b)if(te(b)){var f="separator"in b?b.separator:f;d="length"in b?+b.length||0:d,e="omission"in b?g(b.omission):e}else d=+b||0;if(a=g(a),d>=a.length)return a;var h=d-e.length;if(1>h)return e;var i=a.slice(0,h);if(null==f)return i+e;if(ze(f)){if(a.slice(h).search(f)){var j,k,l=a.slice(0,h);for(f.global||(f=Lf(f.source,(ya.exec(f)||"")+"g")),f.lastIndex=0;j=f.exec(l);)k=j.index;i=i.slice(0,null==k?h:k)}}else if(a.indexOf(f,h)!=h){var m=i.lastIndexOf(f);m>-1&&(i=i.slice(0,m))}return i+e}function pf(a){return a=g(a),a&&sa.test(a)?a.replace(qa,w):a}function qf(a,b,c){return c&&vc(a,b,c)&&(b=null),a=g(a),a.match(b||Ia)||[]}function rf(a){try{return a()}catch(b){return re(b)?b:Gf(b)}}function sf(a,b,c){return c&&vc(a,b,c)&&(b=null),ob(a,b)}function tf(a){return function(){return a}}function uf(a){return a}function vf(a){return Jb(a,!0)}function wf(a,b,c){if(null==c){var d=te(b),e=d&&Tg(b),f=e&&e.length&&Db(b,e);(f?f.length:d)||(f=!1,c=b,b=a,a=this)}f||(f=Db(b,Tg(b)));var g=!0,h=-1,i=se(a),j=f.length;c===!1?g=!1:te(c)&&"chain"in c&&(g=c.chain);for(;++h<j;){var k=f[h],l=b[k];a[k]=l,i&&(a.prototype[k]=function(b){return function(){var c=this.__chain__;if(g||c){var d=a(this.__wrapped__);return(d.__actions__=Ya(this.__actions__)).push({func:b,args:arguments,thisArg:a}),d.__chain__=c,d}var e=[this.value()];return cg.apply(e,arguments),b.apply(a,e)}}(l))}return a}function xf(){return a._=Wf,this}function yf(){}function zf(a){return Mb(a+"")}function Af(a){return function(b){return null==a?y:a[b]}}function Bf(a,b,c){c&&vc(a,b,c)&&(b=c=null),a=+a||0,c=null==c?1:+c||0,null==b?(b=a,a=0):b=+b||0;for(var d=-1,e=og($f((b-a)/(c||1)),0),f=Ef(e);++d<e;)f[d]=a,a+=c;return f}function Cf(a,b,c){if(a=+a,1>a||!mg(a))return[];var d=-1,e=Ef(pg(a,wg));for(b=Xb(b,c,1);++d<a;)wg>d?e[d]=b(d):b(d);return e}function Df(a){var b=++Uf;return g(a)+b}a=a?Za.defaults(Ua.Object(),a,Za.pick(Ua,Ka)):Ua;var Ef=a.Array,Ff=a.Date,Gf=a.Error,Hf=a.Function,If=a.Math,Jf=a.Number,Kf=a.Object,Lf=a.RegExp,Mf=a.String,Nf=a.TypeError,Of=Ef.prototype,Pf=Kf.prototype,Qf=(Qf=a.window)&&Qf.document,Rf=Hf.prototype.toString,Sf=Mb("length"),Tf=Pf.hasOwnProperty,Uf=0,Vf=Pf.toString,Wf=a._,Xf=Lf("^"+cf(Vf).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yf=we(Yf=a.ArrayBuffer)&&Yf,Zf=we(Zf=Yf&&new Yf(0).slice)&&Zf,$f=If.ceil,_f=a.clearTimeout,ag=If.floor,bg=we(bg=Kf.getPrototypeOf)&&bg,cg=Of.push,dg=Pf.propertyIsEnumerable,eg=we(eg=a.Set)&&eg,fg=a.setTimeout,gg=Of.splice,hg=we(hg=a.Uint8Array)&&hg,ig=(Of.unshift,we(ig=a.WeakMap)&&ig),jg=function(){try{var b=we(b=a.Float64Array)&&b,c=new b(new Yf(10),0,1)&&b}catch(d){}return c}(),kg=we(kg=Ef.isArray)&&kg,lg=we(lg=Kf.create)&&lg,mg=a.isFinite,ng=we(ng=Kf.keys)&&ng,og=If.max,pg=If.min,qg=we(qg=Ff.now)&&qg,rg=we(rg=Jf.isFinite)&&rg,sg=a.parseInt,tg=If.random,ug=Jf.NEGATIVE_INFINITY,vg=Jf.POSITIVE_INFINITY,wg=If.pow(2,32)-1,xg=wg-1,yg=wg>>>1,zg=jg?jg.BYTES_PER_ELEMENT:0,Ag=If.pow(2,53)-1,Bg=ig&&new ig,Cg=b.support={};!function(b){Cg.funcDecomp=!we(a.WinRTError)&&Ga.test(x),Cg.funcNames="string"==typeof Hf.name;try{Cg.dom=11===Qf.createDocumentFragment().nodeType}catch(c){Cg.dom=!1}try{Cg.nonEnumArgs=!dg.call(arguments,1)}catch(c){Cg.nonEnumArgs=!0}}(0,0),b.templateSettings={escape:ua,evaluate:va,interpolate:wa,variable:"",imports:{_:b}};var Dg=function(){function b(){}return function(c){if(te(c)){b.prototype=c;var d=new b;b.prototype=null}return d||a.Object()}}(),Eg=Bg?function(a,b){return Bg.set(a,b),a}:uf;Zf||(Yb=Yf&&hg?function(a){var b=a.byteLength,c=jg?ag(b/zg):0,d=c*zg,e=new Yf(b);if(c){var f=new jg(e,0,c);f.set(new jg(a,0,c))}return b!=d&&(f=new hg(e,d),f.set(new hg(a,d))),e}:tf(null));var Fg=lg&&eg?function(a){return new Va(a)}:tf(null),Gg=Bg?function(a){return Bg.get(a)}:yf,Hg=function(){var a=0,b=0;return function(c,d){var e=Og(),f=M-(e-b);if(b=e,f>0){if(++a>=L)return c}else a=0;return Eg(c,d)}}(),Ig=_b(function(a,b,c){Tf.call(a,c)?++a[c]:a[c]=1}),Jg=_b(function(a,b,c){Tf.call(a,c)?a[c].push(b):a[c]=[b]}),Kg=_b(function(a,b,c){a[c]=b}),Lg=ec(db),Mg=ec(eb,!0),Ng=_b(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),Og=qg||function(){return(new Ff).getTime()},Pg=kg||function(a){return q(a)&&wc(a.length)&&Vf.call(a)==T||!1};Cg.dom||(oe=function(a){return a&&1===a.nodeType&&q(a)&&!Rg(a)||!1});var Qg=rg||function(a){return"number"==typeof a&&mg(a)};(se(/x/)||hg&&!se(hg))&&(se=function(a){return Vf.call(a)==X});var Rg=bg?function(a){if(!a||Vf.call(a)!=$)return!1;var b=a.valueOf,c=we(b)&&(c=bg(b))&&bg(c);return c?a==c||bg(a)==c:Cc(a)}:Cc,Sg=ac(kb),Tg=ng?function(a){if(a)var b=a.constructor,c=a.length;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&c&&wc(c)?Dc(a):te(a)?ng(a):[]}:Dc,Ug=ac(Kb),Vg=cc(function(a,b,c){return b=b.toLowerCase(),c?a+b.charAt(0).toUpperCase()+b.slice(1):b}),Wg=cc(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()});8!=sg(Ja+"08")&&(gf=function(a,b,c){return(c?vc(a,b,c):null==b)?b=0:b&&(b=+b),a=lf(a),sg(a,b||(Aa.test(a)?16:10))});var Xg=cc(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()});return c.prototype=b.prototype,Pa.prototype["delete"]=Qa,Pa.prototype.get=Ra,Pa.prototype.has=Sa,Pa.prototype.set=Ta,Va.prototype.push=Xa,be.Cache=Pa,b.after=Qd,b.ary=Rd,b.assign=Sg,b.at=ud,b.before=Sd,b.bind=Td,b.bindAll=Ud,b.bindKey=Vd,b.callback=sf,b.chain=nd,b.chunk=Gc,b.compact=Hc,b.constant=tf,b.countBy=Ig,b.create=Fe,b.curry=Wd,b.curryRight=Xd,b.debounce=Yd,b.defaults=Ge,b.defer=Zd,b.delay=$d,b.difference=Ic,b.drop=Jc,b.dropRight=Kc,b.dropRightWhile=Lc,b.dropWhile=Mc,b.filter=xd,b.flatten=Qc,b.flattenDeep=Rc,b.flow=_d,b.flowRight=ae,b.forEach=Bd,b.forEachRight=Cd,b.forIn=Je,b.forInRight=Ke,b.forOwn=Le,b.forOwnRight=Me,b.functions=Ne,b.groupBy=Jg,b.indexBy=Kg,b.initial=Tc,b.intersection=Uc,b.invert=Pe,b.invoke=Dd,b.keys=Tg,b.keysIn=Qe,b.map=Ed,b.mapValues=Re,b.matches=vf,b.memoize=be,b.merge=Ug,b.mixin=wf,b.negate=ce,b.omit=Se,b.once=de,b.pairs=Te,b.partial=ee,b.partialRight=fe,b.partition=Ng,b.pick=Ue,b.pluck=Fd,b.property=zf,b.propertyOf=Af,b.pull=Xc,b.pullAt=Yc,b.range=Bf,b.rearg=ge,b.reject=Id,b.remove=Zc,b.rest=$c,b.shuffle=Kd,b.slice=_c,b.sortBy=Nd,b.sortByAll=Od,b.take=cd,b.takeRight=dd,b.takeRightWhile=ed,b.takeWhile=fd,b.tap=od,b.throttle=he,b.thru=pd,b.times=Cf,b.toArray=De,b.toPlainObject=Ee,b.transform=We,b.union=gd,b.uniq=hd,b.unzip=id,b.values=Xe,b.valuesIn=Ye,b.where=Pd,b.without=jd,b.wrap=ie,b.xor=kd,b.zip=ld,b.zipObject=md,b.backflow=ae,b.collect=Ed,b.compose=ae,b.each=Bd,b.eachRight=Cd,b.extend=Sg,b.iteratee=sf,b.methods=Ne,b.object=md,b.select=xd,b.tail=$c,b.unique=hd,wf(b,b),b.attempt=rf,b.camelCase=Vg,b.capitalize=$e,b.clone=je,b.cloneDeep=ke,b.deburr=_e,b.endsWith=af,b.escape=bf,b.escapeRegExp=cf,b.every=wd,b.find=yd,b.findIndex=Nc,b.findKey=He,b.findLast=zd,b.findLastIndex=Oc,b.findLastKey=Ie,b.findWhere=Ad,b.first=Pc,b.has=Oe,b.identity=uf,b.includes=vd,b.indexOf=Sc,b.isArguments=le,b.isArray=Pg,b.isBoolean=me,b.isDate=ne,b.isElement=oe,b.isEmpty=pe,b.isEqual=qe,b.isError=re,b.isFinite=Qg,b.isFunction=se,b.isMatch=ue,b.isNaN=ve,b.isNative=we,b.isNull=xe,b.isNumber=ye,b.isObject=te,b.isPlainObject=Rg,b.isRegExp=ze,b.isString=Ae,b.isTypedArray=Be,b.isUndefined=Ce,b.kebabCase=Wg,b.last=Vc,b.lastIndexOf=Wc,b.max=Lg,b.min=Mg,b.noConflict=xf,b.noop=yf,b.now=Og,b.pad=df,b.padLeft=ef,b.padRight=ff,b.parseInt=gf,b.random=Ze,b.reduce=Gd,b.reduceRight=Hd,b.repeat=hf,b.result=Ve,b.runInContext=x,b.size=Ld,b.snakeCase=Xg,b.some=Md,b.sortedIndex=ad,b.sortedLastIndex=bd,b.startsWith=jf,b.template=kf,b.trim=lf,b.trimLeft=mf,b.trimRight=nf,b.trunc=of,b.unescape=pf,b.uniqueId=Df,b.words=qf,b.all=wd,b.any=Md,b.contains=vd,b.detect=yd,b.foldl=Gd,b.foldr=Hd,b.head=Pc,b.include=vd,b.inject=Gd,wf(b,function(){var a={};return Bb(b,function(c,d){b.prototype[d]||(a[d]=c)}),a}(),!1),b.sample=Jd,b.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return Jd(b,a)}):Jd(this.value())},b.VERSION=z,$a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){b[a].placeholder=b}),$a(["filter","map","takeWhile"],function(a,b){var c=b==N;r.prototype[a]=function(a,d){var e=this.clone(),f=e.filtered,g=e.iteratees||(e.iteratees=[]);return e.filtered=f||c||b==P&&e.dir<0,g.push({iteratee:nc(a,d,3),type:b}),e}}),$a(["drop","take"],function(a,b){var c=a+"Count",d=a+"While";r.prototype[a]=function(d){d=null==d?1:og(+d||0,0);var e=this.clone();if(e.filtered){var f=e[c];e[c]=b?pg(f,d):f+d}else{var g=e.views||(e.views=[]);g.push({size:d,type:a+(e.dir<0?"Right":"")})}return e},r.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()},r.prototype[a+"RightWhile"]=function(a,b){return this.reverse()[d](a,b).reverse()}}),$a(["first","last"],function(a,b){var c="take"+(b?"Right":"");r.prototype[a]=function(){return this[c](1).value()[0]}}),$a(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");r.prototype[a]=function(){return this[c](1)}}),$a(["pluck","where"],function(a,b){var c=b?"filter":"map",d=b?vf:zf;r.prototype[a]=function(a){return this[c](d(a))}}),r.prototype.dropWhile=function(a,b){var c,d,e=this.dir<0;return a=nc(a,b,3),this.filter(function(b,f,g){return c=c&&(e?d>f:f>d),d=f,c||(c=!a(b,f,g))})},r.prototype.reject=function(a,b){return a=nc(a,b,3),this.filter(function(b,c,d){return!a(b,c,d)})},r.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=0>a?this.takeRight(-a):this.drop(a);return"undefined"!=typeof b&&(b=+b||0,c=0>b?c.dropRight(-b):c.take(b-a)),c},Bb(r.prototype,function(a,d){var e=/^(?:first|last)$/.test(d);b.prototype[d]=function(){var f=this.__wrapped__,g=arguments,h=this.__chain__,i=!!this.__actions__.length,j=f instanceof r,k=j&&!i;
if(e&&!h)return k?a.call(f):b[d](this.value());var l=function(a){var c=[a];return cg.apply(c,g),b[d].apply(b,c)};if(j||Pg(f)){var m=k?f:new r(this),n=a.apply(m,g);if(!e&&(i||n.actions)){var o=n.actions||(n.actions=[]);o.push({func:pd,args:[l],thisArg:b})}return new c(n,h)}return this.thru(l)}}),$a(["concat","join","pop","push","shift","sort","splice","unshift"],function(a){var c=Of[a],d=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",e=/^(?:join|pop|shift)$/.test(a);b.prototype[a]=function(){var a=arguments;return e&&!this.__chain__?c.apply(this.value(),a):this[d](function(b){return c.apply(b,a)})}}),r.prototype.clone=Y,r.prototype.reverse=aa,r.prototype.value=ca,b.prototype.chain=qd,b.prototype.reverse=rd,b.prototype.toString=sd,b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=td,b.prototype.collect=b.prototype.map,b.prototype.head=b.prototype.first,b.prototype.select=b.prototype.filter,b.prototype.tail=b.prototype.rest,b}var y,z="3.0.0",A=1,B=2,C=4,D=8,E=16,F=32,G=64,H=128,I=256,J=30,K="...",L=150,M=16,N=0,O=1,P=2,Q="Expected a function",R="__lodash_placeholder__",S="[object Arguments]",T="[object Array]",U="[object Boolean]",V="[object Date]",W="[object Error]",X="[object Function]",Y="[object Map]",Z="[object Number]",$="[object Object]",_="[object RegExp]",aa="[object Set]",ba="[object String]",ca="[object WeakMap]",da="[object ArrayBuffer]",ea="[object Float32Array]",fa="[object Float64Array]",ga="[object Int8Array]",ha="[object Int16Array]",ia="[object Int32Array]",ja="[object Uint8Array]",ka="[object Uint8ClampedArray]",la="[object Uint16Array]",ma="[object Uint32Array]",na=/\b__p \+= '';/g,oa=/\b(__p \+=) '' \+/g,pa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qa=/&(?:amp|lt|gt|quot|#39|#96);/g,ra=/[&<>"'`]/g,sa=RegExp(qa.source),ta=RegExp(ra.source),ua=/<%-([\s\S]+?)%>/g,va=/<%([\s\S]+?)%>/g,wa=/<%=([\s\S]+?)%>/g,xa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ya=/\w*$/,za=/^\s*function[ \n\r\t]+\w/,Aa=/^0[xX]/,Ba=/^\[object .+?Constructor\]$/,Ca=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Da=/($^)/,Ea=/[.*+?^${}()|[\]\/\\]/g,Fa=RegExp(Ea.source),Ga=/\bthis\b/,Ha=/['\n\r\u2028\u2029\\]/g,Ia=function(){var a="[A-Z\\xc0-\\xd6\\xd8-\\xde]",b="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(a+"{2,}(?="+a+b+")|"+a+"?"+b+"|"+a+"+|[0-9]+","g")}(),Ja=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",Ka=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],La=-1,Ma={};Ma[ea]=Ma[fa]=Ma[ga]=Ma[ha]=Ma[ia]=Ma[ja]=Ma[ka]=Ma[la]=Ma[ma]=!0,Ma[S]=Ma[T]=Ma[da]=Ma[U]=Ma[V]=Ma[W]=Ma[X]=Ma[Y]=Ma[Z]=Ma[$]=Ma[_]=Ma[aa]=Ma[ba]=Ma[ca]=!1;var Na={};Na[S]=Na[T]=Na[da]=Na[U]=Na[V]=Na[ea]=Na[fa]=Na[ga]=Na[ha]=Na[ia]=Na[Z]=Na[$]=Na[_]=Na[ba]=Na[ja]=Na[ka]=Na[la]=Na[ma]=!0,Na[W]=Na[X]=Na[Y]=Na[aa]=Na[ca]=!1;var Oa={leading:!1,maxWait:0,trailing:!1},Pa={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Qa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ra={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Sa={"function":!0,object:!0},Ta={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ua=Sa[typeof window]&&window!==(this&&this.window)?window:this,Va=Sa[typeof c]&&c&&!c.nodeType&&c,Wa=Sa[typeof b]&&b&&!b.nodeType&&b,Xa=Va&&Wa&&"object"==typeof a&&a;!Xa||Xa.global!==Xa&&Xa.window!==Xa&&Xa.self!==Xa||(Ua=Xa);var Ya=Wa&&Wa.exports===Va&&Va,Za=x();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ua._=Za,define(function(){return Za})):Va&&Wa?Ya?(Wa.exports=Za)._=Za:Va._=Za:Ua._=Za}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(a,b,c){!function(a,d){"undefined"!=typeof c&&"undefined"!=typeof b?b.exports=d():"function"==typeof define&&"object"==typeof define.amd?define(d):this[a]=d()}("validator",function(a){"use strict";function b(a,b){a=a||{};for(var c in b)"undefined"==typeof a[c]&&(a[c]=b[c]);return a}a={version:"3.28.0"};var c=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,d=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,e=/^(?:[0-9]{9}X|[0-9]{10})$/,f=/^(?:[0-9]{13})$/,g=/^(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)$/,h=/^::|^::1|^([a-fA-F0-9]{1,4}::?){1,7}([a-fA-F0-9]{1,4})$/,i={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},j=/^[a-zA-Z]+$/,k=/^[a-zA-Z0-9]+$/,l=/^[-+]?[0-9]+$/,m=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,n=/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,o=/^[0-9a-fA-F]+$/,p=/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,q=/^[\x00-\x7F]+$/,r=/[^\x00-\x7F]/,s=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,t=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/,v=/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=|[A-Za-z0-9+\/]{4})$/,w={"zh-CN":/^(\+?0?86\-?)?1[345789][0-9]{9}$/,"en-ZA":/^(\+?27|0)(\d{9})$/,"en-AU":/^(\+?61|0)4(\d{8})/,"fr-FR":/^(\+?33|0)(6|7)\d{8}$/};a.extend=function(b,c){a[b]=function(){var b=Array.prototype.slice.call(arguments);return b[0]=a.toString(b[0]),c.apply(a,b)}},a.init=function(){for(var b in a)"function"==typeof a[b]&&"toString"!==b&&"toDate"!==b&&"extend"!==b&&"init"!==b&&a.extend(b,a[b])},a.toString=function(a){return"object"==typeof a&&null!==a&&a.toString?a=a.toString():null===a||"undefined"==typeof a||isNaN(a)&&!a.length?a="":"string"!=typeof a&&(a+=""),a},a.toDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)?a:(a=Date.parse(a),isNaN(a)?null:new Date(a))},a.toFloat=function(a){return parseFloat(a)},a.toInt=function(a,b){return parseInt(a,b||10)},a.toBoolean=function(a,b){return b?"1"===a||"true"===a:"0"!==a&&"false"!==a&&""!==a},a.equals=function(b,c){return b===a.toString(c)},a.contains=function(b,c){return b.indexOf(a.toString(c))>=0},a.matches=function(a,b,c){return"[object RegExp]"!==Object.prototype.toString.call(b)&&(b=new RegExp(b,c)),b.test(a)},a.isEmail=function(a){return c.test(a)};var x={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,allow_underscores:!1,allow_trailing_dot:!1};a.isURL=function(c,d){if(!c||c.length>=2083)return!1;if(0===c.indexOf("mailto:"))return!1;d=b(d,x);var e,f,g,h,i,j,k,l,m,n,o,p;if(p=c.split("://"),p.length>1){if(e=p.shift(),-1===d.protocols.indexOf(e))return!1}else if(d.require_protocol)return!1;if(c=p.join("://"),p=c.split("#"),c=p.shift(),o=p.join("#"),o&&/\s/.test(o))return!1;if(p=c.split("?"),c=p.shift(),n=p.join("?"),n&&/\s/.test(n))return!1;if(p=c.split("/"),c=p.shift(),m=p.join("/"),m&&/\s/.test(m))return!1;if(p=c.split("@"),p.length>1&&(h=p.shift(),h.indexOf(":")>=0)){if(h=h.split(":"),f=h.shift(),!/^\S+$/.test(f))return!1;if(g=h.join(":"),!/^\S*$/.test(f))return!1}return j=p.join("@"),p=j.split(":"),i=p.shift(),p.length&&(l=p.join(":"),k=parseInt(l,10),!/^[0-9]+$/.test(l)||0>=k||k>65535)?!1:a.isIP(i)||a.isFQDN(i,d)||"localhost"===i?d.host_whitelist&&-1===d.host_whitelist.indexOf(i)?!1:d.host_blacklist&&-1!==d.host_blacklist.indexOf(i)?!1:!0:!1},a.isIP=function(b,c){if(c=a.toString(c),!c)return a.isIP(b,4)||a.isIP(b,6);if("4"===c){if(!g.test(b))return!1;var d=b.split(".").sort(function(a,b){return a-b});return d[3]<=255}return"6"===c&&h.test(b)};var y={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};a.isFQDN=function(a,c){c=b(c,y),c.allow_trailing_dot&&"."===a[a.length-1]&&(a=a.substring(0,a.length-1));var d=a.split(".");if(c.require_tld){var e=d.pop();if(!d.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(e))return!1}for(var f,g=0;g<d.length;g++){if(f=d[g],c.allow_underscores){if(f.indexOf("__")>=0)return!1;f=f.replace(/_/g,"")}if(!/^[a-z\u00a1-\uffff0-9-]+$/i.test(f))return!1;if("-"===f[0]||"-"===f[f.length-1]||f.indexOf("---")>=0)return!1}return!0},a.isAlpha=function(a){return j.test(a)},a.isAlphanumeric=function(a){return k.test(a)},a.isNumeric=function(a){return l.test(a)},a.isHexadecimal=function(a){return o.test(a)},a.isHexColor=function(a){return p.test(a)},a.isLowercase=function(a){return a===a.toLowerCase()},a.isUppercase=function(a){return a===a.toUpperCase()},a.isInt=function(a){return m.test(a)},a.isFloat=function(a){return""!==a&&n.test(a)},a.isDivisibleBy=function(b,c){return a.toFloat(b)%a.toInt(c)===0},a.isNull=function(a){return 0===a.length},a.isLength=function(a,b,c){var d=a.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],e=a.length-d.length;return e>=b&&("undefined"==typeof c||c>=e)},a.isByteLength=function(a,b,c){return a.length>=b&&("undefined"==typeof c||a.length<=c)},a.isUUID=function(a,b){var c=i[b?b:"all"];return c&&c.test(a)},a.isDate=function(a){return!isNaN(Date.parse(a))},a.isAfter=function(b,c){var d=a.toDate(c||new Date),e=a.toDate(b);return!!(e&&d&&e>d)},a.isBefore=function(b,c){var d=a.toDate(c||new Date),e=a.toDate(b);return e&&d&&d>e},a.isIn=function(b,c){var d;if("[object Array]"===Object.prototype.toString.call(c)){var e=[];for(d in c)e[d]=a.toString(c[d]);return e.indexOf(b)>=0}return"object"==typeof c?c.hasOwnProperty(b):c&&"function"==typeof c.indexOf?c.indexOf(b)>=0:!1},a.isCreditCard=function(a){var b=a.replace(/[^0-9]+/g,"");if(!d.test(b))return!1;for(var c,e,f,g=0,h=b.length-1;h>=0;h--)c=b.substring(h,h+1),e=parseInt(c,10),f?(e*=2,g+=e>=10?e%10+1:e):g+=e,f=!f;return!!(g%10===0?b:!1)},a.isISBN=function(b,c){if(c=a.toString(c),!c)return a.isISBN(b,10)||a.isISBN(b,13);var d,g=b.replace(/[\s-]+/g,""),h=0;if("10"===c){if(!e.test(g))return!1;for(d=0;9>d;d++)h+=(d+1)*g.charAt(d);if(h+="X"===g.charAt(9)?100:10*g.charAt(9),h%11===0)return!!g}else if("13"===c){if(!f.test(g))return!1;var i=[1,3];for(d=0;12>d;d++)h+=i[d%2]*g.charAt(d);if(g.charAt(12)-(10-h%10)%10===0)return!!g}return!1},a.isMobilePhone=function(a,b){return b in w?w[b].test(a):!1},a.isJSON=function(a){try{JSON.parse(a)}catch(b){return!1}return!0},a.isMultibyte=function(a){return r.test(a)},a.isAscii=function(a){return q.test(a)},a.isFullWidth=function(a){return s.test(a)},a.isHalfWidth=function(a){return t.test(a)},a.isVariableWidth=function(a){return s.test(a)&&t.test(a)},a.isSurrogatePair=function(a){return u.test(a)},a.isBase64=function(a){return v.test(a)},a.isMongoId=function(b){return a.isHexadecimal(b)&&24===b.length},a.ltrim=function(a,b){var c=b?new RegExp("^["+b+"]+","g"):/^\s+/g;return a.replace(c,"")},a.rtrim=function(a,b){var c=b?new RegExp("["+b+"]+$","g"):/\s+$/g;return a.replace(c,"")},a.trim=function(a,b){var c=b?new RegExp("^["+b+"]+|["+b+"]+$","g"):/^\s+|\s+$/g;return a.replace(c,"")},a.escape=function(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;")},a.stripLow=function(b,c){var d=c?"\x00-	\f-":"\x00-";return a.blacklist(b,d)},a.whitelist=function(a,b){return a.replace(new RegExp("[^"+b+"]+","g"),"")},a.blacklist=function(a,b){return a.replace(new RegExp("["+b+"]+","g"),"")};var z={lowercase:!0};return a.normalizeEmail=function(c,d){if(d=b(d,z),!a.isEmail(c))return!1;var e=c.split("@",2);if(e[1]=e[1].toLowerCase(),"gmail.com"===e[1]||"googlemail.com"===e[1]){if(e[0]=e[0].toLowerCase().replace(/\./g,""),"+"===e[0][0])return!1;e[0]=e[0].split("+")[0],e[1]="gmail.com"}else d.lowercase&&(e[0]=e[0].toLowerCase());return e.join("@")},a.init(),a})},{}]},{},[5]);